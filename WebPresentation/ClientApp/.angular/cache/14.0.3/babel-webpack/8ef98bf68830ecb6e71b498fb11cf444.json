{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../AggregateGraphic.js\";\nimport \"../../../geometry.js\";\nimport r from \"../../../Graphic.js\";\nimport i from \"../../../core/Collection.js\";\nimport s from \"../../../core/Error.js\";\nimport has from \"../../../core/has.js\";\nimport { clone as a } from \"../../../core/lang.js\";\nimport n from \"../../../core/Logger.js\";\nimport { applySome as o, isSome as l, destroyMaybe as u, unwrap as h, removeMaybe as d, isNone as c } from \"../../../core/maybe.js\";\nimport { debounce as p, isAbortError as y } from \"../../../core/promiseUtils.js\";\nimport { watch as g, whenOnce as f, syncAndInitial as m, initial as _ } from \"../../../core/reactiveUtils.js\";\nimport { property as v } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as b } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport R from \"../../../layers/effects/FeatureEffectView.js\";\nimport S from \"../../../layers/support/FeatureFilter.js\";\nimport { getEffectiveLayerCapabilities as x } from \"../../../layers/support/layerUtils.js\";\nimport w from \"../../../rest/support/AggregateFeatureSet.js\";\nimport U from \"../../../rest/support/FeatureSet.js\";\nimport F from \"../../../rest/support/Query.js\";\nimport { MAX_FILTERS as C } from \"../engine/webgl/definitions.js\";\nimport { LayerView2DMixin as q } from \"./LayerView2D.js\";\nimport { createSchema as I } from \"./features/schemaUtils.js\";\nimport { createOrReuseTileRenderer as O } from \"./features/tileRenderers.js\";\nimport { isRendererSupported as E } from \"./features/support/rendererUtils.js\";\nimport { findSizeVV as T, createClusterCountSizeVariable as V, injectDynamicLevelDependentSizeVisualVariable as j, isClusterCompatibleRenderer as A, createClusterRenderer as N } from \"./support/clusterUtils.js\";\nimport Q from \"./support/FeatureCommandQueue.js\";\nimport H from \"./support/FeatureLayerProxy.js\";\nimport { toJSONGeometryType as L } from \"./support/util.js\";\nimport { TileManager as k } from \"../tiling/TileManager.js\";\nimport P from \"../../layers/FeatureLayerView.js\";\nimport J from \"../../layers/LayerView.js\";\nimport z from \"../../layers/RefreshableLayerView.js\";\nimport { getWebGLCapabilities as M } from \"../../webgl/capabilities.js\";\nimport B from \"../../../geometry/Extent.js\";\n\nfunction $(e) {\n  return e && \"openPorts\" in e;\n}\n\nlet G = class extends P(z(q(J))) {\n  constructor() {\n    var _this;\n\n    (super(...arguments), _this = this), this._pipelineIsUpdating = !0, this._commandsQueue = new Q({\n      process: e => {\n        switch (e.type) {\n          case \"processed-edit\":\n            return this._doEdit(e);\n\n          case \"refresh\":\n            return this._doRefresh(e.dataChanged);\n\n          case \"update\":\n            return this._doUpdate();\n        }\n      }\n    }), this._visibilityOverrides = new Set(), this._highlightIds = new Map(), this._updateHighlight = p( /*#__PURE__*/_asyncToGenerator(function* () {\n      return _this._proxy.setHighlight(Array.from(_this._highlightIds.keys()));\n    })), this._uploadsLocked = !1, this._needsClusterSizeUpdate = !1, this.featureEffectView = new R(), this._lastDefinitionExpression = null;\n  }\n\n  destroy() {\n    o(this._updateClusterSizeTask, e => e.remove()), this._proxy?.destroy(), this._commandsQueue.destroy();\n  }\n\n  initialize() {\n    this.addResolvingPromise(Promise.all([this._initProxy(), this._initServiceOptions()])), this.addHandles([this.on(\"valueRangesChanged\", e => {\n      this._set(\"_aggregateValueRanges\", e.valueRanges);\n    }), g(() => this.featureEffect, e => {\n      this.featureEffectView.featureEffect = e;\n    }, m)], \"constructor\"), this.featureEffectView.endTransitions();\n  }\n\n  _initProxy() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const e = _this2.layer;\n      if (\"isTable\" in e && e.isTable) throw new s(\"featurelayerview:table-not-supported\", \"table feature layer can't be displayed\", {\n        layer: _this2.layer\n      });\n      if ((\"feature\" === e.type || \"subtype-group\" === e.type) && !x(e)?.operations.supportsQuery) throw new s(\"featurelayerview:query-not-supported\", \"layer view requires a layer with query capability\", {\n        layer: e\n      });\n      _this2._proxy && _this2._proxy.destroy();\n\n      const t = _this2._createClientOptions();\n\n      return _this2._set(\"_proxy\", new H({\n        client: t\n      })), _this2._proxy.when();\n    })();\n  }\n\n  _initServiceOptions() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this3._set(\"_serviceOptions\", yield _this3._createServiceOptions()), _this3._serviceOptions;\n    })();\n  }\n\n  get _effectiveFeatureReduction() {\n    if (!(\"featureReduction\" in this.layer)) return null;\n    const e = this.layer.featureReduction;\n    return e && (!(\"maxScale\" in e) || !e.maxScale || e.maxScale < this.view.scale) ? e : null;\n  }\n\n  get orderByFields() {\n    return \"stream\" !== this._serviceOptions?.type ? this._serviceOptions?.orderByFields : void 0;\n  }\n\n  get labelsVisible() {\n    const e = \"subtype-group\" === this.layer.type ? this.layer.sublayers.items : [this.layer];\n    return !this.suspended && e.some(e => e.labelingInfo && e.labelsVisible);\n  }\n\n  get queryMode() {\n    return this._serviceOptions?.type;\n  }\n\n  get renderingConfigHash() {\n    if (!this.layer) return null;\n    const e = this.availableFields,\n          t = this.layer,\n          r = this.view.floors,\n          {\n      definitionExpression: i\n    } = t,\n          s = \"subtype-group\" !== this.layer.type && this.layer.labelsVisible && this.layer.labelingInfo,\n          a = \"renderer\" in t && t.renderer,\n          n = \"gdbVersion\" in t ? t.gdbVersion : void 0,\n          o = \"historicMoment\" in t ? t.historicMoment?.getTime() : void 0,\n          {\n      timeExtent: u\n    } = this,\n          h = \"customParameters\" in t ? JSON.stringify(t.customParameters) : void 0,\n          d = \"apiKey\" in t ? t.apiKey : void 0,\n          c = \"stream\" === t.type ? `${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}` : null,\n          p = JSON.stringify(this.clips),\n          y = this._effectiveFeatureReduction?.toJSON(),\n          g = \"orderBy\" in this.layer && JSON.stringify(this.layer.orderBy),\n          f = \"sublayers\" in this.layer && this.layer.sublayers.items.reduce((e, t) => e + `${t.visible ? 1 : 0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`, \"\"),\n          m = \"subtypeCode\" in this.layer && this.layer.subtypeCode;\n    return JSON.stringify({\n      orderBy: g,\n      sublayerHash: f,\n      subtypeCode: m,\n      filterHash: l(this.filter) && this.filter.toJSON(),\n      effectHash: l(this.featureEffect) && this.featureEffect.toJSON(),\n      streamFilter: c,\n      gdbVersion: n,\n      definitionExpression: i,\n      historicMoment: o,\n      availableFields: e,\n      renderer: a,\n      labelingInfo: s,\n      timeExtent: u,\n      floors: r,\n      clipsHash: p,\n      featureReduction: y,\n      customParameters: h,\n      apiKey: d\n    });\n  }\n\n  highlight(e) {\n    let t;\n    e instanceof r ? t = [e.getObjectId()] : \"number\" == typeof e || \"string\" == typeof e ? t = [e] : i.isCollection(e) && e.length > 0 ? t = e.map(e => e?.getObjectId()).toArray() : Array.isArray(e) && e.length > 0 && (t = \"number\" == typeof e[0] || \"string\" == typeof e[0] ? e : e.map(e => e?.getObjectId()));\n    const s = t?.filter(l);\n    return s && s.length ? (this._addHighlight(s), {\n      remove: () => this._removeHighlight(s)\n    }) : {\n      remove: () => {}\n    };\n  }\n\n  hasHighlight() {\n    return !!this._highlightIds.size;\n  }\n\n  hitTest(e, i) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this4.tileRenderer) return null;\n      const s = yield _this4.tileRenderer.hitTest(i);\n      if (0 === s.length) return null;\n      const {\n        features: a,\n        aggregates: n\n      } = yield _this4._proxy.getFeatures(s);\n      return [...n.map(r => _this4._createGraphicHit(e, t.fromJSON(r))), ...a.map(t => _this4._createGraphicHit(e, r.fromJSON(t)))];\n    })();\n  }\n\n  queryStatistics() {\n    return this._proxy.queryStatistics();\n  }\n\n  querySummaryStatistics(e, t, r) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this5.view.scale\n      };\n      return _this5._proxy.querySummaryStatistics(_this5._cleanUpQuery(e), i, r);\n    })();\n  }\n\n  queryAggregateSummaryStatistics(e, t, r) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this6.view.scale\n      };\n      return _this6._proxy.queryAggregateSummaryStatistics(_this6._cleanUpAggregateQuery(e), i, r);\n    })();\n  }\n\n  queryUniqueValues(e, t, r) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this7.view.scale\n      };\n      return _this7._proxy.queryUniqueValues(_this7._cleanUpQuery(e), i, r);\n    })();\n  }\n\n  queryAggregateUniqueValues(e, t, r) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this8.view.scale\n      };\n      return _this8._proxy.queryAggregateUniqueValues(_this8._cleanUpAggregateQuery(e), i, r);\n    })();\n  }\n\n  queryClassBreaks(e, t, r) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this9.view.scale\n      };\n      return _this9._proxy.queryClassBreaks(_this9._cleanUpQuery(e), i, r);\n    })();\n  }\n\n  queryAggregateClassBreaks(e, t, r) {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this10.view.scale\n      };\n      return _this10._proxy.queryAggregateClassBreaks(_this10._cleanUpAggregateQuery(e), i, r);\n    })();\n  }\n\n  queryHistogram(e, t, r) {\n    var _this11 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this11.view.scale\n      };\n      return _this11._proxy.queryHistogram(_this11._cleanUpQuery(e), i, r);\n    })();\n  }\n\n  queryAggregateHistogram(e, t, r) {\n    var _this12 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = { ...t,\n        scale: _this12.view.scale\n      };\n      return _this12._proxy.queryAggregateHistogram(_this12._cleanUpAggregateQuery(e), i, r);\n    })();\n  }\n\n  queryFeatures(e, t) {\n    return this.queryFeaturesJSON(e, t).then(e => {\n      const t = U.fromJSON(e);\n      return t.features.forEach(e => this._setLayersForFeature(e)), t;\n    });\n  }\n\n  queryVisibleFeatures(e, t) {\n    return this._proxy.queryVisibleFeatures(this._cleanUpQuery(e), t).then(e => {\n      const t = U.fromJSON(e);\n      return t.features.forEach(e => this._setLayersForFeature(e)), t;\n    });\n  }\n\n  queryAggregates(e, t) {\n    var _this13 = this;\n\n    return _asyncToGenerator(function* () {\n      const r = yield _this13._proxy.queryAggregates(_this13._cleanUpAggregateQuery(e), t),\n            i = w.fromJSON(r);\n      return i.features.forEach(e => _this13._setLayersForFeature(e)), i;\n    })();\n  }\n\n  queryAggregateIds(e, t) {\n    return this._proxy.queryAggregateIds(this._cleanUpAggregateQuery(e), t);\n  }\n\n  queryAggregateCount(e, t) {\n    return this._proxy.queryAggregateCount(this._cleanUpAggregateQuery(e), t);\n  }\n\n  queryAggregateJSON(e, t) {\n    return this._proxy.queryAggregates(this._cleanUpAggregateQuery(e), t);\n  }\n\n  queryFeaturesJSON(e, t) {\n    return this._proxy.queryFeatures(this._cleanUpQuery(e), t);\n  }\n\n  queryObjectIds(e, t) {\n    return this._proxy.queryObjectIds(this._cleanUpQuery(e), t);\n  }\n\n  queryFeatureCount(e, t) {\n    return this._proxy.queryFeatureCount(this._cleanUpQuery(e), t);\n  }\n\n  queryExtent(e, t) {\n    return this._proxy.queryExtent(this._cleanUpQuery(e), t).then(e => ({\n      count: e.count,\n      extent: B.fromJSON(e.extent)\n    }));\n  }\n\n  setVisibility(e, t) {\n    t ? this._visibilityOverrides.delete(e) : this._visibilityOverrides.add(e), this._update();\n  }\n\n  update(e) {\n    if (!this._tileStrategy || !this.tileRenderer) return;\n\n    const {\n      hasMissingTiles: t,\n      added: r,\n      removed: i\n    } = this._tileStrategy.update(e);\n\n    (r.length || i.length) && this._proxy.updateTiles({\n      added: r,\n      removed: i\n    }), t && this.requestUpdate(), this.notifyChange(\"updating\");\n  }\n\n  attach() {\n    this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`), this._tileStrategy = new k({\n      acquireTile: e => this._acquireTile(e),\n      releaseTile: e => this._releaseTile(e),\n      tileInfoView: this.view.featuresTilingScheme,\n      buffer: 0\n    }), this.addAttachHandles(g(() => this.renderingConfigHash, () => this._update(), _)), \"stream\" !== this.layer.type && this.addAttachHandles(this.layer.on(\"edits\", e => this._edit(e)));\n  }\n\n  detach() {\n    this._commandsQueue.clear(), this._proxy?.stop(), this.container.removeAllChildren(), this.tileRenderer?.uninstall(this.container), this.tileRenderer = null, this._tileStrategy = u(this._tileStrategy), this._tileRendererHash = null;\n  }\n\n  moveStart() {\n    this.requestUpdate();\n  }\n\n  viewChange() {\n    this.requestUpdate();\n  }\n\n  moveEnd() {\n    this.requestUpdate();\n  }\n\n  isUpdating() {\n    const e = \"renderer\" in this.layer && null != this.layer.renderer,\n          t = this._commandsQueue.updating,\n          r = null != this._updatingRequiredFieldsPromise,\n          i = !this._proxy || !this._proxy.isReady,\n          s = this._pipelineIsUpdating,\n          a = null == this.tileRenderer || this.tileRenderer?.updating,\n          n = e && (t || r || i || s || a);\n    return has(\"esri-2d-log-updating\") && console.log(`Updating FLV2D: ${n}\\n  -> hasRenderer ${e}\\n  -> hasPendingCommand ${t}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${i}\\n  -> updatingPipeline ${s}\\n  -> updatingTileRenderer ${a}\\n`), n;\n  }\n\n  _createClientOptions() {\n    return {\n      setUpdating: e => {\n        this._set(\"_pipelineIsUpdating\", e);\n      },\n      emitEvent: e => {\n        this.emit(e.name, e.event);\n      }\n    };\n  }\n\n  _detectQueryMode(e) {\n    var _this14 = this;\n\n    return _asyncToGenerator(function* () {\n      const t = (\"path\" in e),\n            {\n        layer: r\n      } = _this14,\n            i = \"editingInfo\" in r && r.editingInfo?.lastEditDate,\n            s = \"refreshInterval\" in r && !!r.refreshInterval,\n            a = !i && s,\n            o = x(r);\n      if (t && (\"feature\" === r.type || \"subtype-group\" === r.type) && \"point\" === r.geometryType && o?.query.supportsPagination && !o?.operations.supportsEditing && !a && has(\"featurelayer-snapshot-enabled\")) try {\n        const e = yield r.queryFeatureCount();\n        if (e <= has(\"featurelayer-snapshot-point-min-threshold\")) return {\n          mode: \"snapshot\",\n          featureCount: e\n        };\n        const t = has(\"featurelayer-snapshot-point-max-threshold\"),\n              i = has(\"featurelayer-snapshot-point-coverage\"),\n              s = _this14.view.extent,\n              a = h(r.fullExtent),\n              n = a?.clone().intersection(s),\n              o = l(n) ? n.width * n.height : 0,\n              u = a?.width * a?.height;\n        if (e <= t && (0 === u ? 0 : o / u) >= i) return {\n          mode: \"snapshot\",\n          featureCount: e\n        };\n      } catch (u) {\n        n.getLogger(_this14.declaredClass).warn(\"mapview-feature-layer\", \"Encountered an error when querying for featureCount\", {\n          error: u\n        });\n      }\n      return {\n        mode: \"on-demand\"\n      };\n    })();\n  }\n\n  _createServiceOptions() {\n    var _this15 = this;\n\n    return _asyncToGenerator(function* () {\n      const e = _this15.layer;\n      if (\"stream\" === e.type) return null;\n      const t = x(e),\n            {\n        capabilities: r,\n        objectIdField: i\n      } = e,\n            s = e.fields.map(e => e.toJSON()),\n            n = l(e.fullExtent) ? e.fullExtent.toJSON() : null,\n            o = L(e.geometryType),\n            u = \"timeInfo\" in e && e.timeInfo && e.timeInfo.toJSON() || null,\n            h = e.spatialReference ? e.spatialReference.toJSON() : null,\n            d = \"feature\" === e.type ? e.globalIdField : null;\n      let c;\n      \"ogc-feature\" === e.type ? c = e.source.getSource() : $(e.source) ? c = yield e.source.openPorts() : e.parsedUrl && (c = a(e.parsedUrl), \"dynamicDataSource\" in e && e.dynamicDataSource && (c.query = {\n        layer: JSON.stringify({\n          source: e.dynamicDataSource\n        })\n      }));\n      const p = \"datesInUnknownTimezone\" in _this15.layer && _this15.layer.datesInUnknownTimezone,\n            y = (\"subtypeField\" in _this15.layer ? _this15.layer.subtypeField : null) ?? null,\n            {\n        mode: g,\n        featureCount: f\n      } = yield _this15._detectQueryMode(c);\n      let m = _this15.layer.objectIdField;\n\n      if (\"feature\" === _this15.layer.type && l(_this15.layer.orderBy) && _this15.layer.orderBy.length) {\n        const e = !_this15.layer.orderBy[0].valueExpression && _this15.layer.orderBy[0].field;\n        e && (m = e);\n      }\n\n      return {\n        type: g,\n        timeReferenceUnknownClient: p,\n        subtypeField: y,\n        featureCount: f,\n        globalIdField: d,\n        maxRecordCount: r.query.maxRecordCount,\n        tileMaxRecordCount: r.query.tileMaxRecordCount,\n        capabilities: r,\n        effectiveCapabilities: t,\n        fields: s,\n        fullExtent: n,\n        geometryType: o,\n        objectIdField: i,\n        source: c,\n        timeInfo: u,\n        spatialReference: h,\n        orderByFields: m,\n        datesInUnknownTimezone: p,\n        dateFieldsTimeReference: (\"dateFieldsTimeReference\" in _this15.layer ? _this15.layer.dateFieldsTimeReference?.toJSON() : null) || null,\n        preferredTimeReference: (\"preferredTimeReference\" in _this15.layer ? _this15.layer.preferredTimeReference?.toJSON() : null) || null,\n        editFieldsInfo: \"editFieldsInfo\" in _this15.layer ? _this15.layer.editFieldsInfo?.toJSON() : null\n      };\n    })();\n  }\n\n  _createMemoryServiceOptions(e) {\n    var _this16 = this;\n\n    return _asyncToGenerator(function* () {\n      const t = yield e.openPorts();\n      return { ..._this16._createServiceOptions(),\n        type: \"memory\",\n        source: t\n      };\n    })();\n  }\n\n  _cleanUpQuery(e) {\n    const t = F.from(e) || this.createQuery();\n    return t.outSpatialReference || (t.outSpatialReference = this.view.spatialReference), t;\n  }\n\n  _cleanUpAggregateQuery(e) {\n    const t = F.from(e) || this.createAggregateQuery();\n    return t.outSpatialReference || (t.outSpatialReference = this.view.spatialReference), t;\n  }\n\n  _update() {\n    var _this17 = this;\n\n    return _asyncToGenerator(function* () {\n      return _this17._commandsQueue.push({\n        type: \"update\"\n      });\n    })();\n  }\n\n  _edit(e) {\n    var _this18 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this18.suspended) return void _this18._clearTiles();\n      return _this18._validateEdit(e) ? _this18._commandsQueue.push({\n        type: \"edit\",\n        edits: e\n      }) : void 0;\n    })();\n  }\n\n  doRefresh(e) {\n    var _this19 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this19.attached && _this19._tileStrategy.tileKeys().length) return _this19.suspended && e ? void _this19._clearTiles() : _this19._commandsQueue.push({\n        type: \"refresh\",\n        dataChanged: e\n      });\n    })();\n  }\n\n  _clearTiles() {\n    this._tileStrategy.tileKeys().length && (this._proxy.updateTiles({\n      added: [],\n      removed: this._tileStrategy.tileKeys()\n    }), this._tileStrategy.clear(), this.requestUpdate(), this._commandsQueue.clear(), this._update());\n  }\n\n  _validateEdit(e) {\n    const t = \"globalIdField\" in this.layer && this.layer.globalIdField,\n          r = e.deletedFeatures.some(e => -1 === e.objectId || !e.objectId),\n          i = t && this.availableFields.includes(t);\n    return r && !i ? (n.getLogger(this.declaredClass).error(new s(\"mapview-apply-edits\", `Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)), null) : e;\n  }\n\n  _doUpdate() {\n    var _this20 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        if (_this20.destroyed || !_this20._hasRequiredSupport(_this20.layer) || !_this20._tileStrategy) return;\n        const {\n          featureEffectView: t,\n          filter: r\n        } = _this20;\n        if (yield _this20._updateRequiredFields(), _this20.destroyed) return;\n\n        const {\n          renderer: i\n        } = _this20._getEffectiveRenderer();\n\n        _this20._set(\"_effectiveRenderer\", i);\n\n        const s = _this20._createSchemaConfig(),\n              a = _this20._createConfiguration(s, r, t.filter),\n              o = _this20._lastDefinitionExpression !== a.schema.source.definitionExpression;\n\n        _this20._lastDefinitionExpression = a.schema.source.definitionExpression;\n\n        const l = a.schema.tileRenderer,\n              u = _this20._createTileRendererHash(l);\n\n        if (\"snapshot\" === _this20._serviceOptions.type && (a.schema.source.initialFeatureCount = _this20._serviceOptions.featureCount), u !== _this20._tileRendererHash) {\n          yield _this20._initTileRenderer(l, i);\n          const e = _this20.layer,\n                t = \"stream\" === e.type ? yield _this20._initServiceOptions() : _this20._serviceOptions;\n          _this20.tileRenderer.onConfigUpdate(i), \"stream\" !== e.type && $(e.source) && (t.source = yield e.source.openPorts());\n          const r = {\n            added: _this20._tileStrategy.tileKeys(),\n            removed: []\n          };\n          yield _this20._proxy.startup(_this20.view.featuresTilingScheme, a, t, r), _this20.hasHighlight() && (yield _this20._proxy.setHighlight(Array.from(_this20._highlightIds.keys()))), yield _this20._onceTilesUpdated(), _this20.tileRenderer.onConfigUpdate(i);\n        } else {\n          \"snapshot\" === _this20._serviceOptions.type && o && (a.schema.source.changedFeatureCount = yield _this20.layer.queryFeatureCount());\n          const t = yield _this20._proxy.update(a);\n          (t.mesh || t.targets?.aggregate) && _this20._lockGPUUploads();\n\n          try {\n            yield _this20._proxy.applyUpdate(t);\n          } catch (e) {\n            y(e) || n.getLogger(_this20.declaredClass).error(e);\n          }\n\n          (t.mesh || t.targets?.aggregate) && _this20._unlockGPUUploads(), _this20.tileRenderer.onConfigUpdate(i), _this20._updateClusterSizeVariable(), _this20._forceAttributeTextureUpload();\n        }\n\n        _this20._tileRendererHash = u, _this20.tileRenderer.invalidateLabels(), _this20.requestUpdate();\n      } catch (e) {}\n    })();\n  }\n\n  _doEdit(e) {\n    var _this21 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this21._proxy.onEdits(e);\n      } catch (t) {\n        y(t), 0;\n      }\n    })();\n  }\n\n  _doRefresh(e) {\n    var _this22 = this;\n\n    return _asyncToGenerator(function* () {\n      _this22._lockGPUUploads();\n\n      try {\n        let t;\n        e && \"snapshot\" === _this22.queryMode && \"queryFeatureCount\" in _this22.layer && (t = yield _this22.layer.queryFeatureCount()), yield _this22._proxy.refresh({\n          dataChanged: e,\n          featureCount: t\n        });\n      } catch (t) {\n        y(t), 0;\n      }\n\n      _this22._unlockGPUUploads(), _this22._effectiveFeatureReduction && _this22._updateClusterSizeVariable();\n    })();\n  }\n\n  _updateClusterSizeVariable() {\n    this._needsClusterSizeUpdate && (this.tileRenderer.onConfigUpdate(this._effectiveRenderer), this._needsClusterSizeUpdate = !1);\n  }\n\n  _createUpdateClusterSizeTask(e, t) {\n    return g(() => this._aggregateValueRanges, r => {\n      this._updateClusterEffectiveRendererSizeVariable(e, t, r), this._needsClusterSizeUpdate = !0, this._uploadsLocked || this._updateClusterSizeVariable();\n    });\n  }\n\n  _updateClusterEffectiveRendererSizeVariable(e, t, r) {\n    var _this23 = this;\n\n    return _asyncToGenerator(function* () {\n      if (e.dynamicClusterSize && \"visualVariables\" in e && e.visualVariables) {\n        const i = T(e.visualVariables);\n\n        if (l(i) && \"cluster_count\" === i.field) {\n          const s = e.visualVariables.indexOf(i);\n          e.visualVariables[s] = V(t, r);\n          const a = e.clone();\n          a.dynamicClusterSize = !0, _this23._set(\"_effectiveRenderer\", a);\n        }\n      }\n    })();\n  }\n\n  _getEffectiveRenderer() {\n    const e = this.layer,\n          t = \"renderer\" in e ? e.renderer : null,\n          r = this._effectiveFeatureReduction;\n\n    if (this._updateClusterSizeTask = d(this._updateClusterSizeTask), r && \"renderer\" in r && r.renderer && !r.renderer.authoringInfo?.isAutoGenerated) {\n      const e = r.fields;\n\n      if (\"cluster\" === r.type) {\n        const {\n          renderer: t,\n          didInject: i\n        } = j(r.renderer, r, this._aggregateValueRanges);\n        return i && (this._updateClusterSizeTask = this._createUpdateClusterSizeTask(t, r)), {\n          renderer: t,\n          aggregateFields: e,\n          featureReduction: r\n        };\n      }\n\n      return {\n        renderer: r.renderer,\n        aggregateFields: e,\n        featureReduction: r\n      };\n    }\n\n    if (r && \"cluster\" === r.type && t && A(t)) {\n      const e = r,\n            i = [],\n            s = N(i, t, e, this._aggregateValueRanges, !0);\n      return this._updateClusterSizeTask = this._createUpdateClusterSizeTask(s, e), {\n        renderer: s,\n        aggregateFields: i,\n        featureReduction: r\n      };\n    }\n\n    return {\n      renderer: t,\n      aggregateFields: [],\n      featureReduction: null\n    };\n  }\n\n  _acquireTile(e) {\n    const t = this.tileRenderer.acquireTile(e);\n    return t.once(\"attach\", () => {\n      this.requestUpdate();\n    }), t;\n  }\n\n  _releaseTile(e) {\n    this.tileRenderer.releaseTile(e);\n  }\n\n  _initTileRenderer(e, t) {\n    var _this24 = this;\n\n    return _asyncToGenerator(function* () {\n      const r = yield O(e, {\n        layerView: _this24,\n        tileInfoView: _this24.view.featuresTilingScheme,\n        layer: _this24.layer\n      });\n      return _this24.tileRenderer && (_this24._tileStrategy.clear(), _this24.tileRenderer.uninstall(_this24.container), _this24.tileRenderer = u(_this24.tileRenderer)), _this24.destroyed ? null : (_this24._proxy.tileRenderer = r, _this24._set(\"tileRenderer\", r), _this24.tileRenderer.install(_this24.container), _this24.tileRenderer.onConfigUpdate(t), _this24.requestUpdate(), _this24.tileRenderer);\n    })();\n  }\n\n  _createTileRendererHash(e) {\n    return `${e.type}`;\n  }\n\n  get hasFilter() {\n    const e = !!(\"floorInfo\" in this.layer && this.layer.floorInfo && this.view.floors && this.view.floors.length);\n    return !!this.filter || e || !!this._visibilityOverrides.size || !!this.timeExtent;\n  }\n\n  _injectOverrides(e) {\n    const t = l(e) ? e.timeExtent : null,\n          r = l(this.timeExtent) && l(t) ? this.timeExtent.intersection(t) : this.timeExtent || t;\n    let i = null;\n    const s = \"floorInfo\" in this.layer && this.layer.floorInfo;\n\n    if (s) {\n      const t = l(e) ? e.where : null;\n      i = this._addFloorFilterClause(t);\n    }\n\n    if (!this._visibilityOverrides.size && !r && !s) return l(e) ? e.toJSON() : null;\n    (e = l(e) && e.clone() || new S()).timeExtent = r, i && (e.where = i);\n    const a = e.toJSON();\n    return a.hiddenIds = Array.from(this._visibilityOverrides), a;\n  }\n\n  _addFloorFilterClause(e) {\n    const t = this.layer;\n    let r = e || \"\";\n\n    if (\"floorInfo\" in t && t.floorInfo) {\n      let e = this.view.floors;\n      if (!e || !e.length) return r;\n      t.floorInfo.viewAllLevelIds?.length && (e = t.floorInfo.viewAllLevelIds);\n      const i = e.filter(e => \"\" !== e).map(e => \"'\" + e + \"'\");\n      i.push(\"''\");\n      const s = t.floorInfo.floorField;\n      let a = \"(\" + s + \" IN ({ids}) OR \" + s + \" IS NULL)\";\n\n      if (a = a.replace(\"{ids}\", i.join(\", \")), l(r) && r.includes(s)) {\n        let e = new RegExp(\"AND \\\\(\" + s + \".*NULL\\\\)\", \"g\");\n        r = r.replace(e, \"\"), e = new RegExp(\"\\\\(\" + s + \".*NULL\\\\)\", \"g\"), r = r.replace(e, \"\"), r = r.replace(/\\s+/g, \" \").trim();\n      }\n\n      r = \"\" !== r ? \"(\" + r + \") AND \" + a : a;\n    }\n\n    return \"\" !== r ? r : null;\n  }\n\n  _createConfiguration(e, t, r) {\n    const i = \"feature\" === this.layer.type && this.layer.historicMoment ? this.layer.historicMoment.getTime() : void 0,\n          s = \"feature\" === this.layer.type ? this.layer.gdbVersion ?? void 0 : void 0,\n          a = new Array(C),\n          n = this._injectOverrides(t);\n\n    a[0] = n, a[1] = l(r) ? r.toJSON() : null;\n    const o = I(e);\n    if (c(o)) return null;\n    const u = M(\"2d\");\n    return {\n      availableFields: this.availableFields,\n      gdbVersion: s,\n      historicMoment: i,\n      devicePixelRatio: window.devicePixelRatio || 1,\n      filters: a,\n      schema: o,\n      supportsTextureFloat: u.supportsTextureFloat,\n      maxTextureSize: u.maxTextureSize\n    };\n  }\n\n  _hasRequiredSupport(e) {\n    return !(\"renderer\" in e) || E(e.renderer);\n  }\n\n  _onceTilesUpdated() {\n    return this.requestUpdate(), f(() => !this._pipelineIsUpdating);\n  }\n\n  _lockGPUUploads() {\n    this.tileRenderer && (this._uploadsLocked = !0, this.tileRenderer.lockGPUUploads());\n  }\n\n  _unlockGPUUploads() {\n    this.tileRenderer && (this._uploadsLocked = !1, this.tileRenderer.unlockGPUUploads());\n  }\n\n  _forceAttributeTextureUpload() {\n    this.tileRenderer && this.tileRenderer.forceAttributeTextureUpload();\n  }\n\n  _createSchemaConfig() {\n    const e = this.layer;\n    return {\n      renderer: \"renderer\" in e ? e.renderer : null,\n      spatialReference: e.spatialReference,\n      timeExtent: \"timeExtent\" in e ? e.timeExtent : null,\n      definitionExpression: e.definitionExpression,\n      featureReduction: this._effectiveFeatureReduction,\n      fields: e.fields,\n      geometryType: e.geometryType,\n      historicMoment: \"historicMoment\" in e ? e.historicMoment : null,\n      labelsVisible: \"labelsVisible\" in e && e.labelsVisible,\n      labelingInfo: \"labelingInfo\" in e ? e.labelingInfo : null,\n      availableFields: this.availableFields,\n      featureEffect: this.featureEffect,\n      filter: this.filter,\n      gdbVersion: \"gdbVersion\" in e ? e.gdbVersion : null,\n      pixelBuffer: 0,\n      orderBy: \"orderBy\" in e && e.orderBy ? e.orderBy : null,\n      customParameters: { ...(\"customParameters\" in e ? e.customParameters : void 0),\n        token: \"apiKey\" in e ? e.apiKey ?? void 0 : void 0\n      },\n      subtypeCode: \"subtypeCode\" in e ? e.subtypeCode : void 0,\n      subtypeField: \"subtypeField\" in e ? e.subtypeField : void 0\n    };\n  }\n\n  _addHighlight(e) {\n    for (const t of e) if (this._highlightIds.has(t)) {\n      const e = this._highlightIds.get(t);\n\n      this._highlightIds.set(t, e + 1);\n    } else this._highlightIds.set(t, 1);\n\n    this._updateHighlight().catch(e => {\n      y(e) || n.getLogger(this.declaredClass).error(e);\n    });\n  }\n\n  _removeHighlight(e) {\n    for (const t of e) if (this._highlightIds.has(t)) {\n      const e = this._highlightIds.get(t) - 1;\n      0 === e ? this._highlightIds.delete(t) : this._highlightIds.set(t, e);\n    }\n\n    this._updateHighlight().catch(e => {\n      y(e) || n.getLogger(this.declaredClass).error(e);\n    });\n  }\n\n  _setLayersForFeature(e) {\n    const t = this.layer;\n    e.layer = t, e.sourceLayer = t;\n  }\n\n  _createGraphicHit(e, t) {\n    return this._setLayersForFeature(t), l(t.geometry) && (t.geometry.spatialReference = this.view.spatialReference), {\n      type: \"graphic\",\n      graphic: t,\n      layer: this.layer,\n      mapPoint: e\n    };\n  }\n\n};\ne([v()], G.prototype, \"_serviceOptions\", void 0), e([v()], G.prototype, \"_proxy\", void 0), e([v()], G.prototype, \"_pipelineIsUpdating\", void 0), e([v()], G.prototype, \"_effectiveRenderer\", void 0), e([v()], G.prototype, \"_effectiveFeatureReduction\", null), e([v()], G.prototype, \"_aggregateValueRanges\", void 0), e([v()], G.prototype, \"_commandsQueue\", void 0), e([v()], G.prototype, \"featureEffectView\", void 0), e([v()], G.prototype, \"labelsVisible\", null), e([v({\n  readOnly: !0\n})], G.prototype, \"queryMode\", null), e([v()], G.prototype, \"renderingConfigHash\", null), e([v()], G.prototype, \"tileRenderer\", void 0), e([v()], G.prototype, \"updating\", void 0), G = e([b(\"esri.views.2d.layers.FeatureLayerView2D\")], G);\nconst D = G;\nexport { D as default };","map":{"version":3,"names":["_","e","t","r","i","s","has","clone","a","n","applySome","o","isSome","l","destroyMaybe","u","unwrap","h","removeMaybe","d","isNone","c","debounce","p","isAbortError","y","watch","g","whenOnce","f","syncAndInitial","m","initial","property","v","subclass","b","R","S","getEffectiveLayerCapabilities","x","w","U","F","MAX_FILTERS","C","LayerView2DMixin","q","createSchema","I","createOrReuseTileRenderer","O","isRendererSupported","E","findSizeVV","T","createClusterCountSizeVariable","V","injectDynamicLevelDependentSizeVisualVariable","j","isClusterCompatibleRenderer","A","createClusterRenderer","N","Q","H","toJSONGeometryType","L","TileManager","k","P","J","z","getWebGLCapabilities","M","B","$","G","constructor","arguments","_pipelineIsUpdating","_commandsQueue","process","type","_doEdit","_doRefresh","dataChanged","_doUpdate","_visibilityOverrides","Set","_highlightIds","Map","_updateHighlight","_proxy","setHighlight","Array","from","keys","_uploadsLocked","_needsClusterSizeUpdate","featureEffectView","_lastDefinitionExpression","destroy","_updateClusterSizeTask","remove","initialize","addResolvingPromise","Promise","all","_initProxy","_initServiceOptions","addHandles","on","_set","valueRanges","featureEffect","endTransitions","layer","isTable","operations","supportsQuery","_createClientOptions","client","when","_createServiceOptions","_serviceOptions","_effectiveFeatureReduction","featureReduction","maxScale","view","scale","orderByFields","labelsVisible","sublayers","items","suspended","some","labelingInfo","queryMode","renderingConfigHash","availableFields","floors","definitionExpression","renderer","gdbVersion","historicMoment","getTime","timeExtent","JSON","stringify","customParameters","apiKey","geometryDefinition","clips","toJSON","orderBy","reduce","visible","subtypeCode","sublayerHash","filterHash","filter","effectHash","streamFilter","clipsHash","highlight","getObjectId","isCollection","length","map","toArray","isArray","_addHighlight","_removeHighlight","hasHighlight","size","hitTest","tileRenderer","features","aggregates","getFeatures","_createGraphicHit","fromJSON","queryStatistics","querySummaryStatistics","_cleanUpQuery","queryAggregateSummaryStatistics","_cleanUpAggregateQuery","queryUniqueValues","queryAggregateUniqueValues","queryClassBreaks","queryAggregateClassBreaks","queryHistogram","queryAggregateHistogram","queryFeatures","queryFeaturesJSON","then","forEach","_setLayersForFeature","queryVisibleFeatures","queryAggregates","queryAggregateIds","queryAggregateCount","queryAggregateJSON","queryObjectIds","queryFeatureCount","queryExtent","count","extent","setVisibility","delete","add","_update","update","_tileStrategy","hasMissingTiles","added","removed","updateTiles","requestUpdate","notifyChange","attach","timeline","record","title","acquireTile","_acquireTile","releaseTile","_releaseTile","tileInfoView","featuresTilingScheme","buffer","addAttachHandles","_edit","detach","clear","stop","container","removeAllChildren","uninstall","_tileRendererHash","moveStart","viewChange","moveEnd","isUpdating","updating","_updatingRequiredFieldsPromise","isReady","console","log","setUpdating","emitEvent","emit","name","event","_detectQueryMode","editingInfo","lastEditDate","refreshInterval","geometryType","query","supportsPagination","supportsEditing","mode","featureCount","fullExtent","intersection","width","height","getLogger","declaredClass","warn","error","capabilities","objectIdField","fields","timeInfo","spatialReference","globalIdField","source","getSource","openPorts","parsedUrl","dynamicDataSource","datesInUnknownTimezone","subtypeField","valueExpression","field","timeReferenceUnknownClient","maxRecordCount","tileMaxRecordCount","effectiveCapabilities","dateFieldsTimeReference","preferredTimeReference","editFieldsInfo","_createMemoryServiceOptions","createQuery","outSpatialReference","createAggregateQuery","push","_clearTiles","_validateEdit","edits","doRefresh","attached","tileKeys","deletedFeatures","objectId","includes","destroyed","_hasRequiredSupport","_updateRequiredFields","_getEffectiveRenderer","_createSchemaConfig","_createConfiguration","schema","_createTileRendererHash","initialFeatureCount","_initTileRenderer","onConfigUpdate","startup","_onceTilesUpdated","changedFeatureCount","mesh","targets","aggregate","_lockGPUUploads","applyUpdate","_unlockGPUUploads","_updateClusterSizeVariable","_forceAttributeTextureUpload","invalidateLabels","onEdits","refresh","_effectiveRenderer","_createUpdateClusterSizeTask","_aggregateValueRanges","_updateClusterEffectiveRendererSizeVariable","dynamicClusterSize","visualVariables","indexOf","authoringInfo","isAutoGenerated","didInject","aggregateFields","once","layerView","install","hasFilter","floorInfo","_injectOverrides","where","_addFloorFilterClause","hiddenIds","viewAllLevelIds","floorField","replace","join","RegExp","trim","devicePixelRatio","window","filters","supportsTextureFloat","maxTextureSize","lockGPUUploads","unlockGPUUploads","forceAttributeTextureUpload","pixelBuffer","token","get","set","catch","sourceLayer","geometry","graphic","mapPoint","prototype","readOnly","D","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../AggregateGraphic.js\";import\"../../../geometry.js\";import r from\"../../../Graphic.js\";import i from\"../../../core/Collection.js\";import s from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{clone as a}from\"../../../core/lang.js\";import n from\"../../../core/Logger.js\";import{applySome as o,isSome as l,destroyMaybe as u,unwrap as h,removeMaybe as d,isNone as c}from\"../../../core/maybe.js\";import{debounce as p,isAbortError as y}from\"../../../core/promiseUtils.js\";import{watch as g,whenOnce as f,syncAndInitial as m,initial as _}from\"../../../core/reactiveUtils.js\";import{property as v}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import R from\"../../../layers/effects/FeatureEffectView.js\";import S from\"../../../layers/support/FeatureFilter.js\";import{getEffectiveLayerCapabilities as x}from\"../../../layers/support/layerUtils.js\";import w from\"../../../rest/support/AggregateFeatureSet.js\";import U from\"../../../rest/support/FeatureSet.js\";import F from\"../../../rest/support/Query.js\";import{MAX_FILTERS as C}from\"../engine/webgl/definitions.js\";import{LayerView2DMixin as q}from\"./LayerView2D.js\";import{createSchema as I}from\"./features/schemaUtils.js\";import{createOrReuseTileRenderer as O}from\"./features/tileRenderers.js\";import{isRendererSupported as E}from\"./features/support/rendererUtils.js\";import{findSizeVV as T,createClusterCountSizeVariable as V,injectDynamicLevelDependentSizeVisualVariable as j,isClusterCompatibleRenderer as A,createClusterRenderer as N}from\"./support/clusterUtils.js\";import Q from\"./support/FeatureCommandQueue.js\";import H from\"./support/FeatureLayerProxy.js\";import{toJSONGeometryType as L}from\"./support/util.js\";import{TileManager as k}from\"../tiling/TileManager.js\";import P from\"../../layers/FeatureLayerView.js\";import J from\"../../layers/LayerView.js\";import z from\"../../layers/RefreshableLayerView.js\";import{getWebGLCapabilities as M}from\"../../webgl/capabilities.js\";import B from\"../../../geometry/Extent.js\";function $(e){return e&&\"openPorts\"in e}let G=class extends(P(z(q(J)))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new Q({process:e=>{switch(e.type){case\"processed-edit\":return this._doEdit(e);case\"refresh\":return this._doRefresh(e.dataChanged);case\"update\":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._highlightIds=new Map,this._updateHighlight=p((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.featureEffectView=new R,this._lastDefinitionExpression=null}destroy(){o(this._updateClusterSizeTask,(e=>e.remove())),this._proxy?.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.addHandles([this.on(\"valueRangesChanged\",(e=>{this._set(\"_aggregateValueRanges\",e.valueRanges)})),g((()=>this.featureEffect),(e=>{this.featureEffectView.featureEffect=e}),m)],\"constructor\"),this.featureEffectView.endTransitions()}async _initProxy(){const e=this.layer;if(\"isTable\"in e&&e.isTable)throw new s(\"featurelayerview:table-not-supported\",\"table feature layer can't be displayed\",{layer:this.layer});if((\"feature\"===e.type||\"subtype-group\"===e.type)&&!x(e)?.operations.supportsQuery)throw new s(\"featurelayerview:query-not-supported\",\"layer view requires a layer with query capability\",{layer:e});this._proxy&&this._proxy.destroy();const t=this._createClientOptions();return this._set(\"_proxy\",new H({client:t})),this._proxy.when()}async _initServiceOptions(){return this._set(\"_serviceOptions\",await this._createServiceOptions()),this._serviceOptions}get _effectiveFeatureReduction(){if(!(\"featureReduction\"in this.layer))return null;const e=this.layer.featureReduction;return e&&(!(\"maxScale\"in e)||!e.maxScale||e.maxScale<this.view.scale)?e:null}get orderByFields(){return\"stream\"!==this._serviceOptions?.type?this._serviceOptions?.orderByFields:void 0}get labelsVisible(){const e=\"subtype-group\"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get queryMode(){return this._serviceOptions?.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,r=this.view.floors,{definitionExpression:i}=t,s=\"subtype-group\"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a=\"renderer\"in t&&t.renderer,n=\"gdbVersion\"in t?t.gdbVersion:void 0,o=\"historicMoment\"in t?t.historicMoment?.getTime():void 0,{timeExtent:u}=this,h=\"customParameters\"in t?JSON.stringify(t.customParameters):void 0,d=\"apiKey\"in t?t.apiKey:void 0,c=\"stream\"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,p=JSON.stringify(this.clips),y=this._effectiveFeatureReduction?.toJSON(),g=\"orderBy\"in this.layer&&JSON.stringify(this.layer.orderBy),f=\"sublayers\"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\\n.${JSON.stringify(t.labelingInfo)}`),\"\"),m=\"subtypeCode\"in this.layer&&this.layer.subtypeCode;return JSON.stringify({orderBy:g,sublayerHash:f,subtypeCode:m,filterHash:l(this.filter)&&this.filter.toJSON(),effectHash:l(this.featureEffect)&&this.featureEffect.toJSON(),streamFilter:c,gdbVersion:n,definitionExpression:i,historicMoment:o,availableFields:e,renderer:a,labelingInfo:s,timeExtent:u,floors:r,clipsHash:p,featureReduction:y,customParameters:h,apiKey:d})}highlight(e){let t;e instanceof r?t=[e.getObjectId()]:\"number\"==typeof e||\"string\"==typeof e?t=[e]:i.isCollection(e)&&e.length>0?t=e.map((e=>e?.getObjectId())).toArray():Array.isArray(e)&&e.length>0&&(t=\"number\"==typeof e[0]||\"string\"==typeof e[0]?e:e.map((e=>e?.getObjectId())));const s=t?.filter(l);return s&&s.length?(this._addHighlight(s),{remove:()=>this._removeHighlight(s)}):{remove:()=>{}}}hasHighlight(){return!!this._highlightIds.size}async hitTest(e,i){if(!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(i);if(0===s.length)return null;const{features:a,aggregates:n}=await this._proxy.getFeatures(s);return[...n.map((r=>this._createGraphicHit(e,t.fromJSON(r)))),...a.map((t=>this._createGraphicHit(e,r.fromJSON(t))))]}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),i,r)}async queryAggregateSummaryStatistics(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateSummaryStatistics(this._cleanUpAggregateQuery(e),i,r)}async queryUniqueValues(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(e),i,r)}async queryAggregateUniqueValues(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateUniqueValues(this._cleanUpAggregateQuery(e),i,r)}async queryClassBreaks(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(e),i,r)}async queryAggregateClassBreaks(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateClassBreaks(this._cleanUpAggregateQuery(e),i,r)}async queryHistogram(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryHistogram(this._cleanUpQuery(e),i,r)}async queryAggregateHistogram(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateHistogram(this._cleanUpAggregateQuery(e),i,r)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=U.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryVisibleFeatures(e,t){return this._proxy.queryVisibleFeatures(this._cleanUpQuery(e),t).then((e=>{const t=U.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}async queryAggregates(e,t){const r=await this._proxy.queryAggregates(this._cleanUpAggregateQuery(e),t),i=w.fromJSON(r);return i.features.forEach((e=>this._setLayersForFeature(e))),i}queryAggregateIds(e,t){return this._proxy.queryAggregateIds(this._cleanUpAggregateQuery(e),t)}queryAggregateCount(e,t){return this._proxy.queryAggregateCount(this._cleanUpAggregateQuery(e),t)}queryAggregateJSON(e,t){return this._proxy.queryAggregates(this._cleanUpAggregateQuery(e),t)}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:B.fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:r,removed:i}=this._tileStrategy.update(e);(r.length||i.length)&&this._proxy.updateTiles({added:r,removed:i}),t&&this.requestUpdate(),this.notifyChange(\"updating\")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new k({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.addAttachHandles(g((()=>this.renderingConfigHash),(()=>this._update()),_)),\"stream\"!==this.layer.type&&this.addAttachHandles(this.layer.on(\"edits\",(e=>this._edit(e))))}detach(){this._commandsQueue.clear(),this._proxy?.stop(),this.container.removeAllChildren(),this.tileRenderer?.uninstall(this.container),this.tileRenderer=null,this._tileStrategy=u(this._tileStrategy),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}isUpdating(){const e=\"renderer\"in this.layer&&null!=this.layer.renderer,t=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,i=!this._proxy||!this._proxy.isReady,s=this._pipelineIsUpdating,a=null==this.tileRenderer||this.tileRenderer?.updating,n=e&&(t||r||i||s||a);return has(\"esri-2d-log-updating\")&&console.log(`Updating FLV2D: ${n}\\n  -> hasRenderer ${e}\\n  -> hasPendingCommand ${t}\\n  -> updatingRequiredFields ${r}\\n  -> updatingProxy ${i}\\n  -> updatingPipeline ${s}\\n  -> updatingTileRenderer ${a}\\n`),n}_createClientOptions(){return{setUpdating:e=>{this._set(\"_pipelineIsUpdating\",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){const t=\"path\"in e,{layer:r}=this,i=\"editingInfo\"in r&&r.editingInfo?.lastEditDate,s=\"refreshInterval\"in r&&!!r.refreshInterval,a=!i&&s,o=x(r);if(t&&(\"feature\"===r.type||\"subtype-group\"===r.type)&&\"point\"===r.geometryType&&o?.query.supportsPagination&&!o?.operations.supportsEditing&&!a&&has(\"featurelayer-snapshot-enabled\"))try{const e=await r.queryFeatureCount();if(e<=has(\"featurelayer-snapshot-point-min-threshold\"))return{mode:\"snapshot\",featureCount:e};const t=has(\"featurelayer-snapshot-point-max-threshold\"),i=has(\"featurelayer-snapshot-point-coverage\"),s=this.view.extent,a=h(r.fullExtent),n=a?.clone().intersection(s),o=l(n)?n.width*n.height:0,u=a?.width*a?.height;if(e<=t&&(0===u?0:o/u)>=i)return{mode:\"snapshot\",featureCount:e}}catch(u){n.getLogger(this.declaredClass).warn(\"mapview-feature-layer\",\"Encountered an error when querying for featureCount\",{error:u})}return{mode:\"on-demand\"}}async _createServiceOptions(){const e=this.layer;if(\"stream\"===e.type)return null;const t=x(e),{capabilities:r,objectIdField:i}=e,s=e.fields.map((e=>e.toJSON())),n=l(e.fullExtent)?e.fullExtent.toJSON():null,o=L(e.geometryType),u=\"timeInfo\"in e&&e.timeInfo&&e.timeInfo.toJSON()||null,h=e.spatialReference?e.spatialReference.toJSON():null,d=\"feature\"===e.type?e.globalIdField:null;let c;\"ogc-feature\"===e.type?c=e.source.getSource():$(e.source)?c=await e.source.openPorts():e.parsedUrl&&(c=a(e.parsedUrl),\"dynamicDataSource\"in e&&e.dynamicDataSource&&(c.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const p=\"datesInUnknownTimezone\"in this.layer&&this.layer.datesInUnknownTimezone,y=(\"subtypeField\"in this.layer?this.layer.subtypeField:null)??null,{mode:g,featureCount:f}=await this._detectQueryMode(c);let m=this.layer.objectIdField;if(\"feature\"===this.layer.type&&l(this.layer.orderBy)&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:g,timeReferenceUnknownClient:p,subtypeField:y,featureCount:f,globalIdField:d,maxRecordCount:r.query.maxRecordCount,tileMaxRecordCount:r.query.tileMaxRecordCount,capabilities:r,effectiveCapabilities:t,fields:s,fullExtent:n,geometryType:o,objectIdField:i,source:c,timeInfo:u,spatialReference:h,orderByFields:m,datesInUnknownTimezone:p,dateFieldsTimeReference:(\"dateFieldsTimeReference\"in this.layer?this.layer.dateFieldsTimeReference?.toJSON():null)||null,preferredTimeReference:(\"preferredTimeReference\"in this.layer?this.layer.preferredTimeReference?.toJSON():null)||null,editFieldsInfo:\"editFieldsInfo\"in this.layer?this.layer.editFieldsInfo?.toJSON():null}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:\"memory\",source:t}}_cleanUpQuery(e){const t=F.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_cleanUpAggregateQuery(e){const t=F.from(e)||this.createAggregateQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:\"update\"})}async _edit(e){if(this.suspended)return void this._clearTiles();return this._validateEdit(e)?this._commandsQueue.push({type:\"edit\",edits:e}):void 0}async doRefresh(e){if(this.attached&&this._tileStrategy.tileKeys().length)return this.suspended&&e?void this._clearTiles():this._commandsQueue.push({type:\"refresh\",dataChanged:e})}_clearTiles(){this._tileStrategy.tileKeys().length&&(this._proxy.updateTiles({added:[],removed:this._tileStrategy.tileKeys()}),this._tileStrategy.clear(),this.requestUpdate(),this._commandsQueue.clear(),this._update())}_validateEdit(e){const t=\"globalIdField\"in this.layer&&this.layer.globalIdField,r=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),i=t&&this.availableFields.includes(t);return r&&!i?(n.getLogger(this.declaredClass).error(new s(\"mapview-apply-edits\",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{featureEffectView:t,filter:r}=this;if(await this._updateRequiredFields(),this.destroyed)return;const{renderer:i}=this._getEffectiveRenderer();this._set(\"_effectiveRenderer\",i);const s=this._createSchemaConfig(),a=this._createConfiguration(s,r,t.filter),o=this._lastDefinitionExpression!==a.schema.source.definitionExpression;this._lastDefinitionExpression=a.schema.source.definitionExpression;const l=a.schema.tileRenderer,u=this._createTileRendererHash(l);if(\"snapshot\"===this._serviceOptions.type&&(a.schema.source.initialFeatureCount=this._serviceOptions.featureCount),u!==this._tileRendererHash){await this._initTileRenderer(l,i);const e=this.layer,t=\"stream\"===e.type?await this._initServiceOptions():this._serviceOptions;this.tileRenderer.onConfigUpdate(i),\"stream\"!==e.type&&$(e.source)&&(t.source=await e.source.openPorts());const r={added:this._tileStrategy.tileKeys(),removed:[]};await this._proxy.startup(this.view.featuresTilingScheme,a,t,r),this.hasHighlight()&&await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),await this._onceTilesUpdated(),this.tileRenderer.onConfigUpdate(i)}else{\"snapshot\"===this._serviceOptions.type&&o&&(a.schema.source.changedFeatureCount=await this.layer.queryFeatureCount());const t=await this._proxy.update(a);(t.mesh||t.targets?.aggregate)&&this._lockGPUUploads();try{await this._proxy.applyUpdate(t)}catch(e){y(e)||n.getLogger(this.declaredClass).error(e)}(t.mesh||t.targets?.aggregate)&&this._unlockGPUUploads(),this.tileRenderer.onConfigUpdate(i),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=u,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){y(t),0}}async _doRefresh(e){this._lockGPUUploads();try{let t;e&&\"snapshot\"===this.queryMode&&\"queryFeatureCount\"in this.layer&&(t=await this.layer.queryFeatureCount()),await this._proxy.refresh({dataChanged:e,featureCount:t})}catch(t){y(t),0}this._unlockGPUUploads(),this._effectiveFeatureReduction&&this._updateClusterSizeVariable()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return g((()=>this._aggregateValueRanges),(r=>{this._updateClusterEffectiveRendererSizeVariable(e,t,r),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,r){if(e.dynamicClusterSize&&\"visualVariables\"in e&&e.visualVariables){const i=T(e.visualVariables);if(l(i)&&\"cluster_count\"===i.field){const s=e.visualVariables.indexOf(i);e.visualVariables[s]=V(t,r);const a=e.clone();a.dynamicClusterSize=!0,this._set(\"_effectiveRenderer\",a)}}}_getEffectiveRenderer(){const e=this.layer,t=\"renderer\"in e?e.renderer:null,r=this._effectiveFeatureReduction;if(this._updateClusterSizeTask=d(this._updateClusterSizeTask),r&&\"renderer\"in r&&r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated){const e=r.fields;if(\"cluster\"===r.type){const{renderer:t,didInject:i}=j(r.renderer,r,this._aggregateValueRanges);return i&&(this._updateClusterSizeTask=this._createUpdateClusterSizeTask(t,r)),{renderer:t,aggregateFields:e,featureReduction:r}}return{renderer:r.renderer,aggregateFields:e,featureReduction:r}}if(r&&\"cluster\"===r.type&&t&&A(t)){const e=r,i=[],s=N(i,t,e,this._aggregateValueRanges,!0);return this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,e),{renderer:s,aggregateFields:i,featureReduction:r}}return{renderer:t,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once(\"attach\",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}async _initTileRenderer(e,t){const r=await O(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer=u(this.tileRenderer)),this.destroyed?null:(this._proxy.tileRenderer=r,this._set(\"tileRenderer\",r),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(t),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${e.type}`}get hasFilter(){const e=!!(\"floorInfo\"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=l(e)?e.timeExtent:null,r=l(this.timeExtent)&&l(t)?this.timeExtent.intersection(t):this.timeExtent||t;let i=null;const s=\"floorInfo\"in this.layer&&this.layer.floorInfo;if(s){const t=l(e)?e.where:null;i=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!r&&!s)return l(e)?e.toJSON():null;(e=l(e)&&e.clone()||new S).timeExtent=r,i&&(e.where=i);const a=e.toJSON();return a.hiddenIds=Array.from(this._visibilityOverrides),a}_addFloorFilterClause(e){const t=this.layer;let r=e||\"\";if(\"floorInfo\"in t&&t.floorInfo){let e=this.view.floors;if(!e||!e.length)return r;t.floorInfo.viewAllLevelIds?.length&&(e=t.floorInfo.viewAllLevelIds);const i=e.filter((e=>\"\"!==e)).map((e=>\"'\"+e+\"'\"));i.push(\"''\");const s=t.floorInfo.floorField;let a=\"(\"+s+\" IN ({ids}) OR \"+s+\" IS NULL)\";if(a=a.replace(\"{ids}\",i.join(\", \")),l(r)&&r.includes(s)){let e=new RegExp(\"AND \\\\(\"+s+\".*NULL\\\\)\",\"g\");r=r.replace(e,\"\"),e=new RegExp(\"\\\\(\"+s+\".*NULL\\\\)\",\"g\"),r=r.replace(e,\"\"),r=r.replace(/\\s+/g,\" \").trim()}r=\"\"!==r?\"(\"+r+\") AND \"+a:a}return\"\"!==r?r:null}_createConfiguration(e,t,r){const i=\"feature\"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s=\"feature\"===this.layer.type?this.layer.gdbVersion??void 0:void 0,a=new Array(C),n=this._injectOverrides(t);a[0]=n,a[1]=l(r)?r.toJSON():null;const o=I(e);if(c(o))return null;const u=M(\"2d\");return{availableFields:this.availableFields,gdbVersion:s,historicMoment:i,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:o,supportsTextureFloat:u.supportsTextureFloat,maxTextureSize:u.maxTextureSize}}_hasRequiredSupport(e){return!(\"renderer\"in e)||E(e.renderer)}_onceTilesUpdated(){return this.requestUpdate(),f((()=>!this._pipelineIsUpdating))}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=this.layer;return{renderer:\"renderer\"in e?e.renderer:null,spatialReference:e.spatialReference,timeExtent:\"timeExtent\"in e?e.timeExtent:null,definitionExpression:e.definitionExpression,featureReduction:this._effectiveFeatureReduction,fields:e.fields,geometryType:e.geometryType,historicMoment:\"historicMoment\"in e?e.historicMoment:null,labelsVisible:\"labelsVisible\"in e&&e.labelsVisible,labelingInfo:\"labelingInfo\"in e?e.labelingInfo:null,availableFields:this.availableFields,featureEffect:this.featureEffect,filter:this.filter,gdbVersion:\"gdbVersion\"in e?e.gdbVersion:null,pixelBuffer:0,orderBy:\"orderBy\"in e&&e.orderBy?e.orderBy:null,customParameters:{...\"customParameters\"in e?e.customParameters:void 0,token:\"apiKey\"in e?e.apiKey??void 0:void 0},subtypeCode:\"subtypeCode\"in e?e.subtypeCode:void 0,subtypeField:\"subtypeField\"in e?e.subtypeField:void 0}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{y(e)||n.getLogger(this.declaredClass).error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{y(e)||n.getLogger(this.declaredClass).error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createGraphicHit(e,t){return this._setLayersForFeature(t),l(t.geometry)&&(t.geometry.spatialReference=this.view.spatialReference),{type:\"graphic\",graphic:t,layer:this.layer,mapPoint:e}}};e([v()],G.prototype,\"_serviceOptions\",void 0),e([v()],G.prototype,\"_proxy\",void 0),e([v()],G.prototype,\"_pipelineIsUpdating\",void 0),e([v()],G.prototype,\"_effectiveRenderer\",void 0),e([v()],G.prototype,\"_effectiveFeatureReduction\",null),e([v()],G.prototype,\"_aggregateValueRanges\",void 0),e([v()],G.prototype,\"_commandsQueue\",void 0),e([v()],G.prototype,\"featureEffectView\",void 0),e([v()],G.prototype,\"labelsVisible\",null),e([v({readOnly:!0})],G.prototype,\"queryMode\",null),e([v()],G.prototype,\"renderingConfigHash\",null),e([v()],G.prototype,\"tileRenderer\",void 0),e([v()],G.prototype,\"updating\",void 0),G=e([b(\"esri.views.2d.layers.FeatureLayerView2D\")],G);const D=G;export{D as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}