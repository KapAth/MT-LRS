{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../Graphic.js\";\nimport t from \"../../core/Collection.js\";\nimport a from \"../../core/Error.js\";\nimport { clone as r } from \"../../core/lang.js\";\nimport { isSome as s, isNone as i } from \"../../core/maybe.js\";\nimport { dataComponents as o } from \"../../core/urlUtils.js\";\nimport { generateUUID as n } from \"../../core/uuid.js\";\nimport { normalizeCentralMeridian as d } from \"../../geometry/support/normalizeUtils.js\";\nimport { AssetMapEditFlags as l } from \"./assetEditingSupport.js\";\nimport { isEditBusLayer as u, editEventBus as p } from \"../mixins/EditBusLayer.js\";\nimport { AssetType as c } from \"../support/infoFor3D.js\";\nimport { getEffectiveEditingEnabled as h, getEffectiveLayerCapabilities as m } from \"../support/layerUtils.js\";\n\nfunction y(e) {\n  return e && null != e.applyEdits;\n}\n\nfunction f(_x, _x2, _x3) {\n  return _f.apply(this, arguments);\n}\n\nfunction _f() {\n  _f = _asyncToGenerator(function* (e, t, a, s = {}) {\n    let i, o;\n    const n = {\n      edits: a,\n      result: new Promise((e, t) => {\n        i = e, o = t;\n      })\n    };\n    e.emit(\"apply-edits\", n);\n\n    try {\n      const {\n        results: o,\n        edits: n\n      } = yield g(e, t, a, s),\n            d = e => e.filter(e => !e.error).map(r),\n            l = {\n        edits: n,\n        addedFeatures: d(o.addFeatureResults),\n        updatedFeatures: d(o.updateFeatureResults),\n        deletedFeatures: d(o.deleteFeatureResults),\n        addedAttachments: d(o.addAttachmentResults),\n        updatedAttachments: d(o.updateAttachmentResults),\n        deletedAttachments: d(o.deleteAttachmentResults),\n        exceededTransferLimit: !1\n      };\n\n      return o.editedFeatureResults?.length && (l.editedFeatures = o.editedFeatureResults), (l.addedFeatures.length || l.updatedFeatures.length || l.deletedFeatures.length || l.addedAttachments.length || l.updatedAttachments.length || l.deletedAttachments.length) && (e.emit(\"edits\", l), u(e) && p.emit(\"edits\", {\n        layer: e,\n        event: l\n      })), i(l), o;\n    } catch (d) {\n      throw o(d), d;\n    }\n  });\n  return _f.apply(this, arguments);\n}\n\nfunction g(_x4, _x5, _x6, _x7) {\n  return _g.apply(this, arguments);\n}\n\nfunction _g() {\n  _g = _asyncToGenerator(function* (e, t, r, s) {\n    if (yield e.load(), !y(t)) throw new a(`${e.type}-layer:no-editing-support`, \"Layer source does not support applyEdits capability\", {\n      layer: e\n    });\n    if (!h(e)) throw new a(`${e.type}-layer:editing-disabled`, \"Editing is disabled for layer\", {\n      layer: e\n    });\n    const {\n      edits: i,\n      options: o\n    } = yield b(e, r, s);\n    return i.addFeatures?.length || i.updateFeatures?.length || i.deleteFeatures?.length || i.addAttachments?.length || i.updateAttachments?.length || i.deleteAttachments?.length ? {\n      edits: i,\n      results: yield t.applyEdits(i, o)\n    } : {\n      edits: i,\n      results: {\n        addFeatureResults: [],\n        updateFeatureResults: [],\n        deleteFeatureResults: [],\n        addAttachmentResults: [],\n        updateAttachmentResults: [],\n        deleteAttachmentResults: []\n      }\n    };\n  });\n  return _g.apply(this, arguments);\n}\n\nfunction b(_x8, _x9, _x10) {\n  return _b.apply(this, arguments);\n}\n\nfunction _b() {\n  _b = _asyncToGenerator(function* (e, r, i) {\n    const o = r && (r.addFeatures || r.updateFeatures || r.deleteFeatures),\n          n = r && (r.addAttachments || r.updateAttachments || r.deleteAttachments),\n          d = s(e.infoFor3D);\n    if (!r || !o && !n) throw new a(`${e.type}-layer:missing-parameters`, \"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");\n    const l = m(e);\n    if (!l.data.isVersioned && i?.gdbVersion) throw new a(`${e.type}-layer:invalid-parameter`, \"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");\n    if (!l.editing.supportsRollbackOnFailure && i?.rollbackOnFailureEnabled) throw new a(`${e.type}-layer:invalid-parameter`, \"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");\n    if (!l.editing.supportsGlobalId && i?.globalIdUsed) throw new a(`${e.type}-layer:invalid-parameter`, \"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");\n    if (!l.editing.supportsGlobalId && n) throw new a(`${e.type}-layer:invalid-parameter`, \"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");\n    if (!i?.globalIdUsed && n) throw new a(`${e.type}-layer:invalid-parameter`, \"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");\n    const u = { ...i\n    };\n    if (null != u.rollbackOnFailureEnabled || l.editing.supportsRollbackOnFailure || (u.rollbackOnFailureEnabled = !0), !1 === u.rollbackOnFailureEnabled && \"original-and-current-features\" === u.returnServiceEditsOption) throw new a(`${e.type}-layer:invalid-parameter`, \"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true.\");\n    if (!l.editing.supportsReturnServiceEditsInSourceSpatialReference && u.returnServiceEditsInSourceSR) throw new a(`${e.type}-layer:invalid-parameter`, \"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");\n    if (u.returnServiceEditsInSourceSR && \"original-and-current-features\" !== u.returnServiceEditsOption) throw new a(`${e.type}-layer:invalid-parameter`, \"'returnServiceEditsOption' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");\n    const p = { ...r\n    };\n    if (p.addFeatures = r && t.isCollection(r.addFeatures) ? r.addFeatures.toArray() : p.addFeatures || [], p.updateFeatures = r && t.isCollection(r.updateFeatures) ? r.updateFeatures.toArray() : p.updateFeatures || [], p.deleteFeatures = r && t.isCollection(r.deleteFeatures) ? r.deleteFeatures.toArray() : p.deleteFeatures || [], p.addFeatures.length && !l.operations.supportsAdd) throw new a(`${e.type}-layer:unsupported-operation`, \"Layer does not support adding features.\");\n    if (p.updateFeatures.length && !l.operations.supportsUpdate) throw new a(`${e.type}-layer:unsupported-operation`, \"Layer does not support updating features.\");\n    if (p.deleteFeatures.length && !l.operations.supportsDelete) throw new a(`${e.type}-layer:unsupported-operation`, \"Layer does not support deleting features.\");\n    p.addAttachments = p.addAttachments || [], p.updateAttachments = p.updateAttachments || [], p.deleteAttachments = p.deleteAttachments || [], p.addFeatures = p.addFeatures.map(S), p.updateFeatures = p.updateFeatures.map(S), p.addAssets = [];\n    const c = i?.globalIdUsed || d;\n    p.addFeatures.forEach(t => F(t, e, c)), p.updateFeatures.forEach(t => v(t, e, c)), p.deleteFeatures.forEach(t => A(t, e, c)), p.addAttachments.forEach(t => I(t, e)), p.updateAttachments.forEach(t => I(t, e)), d && (yield $(p, e));\n    return {\n      edits: yield E(p),\n      options: u\n    };\n  });\n  return _b.apply(this, arguments);\n}\n\nfunction w(e, t, r) {\n  if (r) {\n    if (\"attributes\" in e && !e.attributes[t.globalIdField]) throw new a(`${t.type}-layer:invalid-parameter`, \"Feature should have 'globalId' when 'globalIdUsed' is true\");\n    if (!(\"attributes\" in e) && !e.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"'globalId' of the feature should be passed when 'globalIdUsed' is true\");\n  }\n\n  if (\"geometry\" in e && s(e.geometry)) {\n    if (e.geometry.hasZ && !1 === t.capabilities?.data.supportsZ) throw new a(`${t.type}-layer:z-unsupported`, \"Layer does not support z values while feature has z values.\");\n    if (e.geometry.hasM && !1 === t.capabilities?.data.supportsM) throw new a(`${t.type}-layer:m-unsupported`, \"Layer does not support m values while feature has m values.\");\n  }\n}\n\nfunction F(e, t, a) {\n  w(e, t, a);\n}\n\nfunction A(e, t, a) {\n  w(e, t, a);\n}\n\nfunction v(e, t, r) {\n  w(e, t, r);\n  const i = m(t);\n  if (\"geometry\" in e && s(e.geometry) && !i?.editing.supportsGeometryUpdate) throw new a(`${t.type}-layer:unsupported-operation`, \"Layer does not support geometry updates.\");\n}\n\nfunction I(e, t) {\n  const {\n    feature: r,\n    attachment: s\n  } = e;\n  if (!r || \"attributes\" in r && !r.attributes[t.globalIdField]) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have reference to a feature with 'globalId'\");\n  if (!(\"attributes\" in r) && !r.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have reference to 'globalId' of the parent feature\");\n  if (!s.globalId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have 'globalId'\");\n  if (!s.data && !s.uploadId) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment should have 'data' or 'uploadId'\");\n  if (!(s.data instanceof File && !!s.data.name) && !s.name) throw new a(`${t.type}-layer:invalid-parameter`, \"'name' is required when attachment is specified as Base64 encoded string using 'data'\");\n  if (!t.capabilities?.editing.supportsUploadWithItemId && s.uploadId) throw new a(`${t.type}-layer:invalid-parameter`, \"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");\n\n  if (\"string\" == typeof s.data) {\n    const e = o(s.data);\n    if (e && !e.isBase64) throw new a(`${t.type}-layer:invalid-parameter`, \"Attachment 'data' should be a Blob, File or Base64 encoded string\");\n  }\n}\n\nfunction E(_x11) {\n  return _E.apply(this, arguments);\n}\n\nfunction _E() {\n  _E = _asyncToGenerator(function* (e) {\n    const t = e.addFeatures ?? [],\n          a = e.updateFeatures ?? [],\n          r = t.concat(a).map(e => e.geometry),\n          s = yield d(r),\n          i = t.length,\n          o = a.length;\n    return s.slice(0, i).forEach((e, a) => t[a].geometry = e), s.slice(i, i + o).forEach((e, t) => a[t].geometry = e), e;\n  });\n  return _E.apply(this, arguments);\n}\n\nfunction S(t) {\n  const a = new e();\n  return t.attributes || (t.attributes = {}), a.geometry = t.geometry, a.attributes = t.attributes, a;\n}\n\nfunction $(_x12, _x13) {\n  return _$.apply(this, arguments);\n}\n\nfunction _$() {\n  _$ = _asyncToGenerator(function* (e, t) {\n    if (i(t.infoFor3D)) return;\n    const {\n      infoFor3D: a\n    } = t;\n    let r = !1;\n\n    for (const i of a.editFormats) if (i === c.GLTF_BINARY) {\n      r = !0;\n      break;\n    }\n\n    const s = [];\n\n    for (const i of e.addFeatures ?? []) s.push(R(i, e, t, r));\n\n    for (const i of e.updateFeatures ?? []) s.push(R(i, e, t, r));\n\n    const o = yield Promise.allSettled(s);\n\n    for (const i of o) if (\"rejected\" === i.status) throw i.reason;\n  });\n  return _$.apply(this, arguments);\n}\n\nfunction R(_x14, _x15, _x16, _x17) {\n  return _R.apply(this, arguments);\n}\n\nfunction _R() {\n  _R = _asyncToGenerator(function* (e, t, r, o) {\n    if (i(e.geometry) || \"mesh\" !== e.geometry.type) return;\n    const d = e.geometry,\n          u = r.globalIdField;\n    if (s(r.parsedUrl) && s(d.external) && Array.isArray(d.external.source) && 1 === d.external.source.length && \"source\" in d.external.source[0] && \"string\" == typeof d.external.source[0].source && d.external.source[0].source.startsWith(r.parsedUrl.path)) return;\n    if (!o) throw new a(`${r.type}-layer:binary-gltf-asset-not-supported`, \"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");\n    const p = yield d.toBinaryGLTF({\n      ignoreLocalTransform: !0\n    }),\n          h = yield p.buffer(),\n          m = `{${n()}}`,\n          y = `${m}.glb`;\n    t.addAssets?.push({\n      featureGlobalId: e.getAttribute(u),\n      assetMapGlobalId: m,\n      assetName: y,\n      flags: s(d.transform) && d.transform.geographic ? l.PROJECT_VERTICES : 0,\n      data: h.data,\n      mimeType: h.type,\n      assetType: c.GLTF_BINARY,\n      feature: e\n    });\n  });\n  return _R.apply(this, arguments);\n}\n\nexport { f as applyEdits };","map":{"version":3,"names":["e","t","a","clone","r","isSome","s","isNone","i","dataComponents","o","generateUUID","n","normalizeCentralMeridian","d","AssetMapEditFlags","l","isEditBusLayer","u","editEventBus","p","AssetType","c","getEffectiveEditingEnabled","h","getEffectiveLayerCapabilities","m","y","applyEdits","f","edits","result","Promise","emit","results","g","filter","error","map","addedFeatures","addFeatureResults","updatedFeatures","updateFeatureResults","deletedFeatures","deleteFeatureResults","addedAttachments","addAttachmentResults","updatedAttachments","updateAttachmentResults","deletedAttachments","deleteAttachmentResults","exceededTransferLimit","editedFeatureResults","length","editedFeatures","layer","event","load","type","options","b","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","infoFor3D","data","isVersioned","gdbVersion","editing","supportsRollbackOnFailure","rollbackOnFailureEnabled","supportsGlobalId","globalIdUsed","returnServiceEditsOption","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","isCollection","toArray","operations","supportsAdd","supportsUpdate","supportsDelete","S","addAssets","forEach","F","v","A","I","$","E","w","attributes","globalIdField","globalId","geometry","hasZ","capabilities","supportsZ","hasM","supportsM","supportsGeometryUpdate","feature","attachment","uploadId","File","name","supportsUploadWithItemId","isBase64","concat","slice","editFormats","GLTF_BINARY","push","R","allSettled","status","reason","parsedUrl","external","Array","isArray","source","startsWith","path","toBinaryGLTF","ignoreLocalTransform","buffer","featureGlobalId","getAttribute","assetMapGlobalId","assetName","flags","transform","geographic","PROJECT_VERTICES","mimeType","assetType"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/graphics/editingSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import{isSome as s,isNone as i}from\"../../core/maybe.js\";import{dataComponents as o}from\"../../core/urlUtils.js\";import{generateUUID as n}from\"../../core/uuid.js\";import{normalizeCentralMeridian as d}from\"../../geometry/support/normalizeUtils.js\";import{AssetMapEditFlags as l}from\"./assetEditingSupport.js\";import{isEditBusLayer as u,editEventBus as p}from\"../mixins/EditBusLayer.js\";import{AssetType as c}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as h,getEffectiveLayerCapabilities as m}from\"../support/layerUtils.js\";function y(e){return e&&null!=e.applyEdits}async function f(e,t,a,s={}){let i,o;const n={edits:a,result:new Promise(((e,t)=>{i=e,o=t}))};e.emit(\"apply-edits\",n);try{const{results:o,edits:n}=await g(e,t,a,s),d=e=>e.filter((e=>!e.error)).map(r),l={edits:n,addedFeatures:d(o.addFeatureResults),updatedFeatures:d(o.updateFeatureResults),deletedFeatures:d(o.deleteFeatureResults),addedAttachments:d(o.addAttachmentResults),updatedAttachments:d(o.updateAttachmentResults),deletedAttachments:d(o.deleteAttachmentResults),exceededTransferLimit:!1};return o.editedFeatureResults?.length&&(l.editedFeatures=o.editedFeatureResults),(l.addedFeatures.length||l.updatedFeatures.length||l.deletedFeatures.length||l.addedAttachments.length||l.updatedAttachments.length||l.deletedAttachments.length)&&(e.emit(\"edits\",l),u(e)&&p.emit(\"edits\",{layer:e,event:l})),i(l),o}catch(d){throw o(d),d}}async function g(e,t,r,s){if(await e.load(),!y(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!h(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:o}=await b(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,o)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function b(e,r,i){const o=r&&(r.addFeatures||r.updateFeatures||r.deleteFeatures),n=r&&(r.addAttachments||r.updateAttachments||r.deleteAttachments),d=s(e.infoFor3D);if(!r||!o&&!n)throw new a(`${e.type}-layer:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");const l=m(e);if(!l.data.isVersioned&&i?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!l.editing.supportsRollbackOnFailure&&i?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");if(!l.editing.supportsGlobalId&&i?.globalIdUsed)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!l.editing.supportsGlobalId&&n)throw new a(`${e.type}-layer:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!i?.globalIdUsed&&n)throw new a(`${e.type}-layer:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\");const u={...i};if(null!=u.rollbackOnFailureEnabled||l.editing.supportsRollbackOnFailure||(u.rollbackOnFailureEnabled=!0),!1===u.rollbackOnFailureEnabled&&\"original-and-current-features\"===u.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true.\");if(!l.editing.supportsReturnServiceEditsInSourceSpatialReference&&u.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(u.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==u.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsOption' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const p={...r};if(p.addFeatures=r&&t.isCollection(r.addFeatures)?r.addFeatures.toArray():p.addFeatures||[],p.updateFeatures=r&&t.isCollection(r.updateFeatures)?r.updateFeatures.toArray():p.updateFeatures||[],p.deleteFeatures=r&&t.isCollection(r.deleteFeatures)?r.deleteFeatures.toArray():p.deleteFeatures||[],p.addFeatures.length&&!l.operations.supportsAdd)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support adding features.\");if(p.updateFeatures.length&&!l.operations.supportsUpdate)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support updating features.\");if(p.deleteFeatures.length&&!l.operations.supportsDelete)throw new a(`${e.type}-layer:unsupported-operation`,\"Layer does not support deleting features.\");p.addAttachments=p.addAttachments||[],p.updateAttachments=p.updateAttachments||[],p.deleteAttachments=p.deleteAttachments||[],p.addFeatures=p.addFeatures.map(S),p.updateFeatures=p.updateFeatures.map(S),p.addAssets=[];const c=i?.globalIdUsed||d;p.addFeatures.forEach((t=>F(t,e,c))),p.updateFeatures.forEach((t=>v(t,e,c))),p.deleteFeatures.forEach((t=>A(t,e,c))),p.addAttachments.forEach((t=>I(t,e))),p.updateAttachments.forEach((t=>I(t,e))),d&&await $(p,e);return{edits:await E(p),options:u}}function w(e,t,r){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Feature should have 'globalId' when 'globalIdUsed' is true\");if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(\"geometry\"in e&&s(e.geometry)){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function F(e,t,a){w(e,t,a)}function A(e,t,a){w(e,t,a)}function v(e,t,r){w(e,t,r);const i=m(t);if(\"geometry\"in e&&s(e.geometry)&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function I(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=o(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}async function E(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await d(r),i=t.length,o=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+o).forEach(((e,t)=>a[t].geometry=e)),e}function S(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function $(e,t){if(i(t.infoFor3D))return;const{infoFor3D:a}=t;let r=!1;for(const i of a.editFormats)if(i===c.GLTF_BINARY){r=!0;break}const s=[];for(const i of e.addFeatures??[])s.push(R(i,e,t,r));for(const i of e.updateFeatures??[])s.push(R(i,e,t,r));const o=await Promise.allSettled(s);for(const i of o)if(\"rejected\"===i.status)throw i.reason}async function R(e,t,r,o){if(i(e.geometry)||\"mesh\"!==e.geometry.type)return;const d=e.geometry,u=r.globalIdField;if(s(r.parsedUrl)&&s(d.external)&&Array.isArray(d.external.source)&&1===d.external.source.length&&\"source\"in d.external.source[0]&&\"string\"==typeof d.external.source[0].source&&d.external.source[0].source.startsWith(r.parsedUrl.path))return;if(!o)throw new a(`${r.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");const p=await d.toBinaryGLTF({ignoreLocalTransform:!0}),h=await p.buffer(),m=`{${n()}}`,y=`${m}.glb`;t.addAssets?.push({featureGlobalId:e.getAttribute(u),assetMapGlobalId:m,assetName:y,flags:s(d.transform)&&d.transform.geographic?l.PROJECT_VERTICES:0,data:h.data,mimeType:h.type,assetType:c.GLTF_BINARY,feature:e})}export{f as applyEdits};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}