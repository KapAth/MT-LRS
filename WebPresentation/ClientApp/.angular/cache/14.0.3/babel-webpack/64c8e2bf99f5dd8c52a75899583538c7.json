{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../config.js\";\nimport { id as r } from \"../../kernel.js\";\nimport s from \"../../request.js\";\nimport { result as i } from \"../../core/asyncUtils.js\";\nimport o from \"../../core/Error.js\";\nimport a from \"../../core/Logger.js\";\nimport { destroyMaybe as l, isSome as p, isNone as n } from \"../../core/maybe.js\";\nimport { throwIfAborted as u, isAbortError as c, throwIfAbortError as d } from \"../../core/promiseUtils.js\";\nimport { hasSameCanonicalPortal as m, normalize as h, hasSamePortal as f } from \"../../core/urlUtils.js\";\nimport { property as y } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { reader as g } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as I } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as v } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { getOwningPortalUrl as P } from \"../support/layerUtils.js\";\nimport U from \"../../portal/Portal.js\";\nimport w from \"../../portal/PortalItem.js\";\nimport j from \"../../portal/PortalUser.js\";\nimport { getUserPrivileges as E } from \"../../portal/support/portalItemUtils.js\";\n\nconst _ = _ => {\n  let H = class extends _ {\n    constructor() {\n      super(...arguments), this.resourceReferences = {\n        portalItem: null,\n        paths: []\n      }, this.userHasEditingPrivileges = !0, this.userHasFullEditingPrivileges = !1, this.userHasUpdateItemPrivileges = !1;\n    }\n\n    destroy() {\n      this.portalItem = l(this.portalItem);\n    }\n\n    set portalItem(t) {\n      t !== this._get(\"portalItem\") && (this.removeOrigin(\"portal-item\"), this._set(\"portalItem\", t));\n    }\n\n    readPortalItem(t, e, r) {\n      if (e.itemId) return new w({\n        id: e.itemId,\n        portal: r && r.portal\n      });\n    }\n\n    writePortalItem(t, e) {\n      t && t.id && (e.itemId = t.id);\n    }\n\n    loadFromPortal(t, e) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        if (_this.portalItem && _this.portalItem.id) try {\n          const r = yield import(\"../../portal/support/layersLoader.js\");\n          return u(e), yield r.load({\n            instance: _this,\n            supportedTypes: t.supportedTypes,\n            validateItem: t.validateItem,\n            supportsData: t.supportsData,\n            layerModuleTypeMap: t.layerModuleTypeMap\n          }, e);\n        } catch (r) {\n          throw c(r) || a.getLogger(_this.declaredClass).warn(`Failed to load layer (${_this.title}, ${_this.id}) portal item (${_this.portalItem.id})\\n  ${r}`), r;\n        }\n      })();\n    }\n\n    finishLoadEditablePortalLayer(t) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        _this2._set(\"userHasEditingPrivileges\", yield _this2._fetchUserHasEditingPrivileges(t).catch(t => (d(t), !0)));\n      })();\n    }\n\n    _setUserPrivileges(t, r) {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!e.userPrivilegesApplied) return _this3.finishLoadEditablePortalLayer(r);\n        if (_this3.url) try {\n          const {\n            features: {\n              edit: e,\n              fullEdit: s\n            },\n            content: {\n              updateItem: i\n            }\n          } = yield _this3._fetchUserPrivileges(t, r);\n          _this3._set(\"userHasEditingPrivileges\", e), _this3._set(\"userHasFullEditingPrivileges\", s), _this3._set(\"userHasUpdateItemPrivileges\", i);\n        } catch (s) {\n          d(s);\n        }\n      })();\n    }\n\n    _fetchUserPrivileges(t, e) {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        let s = _this4.portalItem;\n        if (!t || !s || !s.loaded || s.sourceUrl) return _this4._fetchFallbackUserPrivileges(e);\n        const i = t === s.id;\n        if (i && s.portal.user) return E(s);\n        let o, a;\n        if (i) o = s.portal.url;else try {\n          o = yield P(_this4.url, e);\n        } catch (c) {\n          d(c);\n        }\n        if (!o || !m(o, s.portal.url)) return _this4._fetchFallbackUserPrivileges(e);\n\n        try {\n          const t = p(e) ? e.signal : null;\n          a = yield r?.getCredential(`${o}/sharing`, {\n            prompt: !1,\n            signal: t\n          });\n        } catch (c) {\n          d(c);\n        }\n\n        const l = !0,\n              n = !1,\n              u = !1;\n        if (!a) return {\n          features: {\n            edit: l,\n            fullEdit: n\n          },\n          content: {\n            updateItem: u\n          }\n        };\n\n        try {\n          if (i ? yield s.reload() : (s = new w({\n            id: t,\n            portal: {\n              url: o\n            }\n          }), yield s.load(e)), s.portal.user) return E(s);\n        } catch (c) {\n          d(c);\n        }\n\n        return {\n          features: {\n            edit: l,\n            fullEdit: n\n          },\n          content: {\n            updateItem: u\n          }\n        };\n      })();\n    }\n\n    _fetchFallbackUserPrivileges(t) {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        let e = !0;\n\n        try {\n          e = yield _this5._fetchUserHasEditingPrivileges(t);\n        } catch (r) {\n          d(r);\n        }\n\n        return {\n          features: {\n            edit: e,\n            fullEdit: !1\n          },\n          content: {\n            updateItem: !1\n          }\n        };\n      })();\n    }\n\n    _fetchUserHasEditingPrivileges(t) {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* () {\n        const e = _this6.url ? r?.findCredential(_this6.url) : null;\n        if (!e) return !0;\n        const s = b.credential === e ? b.user : yield _this6._fetchEditingUser(t);\n        return b.credential = e, b.user = s, n(s) || null == s.privileges || s.privileges.includes(\"features:user:edit\");\n      })();\n    }\n\n    _fetchEditingUser(t) {\n      var _this7 = this;\n\n      return _asyncToGenerator(function* () {\n        const e = _this7.portalItem?.portal?.user;\n        if (e) return e;\n        const o = r.findServerInfo(_this7.url ?? \"\");\n        if (!o?.owningSystemUrl) return null;\n        const a = `${o.owningSystemUrl}/sharing/rest`,\n              l = U.getDefault();\n        if (l && l.loaded && h(l.restUrl) === h(a)) return l.user;\n        const n = `${a}/community/self`,\n              u = p(t) ? t.signal : null,\n              c = yield i(s(n, {\n          authMode: \"no-prompt\",\n          query: {\n            f: \"json\"\n          },\n          signal: u\n        }));\n        return c.ok ? j.fromJSON(c.value.data) : null;\n      })();\n    }\n\n    read(t, e) {\n      e && (e.layer = this), super.read(t, e);\n    }\n\n    write(t, e) {\n      const r = e && e.portal,\n            s = this.portalItem && this.portalItem.id && (this.portalItem.portal || U.getDefault());\n      return r && s && !f(s.restUrl, r.restUrl) ? (e.messages && e.messages.push(new o(\"layer:cross-portal\", `The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`, {\n        layer: this\n      })), null) : super.write(t, { ...e,\n        layer: this\n      });\n    }\n\n  };\n  return t([y({\n    type: w\n  })], H.prototype, \"portalItem\", null), t([g(\"web-document\", \"portalItem\", [\"itemId\"])], H.prototype, \"readPortalItem\", null), t([v(\"web-document\", \"portalItem\", {\n    itemId: {\n      type: String\n    }\n  })], H.prototype, \"writePortalItem\", null), t([y({\n    clonable: !1\n  })], H.prototype, \"resourceReferences\", void 0), t([y({\n    type: Boolean,\n    readOnly: !0\n  })], H.prototype, \"userHasEditingPrivileges\", void 0), t([y({\n    type: Boolean,\n    readOnly: !0\n  })], H.prototype, \"userHasFullEditingPrivileges\", void 0), t([y({\n    type: Boolean,\n    readOnly: !0\n  })], H.prototype, \"userHasUpdateItemPrivileges\", void 0), H = t([I(\"esri.layers.mixins.PortalLayer\")], H), H;\n},\n      b = {\n  credential: null,\n  user: null\n};\n\nexport { _ as PortalLayer };","map":{"version":3,"names":["_","t","e","id","r","s","result","i","o","a","destroyMaybe","l","isSome","p","isNone","n","throwIfAborted","u","isAbortError","c","throwIfAbortError","d","hasSameCanonicalPortal","m","normalize","h","hasSamePortal","f","property","y","reader","g","subclass","I","writer","v","getOwningPortalUrl","P","U","w","j","getUserPrivileges","E","H","constructor","arguments","resourceReferences","portalItem","paths","userHasEditingPrivileges","userHasFullEditingPrivileges","userHasUpdateItemPrivileges","destroy","_get","removeOrigin","_set","readPortalItem","itemId","portal","writePortalItem","loadFromPortal","load","instance","supportedTypes","validateItem","supportsData","layerModuleTypeMap","getLogger","declaredClass","warn","title","finishLoadEditablePortalLayer","_fetchUserHasEditingPrivileges","catch","_setUserPrivileges","userPrivilegesApplied","url","features","edit","fullEdit","content","updateItem","_fetchUserPrivileges","loaded","sourceUrl","_fetchFallbackUserPrivileges","user","signal","getCredential","prompt","reload","findCredential","b","credential","_fetchEditingUser","privileges","includes","findServerInfo","owningSystemUrl","getDefault","restUrl","authMode","query","ok","fromJSON","value","data","read","layer","write","messages","push","type","prototype","String","clonable","Boolean","readOnly","PortalLayer"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/mixins/PortalLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../config.js\";import{id as r}from\"../../kernel.js\";import s from\"../../request.js\";import{result as i}from\"../../core/asyncUtils.js\";import o from\"../../core/Error.js\";import a from\"../../core/Logger.js\";import{destroyMaybe as l,isSome as p,isNone as n}from\"../../core/maybe.js\";import{throwIfAborted as u,isAbortError as c,throwIfAbortError as d}from\"../../core/promiseUtils.js\";import{hasSameCanonicalPortal as m,normalize as h,hasSamePortal as f}from\"../../core/urlUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{reader as g}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as I}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as v}from\"../../core/accessorSupport/decorators/writer.js\";import{getOwningPortalUrl as P}from\"../support/layerUtils.js\";import U from\"../../portal/Portal.js\";import w from\"../../portal/PortalItem.js\";import j from\"../../portal/PortalUser.js\";import{getUserPrivileges as E}from\"../../portal/support/portalItemUtils.js\";const _=_=>{let H=class extends _{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=l(this.portalItem)}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,e,r){if(e.itemId)return new w({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const r=await import(\"../../portal/support/layersLoader.js\");return u(e),await r.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(r){throw c(r)||a.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${r}`),r}}async finishLoadEditablePortalLayer(t){this._set(\"userHasEditingPrivileges\",await this._fetchUserHasEditingPrivileges(t).catch((t=>(d(t),!0))))}async _setUserPrivileges(t,r){if(!e.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:e,fullEdit:s},content:{updateItem:i}}=await this._fetchUserPrivileges(t,r);this._set(\"userHasEditingPrivileges\",e),this._set(\"userHasFullEditingPrivileges\",s),this._set(\"userHasUpdateItemPrivileges\",i)}catch(s){d(s)}}async _fetchUserPrivileges(t,e){let s=this.portalItem;if(!t||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(e);const i=t===s.id;if(i&&s.portal.user)return E(s);let o,a;if(i)o=s.portal.url;else try{o=await P(this.url,e)}catch(c){d(c)}if(!o||!m(o,s.portal.url))return this._fetchFallbackUserPrivileges(e);try{const t=p(e)?e.signal:null;a=await(r?.getCredential(`${o}/sharing`,{prompt:!1,signal:t}))}catch(c){d(c)}const l=!0,n=!1,u=!1;if(!a)return{features:{edit:l,fullEdit:n},content:{updateItem:u}};try{if(i?await s.reload():(s=new w({id:t,portal:{url:o}}),await s.load(e)),s.portal.user)return E(s)}catch(c){d(c)}return{features:{edit:l,fullEdit:n},content:{updateItem:u}}}async _fetchFallbackUserPrivileges(t){let e=!0;try{e=await this._fetchUserHasEditingPrivileges(t)}catch(r){d(r)}return{features:{edit:e,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(t){const e=this.url?r?.findCredential(this.url):null;if(!e)return!0;const s=b.credential===e?b.user:await this._fetchEditingUser(t);return b.credential=e,b.user=s,n(s)||null==s.privileges||s.privileges.includes(\"features:user:edit\")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const o=r.findServerInfo(this.url??\"\");if(!o?.owningSystemUrl)return null;const a=`${o.owningSystemUrl}/sharing/rest`,l=U.getDefault();if(l&&l.loaded&&h(l.restUrl)===h(a))return l.user;const n=`${a}/community/self`,u=p(t)?t.signal:null,c=await i(s(n,{authMode:\"no-prompt\",query:{f:\"json\"},signal:u}));return c.ok?j.fromJSON(c.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||U.getDefault());return r&&s&&!f(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new o(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return t([y({type:w})],H.prototype,\"portalItem\",null),t([g(\"web-document\",\"portalItem\",[\"itemId\"])],H.prototype,\"readPortalItem\",null),t([v(\"web-document\",\"portalItem\",{itemId:{type:String}})],H.prototype,\"writePortalItem\",null),t([y({clonable:!1})],H.prototype,\"resourceReferences\",void 0),t([y({type:Boolean,readOnly:!0})],H.prototype,\"userHasEditingPrivileges\",void 0),t([y({type:Boolean,readOnly:!0})],H.prototype,\"userHasFullEditingPrivileges\",void 0),t([y({type:Boolean,readOnly:!0})],H.prototype,\"userHasUpdateItemPrivileges\",void 0),H=t([I(\"esri.layers.mixins.PortalLayer\")],H),H},b={credential:null,user:null};export{_ as PortalLayer};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}