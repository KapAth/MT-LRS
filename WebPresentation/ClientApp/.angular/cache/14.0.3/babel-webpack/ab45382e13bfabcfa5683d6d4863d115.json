{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { get as r, isSome as a, isNone as o } from \"../../core/maybe.js\";\nimport { join as s, getPathExtension as n } from \"../../core/urlUtils.js\";\n\nfunction c(_x) {\n  return _c.apply(this, arguments);\n}\n\nfunction _c() {\n  _c = _asyncToGenerator(function* (e, t = {}, a) {\n    yield e.load(a);\n    const o = s(e.itemUrl, \"resources\"),\n          {\n      start: n = 1,\n      num: c = 10,\n      sortOrder: u = \"asc\",\n      sortField: i = \"created\"\n    } = t,\n          l = {\n      query: {\n        start: n,\n        num: c,\n        sortOrder: u,\n        sortField: i,\n        token: e.apiKey\n      },\n      signal: r(a, \"signal\")\n    },\n          p = yield e.portal.request(o, l);\n    return {\n      total: p.total,\n      nextStart: p.nextStart,\n      resources: p.resources.map(({\n        created: t,\n        size: r,\n        resource: a\n      }) => ({\n        created: new Date(t),\n        size: r,\n        resource: e.resourceFromPath(a)\n      }))\n    };\n  });\n  return _c.apply(this, arguments);\n}\n\nfunction u(_x2, _x3, _x4, _x5) {\n  return _u.apply(this, arguments);\n}\n\nfunction _u() {\n  _u = _asyncToGenerator(function* (e, o, n, c) {\n    if (!e.hasPath()) throw new t(`portal-item-resource-${o}:invalid-path`, \"Resource does not have a valid path\");\n    const u = e.portalItem;\n    yield u.load(c);\n    const i = s(u.userItemUrl, \"add\" === o ? \"addResources\" : \"updateResources\"),\n          [l, d] = p(e.path),\n          m = yield h(n),\n          f = new FormData();\n    return l && \".\" !== l && f.append(\"resourcesPrefix\", l), a(c) && c.compress && f.append(\"compress\", \"true\"), f.append(\"fileName\", d), f.append(\"file\", m, d), f.append(\"f\", \"json\"), a(c) && c.access && f.append(\"access\", c.access), yield u.portal.request(i, {\n      method: \"post\",\n      body: f,\n      signal: r(c, \"signal\")\n    }), e;\n  });\n  return _u.apply(this, arguments);\n}\n\nfunction i(_x6, _x7, _x8) {\n  return _i.apply(this, arguments);\n}\n\nfunction _i() {\n  _i = _asyncToGenerator(function* (e, a, o) {\n    if (!a.hasPath()) throw new t(\"portal-item-resources-remove:invalid-path\", \"Resource does not have a valid path\");\n    yield e.load(o);\n    const n = s(e.userItemUrl, \"removeResources\");\n    yield e.portal.request(n, {\n      method: \"post\",\n      query: {\n        resource: a.path\n      },\n      signal: r(o, \"signal\")\n    }), a.portalItem = null;\n  });\n  return _i.apply(this, arguments);\n}\n\nfunction l(_x9, _x10) {\n  return _l.apply(this, arguments);\n}\n\nfunction _l() {\n  _l = _asyncToGenerator(function* (e, t) {\n    yield e.load(t);\n    const a = s(e.userItemUrl, \"removeResources\");\n    return e.portal.request(a, {\n      method: \"post\",\n      query: {\n        deleteAll: !0\n      },\n      signal: r(t, \"signal\")\n    });\n  });\n  return _l.apply(this, arguments);\n}\n\nfunction p(e) {\n  const t = e.lastIndexOf(\"/\");\n  return -1 === t ? [\".\", e] : [e.slice(0, t), e.slice(t + 1)];\n}\n\nfunction d(e) {\n  const [t, r] = m(e),\n        [a, o] = p(t);\n  return [a, o, r];\n}\n\nfunction m(e) {\n  const t = n(e);\n  return o(t) ? [e, \"\"] : [e.slice(0, e.length - t.length - 1), `.${t}`];\n}\n\nfunction h(_x11) {\n  return _h.apply(this, arguments);\n}\n\nfunction _h() {\n  _h = _asyncToGenerator(function* (t) {\n    if (t instanceof Blob) return t;\n    return (yield e(t.url, {\n      responseType: \"blob\"\n    })).data;\n  });\n  return _h.apply(this, arguments);\n}\n\nfunction f(e, t) {\n  if (!e.hasPath()) return null;\n  const [r,, a] = d(e.path);\n  return e.portalItem.resourceFromPath(s(r, t + a));\n}\n\nfunction w(e, t) {\n  if (!e.hasPath()) return null;\n  const [r,, a] = d(e.path);\n  return e.portalItem.resourceFromPath(s(r, t + a));\n}\n\nexport { u as addOrUpdateResource, h as contentToBlob, c as fetchResources, f as getSiblingOfSameType, w as getSiblingOfSameTypeI, l as removeAllResources, i as removeResource, d as splitPrefixFileNameAndExtension };","map":{"version":3,"names":["e","t","get","r","isSome","a","isNone","o","join","s","getPathExtension","n","c","load","itemUrl","start","num","sortOrder","u","sortField","i","l","query","token","apiKey","signal","p","portal","request","total","nextStart","resources","map","created","size","resource","Date","resourceFromPath","hasPath","portalItem","userItemUrl","d","path","m","h","f","FormData","append","compress","access","method","body","deleteAll","lastIndexOf","slice","length","Blob","url","responseType","data","w","addOrUpdateResource","contentToBlob","fetchResources","getSiblingOfSameType","getSiblingOfSameTypeI","removeAllResources","removeResource","splitPrefixFileNameAndExtension"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/portal/support/resourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{get as r,isSome as a,isNone as o}from\"../../core/maybe.js\";import{join as s,getPathExtension as n}from\"../../core/urlUtils.js\";async function c(e,t={},a){await e.load(a);const o=s(e.itemUrl,\"resources\"),{start:n=1,num:c=10,sortOrder:u=\"asc\",sortField:i=\"created\"}=t,l={query:{start:n,num:c,sortOrder:u,sortField:i,token:e.apiKey},signal:r(a,\"signal\")},p=await e.portal.request(o,l);return{total:p.total,nextStart:p.nextStart,resources:p.resources.map((({created:t,size:r,resource:a})=>({created:new Date(t),size:r,resource:e.resourceFromPath(a)})))}}async function u(e,o,n,c){if(!e.hasPath())throw new t(`portal-item-resource-${o}:invalid-path`,\"Resource does not have a valid path\");const u=e.portalItem;await u.load(c);const i=s(u.userItemUrl,\"add\"===o?\"addResources\":\"updateResources\"),[l,d]=p(e.path),m=await h(n),f=new FormData;return l&&\".\"!==l&&f.append(\"resourcesPrefix\",l),a(c)&&c.compress&&f.append(\"compress\",\"true\"),f.append(\"fileName\",d),f.append(\"file\",m,d),f.append(\"f\",\"json\"),a(c)&&c.access&&f.append(\"access\",c.access),await u.portal.request(i,{method:\"post\",body:f,signal:r(c,\"signal\")}),e}async function i(e,a,o){if(!a.hasPath())throw new t(\"portal-item-resources-remove:invalid-path\",\"Resource does not have a valid path\");await e.load(o);const n=s(e.userItemUrl,\"removeResources\");await e.portal.request(n,{method:\"post\",query:{resource:a.path},signal:r(o,\"signal\")}),a.portalItem=null}async function l(e,t){await e.load(t);const a=s(e.userItemUrl,\"removeResources\");return e.portal.request(a,{method:\"post\",query:{deleteAll:!0},signal:r(t,\"signal\")})}function p(e){const t=e.lastIndexOf(\"/\");return-1===t?[\".\",e]:[e.slice(0,t),e.slice(t+1)]}function d(e){const[t,r]=m(e),[a,o]=p(t);return[a,o,r]}function m(e){const t=n(e);return o(t)?[e,\"\"]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function h(t){if(t instanceof Blob)return t;return(await e(t.url,{responseType:\"blob\"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}function w(e,t){if(!e.hasPath())return null;const[r,,a]=d(e.path);return e.portalItem.resourceFromPath(s(r,t+a))}export{u as addOrUpdateResource,h as contentToBlob,c as fetchResources,f as getSiblingOfSameType,w as getSiblingOfSameTypeI,l as removeAllResources,i as removeResource,d as splitPrefixFileNameAndExtension};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}