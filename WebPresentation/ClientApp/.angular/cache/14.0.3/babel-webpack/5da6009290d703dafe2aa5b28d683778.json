{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport e from \"../../../core/Error.js\";\nimport { isSome as s } from \"../../../core/maybe.js\";\nimport { eachAlways as r } from \"../../../core/promiseUtils.js\";\nimport { property as i } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../RasterInfo.js\";\nimport m from \"./BaseRaster.js\";\nimport { split as n } from \"../rasterFunctions/pixelUtils.js\";\nimport { estimateStatisticsHistograms as l } from \"../rasterFunctions/stretchUtils.js\";\nimport p from \"../../../geometry/Extent.js\";\nimport c from \"../../../geometry/SpatialReference.js\";\nlet h = class extends m {\n  constructor() {\n    super(...arguments), this.datasetFormat = \"MEMORY\", this.data = null;\n  }\n\n  open(t) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.init();\n      const e = _this.data,\n            {\n        pixelBlock: s,\n        statistics: r,\n        histograms: i,\n        name: o,\n        keyProperties: m,\n        nativeExtent: n,\n        transform: l\n      } = _this.data,\n            {\n        width: h,\n        height: f,\n        pixelType: d\n      } = s,\n            u = e.extent ?? new p({\n        xmin: -.5,\n        ymin: .5,\n        xmax: h - .5,\n        ymax: f - .5,\n        spatialReference: new c({\n          wkid: 3857\n        })\n      }),\n            y = e.isPseudoSpatialReference ?? !e.extent,\n            x = {\n        x: u.width / h,\n        y: u.height / f\n      },\n            g = new a({\n        width: h,\n        height: f,\n        pixelType: d,\n        extent: u,\n        nativeExtent: n,\n        transform: l,\n        pixelSize: x,\n        spatialReference: u.spatialReference,\n        bandCount: s.pixels.length,\n        keyProperties: m || {},\n        statistics: r,\n        isPseudoSpatialReference: y,\n        histograms: i\n      });\n      _this.createRemoteDatasetStorageInfo(g, 512, 512), _this._set(\"rasterInfo\", g), _this.updateTileInfo(), yield _this._buildInMemoryRaster(s, {\n        width: 512,\n        height: 512\n      }, t), _this.datasetName = o, _this.url = \"/InMemory/\" + o;\n    })();\n  }\n\n  fetchRawTile(t, e, s, r = {}) {\n    const i = this._pixelBlockTiles.get(`${t}/${e}/${s}`);\n\n    return Promise.resolve(i);\n  }\n\n  _buildInMemoryRaster(t, i, o) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const a = _this2.rasterInfo.storageInfo.maximumPyramidLevel,\n            m = _this2.rasterJobHandler ? _this2.rasterJobHandler.split({\n        pixelBlock: t,\n        tileSize: i,\n        maximumPyramidLevel: a\n      }, o) : Promise.resolve(n(t, i, a)),\n            p = s(_this2.rasterInfo.statistics),\n            c = s(_this2.rasterInfo.histograms),\n            h = p ? Promise.resolve({\n        statistics: null,\n        histograms: null\n      }) : _this2.rasterJobHandler ? _this2.rasterJobHandler.estimateStatisticsHistograms({\n        pixelBlock: t\n      }, o) : Promise.resolve(l(t)),\n            f = yield r([m, h]);\n      if (!f[0].value && f[1].value) throw new e(\"inmemory-raster:open\", \"failed to build in memory raster\");\n      _this2._pixelBlockTiles = f[0].value, p || (_this2.rasterInfo.statistics = f[1].value?.statistics), c || (_this2.rasterInfo.histograms = f[1].value?.histograms);\n    })();\n  }\n\n};\nt([i({\n  type: String,\n  json: {\n    write: !0\n  }\n})], h.prototype, \"datasetFormat\", void 0), t([i()], h.prototype, \"data\", void 0), h = t([o(\"esri.layers.support.rasterDatasets.InMemoryRaster\")], h);\nconst f = h;\nexport { f as default };","map":{"version":3,"names":["_","t","e","isSome","s","eachAlways","r","property","i","subclass","o","a","m","split","n","estimateStatisticsHistograms","l","p","c","h","constructor","arguments","datasetFormat","data","open","init","pixelBlock","statistics","histograms","name","keyProperties","nativeExtent","transform","width","height","f","pixelType","d","u","extent","xmin","ymin","xmax","ymax","spatialReference","wkid","y","isPseudoSpatialReference","x","g","pixelSize","bandCount","pixels","length","createRemoteDatasetStorageInfo","_set","updateTileInfo","_buildInMemoryRaster","datasetName","url","fetchRawTile","_pixelBlockTiles","get","Promise","resolve","rasterInfo","storageInfo","maximumPyramidLevel","rasterJobHandler","tileSize","value","type","String","json","write","prototype","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/support/rasterDatasets/InMemoryRaster.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{isSome as s}from\"../../../core/maybe.js\";import{eachAlways as r}from\"../../../core/promiseUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../RasterInfo.js\";import m from\"./BaseRaster.js\";import{split as n}from\"../rasterFunctions/pixelUtils.js\";import{estimateStatisticsHistograms as l}from\"../rasterFunctions/stretchUtils.js\";import p from\"../../../geometry/Extent.js\";import c from\"../../../geometry/SpatialReference.js\";let h=class extends m{constructor(){super(...arguments),this.datasetFormat=\"MEMORY\",this.data=null}async open(t){await this.init();const e=this.data,{pixelBlock:s,statistics:r,histograms:i,name:o,keyProperties:m,nativeExtent:n,transform:l}=this.data,{width:h,height:f,pixelType:d}=s,u=e.extent??new p({xmin:-.5,ymin:.5,xmax:h-.5,ymax:f-.5,spatialReference:new c({wkid:3857})}),y=e.isPseudoSpatialReference??!e.extent,x={x:u.width/h,y:u.height/f},g=new a({width:h,height:f,pixelType:d,extent:u,nativeExtent:n,transform:l,pixelSize:x,spatialReference:u.spatialReference,bandCount:s.pixels.length,keyProperties:m||{},statistics:r,isPseudoSpatialReference:y,histograms:i});this.createRemoteDatasetStorageInfo(g,512,512),this._set(\"rasterInfo\",g),this.updateTileInfo(),await this._buildInMemoryRaster(s,{width:512,height:512},t),this.datasetName=o,this.url=\"/InMemory/\"+o}fetchRawTile(t,e,s,r={}){const i=this._pixelBlockTiles.get(`${t}/${e}/${s}`);return Promise.resolve(i)}async _buildInMemoryRaster(t,i,o){const a=this.rasterInfo.storageInfo.maximumPyramidLevel,m=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:t,tileSize:i,maximumPyramidLevel:a},o):Promise.resolve(n(t,i,a)),p=s(this.rasterInfo.statistics),c=s(this.rasterInfo.histograms),h=p?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:t},o):Promise.resolve(l(t)),f=await r([m,h]);if(!f[0].value&&f[1].value)throw new e(\"inmemory-raster:open\",\"failed to build in memory raster\");this._pixelBlockTiles=f[0].value,p||(this.rasterInfo.statistics=f[1].value?.statistics),c||(this.rasterInfo.histograms=f[1].value?.histograms)}};t([i({type:String,json:{write:!0}})],h.prototype,\"datasetFormat\",void 0),t([i()],h.prototype,\"data\",void 0),h=t([o(\"esri.layers.support.rasterDatasets.InMemoryRaster\")],h);const f=h;export{f as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}