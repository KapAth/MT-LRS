{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport i from \"../../../../core/PooledArray.js\";\nimport { h as t, d as e } from \"../../../../chunks/vec3.js\";\nimport { f as s, a as n, c as r } from \"../../../../chunks/vec3f64.js\";\nimport { assert as h } from \"./Util.js\";\n\nclass o {\n  constructor(i, e, o, c) {\n    this.primitiveIndices = i, this._numIndexPerPrimitive = e, this.indices = o, this.position = c, this._children = void 0, h(i.length >= 1), h(o.length % this._numIndexPerPrimitive == 0), h(o.length >= i.length * this._numIndexPerPrimitive), h(3 === c.size || 4 === c.size);\n    const {\n      data: d,\n      size: l\n    } = c,\n          m = i.length;\n    let u = l * o[this._numIndexPerPrimitive * i[0]];\n    a.clear(), a.push(u);\n    const f = s(d[u], d[u + 1], d[u + 2]),\n          x = n(f);\n\n    for (let t = 0; t < m; ++t) {\n      const e = this._numIndexPerPrimitive * i[t];\n\n      for (let i = 0; i < this._numIndexPerPrimitive; ++i) {\n        u = l * o[e + i], a.push(u);\n        let t = d[u];\n        f[0] = Math.min(t, f[0]), x[0] = Math.max(t, x[0]), t = d[u + 1], f[1] = Math.min(t, f[1]), x[1] = Math.max(t, x[1]), t = d[u + 2], f[2] = Math.min(t, f[2]), x[2] = Math.max(t, x[2]);\n      }\n    }\n\n    this.bbMin = f, this.bbMax = x;\n    const P = t(r(), this.bbMin, this.bbMax, .5);\n    this.radius = .5 * Math.max(Math.max(x[0] - f[0], x[1] - f[1]), x[2] - f[2]);\n    let v = this.radius * this.radius;\n\n    for (let t = 0; t < a.length; ++t) {\n      u = a.getItemAt(t);\n      const i = d[u] - P[0],\n            e = d[u + 1] - P[1],\n            s = d[u + 2] - P[2],\n            n = i * i + e * e + s * s;\n      if (n <= v) continue;\n      const r = Math.sqrt(n),\n            h = .5 * (r - this.radius);\n      this.radius = this.radius + h, v = this.radius * this.radius;\n      const o = h / r;\n      P[0] += i * o, P[1] += e * o, P[2] += s * o;\n    }\n\n    this.center = P, a.clear();\n  }\n\n  getChildren() {\n    if (this._children || e(this.bbMin, this.bbMax) <= 1) return this._children;\n    const i = t(r(), this.bbMin, this.bbMax, .5),\n          s = this.primitiveIndices.length,\n          n = new Uint8Array(s),\n          h = new Array(8);\n\n    for (let t = 0; t < 8; ++t) h[t] = 0;\n\n    const {\n      data: a,\n      size: c\n    } = this.position;\n\n    for (let t = 0; t < s; ++t) {\n      let e = 0;\n      const s = this._numIndexPerPrimitive * this.primitiveIndices[t];\n      let r = c * this.indices[s],\n          o = a[r],\n          d = a[r + 1],\n          l = a[r + 2];\n\n      for (let i = 1; i < this._numIndexPerPrimitive; ++i) {\n        r = c * this.indices[s + i];\n        const t = a[r],\n              e = a[r + 1],\n              n = a[r + 2];\n        t < o && (o = t), e < d && (d = e), n < l && (l = n);\n      }\n\n      o < i[0] && (e |= 1), d < i[1] && (e |= 2), l < i[2] && (e |= 4), n[t] = e, ++h[e];\n    }\n\n    let d = 0;\n\n    for (let t = 0; t < 8; ++t) h[t] > 0 && ++d;\n\n    if (d < 2) return;\n    const l = new Array(8);\n\n    for (let t = 0; t < 8; ++t) l[t] = h[t] > 0 ? new Uint32Array(h[t]) : void 0;\n\n    for (let t = 0; t < 8; ++t) h[t] = 0;\n\n    for (let t = 0; t < s; ++t) {\n      const i = n[t];\n      l[i][h[i]++] = this.primitiveIndices[t];\n    }\n\n    this._children = new Array();\n\n    for (let t = 0; t < 8; ++t) void 0 !== l[t] && this._children.push(new o(l[t], this._numIndexPerPrimitive, this.indices, this.position));\n\n    return this._children;\n  }\n\n  static prune() {\n    a.prune();\n  }\n\n}\n\nconst a = new i({\n  deallocator: null\n});\nexport { o as BoundingInfo };","map":{"version":3,"names":["i","h","t","d","e","f","s","a","n","c","r","assert","o","constructor","primitiveIndices","_numIndexPerPrimitive","indices","position","_children","length","size","data","l","m","u","clear","push","x","Math","min","max","bbMin","bbMax","P","radius","v","getItemAt","sqrt","center","getChildren","Uint8Array","Array","Uint32Array","prune","deallocator","BoundingInfo"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/3d/webgl-engine/lib/BoundingInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport i from\"../../../../core/PooledArray.js\";import{h as t,d as e}from\"../../../../chunks/vec3.js\";import{f as s,a as n,c as r}from\"../../../../chunks/vec3f64.js\";import{assert as h}from\"./Util.js\";class o{constructor(i,e,o,c){this.primitiveIndices=i,this._numIndexPerPrimitive=e,this.indices=o,this.position=c,this._children=void 0,h(i.length>=1),h(o.length%this._numIndexPerPrimitive==0),h(o.length>=i.length*this._numIndexPerPrimitive),h(3===c.size||4===c.size);const{data:d,size:l}=c,m=i.length;let u=l*o[this._numIndexPerPrimitive*i[0]];a.clear(),a.push(u);const f=s(d[u],d[u+1],d[u+2]),x=n(f);for(let t=0;t<m;++t){const e=this._numIndexPerPrimitive*i[t];for(let i=0;i<this._numIndexPerPrimitive;++i){u=l*o[e+i],a.push(u);let t=d[u];f[0]=Math.min(t,f[0]),x[0]=Math.max(t,x[0]),t=d[u+1],f[1]=Math.min(t,f[1]),x[1]=Math.max(t,x[1]),t=d[u+2],f[2]=Math.min(t,f[2]),x[2]=Math.max(t,x[2])}}this.bbMin=f,this.bbMax=x;const P=t(r(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(x[0]-f[0],x[1]-f[1]),x[2]-f[2]);let v=this.radius*this.radius;for(let t=0;t<a.length;++t){u=a.getItemAt(t);const i=d[u]-P[0],e=d[u+1]-P[1],s=d[u+2]-P[2],n=i*i+e*e+s*s;if(n<=v)continue;const r=Math.sqrt(n),h=.5*(r-this.radius);this.radius=this.radius+h,v=this.radius*this.radius;const o=h/r;P[0]+=i*o,P[1]+=e*o,P[2]+=s*o}this.center=P,a.clear()}getChildren(){if(this._children||e(this.bbMin,this.bbMax)<=1)return this._children;const i=t(r(),this.bbMin,this.bbMax,.5),s=this.primitiveIndices.length,n=new Uint8Array(s),h=new Array(8);for(let t=0;t<8;++t)h[t]=0;const{data:a,size:c}=this.position;for(let t=0;t<s;++t){let e=0;const s=this._numIndexPerPrimitive*this.primitiveIndices[t];let r=c*this.indices[s],o=a[r],d=a[r+1],l=a[r+2];for(let i=1;i<this._numIndexPerPrimitive;++i){r=c*this.indices[s+i];const t=a[r],e=a[r+1],n=a[r+2];t<o&&(o=t),e<d&&(d=e),n<l&&(l=n)}o<i[0]&&(e|=1),d<i[1]&&(e|=2),l<i[2]&&(e|=4),n[t]=e,++h[e]}let d=0;for(let t=0;t<8;++t)h[t]>0&&++d;if(d<2)return;const l=new Array(8);for(let t=0;t<8;++t)l[t]=h[t]>0?new Uint32Array(h[t]):void 0;for(let t=0;t<8;++t)h[t]=0;for(let t=0;t<s;++t){const i=n[t];l[i][h[i]++]=this.primitiveIndices[t]}this._children=new Array;for(let t=0;t<8;++t)void 0!==l[t]&&this._children.push(new o(l[t],this._numIndexPerPrimitive,this.indices,this.position));return this._children}static prune(){a.prune()}}const a=new i({deallocator:null});export{o as BoundingInfo};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}