{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../geometry.js\";\nimport e from \"../core/Error.js\";\nimport r from \"../core/Logger.js\";\nimport { isSome as t } from \"../core/maybe.js\";\nimport a from \"../geometry/SpatialReference.js\";\nconst s = r.getLogger(\"esri.support.arcadeOnDemand\");\nlet c;\n\nfunction i() {\n  return c || (c = _asyncToGenerator(function* () {\n    const e = yield import(\"./arcadeUtils.js\");\n    return {\n      arcade: e.arcade,\n      arcadeUtils: e,\n      Dictionary: e.Dictionary,\n      Feature: e.arcadeFeature\n    };\n  })()), c;\n}\n\nconst n = (e, r, t) => u.create(e, r, t, null, [\"$feature\"]),\n      o = (e, r, t) => u.create(e, r, t, null, [\"$feature\", \"$view\"]),\n      l = o,\n      p = (e, r, t, a) => u.create(e, r, t, a, [\"$feature\", \"$view\"]);\n\nclass u {\n  constructor(e, r, t, a, s, c, i) {\n    this.script = e, this.evaluate = a;\n    const n = Array.isArray(c) ? c : c.fields;\n    this.fields = n, this._syntaxTree = t, this._arcade = r, this._arcadeFeature = s, this._spatialReference = i, this._referencesGeometry = r.scriptTouchesGeometry(this._syntaxTree), this._referencesScale = this._arcade.referencesMember(this._syntaxTree, \"scale\");\n  }\n\n  static create(r, c, n, o, l, p) {\n    return _asyncToGenerator(function* () {\n      const {\n        arcade: m,\n        Feature: f,\n        Dictionary: d\n      } = yield i(),\n            y = a.fromJSON(c);\n      let h;\n\n      try {\n        h = m.parseScript(r, p);\n      } catch (A) {\n        return s.error(new e(\"arcade-bad-expression\", \"Failed to parse arcade script\", {\n          script: r,\n          error: A\n        })), null;\n      }\n\n      const w = l.reduce((e, r) => ({ ...e,\n        [r]: null\n      }), {});\n      let g = null;\n      t(o) && (g = new d(o), g.immutable = !0, w.$config = null);\n\n      const _ = m.scriptUsesGeometryEngine(h),\n            F = _ && m.enableGeometrySupport(),\n            S = m.scriptUsesFeatureSet(h) && m.enableFeatureSetSupport(),\n            $ = m.scriptIsAsync(h),\n            b = $ && m.enableAsyncSupport(),\n            v = {\n        vars: w,\n        spatialReference: y,\n        useAsync: !!b\n      };\n\n      yield Promise.all([F, S, b]);\n      const j = new Set();\n      yield m.loadDependentModules(j, h, null, $, _);\n      const G = new d();\n      G.immutable = !1, G.setField(\"scale\", 0);\n\n      const R = m.compileScript(h, v),\n            x = e => (\"$view\" in e && e.$view && (G.setField(\"scale\", \"object\" == typeof e.$view ? e.$view.scale : void 0), e.$view = G), g && (e.$config = g), R({\n        vars: e,\n        spatialReference: y\n      }));\n\n      return new u(r, m, h, x, new f(), n, y);\n    })();\n  }\n\n  repurposeFeature(e) {\n    return e.geometry && !e.geometry.spatialReference && (e.geometry.spatialReference = this._spatialReference), this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry, e.attributes, {\n      fields: this.fields\n    }), this._arcadeFeature;\n  }\n\n  referencesGeometry() {\n    return this._referencesGeometry;\n  }\n\n  referencesScale() {\n    return this._referencesScale;\n  }\n\n}\n\nexport { u as ArcadeExpression, p as createDictionaryExpression, n as createLabelExpression, o as createRendererExpression, l as createVVExpression, i as loadArcade };","map":{"version":3,"names":["e","r","isSome","t","a","s","getLogger","c","i","arcade","arcadeUtils","Dictionary","Feature","arcadeFeature","n","u","create","o","l","p","constructor","script","evaluate","Array","isArray","fields","_syntaxTree","_arcade","_arcadeFeature","_spatialReference","_referencesGeometry","scriptTouchesGeometry","_referencesScale","referencesMember","m","f","d","y","fromJSON","h","parseScript","A","error","w","reduce","g","immutable","$config","_","scriptUsesGeometryEngine","F","enableGeometrySupport","S","scriptUsesFeatureSet","enableFeatureSetSupport","$","scriptIsAsync","b","enableAsyncSupport","v","vars","spatialReference","useAsync","Promise","all","j","Set","loadDependentModules","G","setField","R","compileScript","x","$view","scale","repurposeFeature","geometry","repurposeFromGraphicLikeObject","attributes","referencesGeometry","referencesScale","ArcadeExpression","createDictionaryExpression","createLabelExpression","createRendererExpression","createVVExpression","loadArcade"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/support/arcadeOnDemand.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../geometry.js\";import e from\"../core/Error.js\";import r from\"../core/Logger.js\";import{isSome as t}from\"../core/maybe.js\";import a from\"../geometry/SpatialReference.js\";const s=r.getLogger(\"esri.support.arcadeOnDemand\");let c;function i(){return c||(c=(async()=>{const e=await import(\"./arcadeUtils.js\");return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),c}const n=(e,r,t)=>u.create(e,r,t,null,[\"$feature\"]),o=(e,r,t)=>u.create(e,r,t,null,[\"$feature\",\"$view\"]),l=o,p=(e,r,t,a)=>u.create(e,r,t,a,[\"$feature\",\"$view\"]);class u{constructor(e,r,t,a,s,c,i){this.script=e,this.evaluate=a;const n=Array.isArray(c)?c:c.fields;this.fields=n,this._syntaxTree=t,this._arcade=r,this._arcadeFeature=s,this._spatialReference=i,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,\"scale\")}static async create(r,c,n,o,l,p){const{arcade:m,Feature:f,Dictionary:d}=await i(),y=a.fromJSON(c);let h;try{h=m.parseScript(r,p)}catch(A){return s.error(new e(\"arcade-bad-expression\",\"Failed to parse arcade script\",{script:r,error:A})),null}const w=l.reduce(((e,r)=>({...e,[r]:null})),{});let g=null;t(o)&&(g=new d(o),g.immutable=!0,w.$config=null);const _=m.scriptUsesGeometryEngine(h),F=_&&m.enableGeometrySupport(),S=m.scriptUsesFeatureSet(h)&&m.enableFeatureSetSupport(),$=m.scriptIsAsync(h),b=$&&m.enableAsyncSupport(),v={vars:w,spatialReference:y,useAsync:!!b};await Promise.all([F,S,b]);const j=new Set;await m.loadDependentModules(j,h,null,$,_);const G=new d;G.immutable=!1,G.setField(\"scale\",0);const R=m.compileScript(h,v),x=e=>(\"$view\"in e&&e.$view&&(G.setField(\"scale\",\"object\"==typeof e.$view?e.$view.scale:void 0),e.$view=G),g&&(e.$config=g),R({vars:e,spatialReference:y}));return new u(r,m,h,x,new f,n,y)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}}export{u as ArcadeExpression,p as createDictionaryExpression,n as createLabelExpression,o as createRendererExpression,l as createVVExpression,i as loadArcade};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}