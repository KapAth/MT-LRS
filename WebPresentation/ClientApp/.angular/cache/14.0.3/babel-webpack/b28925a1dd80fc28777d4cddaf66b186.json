{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../geometry.js\";\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { cache as r, find as n } from \"../../core/iteratorUtils.js\";\nimport { isNone as a, isSome as o } from \"../../core/maybe.js\";\nimport { eachAlways as s } from \"../../core/promiseUtils.js\";\nimport { isHTTPSProtocol as i, hasSameOrigin as p, toHTTPS as u } from \"../../core/urlUtils.js\";\nimport { initializeProjection as c, project as l } from \"../../geometry/projection.js\";\nimport { WGS84 as m, equals as y } from \"../../geometry/support/spatialReferenceUtils.js\";\nimport { featureGeometryTypeKebabDictionary as f } from \"../../geometry/support/typeUtils.js\";\nimport { getGeometryType as d } from \"../graphics/sources/geojson/geojson.js\";\nimport { parseDate as g } from \"./dateUtils.js\";\nimport { visitXML as w, iterateXML as b } from \"./xmlUtils.js\";\nimport h from \"../support/Field.js\";\nimport T from \"../../geometry/SpatialReference.js\";\nimport F from \"../../geometry/Extent.js\";\nconst S = \"xlink:href\",\n      x = \"2.0.0\",\n      C = \"__esri_wfs_id__\",\n      E = \"wfs-layer:getWFSLayerTypeInfo-error\",\n      N = \"wfs-layer:empty-service\",\n      P = \"wfs-layer:feature-type-not-found\",\n      R = \"wfs-layer:geojson-not-supported\",\n      j = \"wfs-layer:kvp-encoding-not-supported\",\n      A = \"wfs-layer:malformed-json\",\n      G = \"wfs-layer:unknown-geometry-type\",\n      k = \"wfs-layer:unknown-field-type\",\n      v = \"wfs-layer:unsupported-spatial-reference\",\n      U = \"wfs-layer:unsupported-wfs-version\";\n\nfunction D(_x, _x2) {\n  return _D.apply(this, arguments);\n}\n\nfunction _D() {\n  _D = _asyncToGenerator(function* (t, r) {\n    const n = I((yield e(t, {\n      responseType: \"text\",\n      query: {\n        SERVICE: \"WFS\",\n        REQUEST: \"GetCapabilities\",\n        VERSION: x,\n        ...r?.customParameters\n      },\n      signal: r?.signal\n    })).data);\n    return $(t, n), n;\n  });\n  return _D.apply(this, arguments);\n}\n\nfunction I(e) {\n  const t = te(e);\n  ne(t), ae(t);\n  const n = t.firstElementChild,\n        a = r(M(n));\n  return {\n    operations: L(n),\n\n    get featureTypes() {\n      return Array.from(a());\n    },\n\n    readFeatureTypes: a\n  };\n}\n\nconst O = new Set([\"json\", \"application/json\", \"geojson\", \"application/json; subtype=geojson\"]);\n\nfunction L(e) {\n  let r = !1;\n  const n = {\n    GetCapabilities: {\n      url: \"\"\n    },\n    DescribeFeatureType: {\n      url: \"\"\n    },\n    GetFeature: {\n      url: \"\",\n      outputFormat: null,\n      supportsPagination: !1\n    }\n  };\n  if (w(e, {\n    OperationsMetadata: {\n      Operation: e => {\n        switch (e.getAttribute(\"name\")) {\n          case \"GetCapabilities\":\n            return {\n              DCP: {\n                HTTP: {\n                  Get: e => {\n                    n.GetCapabilities.url = e.getAttribute(S);\n                  }\n                }\n              }\n            };\n\n          case \"DescribeFeatureType\":\n            return {\n              DCP: {\n                HTTP: {\n                  Get: e => {\n                    n.DescribeFeatureType.url = e.getAttribute(S);\n                  }\n                }\n              }\n            };\n\n          case \"GetFeature\":\n            return {\n              DCP: {\n                HTTP: {\n                  Get: e => {\n                    n.GetFeature.url = e.getAttribute(S);\n                  }\n                }\n              },\n              Parameter: e => {\n                if (\"outputFormat\" === e.getAttribute(\"name\")) return {\n                  AllowedValues: {\n                    Value: e => {\n                      const t = e.textContent;\n                      t && O.has(t.toLowerCase()) && (n.GetFeature.outputFormat = t);\n                    }\n                  }\n                };\n              }\n            };\n        }\n      },\n      Constraint: e => {\n        switch (e.getAttribute(\"name\")) {\n          case \"KVPEncoding\":\n            return {\n              DefaultValue: e => {\n                r = \"true\" === e.textContent.toLowerCase();\n              }\n            };\n\n          case \"ImplementsResultPaging\":\n            return {\n              DefaultValue: e => {\n                n.GetFeature.supportsPagination = \"true\" === e.textContent.toLowerCase();\n              }\n            };\n        }\n      }\n    }\n  }), !r) throw new t(j, \"WFS service doesn't support key/value pair (KVP) encoding\");\n  if (a(n.GetFeature.outputFormat)) throw new t(R, \"WFS service doesn't support GeoJSON output format\");\n  return n;\n}\n\nfunction $(e, t) {\n  i(e) && (p(e, t.operations.DescribeFeatureType.url, !0) && (t.operations.DescribeFeatureType.url = u(t.operations.DescribeFeatureType.url)), p(e, t.operations.GetFeature.url, !0) && (t.operations.GetFeature.url = u(t.operations.GetFeature.url)));\n}\n\nfunction M(e) {\n  return b(e, {\n    FeatureTypeList: {\n      FeatureType: e => {\n        const t = {\n          typeName: \"undefined:undefined\",\n          name: \"\",\n          title: \"\",\n          description: \"\",\n          extent: null,\n          namespacePrefix: \"\",\n          namespaceUri: \"\",\n          supportedSpatialReferences: []\n        },\n              r = new Set([4326]),\n              n = e => {\n          const t = parseInt(e.textContent?.match(/(?<wkid>\\d+$)/i)?.groups?.wkid ?? \"\", 10);\n          Number.isNaN(t) || r.add(t);\n        };\n\n        return w(e, {\n          Name: e => {\n            const {\n              name: r,\n              prefix: n\n            } = re(e.textContent);\n            t.typeName = `${n}:${r}`, t.name = r, t.namespacePrefix = n, t.namespaceUri = e.lookupNamespaceURI(n);\n          },\n          Abstract: e => {\n            t.description = e.textContent;\n          },\n          Title: e => {\n            t.title = e.textContent;\n          },\n          WGS84BoundingBox: e => {\n            t.extent = V(e);\n          },\n          DefaultSRS: n,\n          DefaultCRS: n,\n          OtherSRS: n,\n          OtherCRS: n\n        }), t.title || (t.title = t.name), t.supportedSpatialReferences.push(...r), t;\n      }\n    }\n  });\n}\n\nfunction V(e) {\n  let t, r, n, a;\n\n  for (const o of e.children) switch (o.localName) {\n    case \"LowerCorner\":\n      [t, r] = o.textContent.split(\" \").map(e => Number.parseFloat(e));\n      break;\n\n    case \"UpperCorner\":\n      [n, a] = o.textContent.split(\" \").map(e => Number.parseFloat(e));\n  }\n\n  return {\n    xmin: t,\n    ymin: r,\n    xmax: n,\n    ymax: a,\n    spatialReference: m\n  };\n}\n\nfunction W(e, t, r) {\n  return n(e, e => r ? e.name === t && e.namespaceUri === r : e.typeName === t || e.name === t);\n}\n\nfunction X(_x3, _x4, _x5) {\n  return _X.apply(this, arguments);\n}\n\nfunction _X() {\n  _X = _asyncToGenerator(function* (e, t, r, n = {}) {\n    const {\n      featureType: a,\n      extent: o\n    } = yield Y(e, t, r, n),\n          {\n      fields: s,\n      geometryType: i,\n      swapXY: p,\n      objectIdField: u,\n      geometryField: c\n    } = yield q(e, a.typeName, n);\n    return {\n      url: e.operations.GetCapabilities.url,\n      name: a.name,\n      namespaceUri: a.namespaceUri,\n      fields: s,\n      geometryField: c,\n      geometryType: i,\n      objectIdField: u,\n      spatialReference: n.spatialReference ?? T.WGS84,\n      extent: o,\n      swapXY: p,\n      wfsCapabilities: e,\n      customParameters: n.customParameters\n    };\n  });\n  return _X.apply(this, arguments);\n}\n\nfunction Y(_x6, _x7, _x8) {\n  return _Y.apply(this, arguments);\n}\n\nfunction _Y() {\n  _Y = _asyncToGenerator(function* (e, r, n, o = {}) {\n    const {\n      spatialReference: s = T.WGS84\n    } = o,\n          i = e.readFeatureTypes(),\n          p = r ? W(i, r, n) : i.next().value;\n    if (a(p)) throw r ? new t(P, `The type '${r}' could not be found in the service`) : new t(N, \"The service is empty\");\n    let u = new F({ ...p.extent,\n      spatialReference: s\n    });\n    if (!y(s, m)) try {\n      yield c(m, s, void 0, o), u = l(u, m);\n    } catch {\n      throw new t(v, \"Projection not supported\");\n    }\n    return {\n      extent: u,\n      spatialReference: s,\n      featureType: p\n    };\n  });\n  return _Y.apply(this, arguments);\n}\n\nfunction q(_x9, _x10) {\n  return _q.apply(this, arguments);\n}\n\nfunction _q() {\n  _q = _asyncToGenerator(function* (e, r, n = {}) {\n    const [o, i] = yield s([J(e.operations.DescribeFeatureType.url, r, n), _(e, r, n)]);\n    if (o.error || i.error) throw new t(E, `An error occurred while getting info about the feature type '${r}'`, {\n      error: o.error || i.error\n    });\n    const {\n      fields: p,\n      errors: u\n    } = o.value ?? {},\n          c = o.value?.geometryType || i.value?.geometryType,\n          l = i.value?.swapXY ?? !1;\n    if (a(c)) throw new t(G, `The geometry type could not be determined for type '${r}`, {\n      typeName: r,\n      geometryType: c,\n      fields: p,\n      errors: u\n    });\n    return { ...z(p ?? []),\n      geometryType: c,\n      swapXY: l\n    };\n  });\n  return _q.apply(this, arguments);\n}\n\nfunction z(e) {\n  const t = e.find(e => \"geometry\" === e.type);\n  let r = e.find(e => \"oid\" === e.type);\n  return e = e.filter(e => \"geometry\" !== e.type), r || (r = new h({\n    name: C,\n    type: \"oid\",\n    alias: C\n  }), e.unshift(r)), {\n    geometryField: t?.name ?? null,\n    objectIdField: r.name,\n    fields: e\n  };\n}\n\nfunction _(_x11, _x12) {\n  return _2.apply(this, arguments);\n}\n\nfunction _2() {\n  _2 = _asyncToGenerator(function* (t, r, n = {}) {\n    let a,\n        o = !1;\n    const [s, i] = yield Promise.all([K(t.operations.GetFeature.url, r, t.operations.GetFeature.outputFormat, { ...n,\n      count: 1\n    }), e(t.operations.GetFeature.url, {\n      responseType: \"text\",\n      query: Z(r, void 0, { ...n,\n        count: 1\n      }),\n      signal: n?.signal\n    })]),\n          p = \"FeatureCollection\" === s.type && s.features[0]?.geometry;\n\n    if (p) {\n      let e;\n\n      switch (a = f.fromJSON(d(p.type)), p.type) {\n        case \"Point\":\n          e = p.coordinates;\n          break;\n\n        case \"LineString\":\n        case \"MultiPoint\":\n          e = p.coordinates[0];\n          break;\n\n        case \"MultiLineString\":\n        case \"Polygon\":\n          e = p.coordinates[0][0];\n          break;\n\n        case \"MultiPolygon\":\n          e = p.coordinates[0][0][0];\n      }\n\n      const t = /<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(i.data);\n\n      if (t) {\n        const r = e[0].toFixed(3),\n              n = e[1].toFixed(3),\n              a = parseFloat(t[1]).toFixed(3);\n        r === parseFloat(t[2]).toFixed(3) && n === a && (o = !0);\n      }\n    }\n\n    return {\n      geometryType: a,\n      swapXY: o\n    };\n  });\n  return _2.apply(this, arguments);\n}\n\nfunction J(_x13, _x14, _x15) {\n  return _J.apply(this, arguments);\n}\n\nfunction _J() {\n  _J = _asyncToGenerator(function* (t, r, n) {\n    return Q(r, (yield e(t, {\n      responseType: \"text\",\n      query: {\n        SERVICE: \"WFS\",\n        REQUEST: \"DescribeFeatureType\",\n        VERSION: x,\n        TYPENAME: r,\n        ...n?.customParameters\n      },\n      signal: n?.signal\n    })).data);\n  });\n  return _J.apply(this, arguments);\n}\n\nfunction Q(e, r) {\n  const {\n    name: a\n  } = re(e),\n        s = te(r);\n  ae(s);\n  const i = n(b(s.firstElementChild, {\n    element: e => ({\n      name: e.getAttribute(\"name\"),\n      typeName: re(e.getAttribute(\"type\")).name\n    })\n  }), ({\n    name: e\n  }) => e === a);\n\n  if (o(i)) {\n    const e = n(b(s.firstElementChild, {\n      complexType: e => e\n    }), e => e.getAttribute(\"name\") === i.typeName);\n    if (o(e)) return B(e);\n  }\n\n  throw new t(P, `Type '${e}' not found in document`, {\n    document: new XMLSerializer().serializeToString(s)\n  });\n}\n\nconst H = new Set([\"objectid\", \"fid\"]);\n\nfunction B(e) {\n  const r = [],\n        n = [];\n  let a;\n  const o = b(e, {\n    complexContent: {\n      extension: {\n        sequence: {\n          element: e => e\n        }\n      }\n    }\n  });\n\n  for (const s of o) {\n    const o = s.getAttribute(\"name\");\n    if (!o) continue;\n    let i, p;\n    if (s.hasAttribute(\"type\") ? i = re(s.getAttribute(\"type\")).name : w(s, {\n      simpleType: {\n        restriction: e => (i = re(e.getAttribute(\"base\")).name, {\n          maxLength: e => {\n            p = +e.getAttribute(\"value\");\n          }\n        })\n      }\n    }), !i) continue;\n    const u = \"true\" === s.getAttribute(\"nillable\");\n    let c = !1;\n\n    switch (i.toLowerCase()) {\n      case \"integer\":\n      case \"nonpositiveinteger\":\n      case \"negativeinteger\":\n      case \"long\":\n      case \"int\":\n      case \"short\":\n      case \"byte\":\n      case \"nonnegativeinteger\":\n      case \"unsignedlong\":\n      case \"unsignedint\":\n      case \"unsignedshort\":\n      case \"unsignedbyte\":\n      case \"positiveinteger\":\n        n.push(new h({\n          name: o,\n          alias: o,\n          type: \"integer\",\n          nullable: u\n        }));\n        break;\n\n      case \"float\":\n      case \"double\":\n      case \"decimal\":\n        n.push(new h({\n          name: o,\n          alias: o,\n          type: \"double\",\n          nullable: u\n        }));\n        break;\n\n      case \"boolean\":\n      case \"string\":\n      case \"gyearmonth\":\n      case \"gyear\":\n      case \"gmonthday\":\n      case \"gday\":\n      case \"gmonth\":\n      case \"anyuri\":\n      case \"qname\":\n      case \"notation\":\n      case \"normalizedstring\":\n      case \"token\":\n      case \"language\":\n      case \"idrefs\":\n      case \"entities\":\n      case \"nmtoken\":\n      case \"nmtokens\":\n      case \"name\":\n      case \"ncname\":\n      case \"id\":\n      case \"idref\":\n      case \"entity\":\n      case \"duration\":\n      case \"time\":\n        n.push(new h({\n          name: o,\n          alias: o,\n          type: \"string\",\n          nullable: u,\n          length: p ?? 255\n        }));\n        break;\n\n      case \"datetime\":\n      case \"date\":\n        n.push(new h({\n          name: o,\n          alias: o,\n          type: \"date\",\n          nullable: u,\n          length: p ?? 36\n        }));\n        break;\n\n      case \"pointpropertytype\":\n        a = \"point\", c = !0;\n        break;\n\n      case \"multipointpropertytype\":\n        a = \"multipoint\", c = !0;\n        break;\n\n      case \"curvepropertytype\":\n      case \"multicurvepropertytype\":\n      case \"multilinestringpropertytype\":\n        a = \"polyline\", c = !0;\n        break;\n\n      case \"surfacepropertytype\":\n      case \"multisurfacepropertytype\":\n      case \"multipolygonpropertytype\":\n        a = \"polygon\", c = !0;\n        break;\n\n      case \"geometrypropertytype\":\n      case \"multigeometrypropertytype\":\n        c = !0, r.push(new t(G, `geometry type '${i}' is not supported`, {\n          type: new XMLSerializer().serializeToString(e)\n        }));\n        break;\n\n      default:\n        r.push(new t(k, `Unknown field type '${i}'`, {\n          type: new XMLSerializer().serializeToString(e)\n        }));\n    }\n\n    c && n.push(new h({\n      name: o,\n      alias: o,\n      type: \"geometry\",\n      nullable: u\n    }));\n  }\n\n  for (const t of n) if (\"integer\" === t.type && !t.nullable && H.has(t.name.toLowerCase())) {\n    t.type = \"oid\";\n    break;\n  }\n\n  return {\n    geometryType: a,\n    fields: n,\n    errors: r\n  };\n}\n\nfunction K(_x16, _x17, _x18, _x19) {\n  return _K.apply(this, arguments);\n}\n\nfunction _K() {\n  _K = _asyncToGenerator(function* (r, n, a, o) {\n    let {\n      data: s\n    } = yield e(r, {\n      responseType: \"text\",\n      query: Z(n, a, o),\n      signal: o?.signal\n    });\n    s = s.replace(/\": +(-?\\d+),(\\d+)(,)?/g, '\": $1.$2$3');\n\n    try {\n      if (o?.dateFields?.length) {\n        const e = new Set(o.dateFields);\n        return JSON.parse(s, (t, r) => e.has(t) ? g(r) : r);\n      }\n\n      return JSON.parse(s);\n    } catch (i) {\n      throw new t(A, \"Error while parsing the response\", {\n        response: s,\n        error: i\n      });\n    }\n  });\n  return _K.apply(this, arguments);\n}\n\nfunction Z(e, t, r) {\n  return {\n    SERVICE: \"WFS\",\n    REQUEST: \"GetFeature\",\n    VERSION: x,\n    TYPENAMES: e,\n    OUTPUTFORMAT: t,\n    SRSNAME: \"EPSG:4326\",\n    STARTINDEX: r?.startIndex,\n    COUNT: r?.count,\n    ...r?.customParameters\n  };\n}\n\nfunction ee(_x20, _x21, _x22) {\n  return _ee.apply(this, arguments);\n}\n\nfunction _ee() {\n  _ee = _asyncToGenerator(function* (t, r, n) {\n    const a = te((yield e(t, {\n      responseType: \"text\",\n      query: {\n        SERVICE: \"WFS\",\n        REQUEST: \"GetFeature\",\n        VERSION: x,\n        TYPENAMES: r,\n        RESULTTYPE: \"hits\",\n        ...n?.customParameters\n      },\n      signal: n?.signal\n    })).data);\n    ae(a);\n    const o = Number.parseFloat(a.firstElementChild.getAttribute(\"numberMatched\"));\n    return Number.isNaN(o) ? 0 : o;\n  });\n  return _ee.apply(this, arguments);\n}\n\nfunction te(e) {\n  return new DOMParser().parseFromString(e.trim(), \"text/xml\");\n}\n\nfunction re(e) {\n  const [t, r] = e.split(\":\");\n  return {\n    prefix: r ? t : \"\",\n    name: r ?? t\n  };\n}\n\nfunction ne(e) {\n  const r = e.firstElementChild?.getAttribute(\"version\");\n  if (r && r !== x) throw new t(U, `Unsupported WFS version ${r}. Supported version: ${x}`);\n}\n\nfunction ae(e) {\n  let r = \"\",\n      n = \"\";\n  if (w(e.firstElementChild, {\n    Exception: e => (r = e.getAttribute(\"exceptionCode\"), {\n      ExceptionText: e => {\n        n = e.textContent;\n      }\n    })\n  }), r) throw new t(`wfs-layer:${r}`, n);\n}\n\nexport { C as WFS_OID_FIELD_NAME, J as describeFeatureType, W as findFeatureType, D as getCapabilities, K as getFeature, ee as getFeatureCount, Y as getFeatureTypeInfo, X as getWFSLayerInfo, Q as parseDescribeFeatureTypeResponse, I as parseGetCapabilitiesResponse, z as prepareWFSLayerFields };","map":{"version":3,"names":["e","t","cache","r","find","n","isNone","a","isSome","o","eachAlways","s","isHTTPSProtocol","i","hasSameOrigin","p","toHTTPS","u","initializeProjection","c","project","l","WGS84","m","equals","y","featureGeometryTypeKebabDictionary","f","getGeometryType","d","parseDate","g","visitXML","w","iterateXML","b","h","T","F","S","x","C","E","N","P","R","j","A","G","k","v","U","D","I","responseType","query","SERVICE","REQUEST","VERSION","customParameters","signal","data","$","te","ne","ae","firstElementChild","M","operations","L","featureTypes","Array","from","readFeatureTypes","O","Set","GetCapabilities","url","DescribeFeatureType","GetFeature","outputFormat","supportsPagination","OperationsMetadata","Operation","getAttribute","DCP","HTTP","Get","Parameter","AllowedValues","Value","textContent","has","toLowerCase","Constraint","DefaultValue","FeatureTypeList","FeatureType","typeName","name","title","description","extent","namespacePrefix","namespaceUri","supportedSpatialReferences","parseInt","match","groups","wkid","Number","isNaN","add","Name","prefix","re","lookupNamespaceURI","Abstract","Title","WGS84BoundingBox","V","DefaultSRS","DefaultCRS","OtherSRS","OtherCRS","push","children","localName","split","map","parseFloat","xmin","ymin","xmax","ymax","spatialReference","W","X","featureType","Y","fields","geometryType","swapXY","objectIdField","geometryField","q","wfsCapabilities","next","value","J","_","error","errors","z","type","filter","alias","unshift","Promise","all","K","count","Z","features","geometry","fromJSON","coordinates","exec","toFixed","Q","TYPENAME","element","complexType","B","document","XMLSerializer","serializeToString","H","complexContent","extension","sequence","hasAttribute","simpleType","restriction","maxLength","nullable","length","replace","dateFields","JSON","parse","response","TYPENAMES","OUTPUTFORMAT","SRSNAME","STARTINDEX","startIndex","COUNT","ee","RESULTTYPE","DOMParser","parseFromString","trim","Exception","ExceptionText","WFS_OID_FIELD_NAME","describeFeatureType","findFeatureType","getCapabilities","getFeature","getFeatureCount","getFeatureTypeInfo","getWFSLayerInfo","parseDescribeFeatureTypeResponse","parseGetCapabilitiesResponse","prepareWFSLayerFields"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/ogc/wfsUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import t from\"../../core/Error.js\";import{cache as r,find as n}from\"../../core/iteratorUtils.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{eachAlways as s}from\"../../core/promiseUtils.js\";import{isHTTPSProtocol as i,hasSameOrigin as p,toHTTPS as u}from\"../../core/urlUtils.js\";import{initializeProjection as c,project as l}from\"../../geometry/projection.js\";import{WGS84 as m,equals as y}from\"../../geometry/support/spatialReferenceUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import{getGeometryType as d}from\"../graphics/sources/geojson/geojson.js\";import{parseDate as g}from\"./dateUtils.js\";import{visitXML as w,iterateXML as b}from\"./xmlUtils.js\";import h from\"../support/Field.js\";import T from\"../../geometry/SpatialReference.js\";import F from\"../../geometry/Extent.js\";const S=\"xlink:href\",x=\"2.0.0\",C=\"__esri_wfs_id__\",E=\"wfs-layer:getWFSLayerTypeInfo-error\",N=\"wfs-layer:empty-service\",P=\"wfs-layer:feature-type-not-found\",R=\"wfs-layer:geojson-not-supported\",j=\"wfs-layer:kvp-encoding-not-supported\",A=\"wfs-layer:malformed-json\",G=\"wfs-layer:unknown-geometry-type\",k=\"wfs-layer:unknown-field-type\",v=\"wfs-layer:unsupported-spatial-reference\",U=\"wfs-layer:unsupported-wfs-version\";async function D(t,r){const n=I((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetCapabilities\",VERSION:x,...r?.customParameters},signal:r?.signal})).data);return $(t,n),n}function I(e){const t=te(e);ne(t),ae(t);const n=t.firstElementChild,a=r(M(n));return{operations:L(n),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}const O=new Set([\"json\",\"application/json\",\"geojson\",\"application/json; subtype=geojson\"]);function L(e){let r=!1;const n={GetCapabilities:{url:\"\"},DescribeFeatureType:{url:\"\"},GetFeature:{url:\"\",outputFormat:null,supportsPagination:!1}};if(w(e,{OperationsMetadata:{Operation:e=>{switch(e.getAttribute(\"name\")){case\"GetCapabilities\":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(S)}}}};case\"DescribeFeatureType\":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(S)}}}};case\"GetFeature\":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(S)}}},Parameter:e=>{if(\"outputFormat\"===e.getAttribute(\"name\"))return{AllowedValues:{Value:e=>{const t=e.textContent;t&&O.has(t.toLowerCase())&&(n.GetFeature.outputFormat=t)}}}}}}},Constraint:e=>{switch(e.getAttribute(\"name\")){case\"KVPEncoding\":return{DefaultValue:e=>{r=\"true\"===e.textContent.toLowerCase()}};case\"ImplementsResultPaging\":return{DefaultValue:e=>{n.GetFeature.supportsPagination=\"true\"===e.textContent.toLowerCase()}}}}}}),!r)throw new t(j,\"WFS service doesn't support key/value pair (KVP) encoding\");if(a(n.GetFeature.outputFormat))throw new t(R,\"WFS service doesn't support GeoJSON output format\");return n}function $(e,t){i(e)&&(p(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=u(t.operations.DescribeFeatureType.url)),p(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=u(t.operations.GetFeature.url)))}function M(e){return b(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:\"undefined:undefined\",name:\"\",title:\"\",description:\"\",extent:null,namespacePrefix:\"\",namespaceUri:\"\",supportedSpatialReferences:[]},r=new Set([4326]),n=e=>{const t=parseInt(e.textContent?.match(/(?<wkid>\\d+$)/i)?.groups?.wkid??\"\",10);Number.isNaN(t)||r.add(t)};return w(e,{Name:e=>{const{name:r,prefix:n}=re(e.textContent);t.typeName=`${n}:${r}`,t.name=r,t.namespacePrefix=n,t.namespaceUri=e.lookupNamespaceURI(n)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=V(e)},DefaultSRS:n,DefaultCRS:n,OtherSRS:n,OtherCRS:n}),t.title||(t.title=t.name),t.supportedSpatialReferences.push(...r),t}}})}function V(e){let t,r,n,a;for(const o of e.children)switch(o.localName){case\"LowerCorner\":[t,r]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)));break;case\"UpperCorner\":[n,a]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:r,xmax:n,ymax:a,spatialReference:m}}function W(e,t,r){return n(e,(e=>r?e.name===t&&e.namespaceUri===r:e.typeName===t||e.name===t))}async function X(e,t,r,n={}){const{featureType:a,extent:o}=await Y(e,t,r,n),{fields:s,geometryType:i,swapXY:p,objectIdField:u,geometryField:c}=await q(e,a.typeName,n);return{url:e.operations.GetCapabilities.url,name:a.name,namespaceUri:a.namespaceUri,fields:s,geometryField:c,geometryType:i,objectIdField:u,spatialReference:n.spatialReference??T.WGS84,extent:o,swapXY:p,wfsCapabilities:e,customParameters:n.customParameters}}async function Y(e,r,n,o={}){const{spatialReference:s=T.WGS84}=o,i=e.readFeatureTypes(),p=r?W(i,r,n):i.next().value;if(a(p))throw r?new t(P,`The type '${r}' could not be found in the service`):new t(N,\"The service is empty\");let u=new F({...p.extent,spatialReference:s});if(!y(s,m))try{await c(m,s,void 0,o),u=l(u,m)}catch{throw new t(v,\"Projection not supported\")}return{extent:u,spatialReference:s,featureType:p}}async function q(e,r,n={}){const[o,i]=await s([J(e.operations.DescribeFeatureType.url,r,n),_(e,r,n)]);if(o.error||i.error)throw new t(E,`An error occurred while getting info about the feature type '${r}'`,{error:o.error||i.error});const{fields:p,errors:u}=o.value??{},c=o.value?.geometryType||i.value?.geometryType,l=i.value?.swapXY??!1;if(a(c))throw new t(G,`The geometry type could not be determined for type '${r}`,{typeName:r,geometryType:c,fields:p,errors:u});return{...z(p??[]),geometryType:c,swapXY:l}}function z(e){const t=e.find((e=>\"geometry\"===e.type));let r=e.find((e=>\"oid\"===e.type));return e=e.filter((e=>\"geometry\"!==e.type)),r||(r=new h({name:C,type:\"oid\",alias:C}),e.unshift(r)),{geometryField:t?.name??null,objectIdField:r.name,fields:e}}async function _(t,r,n={}){let a,o=!1;const[s,i]=await Promise.all([K(t.operations.GetFeature.url,r,t.operations.GetFeature.outputFormat,{...n,count:1}),e(t.operations.GetFeature.url,{responseType:\"text\",query:Z(r,void 0,{...n,count:1}),signal:n?.signal})]),p=\"FeatureCollection\"===s.type&&s.features[0]?.geometry;if(p){let e;switch(a=f.fromJSON(d(p.type)),p.type){case\"Point\":e=p.coordinates;break;case\"LineString\":case\"MultiPoint\":e=p.coordinates[0];break;case\"MultiLineString\":case\"Polygon\":e=p.coordinates[0][0];break;case\"MultiPolygon\":e=p.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(i.data);if(t){const r=e[0].toFixed(3),n=e[1].toFixed(3),a=parseFloat(t[1]).toFixed(3);r===parseFloat(t[2]).toFixed(3)&&n===a&&(o=!0)}}return{geometryType:a,swapXY:o}}async function J(t,r,n){return Q(r,(await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"DescribeFeatureType\",VERSION:x,TYPENAME:r,...n?.customParameters},signal:n?.signal})).data)}function Q(e,r){const{name:a}=re(e),s=te(r);ae(s);const i=n(b(s.firstElementChild,{element:e=>({name:e.getAttribute(\"name\"),typeName:re(e.getAttribute(\"type\")).name})}),(({name:e})=>e===a));if(o(i)){const e=n(b(s.firstElementChild,{complexType:e=>e}),(e=>e.getAttribute(\"name\")===i.typeName));if(o(e))return B(e)}throw new t(P,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(s)})}const H=new Set([\"objectid\",\"fid\"]);function B(e){const r=[],n=[];let a;const o=b(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const s of o){const o=s.getAttribute(\"name\");if(!o)continue;let i,p;if(s.hasAttribute(\"type\")?i=re(s.getAttribute(\"type\")).name:w(s,{simpleType:{restriction:e=>(i=re(e.getAttribute(\"base\")).name,{maxLength:e=>{p=+e.getAttribute(\"value\")}})}}),!i)continue;const u=\"true\"===s.getAttribute(\"nillable\");let c=!1;switch(i.toLowerCase()){case\"integer\":case\"nonpositiveinteger\":case\"negativeinteger\":case\"long\":case\"int\":case\"short\":case\"byte\":case\"nonnegativeinteger\":case\"unsignedlong\":case\"unsignedint\":case\"unsignedshort\":case\"unsignedbyte\":case\"positiveinteger\":n.push(new h({name:o,alias:o,type:\"integer\",nullable:u}));break;case\"float\":case\"double\":case\"decimal\":n.push(new h({name:o,alias:o,type:\"double\",nullable:u}));break;case\"boolean\":case\"string\":case\"gyearmonth\":case\"gyear\":case\"gmonthday\":case\"gday\":case\"gmonth\":case\"anyuri\":case\"qname\":case\"notation\":case\"normalizedstring\":case\"token\":case\"language\":case\"idrefs\":case\"entities\":case\"nmtoken\":case\"nmtokens\":case\"name\":case\"ncname\":case\"id\":case\"idref\":case\"entity\":case\"duration\":case\"time\":n.push(new h({name:o,alias:o,type:\"string\",nullable:u,length:p??255}));break;case\"datetime\":case\"date\":n.push(new h({name:o,alias:o,type:\"date\",nullable:u,length:p??36}));break;case\"pointpropertytype\":a=\"point\",c=!0;break;case\"multipointpropertytype\":a=\"multipoint\",c=!0;break;case\"curvepropertytype\":case\"multicurvepropertytype\":case\"multilinestringpropertytype\":a=\"polyline\",c=!0;break;case\"surfacepropertytype\":case\"multisurfacepropertytype\":case\"multipolygonpropertytype\":a=\"polygon\",c=!0;break;case\"geometrypropertytype\":case\"multigeometrypropertytype\":c=!0,r.push(new t(G,`geometry type '${i}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:r.push(new t(k,`Unknown field type '${i}'`,{type:(new XMLSerializer).serializeToString(e)}))}c&&n.push(new h({name:o,alias:o,type:\"geometry\",nullable:u}))}for(const t of n)if(\"integer\"===t.type&&!t.nullable&&H.has(t.name.toLowerCase())){t.type=\"oid\";break}return{geometryType:a,fields:n,errors:r}}async function K(r,n,a,o){let{data:s}=await e(r,{responseType:\"text\",query:Z(n,a,o),signal:o?.signal});s=s.replace(/\": +(-?\\d+),(\\d+)(,)?/g,'\": $1.$2$3');try{if(o?.dateFields?.length){const e=new Set(o.dateFields);return JSON.parse(s,((t,r)=>e.has(t)?g(r):r))}return JSON.parse(s)}catch(i){throw new t(A,\"Error while parsing the response\",{response:s,error:i})}}function Z(e,t,r){return{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:e,OUTPUTFORMAT:t,SRSNAME:\"EPSG:4326\",STARTINDEX:r?.startIndex,COUNT:r?.count,...r?.customParameters}}async function ee(t,r,n){const a=te((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:r,RESULTTYPE:\"hits\",...n?.customParameters},signal:n?.signal})).data);ae(a);const o=Number.parseFloat(a.firstElementChild.getAttribute(\"numberMatched\"));return Number.isNaN(o)?0:o}function te(e){return(new DOMParser).parseFromString(e.trim(),\"text/xml\")}function re(e){const[t,r]=e.split(\":\");return{prefix:r?t:\"\",name:r??t}}function ne(e){const r=e.firstElementChild?.getAttribute(\"version\");if(r&&r!==x)throw new t(U,`Unsupported WFS version ${r}. Supported version: ${x}`)}function ae(e){let r=\"\",n=\"\";if(w(e.firstElementChild,{Exception:e=>(r=e.getAttribute(\"exceptionCode\"),{ExceptionText:e=>{n=e.textContent}})}),r)throw new t(`wfs-layer:${r}`,n)}export{C as WFS_OID_FIELD_NAME,J as describeFeatureType,W as findFeatureType,D as getCapabilities,K as getFeature,ee as getFeatureCount,Y as getFeatureTypeInfo,X as getWFSLayerInfo,Q as parseDescribeFeatureTypeResponse,I as parseGetCapabilitiesResponse,z as prepareWFSLayerFields};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}