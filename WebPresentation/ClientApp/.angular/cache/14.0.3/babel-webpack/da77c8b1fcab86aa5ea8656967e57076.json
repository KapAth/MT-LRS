{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { adjustStaticAGOUrl as e } from \"../../../../core/devEnvironmentUtils.js\";\nimport { get as t, isSome as r, isNone as o } from \"../../../../core/maybe.js\";\nimport { b as s } from \"../../../../chunks/mat3.js\";\nimport { c as i } from \"../../../../chunks/mat3f64.js\";\nimport { a as n } from \"../../../../chunks/mat4.js\";\nimport { c as a } from \"../../../../chunks/mat4f64.js\";\nimport { m as u, b as l, C as c, l as m, n as f, h as d } from \"../../../../chunks/vec3.js\";\nimport { c as p } from \"../../../../chunks/vec3f64.js\";\nimport { empty as g, expandWithVec3 as b } from \"../../../../geometry/support/aaBoundingBox.js\";\nimport { BufferViewVec3f as x, BufferViewVec4f as h, BufferViewVec2f as T, BufferViewVec4u8 as R, BufferViewVec4u16 as w, BufferViewVec3u8 as j, BufferViewVec3u16 as M } from \"../../../../geometry/support/buffer/BufferView.js\";\nimport { t as v, a as y, s as B } from \"../../../../chunks/vec32.js\";\nimport { t as L, s as C } from \"../../../../chunks/vec42.js\";\nimport { createBuffer as I } from \"../../../../geometry/support/buffer/utils.js\";\nimport { DefaultLoadingContext as A } from \"../../glTF/DefaultLoadingContext.js\";\nimport { loadGLTF as O } from \"../../glTF/loader.js\";\nimport { triangleFanToTriangles as S, triangleStripToTriangles as E, trianglesToTriangles as N } from \"../../glTF/internal/indexUtils.js\";\nimport { isEncodedMeshTexture as k } from \"../../glTF/internal/resourceUtils.js\";\nimport { getTransformMatrix as F } from \"../../glTF/internal/TextureTransformUtils.js\";\nimport { ProcessedObjectResource as P } from \"./ProcessedObjectResource.js\";\nimport { load as V, processLoadResult as _ } from \"./wosrLoader.js\";\nimport { NormalAttributeType as G } from \"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";\nimport { Attribute as D } from \"../../webgl-engine/lib/Attribute.js\";\nimport { AlphaDiscardMode as U, DepthTestFunction as H, CullFaceOptions as q } from \"../../webgl-engine/lib/basicInterfaces.js\";\nimport { Geometry as W } from \"../../webgl-engine/lib/Geometry.js\";\nimport { Texture as $ } from \"../../webgl-engine/lib/Texture.js\";\nimport { VertexAttribute as z } from \"../../webgl-engine/lib/VertexAttribute.js\";\nimport { DefaultMaterial as K } from \"../../webgl-engine/materials/DefaultMaterial.js\";\nimport { COLOR_GAMMA as Q } from \"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";\nimport { PrimitiveType as J } from \"../../../webgl/enums.js\";\nimport { n as X } from \"../../../../chunks/vec22.js\";\nimport { c as Y, f as Z } from \"../../../../chunks/vec43.js\";\nimport { c as ee } from \"../../../../chunks/vec33.js\";\n\nfunction te(_x, _x2) {\n  return _te.apply(this, arguments);\n}\n\nfunction _te() {\n  _te = _asyncToGenerator(function* (o, s) {\n    const i = re(e(o));\n\n    if (\"wosr\" === i.fileType) {\n      const e = yield s.cache ? s.cache.loadWOSR(i.url, s) : V(i.url, s),\n            {\n        engineResources: t,\n        referenceBoundingBox: r\n      } = _(e, s);\n\n      return {\n        lods: t,\n        referenceBoundingBox: r,\n        isEsriSymbolResource: !1,\n        isWosr: !0\n      };\n    }\n\n    const n = yield s.cache ? s.cache.loadGLTF(i.url, s, !!s.usePBR) : O(new A(s.streamDataRequester), i.url, s, s.usePBR),\n          a = t(n.model.meta, \"ESRI_proxyEllipsoid\"),\n          u = n.meta.isEsriSymbolResource && r(a) && n.meta.uri.includes(\"/RealisticTrees/\");\n    u && !n.customMeta.esriTreeRendering && (n.customMeta.esriTreeRendering = !0, le(n, a));\n    const l = !!s.usePBR,\n          c = n.meta.isEsriSymbolResource ? {\n      usePBR: l,\n      isSchematic: !1,\n      treeRendering: u,\n      mrrFactors: [0, 1, .2]\n    } : {\n      usePBR: l,\n      isSchematic: !1,\n      treeRendering: !1,\n      mrrFactors: [0, 1, .5]\n    },\n          m = { ...s.materialParamsMixin,\n      treeRendering: u\n    },\n          {\n      engineResources: f,\n      referenceBoundingBox: d\n    } = oe(n, c, m, s.skipHighLods && null == i.specifiedLodIndex ? {\n      skipHighLods: !0\n    } : {\n      skipHighLods: !1,\n      singleLodIndex: i.specifiedLodIndex\n    });\n    return {\n      lods: f,\n      referenceBoundingBox: d,\n      isEsriSymbolResource: n.meta.isEsriSymbolResource,\n      isWosr: !1\n    };\n  });\n  return _te.apply(this, arguments);\n}\n\nfunction re(e) {\n  const t = e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);\n  if (t) return {\n    fileType: \"gltf\",\n    url: t[1],\n    specifiedLodIndex: null != t[4] ? Number(t[4]) : null\n  };\n  return e.match(/(.*\\.(json|json\\.gz))$/) ? {\n    fileType: \"wosr\",\n    url: e,\n    specifiedLodIndex: null\n  } : {\n    fileType: \"unknown\",\n    url: e,\n    specifiedLodIndex: null\n  };\n}\n\nfunction oe(e, t, o, s) {\n  const i = e.model,\n        n = new Array(),\n        a = new Map(),\n        u = new Map(),\n        l = i.lods.length,\n        c = g();\n  return i.lods.forEach((e, m) => {\n    const f = !0 === s.skipHighLods && (l > 1 && 0 === m || l > 3 && 1 === m) || !1 === s.skipHighLods && null != s.singleLodIndex && m !== s.singleLodIndex;\n    if (f && 0 !== m) return;\n    const d = new P(e.name, e.lodThreshold, [0, 0, 0]);\n    e.parts.forEach(e => {\n      const s = f ? new K({}) : se(i, e, d, t, o, a, u),\n            {\n        geometry: n,\n        vertexCount: l\n      } = ie(e, r(s) ? s : new K({})),\n            p = n.boundingInfo;\n      r(p) && 0 === m && (b(c, p.bbMin), b(c, p.bbMax)), r(s) && (d.stageResources.geometries.push(n), d.numberOfVertices += l);\n    }), f || n.push(d);\n  }), {\n    engineResources: n,\n    referenceBoundingBox: c\n  };\n}\n\nfunction se(e, t, s, i, n, a, u) {\n  const l = t.material + (t.attributes.normal ? \"_normal\" : \"\") + (t.attributes.color ? \"_color\" : \"\") + (t.attributes.texCoord0 ? \"_texCoord0\" : \"\") + (t.attributes.tangent ? \"_tangent\" : \"\"),\n        c = e.materials.get(t.material),\n        m = r(t.attributes.texCoord0),\n        f = r(t.attributes.normal);\n  if (o(c)) return null;\n  const d = ae(c.alphaMode);\n\n  if (!a.has(l)) {\n    if (m) {\n      const t = (t, o = !1) => {\n        if (r(t) && !u.has(t)) {\n          const s = e.textures.get(t);\n\n          if (r(s)) {\n            const e = s.data;\n            u.set(t, new $(k(e) ? e.data : e, { ...s.parameters,\n              preMultiplyAlpha: !k(e) && o,\n              encoding: k(e) && r(e.encoding) ? e.encoding : void 0\n            }));\n          }\n        }\n      };\n\n      t(c.textureColor, d !== U.Opaque), t(c.textureNormal), t(c.textureOcclusion), t(c.textureEmissive), t(c.textureMetallicRoughness);\n    }\n\n    const o = c.color[0] ** (1 / Q),\n          s = c.color[1] ** (1 / Q),\n          p = c.color[2] ** (1 / Q),\n          g = c.emissiveFactor[0] ** (1 / Q),\n          b = c.emissiveFactor[1] ** (1 / Q),\n          x = c.emissiveFactor[2] ** (1 / Q),\n          h = r(c.textureColor) && m ? u.get(c.textureColor) : null;\n    a.set(l, new K({ ...i,\n      transparent: d === U.Blend,\n      customDepthTest: H.Lequal,\n      textureAlphaMode: d,\n      textureAlphaCutoff: c.alphaCutoff,\n      diffuse: [o, s, p],\n      ambient: [o, s, p],\n      opacity: c.opacity,\n      doubleSided: c.doubleSided,\n      doubleSidedType: \"winding-order\",\n      cullFace: c.doubleSided ? q.None : q.Back,\n      hasVertexColors: !!t.attributes.color,\n      hasVertexTangents: !!t.attributes.tangent,\n      normalType: f ? G.Attribute : G.ScreenDerivative,\n      castShadows: !0,\n      receiveSSAO: !0,\n      textureId: r(h) ? h.id : void 0,\n      colorMixMode: c.colorMixMode,\n      normalTextureId: r(c.textureNormal) && m ? u.get(c.textureNormal).id : void 0,\n      textureAlphaPremultiplied: r(h) && !!h.params.preMultiplyAlpha,\n      occlusionTextureId: r(c.textureOcclusion) && m ? u.get(c.textureOcclusion).id : void 0,\n      emissiveTextureId: r(c.textureEmissive) && m ? u.get(c.textureEmissive).id : void 0,\n      metallicRoughnessTextureId: r(c.textureMetallicRoughness) && m ? u.get(c.textureMetallicRoughness).id : void 0,\n      emissiveFactor: [g, b, x],\n      mrrFactors: [c.metallicFactor, c.roughnessFactor, i.mrrFactors[2]],\n      isSchematic: !1,\n      colorTextureTransformMatrix: F(c.colorTextureTransform),\n      normalTextureTransformMatrix: F(c.normalTextureTransform),\n      occlusionTextureTransformMatrix: F(c.occlusionTextureTransform),\n      emissiveTextureTransformMatrix: F(c.emissiveTextureTransform),\n      metallicRoughnessTextureTransformMatrix: F(c.metallicRoughnessTextureTransform),\n      ...n\n    }));\n  }\n\n  const p = a.get(l);\n\n  if (s.stageResources.materials.push(p), m) {\n    const e = e => {\n      r(e) && s.stageResources.textures.push(u.get(e));\n    };\n\n    e(c.textureColor), e(c.textureNormal), e(c.textureOcclusion), e(c.textureEmissive), e(c.textureMetallicRoughness);\n  }\n\n  return p;\n}\n\nfunction ie(e, t) {\n  const o = e.attributes.position.count,\n        i = ue(e.indices || o, e.primitiveType),\n        n = I(x, o);\n  v(n, e.attributes.position, e.transform);\n  const a = [[z.POSITION, new D(n.typedBuffer, n.elementCount, !0)]],\n        u = [[z.POSITION, i]];\n\n  if (r(e.attributes.normal)) {\n    const t = I(x, o);\n    s(ne, e.transform), y(t, e.attributes.normal, ne), a.push([z.NORMAL, new D(t.typedBuffer, t.elementCount, !0)]), u.push([z.NORMAL, i]);\n  }\n\n  if (r(e.attributes.tangent)) {\n    const t = I(h, o);\n    s(ne, e.transform), L(t, e.attributes.tangent, ne), a.push([z.TANGENT, new D(t.typedBuffer, t.elementCount, !0)]), u.push([z.TANGENT, i]);\n  }\n\n  if (r(e.attributes.texCoord0)) {\n    const t = I(T, o);\n    X(t, e.attributes.texCoord0), a.push([z.UV0, new D(t.typedBuffer, t.elementCount, !0)]), u.push([z.UV0, i]);\n  }\n\n  if (r(e.attributes.color)) {\n    const t = I(R, o);\n    if (4 === e.attributes.color.elementCount) e.attributes.color instanceof h ? C(t, e.attributes.color, 255) : e.attributes.color instanceof R ? Y(t, e.attributes.color) : e.attributes.color instanceof w && C(t, e.attributes.color, 1 / 256);else {\n      Z(t, 255, 255, 255, 255);\n      const r = new j(t.buffer, 0, 4);\n      e.attributes.color instanceof x ? B(r, e.attributes.color, 255) : e.attributes.color instanceof j ? ee(r, e.attributes.color) : e.attributes.color instanceof M && B(r, e.attributes.color, 1 / 256);\n    }\n    a.push([z.COLOR, new D(t.typedBuffer, t.elementCount, !0)]), u.push([z.COLOR, i]);\n  }\n\n  return {\n    geometry: new W(t, a, u),\n    vertexCount: o\n  };\n}\n\nconst ne = i();\n\nfunction ae(e) {\n  switch (e) {\n    case \"BLEND\":\n      return U.Blend;\n\n    case \"MASK\":\n      return U.Mask;\n\n    case \"OPAQUE\":\n    case null:\n    case void 0:\n      return U.Opaque;\n  }\n}\n\nfunction ue(e, t) {\n  switch (t) {\n    case J.TRIANGLES:\n      return N(e);\n\n    case J.TRIANGLE_STRIP:\n      return E(e);\n\n    case J.TRIANGLE_FAN:\n      return S(e);\n  }\n}\n\nfunction le(e, t) {\n  for (let r = 0; r < e.model.lods.length; ++r) {\n    const s = e.model.lods[r];\n\n    for (const i of s.parts) {\n      const s = i.attributes.normal;\n      if (o(s)) return;\n      const g = i.attributes.position,\n            b = g.count,\n            h = p(),\n            T = p(),\n            w = p(),\n            j = I(R, b),\n            M = I(x, b),\n            v = n(a(), i.transform);\n\n      for (let o = 0; o < b; o++) {\n        g.getVec(o, T), s.getVec(o, h), u(T, T, i.transform), l(w, T, t.center), c(w, w, t.radius);\n        const n = w[2],\n              a = m(w),\n              p = Math.min(.45 + .55 * a * a, 1);\n        c(w, w, t.radius), null !== v && u(w, w, v), f(w, w), r + 1 !== e.model.lods.length && e.model.lods.length > 1 && d(w, w, h, n > -1 ? .2 : Math.min(-4 * n - 3.8, 1)), M.setVec(o, w), j.set(o, 0, 255 * p), j.set(o, 1, 255 * p), j.set(o, 2, 255 * p), j.set(o, 3, 255);\n      }\n\n      i.attributes.normal = M, i.attributes.color = j;\n    }\n  }\n}\n\nexport { te as fetch, oe as gltfToEngineResources, re as parseUrl };","map":{"version":3,"names":["adjustStaticAGOUrl","e","get","t","isSome","r","isNone","o","b","s","c","i","a","n","m","u","l","C","f","h","d","p","empty","g","expandWithVec3","BufferViewVec3f","x","BufferViewVec4f","BufferViewVec2f","T","BufferViewVec4u8","R","BufferViewVec4u16","w","BufferViewVec3u8","j","BufferViewVec3u16","M","v","y","B","L","createBuffer","I","DefaultLoadingContext","A","loadGLTF","O","triangleFanToTriangles","S","triangleStripToTriangles","E","trianglesToTriangles","N","isEncodedMeshTexture","k","getTransformMatrix","F","ProcessedObjectResource","P","load","V","processLoadResult","_","NormalAttributeType","G","Attribute","D","AlphaDiscardMode","U","DepthTestFunction","H","CullFaceOptions","q","Geometry","W","Texture","$","VertexAttribute","z","DefaultMaterial","K","COLOR_GAMMA","Q","PrimitiveType","J","X","Y","Z","ee","te","re","fileType","cache","loadWOSR","url","engineResources","referenceBoundingBox","lods","isEsriSymbolResource","isWosr","usePBR","streamDataRequester","model","meta","uri","includes","customMeta","esriTreeRendering","le","isSchematic","treeRendering","mrrFactors","materialParamsMixin","oe","skipHighLods","specifiedLodIndex","singleLodIndex","match","Number","Array","Map","length","forEach","name","lodThreshold","parts","se","geometry","vertexCount","ie","boundingInfo","bbMin","bbMax","stageResources","geometries","push","numberOfVertices","material","attributes","normal","color","texCoord0","tangent","materials","ae","alphaMode","has","textures","data","set","parameters","preMultiplyAlpha","encoding","textureColor","Opaque","textureNormal","textureOcclusion","textureEmissive","textureMetallicRoughness","emissiveFactor","transparent","Blend","customDepthTest","Lequal","textureAlphaMode","textureAlphaCutoff","alphaCutoff","diffuse","ambient","opacity","doubleSided","doubleSidedType","cullFace","None","Back","hasVertexColors","hasVertexTangents","normalType","ScreenDerivative","castShadows","receiveSSAO","textureId","id","colorMixMode","normalTextureId","textureAlphaPremultiplied","params","occlusionTextureId","emissiveTextureId","metallicRoughnessTextureId","metallicFactor","roughnessFactor","colorTextureTransformMatrix","colorTextureTransform","normalTextureTransformMatrix","normalTextureTransform","occlusionTextureTransformMatrix","occlusionTextureTransform","emissiveTextureTransformMatrix","emissiveTextureTransform","metallicRoughnessTextureTransformMatrix","metallicRoughnessTextureTransform","position","count","ue","indices","primitiveType","transform","POSITION","typedBuffer","elementCount","ne","NORMAL","TANGENT","UV0","buffer","COLOR","Mask","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","getVec","center","radius","Math","min","setVec","fetch","gltfToEngineResources","parseUrl"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{get as t,isSome as r,isNone as o}from\"../../../../core/maybe.js\";import{b as s}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{a as n}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{m as u,b as l,C as c,l as m,n as f,h as d}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{empty as g,expandWithVec3 as b}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as x,BufferViewVec4f as h,BufferViewVec2f as T,BufferViewVec4u8 as R,BufferViewVec4u16 as w,BufferViewVec3u8 as j,BufferViewVec3u16 as M}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as v,a as y,s as B}from\"../../../../chunks/vec32.js\";import{t as L,s as C}from\"../../../../chunks/vec42.js\";import{createBuffer as I}from\"../../../../geometry/support/buffer/utils.js\";import{DefaultLoadingContext as A}from\"../../glTF/DefaultLoadingContext.js\";import{loadGLTF as O}from\"../../glTF/loader.js\";import{triangleFanToTriangles as S,triangleStripToTriangles as E,trianglesToTriangles as N}from\"../../glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as k}from\"../../glTF/internal/resourceUtils.js\";import{getTransformMatrix as F}from\"../../glTF/internal/TextureTransformUtils.js\";import{ProcessedObjectResource as P}from\"./ProcessedObjectResource.js\";import{load as V,processLoadResult as _}from\"./wosrLoader.js\";import{NormalAttributeType as G}from\"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{Attribute as D}from\"../../webgl-engine/lib/Attribute.js\";import{AlphaDiscardMode as U,DepthTestFunction as H,CullFaceOptions as q}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as W}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as $}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as z}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as K}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{COLOR_GAMMA as Q}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{PrimitiveType as J}from\"../../../webgl/enums.js\";import{n as X}from\"../../../../chunks/vec22.js\";import{c as Y,f as Z}from\"../../../../chunks/vec43.js\";import{c as ee}from\"../../../../chunks/vec33.js\";async function te(o,s){const i=re(e(o));if(\"wosr\"===i.fileType){const e=await(s.cache?s.cache.loadWOSR(i.url,s):V(i.url,s)),{engineResources:t,referenceBoundingBox:r}=_(e,s);return{lods:t,referenceBoundingBox:r,isEsriSymbolResource:!1,isWosr:!0}}const n=await(s.cache?s.cache.loadGLTF(i.url,s,!!s.usePBR):O(new A(s.streamDataRequester),i.url,s,s.usePBR)),a=t(n.model.meta,\"ESRI_proxyEllipsoid\"),u=n.meta.isEsriSymbolResource&&r(a)&&n.meta.uri.includes(\"/RealisticTrees/\");u&&!n.customMeta.esriTreeRendering&&(n.customMeta.esriTreeRendering=!0,le(n,a));const l=!!s.usePBR,c=n.meta.isEsriSymbolResource?{usePBR:l,isSchematic:!1,treeRendering:u,mrrFactors:[0,1,.2]}:{usePBR:l,isSchematic:!1,treeRendering:!1,mrrFactors:[0,1,.5]},m={...s.materialParamsMixin,treeRendering:u},{engineResources:f,referenceBoundingBox:d}=oe(n,c,m,s.skipHighLods&&null==i.specifiedLodIndex?{skipHighLods:!0}:{skipHighLods:!1,singleLodIndex:i.specifiedLodIndex});return{lods:f,referenceBoundingBox:d,isEsriSymbolResource:n.meta.isEsriSymbolResource,isWosr:!1}}function re(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function oe(e,t,o,s){const i=e.model,n=new Array,a=new Map,u=new Map,l=i.lods.length,c=g();return i.lods.forEach(((e,m)=>{const f=!0===s.skipHighLods&&(l>1&&0===m||l>3&&1===m)||!1===s.skipHighLods&&null!=s.singleLodIndex&&m!==s.singleLodIndex;if(f&&0!==m)return;const d=new P(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const s=f?new K({}):se(i,e,d,t,o,a,u),{geometry:n,vertexCount:l}=ie(e,r(s)?s:new K({})),p=n.boundingInfo;r(p)&&0===m&&(b(c,p.bbMin),b(c,p.bbMax)),r(s)&&(d.stageResources.geometries.push(n),d.numberOfVertices+=l)})),f||n.push(d)})),{engineResources:n,referenceBoundingBox:c}}function se(e,t,s,i,n,a,u){const l=t.material+(t.attributes.normal?\"_normal\":\"\")+(t.attributes.color?\"_color\":\"\")+(t.attributes.texCoord0?\"_texCoord0\":\"\")+(t.attributes.tangent?\"_tangent\":\"\"),c=e.materials.get(t.material),m=r(t.attributes.texCoord0),f=r(t.attributes.normal);if(o(c))return null;const d=ae(c.alphaMode);if(!a.has(l)){if(m){const t=(t,o=!1)=>{if(r(t)&&!u.has(t)){const s=e.textures.get(t);if(r(s)){const e=s.data;u.set(t,new $(k(e)?e.data:e,{...s.parameters,preMultiplyAlpha:!k(e)&&o,encoding:k(e)&&r(e.encoding)?e.encoding:void 0}))}}};t(c.textureColor,d!==U.Opaque),t(c.textureNormal),t(c.textureOcclusion),t(c.textureEmissive),t(c.textureMetallicRoughness)}const o=c.color[0]**(1/Q),s=c.color[1]**(1/Q),p=c.color[2]**(1/Q),g=c.emissiveFactor[0]**(1/Q),b=c.emissiveFactor[1]**(1/Q),x=c.emissiveFactor[2]**(1/Q),h=r(c.textureColor)&&m?u.get(c.textureColor):null;a.set(l,new K({...i,transparent:d===U.Blend,customDepthTest:H.Lequal,textureAlphaMode:d,textureAlphaCutoff:c.alphaCutoff,diffuse:[o,s,p],ambient:[o,s,p],opacity:c.opacity,doubleSided:c.doubleSided,doubleSidedType:\"winding-order\",cullFace:c.doubleSided?q.None:q.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:f?G.Attribute:G.ScreenDerivative,castShadows:!0,receiveSSAO:!0,textureId:r(h)?h.id:void 0,colorMixMode:c.colorMixMode,normalTextureId:r(c.textureNormal)&&m?u.get(c.textureNormal).id:void 0,textureAlphaPremultiplied:r(h)&&!!h.params.preMultiplyAlpha,occlusionTextureId:r(c.textureOcclusion)&&m?u.get(c.textureOcclusion).id:void 0,emissiveTextureId:r(c.textureEmissive)&&m?u.get(c.textureEmissive).id:void 0,metallicRoughnessTextureId:r(c.textureMetallicRoughness)&&m?u.get(c.textureMetallicRoughness).id:void 0,emissiveFactor:[g,b,x],mrrFactors:[c.metallicFactor,c.roughnessFactor,i.mrrFactors[2]],isSchematic:!1,colorTextureTransformMatrix:F(c.colorTextureTransform),normalTextureTransformMatrix:F(c.normalTextureTransform),occlusionTextureTransformMatrix:F(c.occlusionTextureTransform),emissiveTextureTransformMatrix:F(c.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:F(c.metallicRoughnessTextureTransform),...n}))}const p=a.get(l);if(s.stageResources.materials.push(p),m){const e=e=>{r(e)&&s.stageResources.textures.push(u.get(e))};e(c.textureColor),e(c.textureNormal),e(c.textureOcclusion),e(c.textureEmissive),e(c.textureMetallicRoughness)}return p}function ie(e,t){const o=e.attributes.position.count,i=ue(e.indices||o,e.primitiveType),n=I(x,o);v(n,e.attributes.position,e.transform);const a=[[z.POSITION,new D(n.typedBuffer,n.elementCount,!0)]],u=[[z.POSITION,i]];if(r(e.attributes.normal)){const t=I(x,o);s(ne,e.transform),y(t,e.attributes.normal,ne),a.push([z.NORMAL,new D(t.typedBuffer,t.elementCount,!0)]),u.push([z.NORMAL,i])}if(r(e.attributes.tangent)){const t=I(h,o);s(ne,e.transform),L(t,e.attributes.tangent,ne),a.push([z.TANGENT,new D(t.typedBuffer,t.elementCount,!0)]),u.push([z.TANGENT,i])}if(r(e.attributes.texCoord0)){const t=I(T,o);X(t,e.attributes.texCoord0),a.push([z.UV0,new D(t.typedBuffer,t.elementCount,!0)]),u.push([z.UV0,i])}if(r(e.attributes.color)){const t=I(R,o);if(4===e.attributes.color.elementCount)e.attributes.color instanceof h?C(t,e.attributes.color,255):e.attributes.color instanceof R?Y(t,e.attributes.color):e.attributes.color instanceof w&&C(t,e.attributes.color,1/256);else{Z(t,255,255,255,255);const r=new j(t.buffer,0,4);e.attributes.color instanceof x?B(r,e.attributes.color,255):e.attributes.color instanceof j?ee(r,e.attributes.color):e.attributes.color instanceof M&&B(r,e.attributes.color,1/256)}a.push([z.COLOR,new D(t.typedBuffer,t.elementCount,!0)]),u.push([z.COLOR,i])}return{geometry:new W(t,a,u),vertexCount:o}}const ne=i();function ae(e){switch(e){case\"BLEND\":return U.Blend;case\"MASK\":return U.Mask;case\"OPAQUE\":case null:case void 0:return U.Opaque}}function ue(e,t){switch(t){case J.TRIANGLES:return N(e);case J.TRIANGLE_STRIP:return E(e);case J.TRIANGLE_FAN:return S(e)}}function le(e,t){for(let r=0;r<e.model.lods.length;++r){const s=e.model.lods[r];for(const i of s.parts){const s=i.attributes.normal;if(o(s))return;const g=i.attributes.position,b=g.count,h=p(),T=p(),w=p(),j=I(R,b),M=I(x,b),v=n(a(),i.transform);for(let o=0;o<b;o++){g.getVec(o,T),s.getVec(o,h),u(T,T,i.transform),l(w,T,t.center),c(w,w,t.radius);const n=w[2],a=m(w),p=Math.min(.45+.55*a*a,1);c(w,w,t.radius),null!==v&&u(w,w,v),f(w,w),r+1!==e.model.lods.length&&e.model.lods.length>1&&d(w,w,h,n>-1?.2:Math.min(-4*n-3.8,1)),M.setVec(o,w),j.set(o,0,255*p),j.set(o,1,255*p),j.set(o,2,255*p),j.set(o,3,255)}i.attributes.normal=M,i.attributes.color=j}}}export{te as fetch,oe as gltfToEngineResources,re as parseUrl};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}