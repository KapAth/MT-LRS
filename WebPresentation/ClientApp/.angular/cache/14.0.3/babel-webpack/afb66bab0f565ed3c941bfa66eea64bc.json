{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport { WhereClauseCache as i } from \"../../../core/sql/WhereClauseCache.js\";\nconst n = new i(50, 500),\n      s = \"feature-store:unsupported-query\",\n      t = \" as \",\n      r = new Set([\"esriFieldTypeOID\", \"esriFieldTypeSmallInteger\", \"esriFieldTypeInteger\", \"esriFieldTypeSingle\", \"esriFieldTypeDouble\", \"esriFieldTypeLong\", \"esriFieldTypeDate\"]);\n\nfunction o(i, t) {\n  if (!t) return !0;\n  const r = n.get(t, i);\n  if (!r) throw new e(s, \"invalid SQL expression\", {\n    where: t\n  });\n  if (!r.isStandardized) throw new e(s, \"where clause is not standard\", {\n    where: t\n  });\n  return c(i, r.fieldNames, \"where clause contains missing fields\"), !0;\n}\n\nfunction a(i, t, r) {\n  if (!t) return !0;\n  const o = n.get(t, i);\n  if (!o) throw new e(s, \"invalid SQL expression\", {\n    having: t\n  });\n  if (!o.isAggregate) throw new e(s, \"having does not contain a valid aggregate function\", {\n    having: t\n  });\n  const a = o.fieldNames;\n  c(i, a, \"having contains missing fields\");\n  if (!o.getExpressions().every(e => {\n    const {\n      aggregateType: n,\n      field: s\n    } = e,\n          t = i.get(s)?.name;\n    return r.some(e => {\n      const {\n        onStatisticField: s,\n        statisticType: r\n      } = e,\n            o = i.get(s)?.name;\n      return o === t && r.toLowerCase().trim() === n;\n    });\n  })) throw new e(s, \"expressions in having should also exist in outStatistics\", {\n    having: t\n  });\n  return !0;\n}\n\nfunction l(e, i) {\n  return e ? n.get(e, i) : null;\n}\n\nfunction c(i, n, t, r = !0) {\n  const o = [];\n\n  for (const u of n) if (\"*\" !== u && !i.has(u)) if (r) {\n    const n = d(u);\n\n    try {\n      const t = l(n, i);\n      if (!t) throw new e(s, \"invalid SQL expression\", {\n        where: n\n      });\n      if (!t.isStandardized) throw new e(s, \"expression is not standard\", {\n        clause: t\n      });\n      c(i, t.fieldNames, \"expression contains missing fields\");\n    } catch (a) {\n      const e = a && a.details;\n      if (e && (e.clause || e.where)) throw a;\n      e && e.missingFields ? o.push(...e.missingFields) : o.push(u);\n    }\n  } else o.push(u);\n\n  if (o.length) throw new e(s, t, {\n    missingFields: o\n  });\n}\n\nfunction d(e) {\n  return e.split(t)[0];\n}\n\nfunction u(e) {\n  return e.split(t)[1];\n}\n\nfunction f(e, i) {\n  const n = i.get(e);\n  return !!n && !r.has(n.type);\n}\n\nexport { u as getAliasFromFieldName, d as getExpressionFromFieldName, l as getWhereClause, f as hasInvalidFieldType, c as validateFields, a as validateHaving, o as validateWhere };","map":{"version":3,"names":["e","WhereClauseCache","i","n","s","t","r","Set","o","get","where","isStandardized","c","fieldNames","a","having","isAggregate","getExpressions","every","aggregateType","field","name","some","onStatisticField","statisticType","toLowerCase","trim","l","u","has","d","clause","details","missingFields","push","length","split","f","type","getAliasFromFieldName","getExpressionFromFieldName","getWhereClause","hasInvalidFieldType","validateFields","validateHaving","validateWhere"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{WhereClauseCache as i}from\"../../../core/sql/WhereClauseCache.js\";const n=new i(50,500),s=\"feature-store:unsupported-query\",t=\" as \",r=new Set([\"esriFieldTypeOID\",\"esriFieldTypeSmallInteger\",\"esriFieldTypeInteger\",\"esriFieldTypeSingle\",\"esriFieldTypeDouble\",\"esriFieldTypeLong\",\"esriFieldTypeDate\"]);function o(i,t){if(!t)return!0;const r=n.get(t,i);if(!r)throw new e(s,\"invalid SQL expression\",{where:t});if(!r.isStandardized)throw new e(s,\"where clause is not standard\",{where:t});return c(i,r.fieldNames,\"where clause contains missing fields\"),!0}function a(i,t,r){if(!t)return!0;const o=n.get(t,i);if(!o)throw new e(s,\"invalid SQL expression\",{having:t});if(!o.isAggregate)throw new e(s,\"having does not contain a valid aggregate function\",{having:t});const a=o.fieldNames;c(i,a,\"having contains missing fields\");if(!o.getExpressions().every((e=>{const{aggregateType:n,field:s}=e,t=i.get(s)?.name;return r.some((e=>{const{onStatisticField:s,statisticType:r}=e,o=i.get(s)?.name;return o===t&&r.toLowerCase().trim()===n}))})))throw new e(s,\"expressions in having should also exist in outStatistics\",{having:t});return!0}function l(e,i){return e?n.get(e,i):null}function c(i,n,t,r=!0){const o=[];for(const u of n)if(\"*\"!==u&&!i.has(u))if(r){const n=d(u);try{const t=l(n,i);if(!t)throw new e(s,\"invalid SQL expression\",{where:n});if(!t.isStandardized)throw new e(s,\"expression is not standard\",{clause:t});c(i,t.fieldNames,\"expression contains missing fields\")}catch(a){const e=a&&a.details;if(e&&(e.clause||e.where))throw a;e&&e.missingFields?o.push(...e.missingFields):o.push(u)}}else o.push(u);if(o.length)throw new e(s,t,{missingFields:o})}function d(e){return e.split(t)[0]}function u(e){return e.split(t)[1]}function f(e,i){const n=i.get(e);return!!n&&!r.has(n.type)}export{u as getAliasFromFieldName,d as getExpressionFromFieldName,l as getWhereClause,f as hasInvalidFieldType,c as validateFields,a as validateHaving,o as validateWhere};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}