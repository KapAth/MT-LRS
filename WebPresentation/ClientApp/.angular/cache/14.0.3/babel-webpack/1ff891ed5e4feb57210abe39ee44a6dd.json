{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { disposeMaybe as e } from \"../../../../../../core/maybe.js\";\nimport t from \"../../VertexStream.js\";\nimport { BlendFactor as r, TextureType as s, PixelFormat as i, PixelType as a, TextureWrapMode as o, TextureSamplingMode as n } from \"../../../../../webgl/enums.js\";\nimport { Texture as l } from \"../../../../../webgl/Texture.js\";\n\nclass _ {\n  constructor() {\n    this._layerFBOTexture = null, this._size = [0, 0], this._programDesc = {\n      vsPath: \"post-processing/pp\",\n      fsPath: \"post-processing/filterEffect\",\n      attributes: new Map([[\"a_position\", 0]])\n    };\n  }\n\n  dispose() {\n    this._layerFBOTexture = e(this._layerFBOTexture);\n  }\n\n  draw(e, t, s) {\n    const {\n      width: i,\n      height: a\n    } = t;\n\n    this._createOrResizeResources(e, i, a);\n\n    const {\n      context: o,\n      painter: n\n    } = e,\n          {\n      materialManager: l\n    } = n,\n          _ = this._programDesc,\n          c = this._quad,\n          u = s.colorMatrix;\n    c.bind();\n    const h = this._layerFBOTexture;\n    o.bindFramebuffer(t), t.copyToTexture(0, 0, i, a, 0, 0, h), o.setBlendingEnabled(!1), o.setStencilTestEnabled(!1);\n    const p = l.getProgram(_);\n    o.useProgram(p), o.bindTexture(h, 2), p.setUniformMatrix4fv(\"u_coefficients\", u), p.setUniform1i(\"u_colorTexture\", 2), c.draw(), o.setBlendingEnabled(!0), o.setBlendFunction(r.ONE, r.ONE_MINUS_SRC_ALPHA), o.setStencilTestEnabled(!0), c.unbind();\n  }\n\n  _createOrResizeResources(e, r, _) {\n    const {\n      context: c\n    } = e;\n    this._layerFBOTexture && this._size[0] === r && this._size[1] === _ || (this._size[0] = r, this._size[1] = _, this._layerFBOTexture ? this._layerFBOTexture.resize(r, _) : this._layerFBOTexture = new l(c, {\n      target: s.TEXTURE_2D,\n      pixelFormat: i.RGBA,\n      internalFormat: i.RGBA,\n      dataType: a.UNSIGNED_BYTE,\n      wrapMode: o.CLAMP_TO_EDGE,\n      samplingMode: n.LINEAR,\n      flipped: !1,\n      width: r,\n      height: _\n    }), this._quad || (this._quad = new t(c, [-1, -1, 1, -1, -1, 1, 1, 1])));\n  }\n\n}\n\nexport { _ as Colorize };","map":{"version":3,"names":["disposeMaybe","e","t","BlendFactor","r","TextureType","s","PixelFormat","i","PixelType","a","TextureWrapMode","o","TextureSamplingMode","n","Texture","l","_","constructor","_layerFBOTexture","_size","_programDesc","vsPath","fsPath","attributes","Map","dispose","draw","width","height","_createOrResizeResources","context","painter","materialManager","c","_quad","u","colorMatrix","bind","h","bindFramebuffer","copyToTexture","setBlendingEnabled","setStencilTestEnabled","p","getProgram","useProgram","bindTexture","setUniformMatrix4fv","setUniform1i","setBlendFunction","ONE","ONE_MINUS_SRC_ALPHA","unbind","resize","target","TEXTURE_2D","pixelFormat","RGBA","internalFormat","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","samplingMode","LINEAR","flipped","Colorize"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Colorize.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as e}from\"../../../../../../core/maybe.js\";import t from\"../../VertexStream.js\";import{BlendFactor as r,TextureType as s,PixelFormat as i,PixelType as a,TextureWrapMode as o,TextureSamplingMode as n}from\"../../../../../webgl/enums.js\";import{Texture as l}from\"../../../../../webgl/Texture.js\";class _{constructor(){this._layerFBOTexture=null,this._size=[0,0],this._programDesc={vsPath:\"post-processing/pp\",fsPath:\"post-processing/filterEffect\",attributes:new Map([[\"a_position\",0]])}}dispose(){this._layerFBOTexture=e(this._layerFBOTexture)}draw(e,t,s){const{width:i,height:a}=t;this._createOrResizeResources(e,i,a);const{context:o,painter:n}=e,{materialManager:l}=n,_=this._programDesc,c=this._quad,u=s.colorMatrix;c.bind();const h=this._layerFBOTexture;o.bindFramebuffer(t),t.copyToTexture(0,0,i,a,0,0,h),o.setBlendingEnabled(!1),o.setStencilTestEnabled(!1);const p=l.getProgram(_);o.useProgram(p),o.bindTexture(h,2),p.setUniformMatrix4fv(\"u_coefficients\",u),p.setUniform1i(\"u_colorTexture\",2),c.draw(),o.setBlendingEnabled(!0),o.setBlendFunction(r.ONE,r.ONE_MINUS_SRC_ALPHA),o.setStencilTestEnabled(!0),c.unbind()}_createOrResizeResources(e,r,_){const{context:c}=e;this._layerFBOTexture&&this._size[0]===r&&this._size[1]===_||(this._size[0]=r,this._size[1]=_,this._layerFBOTexture?this._layerFBOTexture.resize(r,_):this._layerFBOTexture=new l(c,{target:s.TEXTURE_2D,pixelFormat:i.RGBA,internalFormat:i.RGBA,dataType:a.UNSIGNED_BYTE,wrapMode:o.CLAMP_TO_EDGE,samplingMode:n.LINEAR,flipped:!1,width:r,height:_}),this._quad||(this._quad=new t(c,[-1,-1,1,-1,-1,1,1,1])))}}export{_ as Colorize};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,YAAY,IAAIC,CAAvB,QAA6B,iCAA7B;AAA+D,OAAOC,CAAP,MAAa,uBAAb;AAAqC,SAAOC,WAAW,IAAIC,CAAtB,EAAwBC,WAAW,IAAIC,CAAvC,EAAyCC,WAAW,IAAIC,CAAxD,EAA0DC,SAAS,IAAIC,CAAvE,EAAyEC,eAAe,IAAIC,CAA5F,EAA8FC,mBAAmB,IAAIC,CAArH,QAA2H,+BAA3H;AAA2J,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,iCAAxB;;AAA0D,MAAMC,CAAN,CAAO;EAACC,WAAW,GAAE;IAAC,KAAKC,gBAAL,GAAsB,IAAtB,EAA2B,KAAKC,KAAL,GAAW,CAAC,CAAD,EAAG,CAAH,CAAtC,EAA4C,KAAKC,YAAL,GAAkB;MAACC,MAAM,EAAC,oBAAR;MAA6BC,MAAM,EAAC,8BAApC;MAAmEC,UAAU,EAAC,IAAIC,GAAJ,CAAQ,CAAC,CAAC,YAAD,EAAc,CAAd,CAAD,CAAR;IAA9E,CAA9D;EAAyK;;EAAAC,OAAO,GAAE;IAAC,KAAKP,gBAAL,GAAsBlB,CAAC,CAAC,KAAKkB,gBAAN,CAAvB;EAA+C;;EAAAQ,IAAI,CAAC1B,CAAD,EAAGC,CAAH,EAAKI,CAAL,EAAO;IAAC,MAAK;MAACsB,KAAK,EAACpB,CAAP;MAASqB,MAAM,EAACnB;IAAhB,IAAmBR,CAAxB;;IAA0B,KAAK4B,wBAAL,CAA8B7B,CAA9B,EAAgCO,CAAhC,EAAkCE,CAAlC;;IAAqC,MAAK;MAACqB,OAAO,EAACnB,CAAT;MAAWoB,OAAO,EAAClB;IAAnB,IAAsBb,CAA3B;IAAA,MAA6B;MAACgC,eAAe,EAACjB;IAAjB,IAAoBF,CAAjD;IAAA,MAAmDG,CAAC,GAAC,KAAKI,YAA1D;IAAA,MAAuEa,CAAC,GAAC,KAAKC,KAA9E;IAAA,MAAoFC,CAAC,GAAC9B,CAAC,CAAC+B,WAAxF;IAAoGH,CAAC,CAACI,IAAF;IAAS,MAAMC,CAAC,GAAC,KAAKpB,gBAAb;IAA8BP,CAAC,CAAC4B,eAAF,CAAkBtC,CAAlB,GAAqBA,CAAC,CAACuC,aAAF,CAAgB,CAAhB,EAAkB,CAAlB,EAAoBjC,CAApB,EAAsBE,CAAtB,EAAwB,CAAxB,EAA0B,CAA1B,EAA4B6B,CAA5B,CAArB,EAAoD3B,CAAC,CAAC8B,kBAAF,CAAqB,CAAC,CAAtB,CAApD,EAA6E9B,CAAC,CAAC+B,qBAAF,CAAwB,CAAC,CAAzB,CAA7E;IAAyG,MAAMC,CAAC,GAAC5B,CAAC,CAAC6B,UAAF,CAAa5B,CAAb,CAAR;IAAwBL,CAAC,CAACkC,UAAF,CAAaF,CAAb,GAAgBhC,CAAC,CAACmC,WAAF,CAAcR,CAAd,EAAgB,CAAhB,CAAhB,EAAmCK,CAAC,CAACI,mBAAF,CAAsB,gBAAtB,EAAuCZ,CAAvC,CAAnC,EAA6EQ,CAAC,CAACK,YAAF,CAAe,gBAAf,EAAgC,CAAhC,CAA7E,EAAgHf,CAAC,CAACP,IAAF,EAAhH,EAAyHf,CAAC,CAAC8B,kBAAF,CAAqB,CAAC,CAAtB,CAAzH,EAAkJ9B,CAAC,CAACsC,gBAAF,CAAmB9C,CAAC,CAAC+C,GAArB,EAAyB/C,CAAC,CAACgD,mBAA3B,CAAlJ,EAAkMxC,CAAC,CAAC+B,qBAAF,CAAwB,CAAC,CAAzB,CAAlM,EAA8NT,CAAC,CAACmB,MAAF,EAA9N;EAAyO;;EAAAvB,wBAAwB,CAAC7B,CAAD,EAAGG,CAAH,EAAKa,CAAL,EAAO;IAAC,MAAK;MAACc,OAAO,EAACG;IAAT,IAAYjC,CAAjB;IAAmB,KAAKkB,gBAAL,IAAuB,KAAKC,KAAL,CAAW,CAAX,MAAgBhB,CAAvC,IAA0C,KAAKgB,KAAL,CAAW,CAAX,MAAgBH,CAA1D,KAA8D,KAAKG,KAAL,CAAW,CAAX,IAAchB,CAAd,EAAgB,KAAKgB,KAAL,CAAW,CAAX,IAAcH,CAA9B,EAAgC,KAAKE,gBAAL,GAAsB,KAAKA,gBAAL,CAAsBmC,MAAtB,CAA6BlD,CAA7B,EAA+Ba,CAA/B,CAAtB,GAAwD,KAAKE,gBAAL,GAAsB,IAAIH,CAAJ,CAAMkB,CAAN,EAAQ;MAACqB,MAAM,EAACjD,CAAC,CAACkD,UAAV;MAAqBC,WAAW,EAACjD,CAAC,CAACkD,IAAnC;MAAwCC,cAAc,EAACnD,CAAC,CAACkD,IAAzD;MAA8DE,QAAQ,EAAClD,CAAC,CAACmD,aAAzE;MAAuFC,QAAQ,EAAClD,CAAC,CAACmD,aAAlG;MAAgHC,YAAY,EAAClD,CAAC,CAACmD,MAA/H;MAAsIC,OAAO,EAAC,CAAC,CAA/I;MAAiJtC,KAAK,EAACxB,CAAvJ;MAAyJyB,MAAM,EAACZ;IAAhK,CAAR,CAA9G,EAA0R,KAAKkB,KAAL,KAAa,KAAKA,KAAL,GAAW,IAAIjC,CAAJ,CAAMgC,CAAN,EAAQ,CAAC,CAAC,CAAF,EAAI,CAAC,CAAL,EAAO,CAAP,EAAS,CAAC,CAAV,EAAY,CAAC,CAAb,EAAe,CAAf,EAAiB,CAAjB,EAAmB,CAAnB,CAAR,CAAxB,CAAxV;EAAiZ;;AAArvC;;AAAsvC,SAAOjB,CAAC,IAAIkD,QAAZ"},"metadata":{},"sourceType":"module"}