{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport { isNone as o } from \"../../core/maybe.js\";\nimport { isDataProtocol as s, isBlobProtocol as i, isAbsolute as n, dataToBlob as a, join as m } from \"../../core/urlUtils.js\";\nimport { generateUUID as p } from \"../../core/uuid.js\";\nimport { property as c } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { reader as l } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as u } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as d } from \"../../core/accessorSupport/decorators/writer.js\";\nimport f from \"./MediaElementBase.js\";\nimport { getResourceContentExtension as g } from \"../../portal/support/resourceExtension.js\";\nimport { f as h, t as y, i as v, M as j } from \"../../chunks/persistableUrlUtils.js\";\nlet I = class extends f {\n  constructor(e) {\n    super(e), this.content = null, this.image = null, this.type = \"image\", this.image = null;\n  }\n\n  load() {\n    const e = this.image;\n\n    if (\"string\" == typeof e) {\n      const r = t(e, {\n        responseType: \"image\"\n      }).then(({\n        data: e\n      }) => {\n        this._set(\"content\", e);\n      });\n      this.addResolvingPromise(r);\n    } else if (e instanceof HTMLImageElement) {\n      const t = e.decode().then(() => {\n        this._set(\"content\", e);\n      });\n      this.addResolvingPromise(t);\n    } else e ? this._set(\"content\", e) : this.addResolvingPromise(Promise.reject(new r(\"image-element:invalid-image-type\", \"Invalid image type\", {\n      image: e\n    })));\n\n    return Promise.resolve(this);\n  }\n\n  readImage(e, t, r) {\n    return h(t.url, r);\n  }\n\n  writeImage(e, t, r, a) {\n    if (o(e)) return;\n    const m = a?.portalItem,\n          p = a?.resources;\n    if (!m || !p) return void (\"string\" == typeof e && (t[r] = y(e, a)));\n    const c = \"string\" != typeof e || s(e) || i(e) ? null : e;\n\n    if (c) {\n      if (null == v(c)) return void (t[r] = c);\n      const e = y(c, { ...a,\n        verifyItemRelativeUrls: a && a.verifyItemRelativeUrls ? {\n          writtenUrls: a.verifyItemRelativeUrls.writtenUrls,\n          rootPath: void 0\n        } : void 0\n      }, j.NO);\n      if (m && e && !n(e)) return p.toKeep.push({\n        resource: m.resourceFromPath(e),\n        compress: !1\n      }), void (t[r] = e);\n    }\n\n    t[r] = \"<pending>\", p.pendingOperations.push(E(e).then(e => {\n      const o = U(e, m);\n      t[r] = o.itemRelativeUrl, p.toAdd.push({\n        resource: o,\n        content: e,\n        compress: !1,\n        finish: e => {\n          this.image = e.url;\n        }\n      });\n    }));\n  }\n\n};\ne([c({\n  readOnly: !0\n})], I.prototype, \"content\", void 0), e([c({\n  json: {\n    name: \"url\",\n    type: String\n  }\n})], I.prototype, \"image\", void 0), e([l(\"image\", [\"url\"])], I.prototype, \"readImage\", null), e([d(\"image\")], I.prototype, \"writeImage\", null), e([c({\n  readOnly: !0,\n  json: {\n    name: \"mediaType\"\n  }\n})], I.prototype, \"type\", void 0), I = e([u(\"esri.layers.support.ImageElement\")], I);\nconst w = I;\n\nfunction E(_x) {\n  return _E.apply(this, arguments);\n}\n\nfunction _E() {\n  _E = _asyncToGenerator(function* (e) {\n    if (\"string\" == typeof e) {\n      if (i(e)) {\n        const {\n          data: r\n        } = yield t(e, {\n          responseType: \"blob\"\n        });\n        return r;\n      }\n\n      if (s(e)) return a(e);\n      return E((yield t(e, {\n        responseType: \"image\"\n      })).data);\n    }\n\n    return new Promise(t => T(e).toBlob(t));\n  });\n  return _E.apply(this, arguments);\n}\n\nfunction T(e) {\n  if (e instanceof HTMLCanvasElement) return e;\n  const t = e instanceof HTMLImageElement ? e.naturalWidth : e.width,\n        r = e instanceof HTMLImageElement ? e.naturalHeight : e.height,\n        o = document.createElement(\"canvas\"),\n        s = o.getContext(\"2d\");\n  return o.width = t, o.height = r, e instanceof HTMLImageElement ? s.drawImage(e, 0, 0, e.width, e.height) : e instanceof ImageData && s.putImageData(e, 0, 0), o;\n}\n\nfunction U(e, t) {\n  const r = p(),\n        o = `${m(\"media\", r)}.${g(e)}`;\n  return t.resourceFromPath(o);\n}\n\nexport { w as default };","map":{"version":3,"names":["_","e","t","r","isNone","o","isDataProtocol","s","isBlobProtocol","i","isAbsolute","n","dataToBlob","a","join","m","generateUUID","p","property","c","reader","l","subclass","u","writer","d","f","getResourceContentExtension","g","h","y","v","M","j","I","constructor","content","image","type","load","responseType","then","data","_set","addResolvingPromise","HTMLImageElement","decode","Promise","reject","resolve","readImage","url","writeImage","portalItem","resources","verifyItemRelativeUrls","writtenUrls","rootPath","NO","toKeep","push","resource","resourceFromPath","compress","pendingOperations","E","U","itemRelativeUrl","toAdd","finish","readOnly","prototype","json","name","String","w","T","toBlob","HTMLCanvasElement","naturalWidth","width","naturalHeight","height","document","createElement","getContext","drawImage","ImageData","putImageData","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/support/ImageElement.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import{isNone as o}from\"../../core/maybe.js\";import{isDataProtocol as s,isBlobProtocol as i,isAbsolute as n,dataToBlob as a,join as m}from\"../../core/urlUtils.js\";import{generateUUID as p}from\"../../core/uuid.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../../core/accessorSupport/decorators/writer.js\";import f from\"./MediaElementBase.js\";import{getResourceContentExtension as g}from\"../../portal/support/resourceExtension.js\";import{f as h,t as y,i as v,M as j}from\"../../chunks/persistableUrlUtils.js\";let I=class extends f{constructor(e){super(e),this.content=null,this.image=null,this.type=\"image\",this.image=null}load(){const e=this.image;if(\"string\"==typeof e){const r=t(e,{responseType:\"image\"}).then((({data:e})=>{this._set(\"content\",e)}));this.addResolvingPromise(r)}else if(e instanceof HTMLImageElement){const t=e.decode().then((()=>{this._set(\"content\",e)}));this.addResolvingPromise(t)}else e?this._set(\"content\",e):this.addResolvingPromise(Promise.reject(new r(\"image-element:invalid-image-type\",\"Invalid image type\",{image:e})));return Promise.resolve(this)}readImage(e,t,r){return h(t.url,r)}writeImage(e,t,r,a){if(o(e))return;const m=a?.portalItem,p=a?.resources;if(!m||!p)return void(\"string\"==typeof e&&(t[r]=y(e,a)));const c=\"string\"!=typeof e||s(e)||i(e)?null:e;if(c){if(null==v(c))return void(t[r]=c);const e=y(c,{...a,verifyItemRelativeUrls:a&&a.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},j.NO);if(m&&e&&!n(e))return p.toKeep.push({resource:m.resourceFromPath(e),compress:!1}),void(t[r]=e)}t[r]=\"<pending>\",p.pendingOperations.push(E(e).then((e=>{const o=U(e,m);t[r]=o.itemRelativeUrl,p.toAdd.push({resource:o,content:e,compress:!1,finish:e=>{this.image=e.url}})})))}};e([c({readOnly:!0})],I.prototype,\"content\",void 0),e([c({json:{name:\"url\",type:String}})],I.prototype,\"image\",void 0),e([l(\"image\",[\"url\"])],I.prototype,\"readImage\",null),e([d(\"image\")],I.prototype,\"writeImage\",null),e([c({readOnly:!0,json:{name:\"mediaType\"}})],I.prototype,\"type\",void 0),I=e([u(\"esri.layers.support.ImageElement\")],I);const w=I;async function E(e){if(\"string\"==typeof e){if(i(e)){const{data:r}=await t(e,{responseType:\"blob\"});return r}if(s(e))return a(e);return E((await t(e,{responseType:\"image\"})).data)}return new Promise((t=>T(e).toBlob(t)))}function T(e){if(e instanceof HTMLCanvasElement)return e;const t=e instanceof HTMLImageElement?e.naturalWidth:e.width,r=e instanceof HTMLImageElement?e.naturalHeight:e.height,o=document.createElement(\"canvas\"),s=o.getContext(\"2d\");return o.width=t,o.height=r,e instanceof HTMLImageElement?s.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&s.putImageData(e,0,0),o}function U(e,t){const r=p(),o=`${m(\"media\",r)}.${g(e)}`;return t.resourceFromPath(o)}export{w as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}