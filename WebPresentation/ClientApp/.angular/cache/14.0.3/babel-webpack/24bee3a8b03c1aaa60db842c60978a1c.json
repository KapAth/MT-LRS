{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../core/Error.js\";\nimport { isSome as t, isNone as s } from \"../../../core/maybe.js\";\nimport { whenOrAbort as r, eachAlwaysValues as o, isAborted as n, throwIfAborted as a } from \"../../../core/promiseUtils.js\";\nimport { removeFile as i, makeRelative as l } from \"../../../core/urlUtils.js\";\nimport c from \"../../Point.js\";\n\nfunction u(_x, _x2, _x3) {\n  return _u.apply(this, arguments);\n}\n\nfunction _u() {\n  _u = _asyncToGenerator(function* (e, s, o) {\n    const {\n      loadGLTFMesh: n\n    } = yield r(import(\"./loadGLTFMesh.js\"), o),\n          a = yield m(s, o),\n          i = n(new c({\n      x: 0,\n      y: 0,\n      z: 0,\n      spatialReference: e.spatialReference\n    }), a.url, {\n      resolveFile: f(a),\n      useTransform: !0,\n      signal: t(o) ? o.signal : null\n    });\n    i.then(() => a.dispose(), () => a.dispose());\n    const {\n      vertexAttributes: l,\n      components: u\n    } = yield i;\n    e.vertexAttributes = l, e.components = u;\n  });\n  return _u.apply(this, arguments);\n}\n\nfunction f(e) {\n  const t = i(e.url);\n  return s => {\n    const r = l(s, t, t),\n          o = r ? r.replace(/^ *\\.\\//, \"\") : null;\n    return (o ? e.files.get(o) : null) ?? s;\n  };\n}\n\nfunction m(_x4, _x5) {\n  return _m.apply(this, arguments);\n}\n\nfunction _m() {\n  _m = _asyncToGenerator(function* (e, t) {\n    return e instanceof Blob ? y.fromBlob(e) : \"string\" == typeof e ? new y(e) : Array.isArray(e) ? p(e, t) : w(e, t);\n  });\n  return _m.apply(this, arguments);\n}\n\nfunction p(_x6, _x7) {\n  return _p.apply(this, arguments);\n}\n\nfunction _p() {\n  _p = _asyncToGenerator(function* (t, r) {\n    const i = new Map();\n    let l = null;\n    const c = yield o(t.map( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (e) {\n        return {\n          name: e.name,\n          source: yield m(e instanceof Blob ? e : e.source, r)\n        };\n      });\n\n      return function (_x10) {\n        return _ref.apply(this, arguments);\n      };\n    }())),\n          u = [];\n\n    for (const e of c) e && (n(r) ? e.source.dispose() : u.push(e));\n\n    a(r);\n\n    for (const {\n      name: e,\n      source: o\n    } of u) (s(l) || /\\.(gltf|glb)/i.test(e)) && (l = o.url), i.set(e, o.url), o.files && o.files.forEach((e, t) => i.set(t, e));\n\n    if (s(l)) throw new e(\"mesh-load-external:missing-files\", \"Missing files to load external mesh source\");\n    return new y(l, () => u.forEach(({\n      source: e\n    }) => e.dispose()), i);\n  });\n  return _p.apply(this, arguments);\n}\n\nfunction w(_x8, _x9) {\n  return _w.apply(this, arguments);\n}\n\nfunction _w() {\n  _w = _asyncToGenerator(function* (e, t) {\n    const {\n      default: s\n    } = yield r(import(\"../../../request.js\"), t),\n          o = \"string\" == typeof e.multipart[0] ? yield Promise.all(e.multipart.map( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (e) {\n        return (yield s(e, {\n          responseType: \"array-buffer\"\n        })).data;\n      });\n\n      return function (_x11) {\n        return _ref2.apply(this, arguments);\n      };\n    }())) : e.multipart;\n    return y.fromBlob(new Blob(o));\n  });\n  return _w.apply(this, arguments);\n}\n\nclass y {\n  constructor(e, t = () => {}, s = new Map()) {\n    this.url = e, this.dispose = t, this.files = s;\n  }\n\n  static fromBlob(e) {\n    const t = URL.createObjectURL(e);\n    return new y(t, () => URL.revokeObjectURL(t));\n  }\n\n}\n\nexport { u as loadExternal };","map":{"version":3,"names":["e","isSome","t","isNone","s","whenOrAbort","r","eachAlwaysValues","o","isAborted","n","throwIfAborted","a","removeFile","i","makeRelative","l","c","u","loadGLTFMesh","m","x","y","z","spatialReference","url","resolveFile","f","useTransform","signal","then","dispose","vertexAttributes","components","replace","files","get","Blob","fromBlob","Array","isArray","p","w","Map","map","name","source","push","test","set","forEach","default","multipart","Promise","all","responseType","data","constructor","URL","createObjectURL","revokeObjectURL","loadExternal"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/geometry/support/meshUtils/loadExternal.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{isSome as t,isNone as s}from\"../../../core/maybe.js\";import{whenOrAbort as r,eachAlwaysValues as o,isAborted as n,throwIfAborted as a}from\"../../../core/promiseUtils.js\";import{removeFile as i,makeRelative as l}from\"../../../core/urlUtils.js\";import c from\"../../Point.js\";async function u(e,s,o){const{loadGLTFMesh:n}=await r(import(\"./loadGLTFMesh.js\"),o),a=await m(s,o),i=n(new c({x:0,y:0,z:0,spatialReference:e.spatialReference}),a.url,{resolveFile:f(a),useTransform:!0,signal:t(o)?o.signal:null});i.then((()=>a.dispose()),(()=>a.dispose()));const{vertexAttributes:l,components:u}=await i;e.vertexAttributes=l,e.components=u}function f(e){const t=i(e.url);return s=>{const r=l(s,t,t),o=r?r.replace(/^ *\\.\\//,\"\"):null;return(o?e.files.get(o):null)??s}}async function m(e,t){return e instanceof Blob?y.fromBlob(e):\"string\"==typeof e?new y(e):Array.isArray(e)?p(e,t):w(e,t)}async function p(t,r){const i=new Map;let l=null;const c=await o(t.map((async e=>({name:e.name,source:await m(e instanceof Blob?e:e.source,r)})))),u=[];for(const e of c)e&&(n(r)?e.source.dispose():u.push(e));a(r);for(const{name:e,source:o}of u)(s(l)||/\\.(gltf|glb)/i.test(e))&&(l=o.url),i.set(e,o.url),o.files&&o.files.forEach(((e,t)=>i.set(t,e)));if(s(l))throw new e(\"mesh-load-external:missing-files\",\"Missing files to load external mesh source\");return new y(l,(()=>u.forEach((({source:e})=>e.dispose()))),i)}async function w(e,t){const{default:s}=await r(import(\"../../../request.js\"),t),o=\"string\"==typeof e.multipart[0]?await Promise.all(e.multipart.map((async e=>(await s(e,{responseType:\"array-buffer\"})).data))):e.multipart;return y.fromBlob(new Blob(o))}class y{constructor(e,t=(()=>{}),s=new Map){this.url=e,this.dispose=t,this.files=s}static fromBlob(e){const t=URL.createObjectURL(e);return new y(t,(()=>URL.revokeObjectURL(t)))}}export{u as loadExternal};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}