{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { create as e } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { getWorldWidth as s } from \"../../viewpointUtils.js\";\nimport t from \"./BrushRasterBitmap.js\";\nimport { RasterTile as r } from \"./RasterTile.js\";\nimport { WGLDrawPhase as i } from \"../webgl/enums.js\";\nimport n from \"../webgl/TileContainer.js\";\n\nclass o extends n {\n  constructor() {\n    super(...arguments), this.isCustomTilingScheme = !1;\n  }\n\n  createTile(e) {\n    const s = this._getTileBounds(e),\n          [t, i] = this._tileInfoView.tileInfo.size,\n          n = this._tileInfoView.getTileResolution(e.level);\n\n    return new r(e, n, s[0], s[3], t, i);\n  }\n\n  prepareRenderPasses(e) {\n    const s = e.registerRenderPass({\n      name: \"imagery (tile)\",\n      brushes: [t],\n      target: () => this.children.map(e => e.bitmap),\n      drawPhase: i.MAP\n    });\n    return [...super.prepareRenderPasses(e), s];\n  }\n\n  doRender(e) {\n    if (!this.visible || e.drawPhase !== i.MAP) return;\n    const {\n      rasterFunctionChain: s\n    } = this;\n    if (!s) return e.renderPass = \"raster-bitmap\", void super.doRender(e);\n    const [t, r] = this._tileInfoView.tileInfo.size;\n\n    if (e.renderPass = \"raster\", e.rasterFunction = {\n      name: \"Reproject\",\n      parameters: {\n        targetImageSize: [t, r]\n      },\n      pixelType: \"f32\",\n      id: 0,\n      isNoopProcess: !1\n    }, super.doRender(e), s?.functions.length) {\n      const {\n        functions: t,\n        hasBranches: r\n      } = s;\n\n      for (let s = 0; s < t.length; s++) {\n        const i = t[s];\n        \"Constant\" !== i.name && \"Identity\" !== i.name && (e.renderPass = \"raster\", e.rasterFunction = i, e.hasBranches = r, super.doRender(e));\n      }\n    }\n\n    e.rasterFunction = null, e.renderPass = \"bitmap\", super.doRender(e);\n  }\n\n  _getTileBounds(t) {\n    const r = this._tileInfoView.getTileBounds(e(), t);\n\n    if (this.isCustomTilingScheme && t.world) {\n      const {\n        tileInfo: e\n      } = this._tileInfoView,\n            i = s(e.spatialReference);\n\n      if (i) {\n        const s = e.lodAt(t.level);\n        if (!s) return r;\n        const {\n          resolution: n\n        } = s,\n              o = i / n % e.size[0],\n              a = o ? (e.size[0] - o) * n : 0;\n        r[0] -= a * t.world, r[2] -= a * t.world;\n      }\n    }\n\n    return r;\n  }\n\n}\n\nexport { o as RasterTileContainer };","map":{"version":3,"names":["create","e","getWorldWidth","s","t","RasterTile","r","WGLDrawPhase","i","n","o","constructor","arguments","isCustomTilingScheme","createTile","_getTileBounds","_tileInfoView","tileInfo","size","getTileResolution","level","prepareRenderPasses","registerRenderPass","name","brushes","target","children","map","bitmap","drawPhase","MAP","doRender","visible","rasterFunctionChain","renderPass","rasterFunction","parameters","targetImageSize","pixelType","id","isNoopProcess","functions","length","hasBranches","getTileBounds","world","spatialReference","lodAt","resolution","a","RasterTileContainer"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/imagery/RasterTileContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../geometry/support/aaBoundingRect.js\";import{getWorldWidth as s}from\"../../viewpointUtils.js\";import t from\"./BrushRasterBitmap.js\";import{RasterTile as r}from\"./RasterTile.js\";import{WGLDrawPhase as i}from\"../webgl/enums.js\";import n from\"../webgl/TileContainer.js\";class o extends n{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const s=this._getTileBounds(e),[t,i]=this._tileInfoView.tileInfo.size,n=this._tileInfoView.getTileResolution(e.level);return new r(e,n,s[0],s[3],t,i)}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (tile)\",brushes:[t],target:()=>this.children.map((e=>e.bitmap)),drawPhase:i.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){if(!this.visible||e.drawPhase!==i.MAP)return;const{rasterFunctionChain:s}=this;if(!s)return e.renderPass=\"raster-bitmap\",void super.doRender(e);const[t,r]=this._tileInfoView.tileInfo.size;if(e.renderPass=\"raster\",e.rasterFunction={name:\"Reproject\",parameters:{targetImageSize:[t,r]},pixelType:\"f32\",id:0,isNoopProcess:!1},super.doRender(e),s?.functions.length){const{functions:t,hasBranches:r}=s;for(let s=0;s<t.length;s++){const i=t[s];\"Constant\"!==i.name&&\"Identity\"!==i.name&&(e.renderPass=\"raster\",e.rasterFunction=i,e.hasBranches=r,super.doRender(e))}}e.rasterFunction=null,e.renderPass=\"bitmap\",super.doRender(e)}_getTileBounds(t){const r=this._tileInfoView.getTileBounds(e(),t);if(this.isCustomTilingScheme&&t.world){const{tileInfo:e}=this._tileInfoView,i=s(e.spatialReference);if(i){const s=e.lodAt(t.level);if(!s)return r;const{resolution:n}=s,o=i/n%e.size[0],a=o?(e.size[0]-o)*n:0;r[0]-=a*t.world,r[2]-=a*t.world}}return r}}export{o as RasterTileContainer};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,gDAAvB;AAAwE,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,yBAA9B;AAAwD,OAAOC,CAAP,MAAa,wBAAb;AAAsC,SAAOC,UAAU,IAAIC,CAArB,QAA2B,iBAA3B;AAA6C,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,mBAA7B;AAAiD,OAAOC,CAAP,MAAa,2BAAb;;AAAyC,MAAMC,CAAN,SAAgBD,CAAhB,CAAiB;EAACE,WAAW,GAAE;IAAC,MAAM,GAAGC,SAAT,GAAoB,KAAKC,oBAAL,GAA0B,CAAC,CAA/C;EAAiD;;EAAAC,UAAU,CAACb,CAAD,EAAG;IAAC,MAAME,CAAC,GAAC,KAAKY,cAAL,CAAoBd,CAApB,CAAR;IAAA,MAA+B,CAACG,CAAD,EAAGI,CAAH,IAAM,KAAKQ,aAAL,CAAmBC,QAAnB,CAA4BC,IAAjE;IAAA,MAAsET,CAAC,GAAC,KAAKO,aAAL,CAAmBG,iBAAnB,CAAqClB,CAAC,CAACmB,KAAvC,CAAxE;;IAAsH,OAAO,IAAId,CAAJ,CAAML,CAAN,EAAQQ,CAAR,EAAUN,CAAC,CAAC,CAAD,CAAX,EAAeA,CAAC,CAAC,CAAD,CAAhB,EAAoBC,CAApB,EAAsBI,CAAtB,CAAP;EAAgC;;EAAAa,mBAAmB,CAACpB,CAAD,EAAG;IAAC,MAAME,CAAC,GAACF,CAAC,CAACqB,kBAAF,CAAqB;MAACC,IAAI,EAAC,gBAAN;MAAuBC,OAAO,EAAC,CAACpB,CAAD,CAA/B;MAAmCqB,MAAM,EAAC,MAAI,KAAKC,QAAL,CAAcC,GAAd,CAAmB1B,CAAC,IAAEA,CAAC,CAAC2B,MAAxB,CAA9C;MAA+EC,SAAS,EAACrB,CAAC,CAACsB;IAA3F,CAArB,CAAR;IAA8H,OAAM,CAAC,GAAG,MAAMT,mBAAN,CAA0BpB,CAA1B,CAAJ,EAAiCE,CAAjC,CAAN;EAA0C;;EAAA4B,QAAQ,CAAC9B,CAAD,EAAG;IAAC,IAAG,CAAC,KAAK+B,OAAN,IAAe/B,CAAC,CAAC4B,SAAF,KAAcrB,CAAC,CAACsB,GAAlC,EAAsC;IAAO,MAAK;MAACG,mBAAmB,EAAC9B;IAArB,IAAwB,IAA7B;IAAkC,IAAG,CAACA,CAAJ,EAAM,OAAOF,CAAC,CAACiC,UAAF,GAAa,eAAb,EAA6B,KAAK,MAAMH,QAAN,CAAe9B,CAAf,CAAzC;IAA2D,MAAK,CAACG,CAAD,EAAGE,CAAH,IAAM,KAAKU,aAAL,CAAmBC,QAAnB,CAA4BC,IAAvC;;IAA4C,IAAGjB,CAAC,CAACiC,UAAF,GAAa,QAAb,EAAsBjC,CAAC,CAACkC,cAAF,GAAiB;MAACZ,IAAI,EAAC,WAAN;MAAkBa,UAAU,EAAC;QAACC,eAAe,EAAC,CAACjC,CAAD,EAAGE,CAAH;MAAjB,CAA7B;MAAqDgC,SAAS,EAAC,KAA/D;MAAqEC,EAAE,EAAC,CAAxE;MAA0EC,aAAa,EAAC,CAAC;IAAzF,CAAvC,EAAmI,MAAMT,QAAN,CAAe9B,CAAf,CAAnI,EAAqJE,CAAC,EAAEsC,SAAH,CAAaC,MAArK,EAA4K;MAAC,MAAK;QAACD,SAAS,EAACrC,CAAX;QAAauC,WAAW,EAACrC;MAAzB,IAA4BH,CAAjC;;MAAmC,KAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACC,CAAC,CAACsC,MAAhB,EAAuBvC,CAAC,EAAxB,EAA2B;QAAC,MAAMK,CAAC,GAACJ,CAAC,CAACD,CAAD,CAAT;QAAa,eAAaK,CAAC,CAACe,IAAf,IAAqB,eAAaf,CAAC,CAACe,IAApC,KAA2CtB,CAAC,CAACiC,UAAF,GAAa,QAAb,EAAsBjC,CAAC,CAACkC,cAAF,GAAiB3B,CAAvC,EAAyCP,CAAC,CAAC0C,WAAF,GAAcrC,CAAvD,EAAyD,MAAMyB,QAAN,CAAe9B,CAAf,CAApG;MAAuH;IAAC;;IAAAA,CAAC,CAACkC,cAAF,GAAiB,IAAjB,EAAsBlC,CAAC,CAACiC,UAAF,GAAa,QAAnC,EAA4C,MAAMH,QAAN,CAAe9B,CAAf,CAA5C;EAA8D;;EAAAc,cAAc,CAACX,CAAD,EAAG;IAAC,MAAME,CAAC,GAAC,KAAKU,aAAL,CAAmB4B,aAAnB,CAAiC3C,CAAC,EAAlC,EAAqCG,CAArC,CAAR;;IAAgD,IAAG,KAAKS,oBAAL,IAA2BT,CAAC,CAACyC,KAAhC,EAAsC;MAAC,MAAK;QAAC5B,QAAQ,EAAChB;MAAV,IAAa,KAAKe,aAAvB;MAAA,MAAqCR,CAAC,GAACL,CAAC,CAACF,CAAC,CAAC6C,gBAAH,CAAxC;;MAA6D,IAAGtC,CAAH,EAAK;QAAC,MAAML,CAAC,GAACF,CAAC,CAAC8C,KAAF,CAAQ3C,CAAC,CAACgB,KAAV,CAAR;QAAyB,IAAG,CAACjB,CAAJ,EAAM,OAAOG,CAAP;QAAS,MAAK;UAAC0C,UAAU,EAACvC;QAAZ,IAAeN,CAApB;QAAA,MAAsBO,CAAC,GAACF,CAAC,GAACC,CAAF,GAAIR,CAAC,CAACiB,IAAF,CAAO,CAAP,CAA5B;QAAA,MAAsC+B,CAAC,GAACvC,CAAC,GAAC,CAACT,CAAC,CAACiB,IAAF,CAAO,CAAP,IAAUR,CAAX,IAAcD,CAAf,GAAiB,CAA1D;QAA4DH,CAAC,CAAC,CAAD,CAAD,IAAM2C,CAAC,GAAC7C,CAAC,CAACyC,KAAV,EAAgBvC,CAAC,CAAC,CAAD,CAAD,IAAM2C,CAAC,GAAC7C,CAAC,CAACyC,KAA1B;MAAgC;IAAC;;IAAA,OAAOvC,CAAP;EAAS;;AAAp1C;;AAAq1C,SAAOI,CAAC,IAAIwC,mBAAZ"},"metadata":{},"sourceType":"module"}