{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport \"../../../geometry.js\";\nimport { isNone as t } from \"../../../core/maybe.js\";\nimport { isExtent as e, isPolygon as s, isPolyline as i } from \"../../../geometry/support/jsonUtils.js\";\nimport { clipPolygonToTileExtent as n, clipPolylineToTileExtent as o } from \"../CIMEffects.js\";\nimport { CurveHelper as r, PIXEL_TOLERANCE as f } from \"../CurveHelper.js\";\nimport { GeometricEffectOffsetMethod as m } from \"../enums.js\";\nimport h from \"../../../geometry/SpatialReference.js\";\n\nclass a {\n  static local() {\n    return null === a.instance && (a.instance = new a()), a.instance;\n  }\n\n  execute(t, e, s, i, n) {\n    return new l(t, e, s, i, n);\n  }\n\n}\n\na.instance = null;\n\nclass l {\n  constructor(t, e, s, i, n) {\n    this._inputGeometries = t, this._tileKey = i, this._geometryEngine = n, this._curveHelper = new r(), this._offset = (e.offset ?? 1) * s, this._method = e.method, this._option = e.option, this._offsetFlattenError = f * s;\n  }\n\n  next() {\n    let r;\n\n    for (; r = this._inputGeometries.next();) {\n      if (0 === this._offset) return r;\n\n      if (e(r)) {\n        if (this._method === m.Rounded && this._offset > 0) {\n          const t = [[r.xmin, r.ymin], [r.xmin, r.ymax], [r.xmax, r.ymax], [r.xmax, r.ymin], [r.xmin, r.ymin]],\n                e = this._curveHelper.offset(t, -this._offset, this._method, 4, this._offsetFlattenError);\n\n          return e ? {\n            rings: [e]\n          } : null;\n        }\n\n        if (Math.min(r.xmax - r.xmin, r.ymax - r.ymin) + 2 * this._offset > 0) return {\n          xmin: r.xmin - this._offset,\n          xmax: r.xmax + this._offset,\n          ymin: r.ymin - this._offset,\n          ymax: r.ymax + this._offset\n        };\n      }\n\n      const f = this._geometryEngine;\n      if (t(f)) return null;\n      let a = r;\n\n      if (s(r)) {\n        if (this._tileKey && (a = n(r, Math.abs(this._offset) + 1), !a || !a.rings || 0 === a.rings.length)) continue;\n      } else if (i(r) && this._tileKey && (a = o(r, Math.abs(this._offset) + 1), !a || !a.paths || 0 === a.paths.length)) continue;\n\n      return f.offset(h.WebMercator, a, -this._offset, 1, this._method, 4, this._offsetFlattenError);\n    }\n\n    return null;\n  }\n\n}\n\nexport { a as EffectOffset };","map":{"version":3,"names":["isNone","t","isExtent","e","isPolygon","s","isPolyline","i","clipPolygonToTileExtent","n","clipPolylineToTileExtent","o","CurveHelper","r","PIXEL_TOLERANCE","f","GeometricEffectOffsetMethod","m","h","a","local","instance","execute","l","constructor","_inputGeometries","_tileKey","_geometryEngine","_curveHelper","_offset","offset","_method","method","_option","option","_offsetFlattenError","next","Rounded","xmin","ymin","ymax","xmax","rings","Math","min","abs","length","paths","WebMercator","EffectOffset"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/symbols/cim/effects/EffectOffset.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{isNone as t}from\"../../../core/maybe.js\";import{isExtent as e,isPolygon as s,isPolyline as i}from\"../../../geometry/support/jsonUtils.js\";import{clipPolygonToTileExtent as n,clipPolylineToTileExtent as o}from\"../CIMEffects.js\";import{CurveHelper as r,PIXEL_TOLERANCE as f}from\"../CurveHelper.js\";import{GeometricEffectOffsetMethod as m}from\"../enums.js\";import h from\"../../../geometry/SpatialReference.js\";class a{static local(){return null===a.instance&&(a.instance=new a),a.instance}execute(t,e,s,i,n){return new l(t,e,s,i,n)}}a.instance=null;class l{constructor(t,e,s,i,n){this._inputGeometries=t,this._tileKey=i,this._geometryEngine=n,this._curveHelper=new r,this._offset=(e.offset??1)*s,this._method=e.method,this._option=e.option,this._offsetFlattenError=f*s}next(){let r;for(;r=this._inputGeometries.next();){if(0===this._offset)return r;if(e(r)){if(this._method===m.Rounded&&this._offset>0){const t=[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]],e=this._curveHelper.offset(t,-this._offset,this._method,4,this._offsetFlattenError);return e?{rings:[e]}:null}if(Math.min(r.xmax-r.xmin,r.ymax-r.ymin)+2*this._offset>0)return{xmin:r.xmin-this._offset,xmax:r.xmax+this._offset,ymin:r.ymin-this._offset,ymax:r.ymax+this._offset}}const f=this._geometryEngine;if(t(f))return null;let a=r;if(s(r)){if(this._tileKey&&(a=n(r,Math.abs(this._offset)+1),!a||!a.rings||0===a.rings.length))continue}else if(i(r)&&this._tileKey&&(a=o(r,Math.abs(this._offset)+1),!a||!a.paths||0===a.paths.length))continue;return f.offset(h.WebMercator,a,-this._offset,1,this._method,4,this._offsetFlattenError)}return null}}export{a as EffectOffset};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}