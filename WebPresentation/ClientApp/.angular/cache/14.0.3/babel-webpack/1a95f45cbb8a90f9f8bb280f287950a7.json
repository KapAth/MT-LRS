{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { ArcadeDate as e } from \"../../ArcadeDate.js\";\nimport { FeatureServiceDatabaseType as r, isDate as t, isArcadeDate as a } from \"./shared.js\";\nimport { WhereClause as n } from \"../../../core/sql/WhereClause.js\";\nimport { SqlError as s, SqlErrorCodes as c } from \"./errorsupport.js\";\nimport { convertTimeReference as o } from \"../../arcadeTimeUtils.js\";\nimport { DateTime as i } from \"luxon\";\n\nfunction u(e, r) {\n  return y(e?.parseTree, r, e?.parameters);\n}\n\nfunction l(e, r, t, a) {\n  return d(n.create(e, r.fieldsIndex), t, a);\n}\n\nfunction d(e, t, a) {\n  const n = o(t),\n        s = o(a);\n  return y(e.parseTree, r.Standardised, null, null, null, {\n    inputTimeReference: n,\n    outputTimeReference: s\n  });\n}\n\nfunction f(e, r, t) {\n  return y(e, r, t);\n}\n\nfunction p(e, t, a, s) {\n  return n.create(y(e.parseTree, r.Standardised, e.parameters, t, a), s);\n}\n\nfunction m(e, t, a = \"AND\") {\n  return n.create(\"((\" + u(e, r.Standardised) + \")\" + a + \"(\" + u(t, r.Standardised) + \"))\", e.fieldsIndex);\n}\n\nfunction y(e, n, o, i = null, u = null, l = null) {\n  let d, f, p, m;\n\n  switch (e.type) {\n    case \"interval\":\n      return R(y(e.value, n, o, i, u, l), e.qualifier, e.op);\n\n    case \"case-expression\":\n      {\n        let r = \" CASE \";\n        \"simple\" === e.format && (r += y(e.operand, n, o, i, u, l));\n\n        for (let t = 0; t < e.clauses.length; t++) r += \" WHEN \" + y(e.clauses[t].operand, n, o, i, u, l) + \" THEN \" + y(e.clauses[t].value, n, o, i, u, l);\n\n        return null !== e.else && (r += \" ELSE \" + y(e.else, n, o, i, u, l)), r += \" END \", r;\n      }\n\n    case \"parameter\":\n      {\n        const r = o[e.value.toLowerCase()];\n\n        if (\"string\" == typeof r) {\n          return \"'\" + o[e.value.toLowerCase()].toString().replace(/'/g, \"''\") + \"'\";\n        }\n\n        if (t(r)) return T(r, n, l);\n        if (a(r)) return h(r, n, l);\n\n        if (r instanceof Array) {\n          const e = [];\n\n          for (let s = 0; s < r.length; s++) \"string\" == typeof r[s] ? e.push(\"'\" + r[s].toString().replace(/'/g, \"''\") + \"'\") : t(r[s]) ? e.push(T(r[s], n, l)) : a(r[s]) ? e.push(h(r[s], n, l)) : e.push(r[s].toString());\n\n          return e;\n        }\n\n        return r.toString();\n      }\n\n    case \"expression-list\":\n      f = [];\n\n      for (const r of e.value) f.push(y(r, n, o, i, u, l));\n\n      return f;\n\n    case \"unary-expression\":\n      return \" ( NOT \" + y(e.expr, n, o, i, u, l) + \" ) \";\n\n    case \"binary-expression\":\n      switch (e.operator) {\n        case \"AND\":\n          return \" (\" + y(e.left, n, o, i, u, l) + \" AND \" + y(e.right, n, o, i, u, l) + \") \";\n\n        case \"OR\":\n          return \" (\" + y(e.left, n, o, i, u, l) + \" OR \" + y(e.right, n, o, i, u, l) + \") \";\n\n        case \"IS\":\n          if (\"null\" !== e.right.type) throw new s(c.UnsupportedIsRhs);\n          return \" (\" + y(e.left, n, o, i, u, l) + \" IS NULL )\";\n\n        case \"ISNOT\":\n          if (\"null\" !== e.right.type) throw new s(c.UnsupportedIsRhs);\n          return \" (\" + y(e.left, n, o, i, u, l) + \" IS NOT NULL )\";\n\n        case \"IN\":\n          return d = [], \"expression-list\" === e.right.type ? (d = y(e.right, n, o, i, u), \" (\" + y(e.left, n, o, i, u, l) + \" IN (\" + d.join(\",\") + \")) \") : (m = y(e.right, n, o, i, u, l), m instanceof Array ? \" (\" + y(e.left, n, o, i, u, l) + \" IN (\" + m.join(\",\") + \")) \" : \" (\" + y(e.left, n, o, i, u, l) + \" IN (\" + m + \")) \");\n\n        case \"NOT IN\":\n          return d = [], \"expression-list\" === e.right.type ? (d = y(e.right, n, o, i, u), \" (\" + y(e.left, n, o, i, u, l) + \" NOT IN (\" + d.join(\",\") + \")) \") : (m = y(e.right, n, o, i, u, l), m instanceof Array ? \" (\" + y(e.left, n, o, i, u, l) + \" NOT IN (\" + m.join(\",\") + \")) \" : \" (\" + y(e.left, n, o, i, u, l) + \" NOT IN (\" + m + \")) \");\n\n        case \"BETWEEN\":\n          return p = y(e.right, n, o, i, u, l), \" (\" + y(e.left, n, o, i, u, l) + \" BETWEEN \" + p[0] + \" AND \" + p[1] + \" ) \";\n\n        case \"NOTBETWEEN\":\n          return p = y(e.right, n, o, i, u, l), \" (\" + y(e.left, n, o, i, u, l) + \" NOT BETWEEN \" + p[0] + \" AND \" + p[1] + \" ) \";\n\n        case \"LIKE\":\n          return \"\" !== e.escape ? \" (\" + y(e.left, n, o, i, u, l) + \" LIKE \" + y(e.right, n, o, i, u, l) + \" ESCAPE '\" + e.escape + \"') \" : \" (\" + y(e.left, n, o, i, u, l) + \" LIKE \" + y(e.right, n, o, i, u, l) + \") \";\n\n        case \"NOT LIKE\":\n          return \"\" !== e.escape ? \" (\" + y(e.left, n, o, i, u, l) + \" NOT LIKE \" + y(e.right, n, o, i, u, l) + \" ESCAPE '\" + e.escape + \"') \" : \" (\" + y(e.left, n, o, i, u, l) + \" NOT LIKE \" + y(e.right, n, o, i, u, l) + \") \";\n\n        case \"<>\":\n        case \"<\":\n        case \">\":\n        case \">=\":\n        case \"<=\":\n        case \"=\":\n        case \"*\":\n        case \"-\":\n        case \"+\":\n        case \"/\":\n          return \" (\" + y(e.left, n, o, i, u, l) + \" \" + e.operator + \" \" + y(e.right, n, o, i, u, l) + \") \";\n\n        case \"||\":\n          return \" (\" + y(e.left, n, o, i, u, l) + \" \" + (n === r.SqlServer ? \"+\" : e.operator) + \" \" + y(e.right, n, o, i, u, l) + \") \";\n      }\n\n      throw new s(c.UnsupportedOperator, {\n        operator: e.operator\n      });\n\n    case \"null\":\n      return \"null\";\n\n    case \"boolean\":\n      return !0 === e.value ? \"1\" : \"0\";\n\n    case \"string\":\n      return \"'\" + e.value.toString().replace(/'/g, \"''\") + \"'\";\n\n    case \"timestamp\":\n    case \"date\":\n      return T(e.value, n, l);\n\n    case \"number\":\n      return e.value.toString();\n\n    case \"current-time\":\n      return L(\"date\" === e.mode, n);\n\n    case \"column-reference\":\n      return i && i.toLowerCase() === e.column.toLowerCase() ? \"(\" + u + \")\" : e.column;\n\n    case \"data-type\":\n      return e.value;\n\n    case \"function\":\n      {\n        const r = y(e.args, n, o, i, u, l);\n        return g(e.name, r, n);\n      }\n  }\n\n  throw new s(c.UnsupportedSyntax, {\n    node: e.type\n  });\n}\n\nfunction g(e, t, a) {\n  switch (e.toLowerCase().trim()) {\n    case \"cos\":\n    case \"sin\":\n    case \"tan\":\n    case \"cosh\":\n    case \"tanh\":\n    case \"sinh\":\n    case \"acos\":\n    case \"asin\":\n    case \"atan\":\n    case \"floor\":\n    case \"log10\":\n    case \"log\":\n    case \"abs\":\n      if (1 !== t.length) throw new s(c.InvalidFunctionParameters, {\n        function: e.toLowerCase().trim()\n      });\n      return `${e.toUpperCase().trim()}(${t[0]})`;\n\n    case \"ceiling\":\n    case \"ceil\":\n      if (1 !== t.length) throw new s(c.InvalidFunctionParameters, {\n        function: \"ceiling\"\n      });\n\n      switch (a) {\n        case r.Standardised:\n        case r.StandardisedNoInterval:\n      }\n\n      return \"CEILING(\" + t[0] + \")\";\n\n    case \"mod\":\n    case \"power\":\n    case \"nullif\":\n      if (2 !== t.length) throw new s(c.InvalidFunctionParameters, {\n        function: e.toLowerCase().trim()\n      });\n      return `${e.toUpperCase().trim()}(${t[0]},${t[1]})`;\n\n    case \"round\":\n      if (2 === t.length) return \"ROUND(\" + t[0] + \",\" + t[1] + \")\";\n      if (1 === t.length) return \"ROUND(\" + t[0] + \")\";\n      throw new s(c.InvalidFunctionParameters, {\n        function: \"round\"\n      });\n\n    case \"truncate\":\n      if (t.length < 1 || t.length > 2) throw new s(c.InvalidFunctionParameters, {\n        function: \"truncate\"\n      });\n      return a === r.SqlServer ? \"ROUND(\" + t[0] + (1 === t.length ? \"0\" : \",\" + t[1]) + \",1)\" : \"TRUNCATE(\" + t[0] + (1 === t.length ? \")\" : \",\" + t[1] + \")\");\n\n    case \"char_length\":\n    case \"len\":\n      if (1 !== t.length) throw new s(c.InvalidFunctionParameters, {\n        function: \"char_length\"\n      });\n\n      switch (a) {\n        case r.SqlServer:\n          return \"LEN(\" + t[0] + \")\";\n\n        case r.Oracle:\n          return \"LENGTH(\" + t[0] + \")\";\n\n        default:\n          return \"CHAR_LENGTH(\" + t[0] + \")\";\n      }\n\n    case \"coalesce\":\n    case \"concat\":\n      {\n        if (t.length < 1) throw new s(c.InvalidFunctionParameters, {\n          function: e.toLowerCase()\n        });\n        let r = e.toUpperCase().trim() + \"(\";\n\n        for (let e = 0; e < t.length; e++) 0 !== e && (r += \",\"), r += t[e];\n\n        return r += \")\", r;\n      }\n\n    case \"lower\":\n    case \"lcase\":\n      if (1 !== t.length) throw new s(c.InvalidFunctionParameters, {\n        function: \"lower\"\n      });\n      return \"LOWER(\" + t[0] + \")\";\n\n    case \"upper\":\n    case \"ucase\":\n      if (1 !== t.length) throw new s(c.InvalidFunctionParameters, {\n        function: \"upper\"\n      });\n      return \"UPPER(\" + t[0] + \")\";\n\n    case \"substring\":\n      {\n        let e = \"\";\n\n        switch (a) {\n          case r.Oracle:\n            return e = \"SUBSTR(\" + t[0] + \",\" + t[1], 3 === t.length && (e += \",\" + t[2]), e += \")\", e;\n\n          case r.SqlServer:\n            return e = 3 === t.length ? \"SUBSTRING(\" + t[0] + \",\" + t[1] + \",\" + t[2] + \")\" : \"SUBSTRING(\" + t[0] + \",  \" + t[1] + \", LEN(\" + t[0] + \") - \" + t[1] + \")\", e;\n\n          default:\n            return e = \"SUBSTRING(\" + t[0] + \" FROM \" + t[1], 3 === t.length && (e += \" FOR \" + t[2]), e += \")\", e;\n        }\n      }\n\n    case \"extract\":\n      return \"EXTRACT(\" + t[0].replace(/\\'/g, \"\") + \" FROM \" + t[1] + \")\";\n\n    case \"cast\":\n      {\n        let e = \"\";\n\n        switch (a) {\n          case r.Oracle:\n            switch (t[1].type) {\n              case \"date\":\n                e = \"DATE\";\n                break;\n\n              case \"float\":\n                e = \"DOUBLE\";\n                break;\n\n              case \"integer\":\n                e = \"INTEGER\";\n                break;\n\n              case \"real\":\n                e = \"REAL\";\n                break;\n\n              case \"smallint\":\n                e = \"SMALLINT\";\n                break;\n\n              case \"timestamp\":\n                e = \"TIMESTAMP\";\n                break;\n\n              case \"varchar\":\n                e = \"VARCHAR(\" + t[1].size.toString() + \")\";\n            }\n\n            return `CAST(${t[0]} AS ${e})`;\n\n          case r.Postgres:\n            switch (t[1].type) {\n              case \"date\":\n                e = \"DATE\";\n                break;\n\n              case \"float\":\n                e = \"DOUBLE PRECISION\";\n                break;\n\n              case \"integer\":\n                e = \"INT\";\n                break;\n\n              case \"real\":\n                e = \"REAL\";\n                break;\n\n              case \"smallint\":\n                e = \"SMALLINT\";\n                break;\n\n              case \"timestamp\":\n                e = \"TIMESTAMP\";\n                break;\n\n              case \"varchar\":\n                e = \"VARCHAR(\" + t[1].size.toString() + \")\";\n            }\n\n            return `CAST(${t[0]} AS ${e})`;\n\n          case r.SqlServer:\n            switch (t[1].type) {\n              case \"date\":\n                e = \"DATE\";\n                break;\n\n              case \"float\":\n                e = \"FLOAT\";\n                break;\n\n              case \"integer\":\n                e = \"INT\";\n                break;\n\n              case \"real\":\n                e = \"REAL\";\n                break;\n\n              case \"smallint\":\n                e = \"SMALLINT\";\n                break;\n\n              case \"timestamp\":\n                e = \"DATETIME\";\n                break;\n\n              case \"varchar\":\n                e = \"VARCHAR(\" + t[1].size.toString() + \")\";\n            }\n\n            return `CAST(${t[0]} AS ${e})`;\n\n          default:\n            switch (t[1].type) {\n              case \"date\":\n                e = \"DATE\";\n                break;\n\n              case \"float\":\n                e = \"FLOAT\";\n                break;\n\n              case \"integer\":\n                e = \"INTEGER\";\n                break;\n\n              case \"real\":\n                e = \"REAL\";\n                break;\n\n              case \"smallint\":\n                e = \"SMALLINT\";\n                break;\n\n              case \"timestamp\":\n                e = \"TIMESTAMP\";\n                break;\n\n              case \"varchar\":\n                e = \"VARCHAR(\" + t[1].size.toString() + \")\";\n            }\n\n            return `CAST(${t[0]} AS ${e})`;\n        }\n      }\n  }\n\n  throw new s(c.InvalidFunctionParameters, {\n    function: e\n  });\n}\n\nfunction h(t, a, n, s) {\n  n?.outputTimeReference && (t = e.arcadeDateAndZoneToArcadeDate(t, n?.outputTimeReference));\n  const c = t.toDateTime(),\n        o = 0 === c.hour && 0 === c.minute && 0 === c.second && 0 === c.millisecond;\n\n  switch (a) {\n    case r.FILEGDB:\n    case r.Standardised:\n    case r.StandardisedNoInterval:\n      return o ? `date '${c.toFormat(\"yyyy-LL-dd\")}'` : `date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`;\n\n    case r.Oracle:\n      return o ? `TO_DATE('${c.toFormat(\"yyyy-LL-dd\")}','YYYY-MM-DD')` : `TO_DATE('${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}','YYYY-MM-DD HH24:MI:SS')`;\n\n    case r.SqlServer:\n      return `'${c.toFormat(o ? \"yyyy-LL-dd\" : \"yyyy-LL-dd HH:mm:ss\")}'`;\n\n    case r.PGDB:\n      return `#${c.toFormat(o ? \"LL-dd-yyyy\" : \"LL-dd-yyyy HH:mm:ss\")}#`;\n\n    case r.Postgres:\n      return `TIMESTAMP '${c.toFormat(o ? \"yyyy-LL-dd\" : \"yyyy-LL-dd HH:mm:ss\")}'`;\n\n    default:\n      return `date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`;\n  }\n}\n\nfunction T(e, a, n, s) {\n  let c = t(e) ? i.fromJSDate(e) : i.fromSQL(e);\n  const o = 0 === c.hour && 0 === c.minute && 0 === c.second && 0 === c.millisecond;\n\n  switch (n?.inputTimeReference && (c = i.fromObject({\n    day: c.day,\n    year: c.year,\n    month: c.month,\n    hour: c.hour,\n    minute: c.minute,\n    second: c.second,\n    millisecond: c.millisecond\n  }, {\n    zone: n.inputTimeReference\n  })), n?.outputTimeReference && (c = c.setZone(n.outputTimeReference)), a) {\n    case r.FILEGDB:\n    case r.Standardised:\n    case r.StandardisedNoInterval:\n      return o ? `date '${c.toFormat(\"yyyy-LL-dd\")}'` : `date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`;\n\n    case r.Oracle:\n      return o ? `TO_DATE('${c.toFormat(\"yyyy-LL-dd\")}','YYYY-MM-DD')` : `TO_DATE('${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}','YYYY-MM-DD HH24:MI:SS')`;\n\n    case r.SqlServer:\n      return `'${c.toFormat(o ? \"yyyy-LL-dd\" : \"yyyy-LL-dd HH:mm:ss\")}'`;\n\n    case r.PGDB:\n      return `#${c.toFormat(o ? \"LL-dd-yyyy\" : \"LL-dd-yyyy HH:mm:ss\")}#`;\n\n    case r.Postgres:\n      return `TIMESTAMP '${c.toFormat(o ? \"yyyy-LL-dd\" : \"yyyy-LL-dd HH:mm:ss\")}'`;\n\n    default:\n      return `date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`;\n  }\n}\n\nfunction L(e, t) {\n  switch (t) {\n    case r.FILEGDB:\n    case r.Standardised:\n    case r.StandardisedNoInterval:\n    case r.Oracle:\n      return e ? \"CURRENT_DATE\" : \"CURRENT_TIMESTAMP\";\n\n    case r.SqlServer:\n      return e ? \"CAST(GETDATE() AS DATE)\" : \"GETDATE()\";\n\n    case r.PGDB:\n    case r.Postgres:\n    default:\n      return e ? \"CURRENT_DATE\" : \"CURRENT_TIMESTAMP\";\n  }\n}\n\nfunction S(e, r, t = {}) {\n  const a = {},\n        n = {},\n        s = {\n    esriFieldTypeSmallInteger: \"integer\",\n    esriFieldTypeInteger: \"integer\",\n    esriFieldTypeSingle: \"double\",\n    esriFieldTypeDouble: \"double\",\n    esriFieldTypeString: \"string\",\n    esriFieldTypeDate: \"date\",\n    esriFieldTypeOID: \"integer\",\n    esriFieldTypeGUID: \"guid\",\n    esriFieldTypeGlobalID: \"guid\",\n    oid: \"integer\",\n    long: \"integer\",\n    \"small-integer\": \"integer\",\n    integer: \"integer\",\n    single: \"double\",\n    double: \"double\",\n    date: \"date\",\n    guid: \"guid\",\n    globalid: \"guid\",\n    string: \"string\"\n  };\n\n  for (const c of r) {\n    const e = c.type ? s[c.type] : void 0;\n    a[c.name.toLowerCase()] = void 0 === e ? \"\" : e;\n  }\n\n  for (const c in t) {\n    const e = s[t[c]];\n    n[c.toLowerCase()] = void 0 === e ? \"\" : e;\n  }\n\n  switch (E(a, e.parseTree, e.parameters, n)) {\n    case \"double\":\n      return \"double\";\n\n    case \"integer\":\n      return \"integer\";\n\n    case \"date\":\n      return \"date\";\n\n    case \"string\":\n      return \"string\";\n\n    case \"global-id\":\n    case \"guid\":\n      return \"guid\";\n  }\n\n  return \"\";\n}\n\nfunction E(e, r, n, o) {\n  let i;\n\n  switch (r.type) {\n    case \"interval\":\n      return \"integer\";\n\n    case \"case-expression\":\n      {\n        const t = [];\n\n        if (\"simple\" === r.format) {\n          for (let a = 0; a < r.clauses.length; a++) t.push(E(e, r.clauses[a].value, n, o));\n\n          null !== r.else && t.push(E(e, r.else, n, o));\n        } else {\n          for (let a = 0; a < r.clauses.length; a++) t.push(E(e, r.else, n, o));\n\n          null !== r.else && t.push(E(e, r.else, n, o));\n        }\n\n        return w(t);\n      }\n\n    case \"parameter\":\n      {\n        const e = o[r.value.toLowerCase()];\n\n        if (void 0 === e && n) {\n          const e = n[r.value.toLowerCase()];\n          if (void 0 === e) return \"\";\n          if (null === e) return \"\";\n          if (\"string\" == typeof e || e instanceof String) return \"string\";\n          if (\"boolean\" == typeof e) return \"boolean\";\n          if (t(e)) return \"date\";\n          if (a(e)) return \"date\";\n          if (\"number\" == typeof e) return e % 1 == 0 ? \"integer\" : \"double\";\n        }\n\n        return void 0 === e ? \"\" : e;\n      }\n\n    case \"expression-list\":\n      {\n        const t = [];\n\n        for (const a of r.value) t.push(E(e, a, n, o));\n\n        return t;\n      }\n\n    case \"unary-expression\":\n      return \"boolean\";\n\n    case \"binary-expression\":\n      switch (r.operator) {\n        case \"AND\":\n        case \"OR\":\n        case \"IN\":\n        case \"NOT IN\":\n        case \"BETWEEN\":\n        case \"NOTBETWEEN\":\n        case \"LIKE\":\n        case \"NOT LIKE\":\n        case \"<>\":\n        case \"<\":\n        case \">\":\n        case \">=\":\n        case \"<=\":\n        case \"=\":\n          return \"boolean\";\n\n        case \"IS\":\n        case \"ISNOT\":\n          if (\"null\" !== r.right.type) throw new s(c.UnsupportedIsRhs);\n          return \"boolean\";\n\n        case \"*\":\n        case \"-\":\n        case \"+\":\n        case \"/\":\n          return w([E(e, r.left, n, o), E(e, r.right, n, o)]);\n\n        case \"||\":\n          return \"string\";\n\n        default:\n          throw new s(c.UnsupportedOperator, {\n            operator: r.operator\n          });\n      }\n\n    case \"null\":\n      return \"\";\n\n    case \"boolean\":\n      return \"boolean\";\n\n    case \"string\":\n      return \"string\";\n\n    case \"number\":\n      return null === r.value ? \"\" : r.value % 1 == 0 ? \"integer\" : \"double\";\n\n    case \"date\":\n    case \"timestamp\":\n    case \"current-time\":\n      return \"date\";\n\n    case \"column-reference\":\n      {\n        const t = e[r.column.toLowerCase()];\n        return void 0 === t ? \"\" : t;\n      }\n\n    case \"function\":\n      switch (r.name.toLowerCase()) {\n        case \"cast\":\n          switch (r.args?.value[1]?.value.type ?? \"\") {\n            case \"integer\":\n            case \"smallint\":\n              return \"integer\";\n\n            case \"real\":\n            case \"float\":\n              return \"double\";\n\n            case \"date\":\n            case \"timestamp\":\n              return \"date\";\n\n            case \"varchar\":\n              return \"string\";\n\n            default:\n              return \"\";\n          }\n\n        case \"position\":\n        case \"extract\":\n        case \"char_length\":\n        case \"mod\":\n          return \"integer\";\n\n        case \"round\":\n          if (i = E(e, r.args, n, o), i instanceof Array) {\n            if (i.length <= 0) return \"double\";\n            i = i[0];\n          }\n\n          return i;\n\n        case \"sign\":\n          return \"integer\";\n\n        case \"ceiling\":\n        case \"floor\":\n        case \"abs\":\n          return i = E(e, r.args, n, o), i instanceof Array && (i = w(i)), \"integer\" === i || \"double\" === i ? i : \"double\";\n\n        case \"area\":\n        case \"length\":\n        case \"log\":\n        case \"log10\":\n        case \"sin\":\n        case \"cos\":\n        case \"tan\":\n        case \"asin\":\n        case \"acos\":\n        case \"atan\":\n        case \"cosh\":\n        case \"sinh\":\n        case \"tanh\":\n        case \"power\":\n          return \"double\";\n\n        case \"substring\":\n        case \"trim\":\n        case \"concat\":\n        case \"lower\":\n        case \"upper\":\n          return \"string\";\n\n        case \"truncate\":\n          return \"double\";\n\n        case \"nullif\":\n        case \"coalesce\":\n          return i = E(e, r.args, n, o), i instanceof Array ? i.length > 0 ? i[0] : \"\" : i;\n      }\n\n      return \"\";\n  }\n\n  throw new s(c.UnsupportedSyntax, {\n    node: r.type\n  });\n}\n\nconst I = {\n  boolean: 1,\n  string: 2,\n  integer: 3,\n  double: 4,\n  date: 5\n};\n\nfunction w(e) {\n  if (e) {\n    let r = \"\";\n\n    for (const t of e) \"\" !== t && (r = \"\" === r || I[r] < I[t] ? t : r);\n\n    return r;\n  }\n\n  return \"\";\n}\n\nfunction N(e, r) {\n  return b(e.parseTree, r);\n}\n\nfunction A(e) {\n  return \"column-reference\" === e?.parseTree.type;\n}\n\nfunction b(e, r) {\n  if (null == e) return !1;\n\n  switch (e.type) {\n    case \"when-clause\":\n      return b(e.operand, r) || b(e.value, r);\n\n    case \"case-expression\":\n      for (const t of e.clauses) if (b(t, r)) return !0;\n\n      return !(\"simple\" !== e.format || !b(e.operand, r)) || !(null === e.else || !b(e.else, r));\n\n    case \"parameter\":\n    case \"null\":\n    case \"boolean\":\n    case \"date\":\n    case \"timestamp\":\n    case \"string\":\n    case \"number\":\n      return !1;\n\n    case \"expression-list\":\n      for (const t of e.value) if (b(t, r)) return !0;\n\n      return !1;\n\n    case \"unary-expression\":\n      return b(e.expr, r);\n\n    case \"binary-expression\":\n      return b(e.left, r) || b(e.right, r);\n\n    case \"column-reference\":\n      return r.toLowerCase() === e.column.toLowerCase();\n\n    case \"function\":\n      return b(e.args, r);\n  }\n\n  return !1;\n}\n\nfunction v(e) {\n  let r = \"\";\n  return r += e.period.toUpperCase(), r;\n}\n\nfunction R(e, r, t) {\n  let a = \"\";\n  return a = \"interval-period\" === r.type ? v(r) : v(r.start) + \" TO \" + v(r.end), \"INTERVAL \" + t + \" \" + e + \" \" + a;\n}\n\nexport { h as arcadeDateToSqlString, l as changeSqlTimeZones, d as changeWhereClauseTimeZone, m as combine, R as convertIntervalToSql, A as isSingleField, T as makeDateString, L as makeToday, S as predictType, p as reformulateWithoutField, N as scanForField, u as toWhereClause, f as toWhereClauseFromTree, g as translateFunctionToDatabaseSpecific };","map":{"version":3,"names":["ArcadeDate","e","FeatureServiceDatabaseType","r","isDate","t","isArcadeDate","a","WhereClause","n","SqlError","s","SqlErrorCodes","c","convertTimeReference","o","DateTime","i","u","y","parseTree","parameters","l","d","create","fieldsIndex","Standardised","inputTimeReference","outputTimeReference","f","p","m","type","R","value","qualifier","op","format","operand","clauses","length","else","toLowerCase","toString","replace","T","h","Array","push","expr","operator","left","right","UnsupportedIsRhs","join","escape","SqlServer","UnsupportedOperator","L","mode","column","args","g","name","UnsupportedSyntax","node","trim","InvalidFunctionParameters","function","toUpperCase","StandardisedNoInterval","Oracle","size","Postgres","arcadeDateAndZoneToArcadeDate","toDateTime","hour","minute","second","millisecond","FILEGDB","toFormat","PGDB","fromJSDate","fromSQL","fromObject","day","year","month","zone","setZone","S","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGUID","esriFieldTypeGlobalID","oid","long","integer","single","double","date","guid","globalid","string","E","w","String","I","boolean","N","b","A","v","period","start","end","arcadeDateToSqlString","changeSqlTimeZones","changeWhereClauseTimeZone","combine","convertIntervalToSql","isSingleField","makeDateString","makeToday","predictType","reformulateWithoutField","scanForField","toWhereClause","toWhereClauseFromTree","translateFunctionToDatabaseSpecific"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{ArcadeDate as e}from\"../../ArcadeDate.js\";import{FeatureServiceDatabaseType as r,isDate as t,isArcadeDate as a}from\"./shared.js\";import{WhereClause as n}from\"../../../core/sql/WhereClause.js\";import{SqlError as s,SqlErrorCodes as c}from\"./errorsupport.js\";import{convertTimeReference as o}from\"../../arcadeTimeUtils.js\";import{DateTime as i}from\"luxon\";function u(e,r){return y(e?.parseTree,r,e?.parameters)}function l(e,r,t,a){return d(n.create(e,r.fieldsIndex),t,a)}function d(e,t,a){const n=o(t),s=o(a);return y(e.parseTree,r.Standardised,null,null,null,{inputTimeReference:n,outputTimeReference:s})}function f(e,r,t){return y(e,r,t)}function p(e,t,a,s){return n.create(y(e.parseTree,r.Standardised,e.parameters,t,a),s)}function m(e,t,a=\"AND\"){return n.create(\"((\"+u(e,r.Standardised)+\")\"+a+\"(\"+u(t,r.Standardised)+\"))\",e.fieldsIndex)}function y(e,n,o,i=null,u=null,l=null){let d,f,p,m;switch(e.type){case\"interval\":return R(y(e.value,n,o,i,u,l),e.qualifier,e.op);case\"case-expression\":{let r=\" CASE \";\"simple\"===e.format&&(r+=y(e.operand,n,o,i,u,l));for(let t=0;t<e.clauses.length;t++)r+=\" WHEN \"+y(e.clauses[t].operand,n,o,i,u,l)+\" THEN \"+y(e.clauses[t].value,n,o,i,u,l);return null!==e.else&&(r+=\" ELSE \"+y(e.else,n,o,i,u,l)),r+=\" END \",r}case\"parameter\":{const r=o[e.value.toLowerCase()];if(\"string\"==typeof r){return\"'\"+o[e.value.toLowerCase()].toString().replace(/'/g,\"''\")+\"'\"}if(t(r))return T(r,n,l);if(a(r))return h(r,n,l);if(r instanceof Array){const e=[];for(let s=0;s<r.length;s++)\"string\"==typeof r[s]?e.push(\"'\"+r[s].toString().replace(/'/g,\"''\")+\"'\"):t(r[s])?e.push(T(r[s],n,l)):a(r[s])?e.push(h(r[s],n,l)):e.push(r[s].toString());return e}return r.toString()}case\"expression-list\":f=[];for(const r of e.value)f.push(y(r,n,o,i,u,l));return f;case\"unary-expression\":return\" ( NOT \"+y(e.expr,n,o,i,u,l)+\" ) \";case\"binary-expression\":switch(e.operator){case\"AND\":return\" (\"+y(e.left,n,o,i,u,l)+\" AND \"+y(e.right,n,o,i,u,l)+\") \";case\"OR\":return\" (\"+y(e.left,n,o,i,u,l)+\" OR \"+y(e.right,n,o,i,u,l)+\") \";case\"IS\":if(\"null\"!==e.right.type)throw new s(c.UnsupportedIsRhs);return\" (\"+y(e.left,n,o,i,u,l)+\" IS NULL )\";case\"ISNOT\":if(\"null\"!==e.right.type)throw new s(c.UnsupportedIsRhs);return\" (\"+y(e.left,n,o,i,u,l)+\" IS NOT NULL )\";case\"IN\":return d=[],\"expression-list\"===e.right.type?(d=y(e.right,n,o,i,u),\" (\"+y(e.left,n,o,i,u,l)+\" IN (\"+d.join(\",\")+\")) \"):(m=y(e.right,n,o,i,u,l),m instanceof Array?\" (\"+y(e.left,n,o,i,u,l)+\" IN (\"+m.join(\",\")+\")) \":\" (\"+y(e.left,n,o,i,u,l)+\" IN (\"+m+\")) \");case\"NOT IN\":return d=[],\"expression-list\"===e.right.type?(d=y(e.right,n,o,i,u),\" (\"+y(e.left,n,o,i,u,l)+\" NOT IN (\"+d.join(\",\")+\")) \"):(m=y(e.right,n,o,i,u,l),m instanceof Array?\" (\"+y(e.left,n,o,i,u,l)+\" NOT IN (\"+m.join(\",\")+\")) \":\" (\"+y(e.left,n,o,i,u,l)+\" NOT IN (\"+m+\")) \");case\"BETWEEN\":return p=y(e.right,n,o,i,u,l),\" (\"+y(e.left,n,o,i,u,l)+\" BETWEEN \"+p[0]+\" AND \"+p[1]+\" ) \";case\"NOTBETWEEN\":return p=y(e.right,n,o,i,u,l),\" (\"+y(e.left,n,o,i,u,l)+\" NOT BETWEEN \"+p[0]+\" AND \"+p[1]+\" ) \";case\"LIKE\":return\"\"!==e.escape?\" (\"+y(e.left,n,o,i,u,l)+\" LIKE \"+y(e.right,n,o,i,u,l)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+y(e.left,n,o,i,u,l)+\" LIKE \"+y(e.right,n,o,i,u,l)+\") \";case\"NOT LIKE\":return\"\"!==e.escape?\" (\"+y(e.left,n,o,i,u,l)+\" NOT LIKE \"+y(e.right,n,o,i,u,l)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+y(e.left,n,o,i,u,l)+\" NOT LIKE \"+y(e.right,n,o,i,u,l)+\") \";case\"<>\":case\"<\":case\">\":case\">=\":case\"<=\":case\"=\":case\"*\":case\"-\":case\"+\":case\"/\":return\" (\"+y(e.left,n,o,i,u,l)+\" \"+e.operator+\" \"+y(e.right,n,o,i,u,l)+\") \";case\"||\":return\" (\"+y(e.left,n,o,i,u,l)+\" \"+(n===r.SqlServer?\"+\":e.operator)+\" \"+y(e.right,n,o,i,u,l)+\") \"}throw new s(c.UnsupportedOperator,{operator:e.operator});case\"null\":return\"null\";case\"boolean\":return!0===e.value?\"1\":\"0\";case\"string\":return\"'\"+e.value.toString().replace(/'/g,\"''\")+\"'\";case\"timestamp\":case\"date\":return T(e.value,n,l);case\"number\":return e.value.toString();case\"current-time\":return L(\"date\"===e.mode,n);case\"column-reference\":return i&&i.toLowerCase()===e.column.toLowerCase()?\"(\"+u+\")\":e.column;case\"data-type\":return e.value;case\"function\":{const r=y(e.args,n,o,i,u,l);return g(e.name,r,n)}}throw new s(c.UnsupportedSyntax,{node:e.type})}function g(e,t,a){switch(e.toLowerCase().trim()){case\"cos\":case\"sin\":case\"tan\":case\"cosh\":case\"tanh\":case\"sinh\":case\"acos\":case\"asin\":case\"atan\":case\"floor\":case\"log10\":case\"log\":case\"abs\":if(1!==t.length)throw new s(c.InvalidFunctionParameters,{function:e.toLowerCase().trim()});return`${e.toUpperCase().trim()}(${t[0]})`;case\"ceiling\":case\"ceil\":if(1!==t.length)throw new s(c.InvalidFunctionParameters,{function:\"ceiling\"});switch(a){case r.Standardised:case r.StandardisedNoInterval:}return\"CEILING(\"+t[0]+\")\";case\"mod\":case\"power\":case\"nullif\":if(2!==t.length)throw new s(c.InvalidFunctionParameters,{function:e.toLowerCase().trim()});return`${e.toUpperCase().trim()}(${t[0]},${t[1]})`;case\"round\":if(2===t.length)return\"ROUND(\"+t[0]+\",\"+t[1]+\")\";if(1===t.length)return\"ROUND(\"+t[0]+\")\";throw new s(c.InvalidFunctionParameters,{function:\"round\"});case\"truncate\":if(t.length<1||t.length>2)throw new s(c.InvalidFunctionParameters,{function:\"truncate\"});return a===r.SqlServer?\"ROUND(\"+t[0]+(1===t.length?\"0\":\",\"+t[1])+\",1)\":\"TRUNCATE(\"+t[0]+(1===t.length?\")\":\",\"+t[1]+\")\");case\"char_length\":case\"len\":if(1!==t.length)throw new s(c.InvalidFunctionParameters,{function:\"char_length\"});switch(a){case r.SqlServer:return\"LEN(\"+t[0]+\")\";case r.Oracle:return\"LENGTH(\"+t[0]+\")\";default:return\"CHAR_LENGTH(\"+t[0]+\")\"}case\"coalesce\":case\"concat\":{if(t.length<1)throw new s(c.InvalidFunctionParameters,{function:e.toLowerCase()});let r=e.toUpperCase().trim()+\"(\";for(let e=0;e<t.length;e++)0!==e&&(r+=\",\"),r+=t[e];return r+=\")\",r}case\"lower\":case\"lcase\":if(1!==t.length)throw new s(c.InvalidFunctionParameters,{function:\"lower\"});return\"LOWER(\"+t[0]+\")\";case\"upper\":case\"ucase\":if(1!==t.length)throw new s(c.InvalidFunctionParameters,{function:\"upper\"});return\"UPPER(\"+t[0]+\")\";case\"substring\":{let e=\"\";switch(a){case r.Oracle:return e=\"SUBSTR(\"+t[0]+\",\"+t[1],3===t.length&&(e+=\",\"+t[2]),e+=\")\",e;case r.SqlServer:return e=3===t.length?\"SUBSTRING(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\")\":\"SUBSTRING(\"+t[0]+\",  \"+t[1]+\", LEN(\"+t[0]+\") - \"+t[1]+\")\",e;default:return e=\"SUBSTRING(\"+t[0]+\" FROM \"+t[1],3===t.length&&(e+=\" FOR \"+t[2]),e+=\")\",e}}case\"extract\":return\"EXTRACT(\"+t[0].replace(/\\'/g,\"\")+\" FROM \"+t[1]+\")\";case\"cast\":{let e=\"\";switch(a){case r.Oracle:switch(t[1].type){case\"date\":e=\"DATE\";break;case\"float\":e=\"DOUBLE\";break;case\"integer\":e=\"INTEGER\";break;case\"real\":e=\"REAL\";break;case\"smallint\":e=\"SMALLINT\";break;case\"timestamp\":e=\"TIMESTAMP\";break;case\"varchar\":e=\"VARCHAR(\"+t[1].size.toString()+\")\"}return`CAST(${t[0]} AS ${e})`;case r.Postgres:switch(t[1].type){case\"date\":e=\"DATE\";break;case\"float\":e=\"DOUBLE PRECISION\";break;case\"integer\":e=\"INT\";break;case\"real\":e=\"REAL\";break;case\"smallint\":e=\"SMALLINT\";break;case\"timestamp\":e=\"TIMESTAMP\";break;case\"varchar\":e=\"VARCHAR(\"+t[1].size.toString()+\")\"}return`CAST(${t[0]} AS ${e})`;case r.SqlServer:switch(t[1].type){case\"date\":e=\"DATE\";break;case\"float\":e=\"FLOAT\";break;case\"integer\":e=\"INT\";break;case\"real\":e=\"REAL\";break;case\"smallint\":e=\"SMALLINT\";break;case\"timestamp\":e=\"DATETIME\";break;case\"varchar\":e=\"VARCHAR(\"+t[1].size.toString()+\")\"}return`CAST(${t[0]} AS ${e})`;default:switch(t[1].type){case\"date\":e=\"DATE\";break;case\"float\":e=\"FLOAT\";break;case\"integer\":e=\"INTEGER\";break;case\"real\":e=\"REAL\";break;case\"smallint\":e=\"SMALLINT\";break;case\"timestamp\":e=\"TIMESTAMP\";break;case\"varchar\":e=\"VARCHAR(\"+t[1].size.toString()+\")\"}return`CAST(${t[0]} AS ${e})`}}}throw new s(c.InvalidFunctionParameters,{function:e})}function h(t,a,n,s){n?.outputTimeReference&&(t=e.arcadeDateAndZoneToArcadeDate(t,n?.outputTimeReference));const c=t.toDateTime(),o=0===c.hour&&0===c.minute&&0===c.second&&0===c.millisecond;switch(a){case r.FILEGDB:case r.Standardised:case r.StandardisedNoInterval:return o?`date '${c.toFormat(\"yyyy-LL-dd\")}'`:`date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`;case r.Oracle:return o?`TO_DATE('${c.toFormat(\"yyyy-LL-dd\")}','YYYY-MM-DD')`:`TO_DATE('${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}','YYYY-MM-DD HH24:MI:SS')`;case r.SqlServer:return`'${c.toFormat(o?\"yyyy-LL-dd\":\"yyyy-LL-dd HH:mm:ss\")}'`;case r.PGDB:return`#${c.toFormat(o?\"LL-dd-yyyy\":\"LL-dd-yyyy HH:mm:ss\")}#`;case r.Postgres:return`TIMESTAMP '${c.toFormat(o?\"yyyy-LL-dd\":\"yyyy-LL-dd HH:mm:ss\")}'`;default:return`date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`}}function T(e,a,n,s){let c=t(e)?i.fromJSDate(e):i.fromSQL(e);const o=0===c.hour&&0===c.minute&&0===c.second&&0===c.millisecond;switch(n?.inputTimeReference&&(c=i.fromObject({day:c.day,year:c.year,month:c.month,hour:c.hour,minute:c.minute,second:c.second,millisecond:c.millisecond},{zone:n.inputTimeReference})),n?.outputTimeReference&&(c=c.setZone(n.outputTimeReference)),a){case r.FILEGDB:case r.Standardised:case r.StandardisedNoInterval:return o?`date '${c.toFormat(\"yyyy-LL-dd\")}'`:`date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`;case r.Oracle:return o?`TO_DATE('${c.toFormat(\"yyyy-LL-dd\")}','YYYY-MM-DD')`:`TO_DATE('${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}','YYYY-MM-DD HH24:MI:SS')`;case r.SqlServer:return`'${c.toFormat(o?\"yyyy-LL-dd\":\"yyyy-LL-dd HH:mm:ss\")}'`;case r.PGDB:return`#${c.toFormat(o?\"LL-dd-yyyy\":\"LL-dd-yyyy HH:mm:ss\")}#`;case r.Postgres:return`TIMESTAMP '${c.toFormat(o?\"yyyy-LL-dd\":\"yyyy-LL-dd HH:mm:ss\")}'`;default:return`date '${c.toFormat(\"yyyy-LL-dd HH:mm:ss\")}'`}}function L(e,t){switch(t){case r.FILEGDB:case r.Standardised:case r.StandardisedNoInterval:case r.Oracle:return e?\"CURRENT_DATE\":\"CURRENT_TIMESTAMP\";case r.SqlServer:return e?\"CAST(GETDATE() AS DATE)\":\"GETDATE()\";case r.PGDB:case r.Postgres:default:return e?\"CURRENT_DATE\":\"CURRENT_TIMESTAMP\"}}function S(e,r,t={}){const a={},n={},s={esriFieldTypeSmallInteger:\"integer\",esriFieldTypeInteger:\"integer\",esriFieldTypeSingle:\"double\",esriFieldTypeDouble:\"double\",esriFieldTypeString:\"string\",esriFieldTypeDate:\"date\",esriFieldTypeOID:\"integer\",esriFieldTypeGUID:\"guid\",esriFieldTypeGlobalID:\"guid\",oid:\"integer\",long:\"integer\",\"small-integer\":\"integer\",integer:\"integer\",single:\"double\",double:\"double\",date:\"date\",guid:\"guid\",globalid:\"guid\",string:\"string\"};for(const c of r){const e=c.type?s[c.type]:void 0;a[c.name.toLowerCase()]=void 0===e?\"\":e}for(const c in t){const e=s[t[c]];n[c.toLowerCase()]=void 0===e?\"\":e}switch(E(a,e.parseTree,e.parameters,n)){case\"double\":return\"double\";case\"integer\":return\"integer\";case\"date\":return\"date\";case\"string\":return\"string\";case\"global-id\":case\"guid\":return\"guid\"}return\"\"}function E(e,r,n,o){let i;switch(r.type){case\"interval\":return\"integer\";case\"case-expression\":{const t=[];if(\"simple\"===r.format){for(let a=0;a<r.clauses.length;a++)t.push(E(e,r.clauses[a].value,n,o));null!==r.else&&t.push(E(e,r.else,n,o))}else{for(let a=0;a<r.clauses.length;a++)t.push(E(e,r.else,n,o));null!==r.else&&t.push(E(e,r.else,n,o))}return w(t)}case\"parameter\":{const e=o[r.value.toLowerCase()];if(void 0===e&&n){const e=n[r.value.toLowerCase()];if(void 0===e)return\"\";if(null===e)return\"\";if(\"string\"==typeof e||e instanceof String)return\"string\";if(\"boolean\"==typeof e)return\"boolean\";if(t(e))return\"date\";if(a(e))return\"date\";if(\"number\"==typeof e)return e%1==0?\"integer\":\"double\"}return void 0===e?\"\":e}case\"expression-list\":{const t=[];for(const a of r.value)t.push(E(e,a,n,o));return t}case\"unary-expression\":return\"boolean\";case\"binary-expression\":switch(r.operator){case\"AND\":case\"OR\":case\"IN\":case\"NOT IN\":case\"BETWEEN\":case\"NOTBETWEEN\":case\"LIKE\":case\"NOT LIKE\":case\"<>\":case\"<\":case\">\":case\">=\":case\"<=\":case\"=\":return\"boolean\";case\"IS\":case\"ISNOT\":if(\"null\"!==r.right.type)throw new s(c.UnsupportedIsRhs);return\"boolean\";case\"*\":case\"-\":case\"+\":case\"/\":return w([E(e,r.left,n,o),E(e,r.right,n,o)]);case\"||\":return\"string\";default:throw new s(c.UnsupportedOperator,{operator:r.operator})}case\"null\":return\"\";case\"boolean\":return\"boolean\";case\"string\":return\"string\";case\"number\":return null===r.value?\"\":r.value%1==0?\"integer\":\"double\";case\"date\":case\"timestamp\":case\"current-time\":return\"date\";case\"column-reference\":{const t=e[r.column.toLowerCase()];return void 0===t?\"\":t}case\"function\":switch(r.name.toLowerCase()){case\"cast\":switch(r.args?.value[1]?.value.type??\"\"){case\"integer\":case\"smallint\":return\"integer\";case\"real\":case\"float\":return\"double\";case\"date\":case\"timestamp\":return\"date\";case\"varchar\":return\"string\";default:return\"\"}case\"position\":case\"extract\":case\"char_length\":case\"mod\":return\"integer\";case\"round\":if(i=E(e,r.args,n,o),i instanceof Array){if(i.length<=0)return\"double\";i=i[0]}return i;case\"sign\":return\"integer\";case\"ceiling\":case\"floor\":case\"abs\":return i=E(e,r.args,n,o),i instanceof Array&&(i=w(i)),\"integer\"===i||\"double\"===i?i:\"double\";case\"area\":case\"length\":case\"log\":case\"log10\":case\"sin\":case\"cos\":case\"tan\":case\"asin\":case\"acos\":case\"atan\":case\"cosh\":case\"sinh\":case\"tanh\":case\"power\":return\"double\";case\"substring\":case\"trim\":case\"concat\":case\"lower\":case\"upper\":return\"string\";case\"truncate\":return\"double\";case\"nullif\":case\"coalesce\":return i=E(e,r.args,n,o),i instanceof Array?i.length>0?i[0]:\"\":i}return\"\"}throw new s(c.UnsupportedSyntax,{node:r.type})}const I={boolean:1,string:2,integer:3,double:4,date:5};function w(e){if(e){let r=\"\";for(const t of e)\"\"!==t&&(r=\"\"===r||I[r]<I[t]?t:r);return r}return\"\"}function N(e,r){return b(e.parseTree,r)}function A(e){return\"column-reference\"===e?.parseTree.type}function b(e,r){if(null==e)return!1;switch(e.type){case\"when-clause\":return b(e.operand,r)||b(e.value,r);case\"case-expression\":for(const t of e.clauses)if(b(t,r))return!0;return!(\"simple\"!==e.format||!b(e.operand,r))||!(null===e.else||!b(e.else,r));case\"parameter\":case\"null\":case\"boolean\":case\"date\":case\"timestamp\":case\"string\":case\"number\":return!1;case\"expression-list\":for(const t of e.value)if(b(t,r))return!0;return!1;case\"unary-expression\":return b(e.expr,r);case\"binary-expression\":return b(e.left,r)||b(e.right,r);case\"column-reference\":return r.toLowerCase()===e.column.toLowerCase();case\"function\":return b(e.args,r)}return!1}function v(e){let r=\"\";return r+=e.period.toUpperCase(),r}function R(e,r,t){let a=\"\";return a=\"interval-period\"===r.type?v(r):v(r.start)+\" TO \"+v(r.end),\"INTERVAL \"+t+\" \"+e+\" \"+a}export{h as arcadeDateToSqlString,l as changeSqlTimeZones,d as changeWhereClauseTimeZone,m as combine,R as convertIntervalToSql,A as isSingleField,T as makeDateString,L as makeToday,S as predictType,p as reformulateWithoutField,N as scanForField,u as toWhereClause,f as toWhereClauseFromTree,g as translateFunctionToDatabaseSpecific};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,UAAU,IAAIC,CAArB,QAA2B,qBAA3B;AAAiD,SAAOC,0BAA0B,IAAIC,CAArC,EAAuCC,MAAM,IAAIC,CAAjD,EAAmDC,YAAY,IAAIC,CAAnE,QAAyE,aAAzE;AAAuF,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,kCAA5B;AAA+D,SAAOC,QAAQ,IAAIC,CAAnB,EAAqBC,aAAa,IAAIC,CAAtC,QAA4C,mBAA5C;AAAgE,SAAOC,oBAAoB,IAAIC,CAA/B,QAAqC,0BAArC;AAAgE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,OAAzB;;AAAiC,SAASC,CAAT,CAAWjB,CAAX,EAAaE,CAAb,EAAe;EAAC,OAAOgB,CAAC,CAAClB,CAAC,EAAEmB,SAAJ,EAAcjB,CAAd,EAAgBF,CAAC,EAAEoB,UAAnB,CAAR;AAAuC;;AAAA,SAASC,CAAT,CAAWrB,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiBE,CAAjB,EAAmB;EAAC,OAAOgB,CAAC,CAACd,CAAC,CAACe,MAAF,CAASvB,CAAT,EAAWE,CAAC,CAACsB,WAAb,CAAD,EAA2BpB,CAA3B,EAA6BE,CAA7B,CAAR;AAAwC;;AAAA,SAASgB,CAAT,CAAWtB,CAAX,EAAaI,CAAb,EAAeE,CAAf,EAAiB;EAAC,MAAME,CAAC,GAACM,CAAC,CAACV,CAAD,CAAT;EAAA,MAAaM,CAAC,GAACI,CAAC,CAACR,CAAD,CAAhB;EAAoB,OAAOY,CAAC,CAAClB,CAAC,CAACmB,SAAH,EAAajB,CAAC,CAACuB,YAAf,EAA4B,IAA5B,EAAiC,IAAjC,EAAsC,IAAtC,EAA2C;IAACC,kBAAkB,EAAClB,CAApB;IAAsBmB,mBAAmB,EAACjB;EAA1C,CAA3C,CAAR;AAAiG;;AAAA,SAASkB,CAAT,CAAW5B,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;EAAC,OAAOc,CAAC,CAAClB,CAAD,EAAGE,CAAH,EAAKE,CAAL,CAAR;AAAgB;;AAAA,SAASyB,CAAT,CAAW7B,CAAX,EAAaI,CAAb,EAAeE,CAAf,EAAiBI,CAAjB,EAAmB;EAAC,OAAOF,CAAC,CAACe,MAAF,CAASL,CAAC,CAAClB,CAAC,CAACmB,SAAH,EAAajB,CAAC,CAACuB,YAAf,EAA4BzB,CAAC,CAACoB,UAA9B,EAAyChB,CAAzC,EAA2CE,CAA3C,CAAV,EAAwDI,CAAxD,CAAP;AAAkE;;AAAA,SAASoB,CAAT,CAAW9B,CAAX,EAAaI,CAAb,EAAeE,CAAC,GAAC,KAAjB,EAAuB;EAAC,OAAOE,CAAC,CAACe,MAAF,CAAS,OAAKN,CAAC,CAACjB,CAAD,EAAGE,CAAC,CAACuB,YAAL,CAAN,GAAyB,GAAzB,GAA6BnB,CAA7B,GAA+B,GAA/B,GAAmCW,CAAC,CAACb,CAAD,EAAGF,CAAC,CAACuB,YAAL,CAApC,GAAuD,IAAhE,EAAqEzB,CAAC,CAACwB,WAAvE,CAAP;AAA2F;;AAAA,SAASN,CAAT,CAAWlB,CAAX,EAAaQ,CAAb,EAAeM,CAAf,EAAiBE,CAAC,GAAC,IAAnB,EAAwBC,CAAC,GAAC,IAA1B,EAA+BI,CAAC,GAAC,IAAjC,EAAsC;EAAC,IAAIC,CAAJ,EAAMM,CAAN,EAAQC,CAAR,EAAUC,CAAV;;EAAY,QAAO9B,CAAC,CAAC+B,IAAT;IAAe,KAAI,UAAJ;MAAe,OAAOC,CAAC,CAACd,CAAC,CAAClB,CAAC,CAACiC,KAAH,EAASzB,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAF,EAAsBrB,CAAC,CAACkC,SAAxB,EAAkClC,CAAC,CAACmC,EAApC,CAAR;;IAAgD,KAAI,iBAAJ;MAAsB;QAAC,IAAIjC,CAAC,GAAC,QAAN;QAAe,aAAWF,CAAC,CAACoC,MAAb,KAAsBlC,CAAC,IAAEgB,CAAC,CAAClB,CAAC,CAACqC,OAAH,EAAW7B,CAAX,EAAaM,CAAb,EAAeE,CAAf,EAAiBC,CAAjB,EAAmBI,CAAnB,CAA1B;;QAAiD,KAAI,IAAIjB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACJ,CAAC,CAACsC,OAAF,CAAUC,MAAxB,EAA+BnC,CAAC,EAAhC,EAAmCF,CAAC,IAAE,WAASgB,CAAC,CAAClB,CAAC,CAACsC,OAAF,CAAUlC,CAAV,EAAaiC,OAAd,EAAsB7B,CAAtB,EAAwBM,CAAxB,EAA0BE,CAA1B,EAA4BC,CAA5B,EAA8BI,CAA9B,CAAV,GAA2C,QAA3C,GAAoDH,CAAC,CAAClB,CAAC,CAACsC,OAAF,CAAUlC,CAAV,EAAa6B,KAAd,EAAoBzB,CAApB,EAAsBM,CAAtB,EAAwBE,CAAxB,EAA0BC,CAA1B,EAA4BI,CAA5B,CAAxD;;QAAuF,OAAO,SAAOrB,CAAC,CAACwC,IAAT,KAAgBtC,CAAC,IAAE,WAASgB,CAAC,CAAClB,CAAC,CAACwC,IAAH,EAAQhC,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAA7B,GAAiDnB,CAAC,IAAE,OAApD,EAA4DA,CAAnE;MAAqE;;IAAA,KAAI,WAAJ;MAAgB;QAAC,MAAMA,CAAC,GAACY,CAAC,CAACd,CAAC,CAACiC,KAAF,CAAQQ,WAAR,EAAD,CAAT;;QAAiC,IAAG,YAAU,OAAOvC,CAApB,EAAsB;UAAC,OAAM,MAAIY,CAAC,CAACd,CAAC,CAACiC,KAAF,CAAQQ,WAAR,EAAD,CAAD,CAAyBC,QAAzB,GAAoCC,OAApC,CAA4C,IAA5C,EAAiD,IAAjD,CAAJ,GAA2D,GAAjE;QAAqE;;QAAA,IAAGvC,CAAC,CAACF,CAAD,CAAJ,EAAQ,OAAO0C,CAAC,CAAC1C,CAAD,EAAGM,CAAH,EAAKa,CAAL,CAAR;QAAgB,IAAGf,CAAC,CAACJ,CAAD,CAAJ,EAAQ,OAAO2C,CAAC,CAAC3C,CAAD,EAAGM,CAAH,EAAKa,CAAL,CAAR;;QAAgB,IAAGnB,CAAC,YAAY4C,KAAhB,EAAsB;UAAC,MAAM9C,CAAC,GAAC,EAAR;;UAAW,KAAI,IAAIU,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACR,CAAC,CAACqC,MAAhB,EAAuB7B,CAAC,EAAxB,EAA2B,YAAU,OAAOR,CAAC,CAACQ,CAAD,CAAlB,GAAsBV,CAAC,CAAC+C,IAAF,CAAO,MAAI7C,CAAC,CAACQ,CAAD,CAAD,CAAKgC,QAAL,GAAgBC,OAAhB,CAAwB,IAAxB,EAA6B,IAA7B,CAAJ,GAAuC,GAA9C,CAAtB,GAAyEvC,CAAC,CAACF,CAAC,CAACQ,CAAD,CAAF,CAAD,GAAQV,CAAC,CAAC+C,IAAF,CAAOH,CAAC,CAAC1C,CAAC,CAACQ,CAAD,CAAF,EAAMF,CAAN,EAAQa,CAAR,CAAR,CAAR,GAA4Bf,CAAC,CAACJ,CAAC,CAACQ,CAAD,CAAF,CAAD,GAAQV,CAAC,CAAC+C,IAAF,CAAOF,CAAC,CAAC3C,CAAC,CAACQ,CAAD,CAAF,EAAMF,CAAN,EAAQa,CAAR,CAAR,CAAR,GAA4BrB,CAAC,CAAC+C,IAAF,CAAO7C,CAAC,CAACQ,CAAD,CAAD,CAAKgC,QAAL,EAAP,CAAjI;;UAAyJ,OAAO1C,CAAP;QAAS;;QAAA,OAAOE,CAAC,CAACwC,QAAF,EAAP;MAAoB;;IAAA,KAAI,iBAAJ;MAAsBd,CAAC,GAAC,EAAF;;MAAK,KAAI,MAAM1B,CAAV,IAAeF,CAAC,CAACiC,KAAjB,EAAuBL,CAAC,CAACmB,IAAF,CAAO7B,CAAC,CAAChB,CAAD,EAAGM,CAAH,EAAKM,CAAL,EAAOE,CAAP,EAASC,CAAT,EAAWI,CAAX,CAAR;;MAAuB,OAAOO,CAAP;;IAAS,KAAI,kBAAJ;MAAuB,OAAM,YAAUV,CAAC,CAAClB,CAAC,CAACgD,IAAH,EAAQxC,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAX,GAA8B,KAApC;;IAA0C,KAAI,mBAAJ;MAAwB,QAAOrB,CAAC,CAACiD,QAAT;QAAmB,KAAI,KAAJ;UAAU,OAAM,OAAK/B,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,OAAzB,GAAiCH,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAlC,GAAsD,IAA5D;;QAAiE,KAAI,IAAJ;UAAS,OAAM,OAAKH,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,MAAzB,GAAgCH,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAjC,GAAqD,IAA3D;;QAAgE,KAAI,IAAJ;UAAS,IAAG,WAASrB,CAAC,CAACmD,KAAF,CAAQpB,IAApB,EAAyB,MAAM,IAAIrB,CAAJ,CAAME,CAAC,CAACwC,gBAAR,CAAN;UAAgC,OAAM,OAAKlC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,YAA/B;;QAA4C,KAAI,OAAJ;UAAY,IAAG,WAASrB,CAAC,CAACmD,KAAF,CAAQpB,IAApB,EAAyB,MAAM,IAAIrB,CAAJ,CAAME,CAAC,CAACwC,gBAAR,CAAN;UAAgC,OAAM,OAAKlC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,gBAA/B;;QAAgD,KAAI,IAAJ;UAAS,OAAOC,CAAC,GAAC,EAAF,EAAK,sBAAoBtB,CAAC,CAACmD,KAAF,CAAQpB,IAA5B,IAAkCT,CAAC,GAACJ,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,CAAH,EAAqB,OAAKC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,OAAzB,GAAiCC,CAAC,CAAC+B,IAAF,CAAO,GAAP,CAAjC,GAA6C,KAApG,KAA4GvB,CAAC,GAACZ,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAH,EAAuBS,CAAC,YAAYgB,KAAb,GAAmB,OAAK5B,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,OAAzB,GAAiCS,CAAC,CAACuB,IAAF,CAAO,GAAP,CAAjC,GAA6C,KAAhE,GAAsE,OAAKnC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,OAAzB,GAAiCS,CAAjC,GAAmC,KAA5O,CAAZ;;QAA+P,KAAI,QAAJ;UAAa,OAAOR,CAAC,GAAC,EAAF,EAAK,sBAAoBtB,CAAC,CAACmD,KAAF,CAAQpB,IAA5B,IAAkCT,CAAC,GAACJ,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,CAAH,EAAqB,OAAKC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,WAAzB,GAAqCC,CAAC,CAAC+B,IAAF,CAAO,GAAP,CAArC,GAAiD,KAAxG,KAAgHvB,CAAC,GAACZ,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAH,EAAuBS,CAAC,YAAYgB,KAAb,GAAmB,OAAK5B,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,WAAzB,GAAqCS,CAAC,CAACuB,IAAF,CAAO,GAAP,CAArC,GAAiD,KAApE,GAA0E,OAAKnC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,WAAzB,GAAqCS,CAArC,GAAuC,KAAxP,CAAZ;;QAA2Q,KAAI,SAAJ;UAAc,OAAOD,CAAC,GAACX,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAH,EAAuB,OAAKH,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,WAAzB,GAAqCQ,CAAC,CAAC,CAAD,CAAtC,GAA0C,OAA1C,GAAkDA,CAAC,CAAC,CAAD,CAAnD,GAAuD,KAArF;;QAA2F,KAAI,YAAJ;UAAiB,OAAOA,CAAC,GAACX,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAH,EAAuB,OAAKH,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,eAAzB,GAAyCQ,CAAC,CAAC,CAAD,CAA1C,GAA8C,OAA9C,GAAsDA,CAAC,CAAC,CAAD,CAAvD,GAA2D,KAAzF;;QAA+F,KAAI,MAAJ;UAAW,OAAM,OAAK7B,CAAC,CAACsD,MAAP,GAAc,OAAKpC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,QAAzB,GAAkCH,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAnC,GAAuD,WAAvD,GAAmErB,CAAC,CAACsD,MAArE,GAA4E,KAA1F,GAAgG,OAAKpC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,QAAzB,GAAkCH,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAnC,GAAuD,IAA7J;;QAAkK,KAAI,UAAJ;UAAe,OAAM,OAAKrB,CAAC,CAACsD,MAAP,GAAc,OAAKpC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,YAAzB,GAAsCH,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAvC,GAA2D,WAA3D,GAAuErB,CAAC,CAACsD,MAAzE,GAAgF,KAA9F,GAAoG,OAAKpC,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,YAAzB,GAAsCH,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAvC,GAA2D,IAArK;;QAA0K,KAAI,IAAJ;QAAS,KAAI,GAAJ;QAAQ,KAAI,GAAJ;QAAQ,KAAI,IAAJ;QAAS,KAAI,IAAJ;QAAS,KAAI,GAAJ;QAAQ,KAAI,GAAJ;QAAQ,KAAI,GAAJ;QAAQ,KAAI,GAAJ;QAAQ,KAAI,GAAJ;UAAQ,OAAM,OAAKH,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,GAAzB,GAA6BrB,CAAC,CAACiD,QAA/B,GAAwC,GAAxC,GAA4C/B,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAA7C,GAAiE,IAAvE;;QAA4E,KAAI,IAAJ;UAAS,OAAM,OAAKH,CAAC,CAAClB,CAAC,CAACkD,IAAH,EAAQ1C,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAN,GAAyB,GAAzB,IAA8Bb,CAAC,KAAGN,CAAC,CAACqD,SAAN,GAAgB,GAAhB,GAAoBvD,CAAC,CAACiD,QAApD,IAA8D,GAA9D,GAAkE/B,CAAC,CAAClB,CAAC,CAACmD,KAAH,EAAS3C,CAAT,EAAWM,CAAX,EAAaE,CAAb,EAAeC,CAAf,EAAiBI,CAAjB,CAAnE,GAAuF,IAA7F;MAAjpD;;MAAmvD,MAAM,IAAIX,CAAJ,CAAME,CAAC,CAAC4C,mBAAR,EAA4B;QAACP,QAAQ,EAACjD,CAAC,CAACiD;MAAZ,CAA5B,CAAN;;IAAyD,KAAI,MAAJ;MAAW,OAAM,MAAN;;IAAa,KAAI,SAAJ;MAAc,OAAM,CAAC,CAAD,KAAKjD,CAAC,CAACiC,KAAP,GAAa,GAAb,GAAiB,GAAvB;;IAA2B,KAAI,QAAJ;MAAa,OAAM,MAAIjC,CAAC,CAACiC,KAAF,CAAQS,QAAR,GAAmBC,OAAnB,CAA2B,IAA3B,EAAgC,IAAhC,CAAJ,GAA0C,GAAhD;;IAAoD,KAAI,WAAJ;IAAgB,KAAI,MAAJ;MAAW,OAAOC,CAAC,CAAC5C,CAAC,CAACiC,KAAH,EAASzB,CAAT,EAAWa,CAAX,CAAR;;IAAsB,KAAI,QAAJ;MAAa,OAAOrB,CAAC,CAACiC,KAAF,CAAQS,QAAR,EAAP;;IAA0B,KAAI,cAAJ;MAAmB,OAAOe,CAAC,CAAC,WAASzD,CAAC,CAAC0D,IAAZ,EAAiBlD,CAAjB,CAAR;;IAA4B,KAAI,kBAAJ;MAAuB,OAAOQ,CAAC,IAAEA,CAAC,CAACyB,WAAF,OAAkBzC,CAAC,CAAC2D,MAAF,CAASlB,WAAT,EAArB,GAA4C,MAAIxB,CAAJ,GAAM,GAAlD,GAAsDjB,CAAC,CAAC2D,MAA/D;;IAAsE,KAAI,WAAJ;MAAgB,OAAO3D,CAAC,CAACiC,KAAT;;IAAe,KAAI,UAAJ;MAAe;QAAC,MAAM/B,CAAC,GAACgB,CAAC,CAAClB,CAAC,CAAC4D,IAAH,EAAQpD,CAAR,EAAUM,CAAV,EAAYE,CAAZ,EAAcC,CAAd,EAAgBI,CAAhB,CAAT;QAA4B,OAAOwC,CAAC,CAAC7D,CAAC,CAAC8D,IAAH,EAAQ5D,CAAR,EAAUM,CAAV,CAAR;MAAqB;EAAlrG;;EAAmrG,MAAM,IAAIE,CAAJ,CAAME,CAAC,CAACmD,iBAAR,EAA0B;IAACC,IAAI,EAAChE,CAAC,CAAC+B;EAAR,CAA1B,CAAN;AAA+C;;AAAA,SAAS8B,CAAT,CAAW7D,CAAX,EAAaI,CAAb,EAAeE,CAAf,EAAiB;EAAC,QAAON,CAAC,CAACyC,WAAF,GAAgBwB,IAAhB,EAAP;IAA+B,KAAI,KAAJ;IAAU,KAAI,KAAJ;IAAU,KAAI,KAAJ;IAAU,KAAI,MAAJ;IAAW,KAAI,MAAJ;IAAW,KAAI,MAAJ;IAAW,KAAI,MAAJ;IAAW,KAAI,MAAJ;IAAW,KAAI,MAAJ;IAAW,KAAI,OAAJ;IAAY,KAAI,OAAJ;IAAY,KAAI,KAAJ;IAAU,KAAI,KAAJ;MAAU,IAAG,MAAI7D,CAAC,CAACmC,MAAT,EAAgB,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAACnE,CAAC,CAACyC,WAAF,GAAgBwB,IAAhB;MAAV,CAAlC,CAAN;MAA2E,OAAO,GAAEjE,CAAC,CAACoE,WAAF,GAAgBH,IAAhB,EAAuB,IAAG7D,CAAC,CAAC,CAAD,CAAI,GAAxC;;IAA2C,KAAI,SAAJ;IAAc,KAAI,MAAJ;MAAW,IAAG,MAAIA,CAAC,CAACmC,MAAT,EAAgB,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAAC;MAAV,CAAlC,CAAN;;MAA8D,QAAO7D,CAAP;QAAU,KAAKJ,CAAC,CAACuB,YAAP;QAAoB,KAAKvB,CAAC,CAACmE,sBAAP;MAA9B;;MAA6D,OAAM,aAAWjE,CAAC,CAAC,CAAD,CAAZ,GAAgB,GAAtB;;IAA0B,KAAI,KAAJ;IAAU,KAAI,OAAJ;IAAY,KAAI,QAAJ;MAAa,IAAG,MAAIA,CAAC,CAACmC,MAAT,EAAgB,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAACnE,CAAC,CAACyC,WAAF,GAAgBwB,IAAhB;MAAV,CAAlC,CAAN;MAA2E,OAAO,GAAEjE,CAAC,CAACoE,WAAF,GAAgBH,IAAhB,EAAuB,IAAG7D,CAAC,CAAC,CAAD,CAAI,IAAGA,CAAC,CAAC,CAAD,CAAI,GAAhD;;IAAmD,KAAI,OAAJ;MAAY,IAAG,MAAIA,CAAC,CAACmC,MAAT,EAAgB,OAAM,WAASnC,CAAC,CAAC,CAAD,CAAV,GAAc,GAAd,GAAkBA,CAAC,CAAC,CAAD,CAAnB,GAAuB,GAA7B;MAAiC,IAAG,MAAIA,CAAC,CAACmC,MAAT,EAAgB,OAAM,WAASnC,CAAC,CAAC,CAAD,CAAV,GAAc,GAApB;MAAwB,MAAM,IAAIM,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAAC;MAAV,CAAlC,CAAN;;IAA4D,KAAI,UAAJ;MAAe,IAAG/D,CAAC,CAACmC,MAAF,GAAS,CAAT,IAAYnC,CAAC,CAACmC,MAAF,GAAS,CAAxB,EAA0B,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAAC;MAAV,CAAlC,CAAN;MAA+D,OAAO7D,CAAC,KAAGJ,CAAC,CAACqD,SAAN,GAAgB,WAASnD,CAAC,CAAC,CAAD,CAAV,IAAe,MAAIA,CAAC,CAACmC,MAAN,GAAa,GAAb,GAAiB,MAAInC,CAAC,CAAC,CAAD,CAArC,IAA0C,KAA1D,GAAgE,cAAYA,CAAC,CAAC,CAAD,CAAb,IAAkB,MAAIA,CAAC,CAACmC,MAAN,GAAa,GAAb,GAAiB,MAAInC,CAAC,CAAC,CAAD,CAAL,GAAS,GAA5C,CAAvE;;IAAwH,KAAI,aAAJ;IAAkB,KAAI,KAAJ;MAAU,IAAG,MAAIA,CAAC,CAACmC,MAAT,EAAgB,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAAC;MAAV,CAAlC,CAAN;;MAAkE,QAAO7D,CAAP;QAAU,KAAKJ,CAAC,CAACqD,SAAP;UAAiB,OAAM,SAAOnD,CAAC,CAAC,CAAD,CAAR,GAAY,GAAlB;;QAAsB,KAAKF,CAAC,CAACoE,MAAP;UAAc,OAAM,YAAUlE,CAAC,CAAC,CAAD,CAAX,GAAe,GAArB;;QAAyB;UAAQ,OAAM,iBAAeA,CAAC,CAAC,CAAD,CAAhB,GAAoB,GAA1B;MAAhG;;IAA8H,KAAI,UAAJ;IAAe,KAAI,QAAJ;MAAa;QAAC,IAAGA,CAAC,CAACmC,MAAF,GAAS,CAAZ,EAAc,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;UAACC,QAAQ,EAACnE,CAAC,CAACyC,WAAF;QAAV,CAAlC,CAAN;QAAoE,IAAIvC,CAAC,GAACF,CAAC,CAACoE,WAAF,GAAgBH,IAAhB,KAAuB,GAA7B;;QAAiC,KAAI,IAAIjE,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACI,CAAC,CAACmC,MAAhB,EAAuBvC,CAAC,EAAxB,EAA2B,MAAIA,CAAJ,KAAQE,CAAC,IAAE,GAAX,GAAgBA,CAAC,IAAEE,CAAC,CAACJ,CAAD,CAApB;;QAAwB,OAAOE,CAAC,IAAE,GAAH,EAAOA,CAAd;MAAgB;;IAAA,KAAI,OAAJ;IAAY,KAAI,OAAJ;MAAY,IAAG,MAAIE,CAAC,CAACmC,MAAT,EAAgB,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAAC;MAAV,CAAlC,CAAN;MAA4D,OAAM,WAAS/D,CAAC,CAAC,CAAD,CAAV,GAAc,GAApB;;IAAwB,KAAI,OAAJ;IAAY,KAAI,OAAJ;MAAY,IAAG,MAAIA,CAAC,CAACmC,MAAT,EAAgB,MAAM,IAAI7B,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;QAACC,QAAQ,EAAC;MAAV,CAAlC,CAAN;MAA4D,OAAM,WAAS/D,CAAC,CAAC,CAAD,CAAV,GAAc,GAApB;;IAAwB,KAAI,WAAJ;MAAgB;QAAC,IAAIJ,CAAC,GAAC,EAAN;;QAAS,QAAOM,CAAP;UAAU,KAAKJ,CAAC,CAACoE,MAAP;YAAc,OAAOtE,CAAC,GAAC,YAAUI,CAAC,CAAC,CAAD,CAAX,GAAe,GAAf,GAAmBA,CAAC,CAAC,CAAD,CAAtB,EAA0B,MAAIA,CAAC,CAACmC,MAAN,KAAevC,CAAC,IAAE,MAAII,CAAC,CAAC,CAAD,CAAvB,CAA1B,EAAsDJ,CAAC,IAAE,GAAzD,EAA6DA,CAApE;;UAAsE,KAAKE,CAAC,CAACqD,SAAP;YAAiB,OAAOvD,CAAC,GAAC,MAAII,CAAC,CAACmC,MAAN,GAAa,eAAanC,CAAC,CAAC,CAAD,CAAd,GAAkB,GAAlB,GAAsBA,CAAC,CAAC,CAAD,CAAvB,GAA2B,GAA3B,GAA+BA,CAAC,CAAC,CAAD,CAAhC,GAAoC,GAAjD,GAAqD,eAAaA,CAAC,CAAC,CAAD,CAAd,GAAkB,KAAlB,GAAwBA,CAAC,CAAC,CAAD,CAAzB,GAA6B,QAA7B,GAAsCA,CAAC,CAAC,CAAD,CAAvC,GAA2C,MAA3C,GAAkDA,CAAC,CAAC,CAAD,CAAnD,GAAuD,GAA9G,EAAkHJ,CAAzH;;UAA2H;YAAQ,OAAOA,CAAC,GAAC,eAAaI,CAAC,CAAC,CAAD,CAAd,GAAkB,QAAlB,GAA2BA,CAAC,CAAC,CAAD,CAA9B,EAAkC,MAAIA,CAAC,CAACmC,MAAN,KAAevC,CAAC,IAAE,UAAQI,CAAC,CAAC,CAAD,CAA3B,CAAlC,EAAkEJ,CAAC,IAAE,GAArE,EAAyEA,CAAhF;QAAlP;MAAqU;;IAAA,KAAI,SAAJ;MAAc,OAAM,aAAWI,CAAC,CAAC,CAAD,CAAD,CAAKuC,OAAL,CAAa,KAAb,EAAmB,EAAnB,CAAX,GAAkC,QAAlC,GAA2CvC,CAAC,CAAC,CAAD,CAA5C,GAAgD,GAAtD;;IAA0D,KAAI,MAAJ;MAAW;QAAC,IAAIJ,CAAC,GAAC,EAAN;;QAAS,QAAOM,CAAP;UAAU,KAAKJ,CAAC,CAACoE,MAAP;YAAc,QAAOlE,CAAC,CAAC,CAAD,CAAD,CAAK2B,IAAZ;cAAkB,KAAI,MAAJ;gBAAW/B,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,OAAJ;gBAAYA,CAAC,GAAC,QAAF;gBAAW;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,SAAF;gBAAY;;cAAM,KAAI,MAAJ;gBAAWA,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,UAAJ;gBAAeA,CAAC,GAAC,UAAF;gBAAa;;cAAM,KAAI,WAAJ;gBAAgBA,CAAC,GAAC,WAAF;gBAAc;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,aAAWI,CAAC,CAAC,CAAD,CAAD,CAAKmE,IAAL,CAAU7B,QAAV,EAAX,GAAgC,GAAlC;YAAvN;;YAA6P,OAAO,QAAOtC,CAAC,CAAC,CAAD,CAAI,OAAMJ,CAAE,GAA3B;;UAA8B,KAAKE,CAAC,CAACsE,QAAP;YAAgB,QAAOpE,CAAC,CAAC,CAAD,CAAD,CAAK2B,IAAZ;cAAkB,KAAI,MAAJ;gBAAW/B,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,OAAJ;gBAAYA,CAAC,GAAC,kBAAF;gBAAqB;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,KAAF;gBAAQ;;cAAM,KAAI,MAAJ;gBAAWA,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,UAAJ;gBAAeA,CAAC,GAAC,UAAF;gBAAa;;cAAM,KAAI,WAAJ;gBAAgBA,CAAC,GAAC,WAAF;gBAAc;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,aAAWI,CAAC,CAAC,CAAD,CAAD,CAAKmE,IAAL,CAAU7B,QAAV,EAAX,GAAgC,GAAlC;YAA7N;;YAAmQ,OAAO,QAAOtC,CAAC,CAAC,CAAD,CAAI,OAAMJ,CAAE,GAA3B;;UAA8B,KAAKE,CAAC,CAACqD,SAAP;YAAiB,QAAOnD,CAAC,CAAC,CAAD,CAAD,CAAK2B,IAAZ;cAAkB,KAAI,MAAJ;gBAAW/B,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,OAAJ;gBAAYA,CAAC,GAAC,OAAF;gBAAU;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,KAAF;gBAAQ;;cAAM,KAAI,MAAJ;gBAAWA,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,UAAJ;gBAAeA,CAAC,GAAC,UAAF;gBAAa;;cAAM,KAAI,WAAJ;gBAAgBA,CAAC,GAAC,UAAF;gBAAa;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,aAAWI,CAAC,CAAC,CAAD,CAAD,CAAKmE,IAAL,CAAU7B,QAAV,EAAX,GAAgC,GAAlC;YAAjN;;YAAuP,OAAO,QAAOtC,CAAC,CAAC,CAAD,CAAI,OAAMJ,CAAE,GAA3B;;UAA8B;YAAQ,QAAOI,CAAC,CAAC,CAAD,CAAD,CAAK2B,IAAZ;cAAkB,KAAI,MAAJ;gBAAW/B,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,OAAJ;gBAAYA,CAAC,GAAC,OAAF;gBAAU;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,SAAF;gBAAY;;cAAM,KAAI,MAAJ;gBAAWA,CAAC,GAAC,MAAF;gBAAS;;cAAM,KAAI,UAAJ;gBAAeA,CAAC,GAAC,UAAF;gBAAa;;cAAM,KAAI,WAAJ;gBAAgBA,CAAC,GAAC,WAAF;gBAAc;;cAAM,KAAI,SAAJ;gBAAcA,CAAC,GAAC,aAAWI,CAAC,CAAC,CAAD,CAAD,CAAKmE,IAAL,CAAU7B,QAAV,EAAX,GAAgC,GAAlC;YAAtN;;YAA4P,OAAO,QAAOtC,CAAC,CAAC,CAAD,CAAI,OAAMJ,CAAE,GAA3B;QAA9oC;MAA6qC;EAAj0G;;EAAk0G,MAAM,IAAIU,CAAJ,CAAME,CAAC,CAACsD,yBAAR,EAAkC;IAACC,QAAQ,EAACnE;EAAV,CAAlC,CAAN;AAAsD;;AAAA,SAAS6C,CAAT,CAAWzC,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiBE,CAAjB,EAAmB;EAACF,CAAC,EAAEmB,mBAAH,KAAyBvB,CAAC,GAACJ,CAAC,CAACyE,6BAAF,CAAgCrE,CAAhC,EAAkCI,CAAC,EAAEmB,mBAArC,CAA3B;EAAsF,MAAMf,CAAC,GAACR,CAAC,CAACsE,UAAF,EAAR;EAAA,MAAuB5D,CAAC,GAAC,MAAIF,CAAC,CAAC+D,IAAN,IAAY,MAAI/D,CAAC,CAACgE,MAAlB,IAA0B,MAAIhE,CAAC,CAACiE,MAAhC,IAAwC,MAAIjE,CAAC,CAACkE,WAAvE;;EAAmF,QAAOxE,CAAP;IAAU,KAAKJ,CAAC,CAAC6E,OAAP;IAAe,KAAK7E,CAAC,CAACuB,YAAP;IAAoB,KAAKvB,CAAC,CAACmE,sBAAP;MAA8B,OAAOvD,CAAC,GAAE,SAAQF,CAAC,CAACoE,QAAF,CAAW,YAAX,CAAyB,GAAnC,GAAuC,SAAQpE,CAAC,CAACoE,QAAF,CAAW,qBAAX,CAAkC,GAAzF;;IAA4F,KAAK9E,CAAC,CAACoE,MAAP;MAAc,OAAOxD,CAAC,GAAE,YAAWF,CAAC,CAACoE,QAAF,CAAW,YAAX,CAAyB,iBAAtC,GAAwD,YAAWpE,CAAC,CAACoE,QAAF,CAAW,qBAAX,CAAkC,4BAA7G;;IAAyI,KAAK9E,CAAC,CAACqD,SAAP;MAAiB,OAAO,IAAG3C,CAAC,CAACoE,QAAF,CAAWlE,CAAC,GAAC,YAAD,GAAc,qBAA1B,CAAiD,GAA3D;;IAA8D,KAAKZ,CAAC,CAAC+E,IAAP;MAAY,OAAO,IAAGrE,CAAC,CAACoE,QAAF,CAAWlE,CAAC,GAAC,YAAD,GAAc,qBAA1B,CAAiD,GAA3D;;IAA8D,KAAKZ,CAAC,CAACsE,QAAP;MAAgB,OAAO,cAAa5D,CAAC,CAACoE,QAAF,CAAWlE,CAAC,GAAC,YAAD,GAAc,qBAA1B,CAAiD,GAArE;;IAAwE;MAAQ,OAAO,SAAQF,CAAC,CAACoE,QAAF,CAAW,qBAAX,CAAkC,GAAjD;EAAvjB;AAA4mB;;AAAA,SAASpC,CAAT,CAAW5C,CAAX,EAAaM,CAAb,EAAeE,CAAf,EAAiBE,CAAjB,EAAmB;EAAC,IAAIE,CAAC,GAACR,CAAC,CAACJ,CAAD,CAAD,GAAKgB,CAAC,CAACkE,UAAF,CAAalF,CAAb,CAAL,GAAqBgB,CAAC,CAACmE,OAAF,CAAUnF,CAAV,CAA3B;EAAwC,MAAMc,CAAC,GAAC,MAAIF,CAAC,CAAC+D,IAAN,IAAY,MAAI/D,CAAC,CAACgE,MAAlB,IAA0B,MAAIhE,CAAC,CAACiE,MAAhC,IAAwC,MAAIjE,CAAC,CAACkE,WAAtD;;EAAkE,QAAOtE,CAAC,EAAEkB,kBAAH,KAAwBd,CAAC,GAACI,CAAC,CAACoE,UAAF,CAAa;IAACC,GAAG,EAACzE,CAAC,CAACyE,GAAP;IAAWC,IAAI,EAAC1E,CAAC,CAAC0E,IAAlB;IAAuBC,KAAK,EAAC3E,CAAC,CAAC2E,KAA/B;IAAqCZ,IAAI,EAAC/D,CAAC,CAAC+D,IAA5C;IAAiDC,MAAM,EAAChE,CAAC,CAACgE,MAA1D;IAAiEC,MAAM,EAACjE,CAAC,CAACiE,MAA1E;IAAiFC,WAAW,EAAClE,CAAC,CAACkE;EAA/F,CAAb,EAAyH;IAACU,IAAI,EAAChF,CAAC,CAACkB;EAAR,CAAzH,CAA1B,GAAiLlB,CAAC,EAAEmB,mBAAH,KAAyBf,CAAC,GAACA,CAAC,CAAC6E,OAAF,CAAUjF,CAAC,CAACmB,mBAAZ,CAA3B,CAAjL,EAA8OrB,CAArP;IAAwP,KAAKJ,CAAC,CAAC6E,OAAP;IAAe,KAAK7E,CAAC,CAACuB,YAAP;IAAoB,KAAKvB,CAAC,CAACmE,sBAAP;MAA8B,OAAOvD,CAAC,GAAE,SAAQF,CAAC,CAACoE,QAAF,CAAW,YAAX,CAAyB,GAAnC,GAAuC,SAAQpE,CAAC,CAACoE,QAAF,CAAW,qBAAX,CAAkC,GAAzF;;IAA4F,KAAK9E,CAAC,CAACoE,MAAP;MAAc,OAAOxD,CAAC,GAAE,YAAWF,CAAC,CAACoE,QAAF,CAAW,YAAX,CAAyB,iBAAtC,GAAwD,YAAWpE,CAAC,CAACoE,QAAF,CAAW,qBAAX,CAAkC,4BAA7G;;IAAyI,KAAK9E,CAAC,CAACqD,SAAP;MAAiB,OAAO,IAAG3C,CAAC,CAACoE,QAAF,CAAWlE,CAAC,GAAC,YAAD,GAAc,qBAA1B,CAAiD,GAA3D;;IAA8D,KAAKZ,CAAC,CAAC+E,IAAP;MAAY,OAAO,IAAGrE,CAAC,CAACoE,QAAF,CAAWlE,CAAC,GAAC,YAAD,GAAc,qBAA1B,CAAiD,GAA3D;;IAA8D,KAAKZ,CAAC,CAACsE,QAAP;MAAgB,OAAO,cAAa5D,CAAC,CAACoE,QAAF,CAAWlE,CAAC,GAAC,YAAD,GAAc,qBAA1B,CAAiD,GAArE;;IAAwE;MAAQ,OAAO,SAAQF,CAAC,CAACoE,QAAF,CAAW,qBAAX,CAAkC,GAAjD;EAAryB;AAA01B;;AAAA,SAASvB,CAAT,CAAWzD,CAAX,EAAaI,CAAb,EAAe;EAAC,QAAOA,CAAP;IAAU,KAAKF,CAAC,CAAC6E,OAAP;IAAe,KAAK7E,CAAC,CAACuB,YAAP;IAAoB,KAAKvB,CAAC,CAACmE,sBAAP;IAA8B,KAAKnE,CAAC,CAACoE,MAAP;MAAc,OAAOtE,CAAC,GAAC,cAAD,GAAgB,mBAAxB;;IAA4C,KAAKE,CAAC,CAACqD,SAAP;MAAiB,OAAOvD,CAAC,GAAC,yBAAD,GAA2B,WAAnC;;IAA+C,KAAKE,CAAC,CAAC+E,IAAP;IAAY,KAAK/E,CAAC,CAACsE,QAAP;IAAgB;MAAQ,OAAOxE,CAAC,GAAC,cAAD,GAAgB,mBAAxB;EAAzO;AAAsR;;AAAA,SAAS0F,CAAT,CAAW1F,CAAX,EAAaE,CAAb,EAAeE,CAAC,GAAC,EAAjB,EAAoB;EAAC,MAAME,CAAC,GAAC,EAAR;EAAA,MAAWE,CAAC,GAAC,EAAb;EAAA,MAAgBE,CAAC,GAAC;IAACiF,yBAAyB,EAAC,SAA3B;IAAqCC,oBAAoB,EAAC,SAA1D;IAAoEC,mBAAmB,EAAC,QAAxF;IAAiGC,mBAAmB,EAAC,QAArH;IAA8HC,mBAAmB,EAAC,QAAlJ;IAA2JC,iBAAiB,EAAC,MAA7K;IAAoLC,gBAAgB,EAAC,SAArM;IAA+MC,iBAAiB,EAAC,MAAjO;IAAwOC,qBAAqB,EAAC,MAA9P;IAAqQC,GAAG,EAAC,SAAzQ;IAAmRC,IAAI,EAAC,SAAxR;IAAkS,iBAAgB,SAAlT;IAA4TC,OAAO,EAAC,SAApU;IAA8UC,MAAM,EAAC,QAArV;IAA8VC,MAAM,EAAC,QAArW;IAA8WC,IAAI,EAAC,MAAnX;IAA0XC,IAAI,EAAC,MAA/X;IAAsYC,QAAQ,EAAC,MAA/Y;IAAsZC,MAAM,EAAC;EAA7Z,CAAlB;;EAAyb,KAAI,MAAMhG,CAAV,IAAeV,CAAf,EAAiB;IAAC,MAAMF,CAAC,GAACY,CAAC,CAACmB,IAAF,GAAOrB,CAAC,CAACE,CAAC,CAACmB,IAAH,CAAR,GAAiB,KAAK,CAA9B;IAAgCzB,CAAC,CAACM,CAAC,CAACkD,IAAF,CAAOrB,WAAP,EAAD,CAAD,GAAwB,KAAK,CAAL,KAASzC,CAAT,GAAW,EAAX,GAAcA,CAAtC;EAAwC;;EAAA,KAAI,MAAMY,CAAV,IAAeR,CAAf,EAAiB;IAAC,MAAMJ,CAAC,GAACU,CAAC,CAACN,CAAC,CAACQ,CAAD,CAAF,CAAT;IAAgBJ,CAAC,CAACI,CAAC,CAAC6B,WAAF,EAAD,CAAD,GAAmB,KAAK,CAAL,KAASzC,CAAT,GAAW,EAAX,GAAcA,CAAjC;EAAmC;;EAAA,QAAO6G,CAAC,CAACvG,CAAD,EAAGN,CAAC,CAACmB,SAAL,EAAenB,CAAC,CAACoB,UAAjB,EAA4BZ,CAA5B,CAAR;IAAwC,KAAI,QAAJ;MAAa,OAAM,QAAN;;IAAe,KAAI,SAAJ;MAAc,OAAM,SAAN;;IAAgB,KAAI,MAAJ;MAAW,OAAM,MAAN;;IAAa,KAAI,QAAJ;MAAa,OAAM,QAAN;;IAAe,KAAI,WAAJ;IAAgB,KAAI,MAAJ;MAAW,OAAM,MAAN;EAAjL;;EAA8L,OAAM,EAAN;AAAS;;AAAA,SAASqG,CAAT,CAAW7G,CAAX,EAAaE,CAAb,EAAeM,CAAf,EAAiBM,CAAjB,EAAmB;EAAC,IAAIE,CAAJ;;EAAM,QAAOd,CAAC,CAAC6B,IAAT;IAAe,KAAI,UAAJ;MAAe,OAAM,SAAN;;IAAgB,KAAI,iBAAJ;MAAsB;QAAC,MAAM3B,CAAC,GAAC,EAAR;;QAAW,IAAG,aAAWF,CAAC,CAACkC,MAAhB,EAAuB;UAAC,KAAI,IAAI9B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACJ,CAAC,CAACoC,OAAF,CAAUC,MAAxB,EAA+BjC,CAAC,EAAhC,EAAmCF,CAAC,CAAC2C,IAAF,CAAO8D,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAACoC,OAAF,CAAUhC,CAAV,EAAa2B,KAAhB,EAAsBzB,CAAtB,EAAwBM,CAAxB,CAAR;;UAAoC,SAAOZ,CAAC,CAACsC,IAAT,IAAepC,CAAC,CAAC2C,IAAF,CAAO8D,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAACsC,IAAL,EAAUhC,CAAV,EAAYM,CAAZ,CAAR,CAAf;QAAuC,CAAtI,MAA0I;UAAC,KAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACJ,CAAC,CAACoC,OAAF,CAAUC,MAAxB,EAA+BjC,CAAC,EAAhC,EAAmCF,CAAC,CAAC2C,IAAF,CAAO8D,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAACsC,IAAL,EAAUhC,CAAV,EAAYM,CAAZ,CAAR;;UAAwB,SAAOZ,CAAC,CAACsC,IAAT,IAAepC,CAAC,CAAC2C,IAAF,CAAO8D,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAACsC,IAAL,EAAUhC,CAAV,EAAYM,CAAZ,CAAR,CAAf;QAAuC;;QAAA,OAAOgG,CAAC,CAAC1G,CAAD,CAAR;MAAY;;IAAA,KAAI,WAAJ;MAAgB;QAAC,MAAMJ,CAAC,GAACc,CAAC,CAACZ,CAAC,CAAC+B,KAAF,CAAQQ,WAAR,EAAD,CAAT;;QAAiC,IAAG,KAAK,CAAL,KAASzC,CAAT,IAAYQ,CAAf,EAAiB;UAAC,MAAMR,CAAC,GAACQ,CAAC,CAACN,CAAC,CAAC+B,KAAF,CAAQQ,WAAR,EAAD,CAAT;UAAiC,IAAG,KAAK,CAAL,KAASzC,CAAZ,EAAc,OAAM,EAAN;UAAS,IAAG,SAAOA,CAAV,EAAY,OAAM,EAAN;UAAS,IAAG,YAAU,OAAOA,CAAjB,IAAoBA,CAAC,YAAY+G,MAApC,EAA2C,OAAM,QAAN;UAAe,IAAG,aAAW,OAAO/G,CAArB,EAAuB,OAAM,SAAN;UAAgB,IAAGI,CAAC,CAACJ,CAAD,CAAJ,EAAQ,OAAM,MAAN;UAAa,IAAGM,CAAC,CAACN,CAAD,CAAJ,EAAQ,OAAM,MAAN;UAAa,IAAG,YAAU,OAAOA,CAApB,EAAsB,OAAOA,CAAC,GAAC,CAAF,IAAK,CAAL,GAAO,SAAP,GAAiB,QAAxB;QAAiC;;QAAA,OAAO,KAAK,CAAL,KAASA,CAAT,GAAW,EAAX,GAAcA,CAArB;MAAuB;;IAAA,KAAI,iBAAJ;MAAsB;QAAC,MAAMI,CAAC,GAAC,EAAR;;QAAW,KAAI,MAAME,CAAV,IAAeJ,CAAC,CAAC+B,KAAjB,EAAuB7B,CAAC,CAAC2C,IAAF,CAAO8D,CAAC,CAAC7G,CAAD,EAAGM,CAAH,EAAKE,CAAL,EAAOM,CAAP,CAAR;;QAAmB,OAAOV,CAAP;MAAS;;IAAA,KAAI,kBAAJ;MAAuB,OAAM,SAAN;;IAAgB,KAAI,mBAAJ;MAAwB,QAAOF,CAAC,CAAC+C,QAAT;QAAmB,KAAI,KAAJ;QAAU,KAAI,IAAJ;QAAS,KAAI,IAAJ;QAAS,KAAI,QAAJ;QAAa,KAAI,SAAJ;QAAc,KAAI,YAAJ;QAAiB,KAAI,MAAJ;QAAW,KAAI,UAAJ;QAAe,KAAI,IAAJ;QAAS,KAAI,GAAJ;QAAQ,KAAI,GAAJ;QAAQ,KAAI,IAAJ;QAAS,KAAI,IAAJ;QAAS,KAAI,GAAJ;UAAQ,OAAM,SAAN;;QAAgB,KAAI,IAAJ;QAAS,KAAI,OAAJ;UAAY,IAAG,WAAS/C,CAAC,CAACiD,KAAF,CAAQpB,IAApB,EAAyB,MAAM,IAAIrB,CAAJ,CAAME,CAAC,CAACwC,gBAAR,CAAN;UAAgC,OAAM,SAAN;;QAAgB,KAAI,GAAJ;QAAQ,KAAI,GAAJ;QAAQ,KAAI,GAAJ;QAAQ,KAAI,GAAJ;UAAQ,OAAO0D,CAAC,CAAC,CAACD,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAACgD,IAAL,EAAU1C,CAAV,EAAYM,CAAZ,CAAF,EAAiB+F,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAACiD,KAAL,EAAW3C,CAAX,EAAaM,CAAb,CAAlB,CAAD,CAAR;;QAA6C,KAAI,IAAJ;UAAS,OAAM,QAAN;;QAAe;UAAQ,MAAM,IAAIJ,CAAJ,CAAME,CAAC,CAAC4C,mBAAR,EAA4B;YAACP,QAAQ,EAAC/C,CAAC,CAAC+C;UAAZ,CAA5B,CAAN;MAAnY;;IAA4b,KAAI,MAAJ;MAAW,OAAM,EAAN;;IAAS,KAAI,SAAJ;MAAc,OAAM,SAAN;;IAAgB,KAAI,QAAJ;MAAa,OAAM,QAAN;;IAAe,KAAI,QAAJ;MAAa,OAAO,SAAO/C,CAAC,CAAC+B,KAAT,GAAe,EAAf,GAAkB/B,CAAC,CAAC+B,KAAF,GAAQ,CAAR,IAAW,CAAX,GAAa,SAAb,GAAuB,QAAhD;;IAAyD,KAAI,MAAJ;IAAW,KAAI,WAAJ;IAAgB,KAAI,cAAJ;MAAmB,OAAM,MAAN;;IAAa,KAAI,kBAAJ;MAAuB;QAAC,MAAM7B,CAAC,GAACJ,CAAC,CAACE,CAAC,CAACyD,MAAF,CAASlB,WAAT,EAAD,CAAT;QAAkC,OAAO,KAAK,CAAL,KAASrC,CAAT,GAAW,EAAX,GAAcA,CAArB;MAAuB;;IAAA,KAAI,UAAJ;MAAe,QAAOF,CAAC,CAAC4D,IAAF,CAAOrB,WAAP,EAAP;QAA6B,KAAI,MAAJ;UAAW,QAAOvC,CAAC,CAAC0D,IAAF,EAAQ3B,KAAR,CAAc,CAAd,GAAkBA,KAAlB,CAAwBF,IAAxB,IAA8B,EAArC;YAAyC,KAAI,SAAJ;YAAc,KAAI,UAAJ;cAAe,OAAM,SAAN;;YAAgB,KAAI,MAAJ;YAAW,KAAI,OAAJ;cAAY,OAAM,QAAN;;YAAe,KAAI,MAAJ;YAAW,KAAI,WAAJ;cAAgB,OAAM,MAAN;;YAAa,KAAI,SAAJ;cAAc,OAAM,QAAN;;YAAe;cAAQ,OAAM,EAAN;UAAzM;;QAAkN,KAAI,UAAJ;QAAe,KAAI,SAAJ;QAAc,KAAI,aAAJ;QAAkB,KAAI,KAAJ;UAAU,OAAM,SAAN;;QAAgB,KAAI,OAAJ;UAAY,IAAGf,CAAC,GAAC6F,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAAC0D,IAAL,EAAUpD,CAAV,EAAYM,CAAZ,CAAH,EAAkBE,CAAC,YAAY8B,KAAlC,EAAwC;YAAC,IAAG9B,CAAC,CAACuB,MAAF,IAAU,CAAb,EAAe,OAAM,QAAN;YAAevB,CAAC,GAACA,CAAC,CAAC,CAAD,CAAH;UAAO;;UAAA,OAAOA,CAAP;;QAAS,KAAI,MAAJ;UAAW,OAAM,SAAN;;QAAgB,KAAI,SAAJ;QAAc,KAAI,OAAJ;QAAY,KAAI,KAAJ;UAAU,OAAOA,CAAC,GAAC6F,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAAC0D,IAAL,EAAUpD,CAAV,EAAYM,CAAZ,CAAH,EAAkBE,CAAC,YAAY8B,KAAb,KAAqB9B,CAAC,GAAC8F,CAAC,CAAC9F,CAAD,CAAxB,CAAlB,EAA+C,cAAYA,CAAZ,IAAe,aAAWA,CAA1B,GAA4BA,CAA5B,GAA8B,QAApF;;QAA6F,KAAI,MAAJ;QAAW,KAAI,QAAJ;QAAa,KAAI,KAAJ;QAAU,KAAI,OAAJ;QAAY,KAAI,KAAJ;QAAU,KAAI,KAAJ;QAAU,KAAI,KAAJ;QAAU,KAAI,MAAJ;QAAW,KAAI,MAAJ;QAAW,KAAI,MAAJ;QAAW,KAAI,MAAJ;QAAW,KAAI,MAAJ;QAAW,KAAI,MAAJ;QAAW,KAAI,OAAJ;UAAY,OAAM,QAAN;;QAAe,KAAI,WAAJ;QAAgB,KAAI,MAAJ;QAAW,KAAI,QAAJ;QAAa,KAAI,OAAJ;QAAY,KAAI,OAAJ;UAAY,OAAM,QAAN;;QAAe,KAAI,UAAJ;UAAe,OAAM,QAAN;;QAAe,KAAI,QAAJ;QAAa,KAAI,UAAJ;UAAe,OAAOA,CAAC,GAAC6F,CAAC,CAAC7G,CAAD,EAAGE,CAAC,CAAC0D,IAAL,EAAUpD,CAAV,EAAYM,CAAZ,CAAH,EAAkBE,CAAC,YAAY8B,KAAb,GAAmB9B,CAAC,CAACuB,MAAF,GAAS,CAAT,GAAWvB,CAAC,CAAC,CAAD,CAAZ,GAAgB,EAAnC,GAAsCA,CAA/D;MAAp3B;;MAAq7B,OAAM,EAAN;EAAv+E;;EAAg/E,MAAM,IAAIN,CAAJ,CAAME,CAAC,CAACmD,iBAAR,EAA0B;IAACC,IAAI,EAAC9D,CAAC,CAAC6B;EAAR,CAA1B,CAAN;AAA+C;;AAAA,MAAMiF,CAAC,GAAC;EAACC,OAAO,EAAC,CAAT;EAAWL,MAAM,EAAC,CAAlB;EAAoBN,OAAO,EAAC,CAA5B;EAA8BE,MAAM,EAAC,CAArC;EAAuCC,IAAI,EAAC;AAA5C,CAAR;;AAAuD,SAASK,CAAT,CAAW9G,CAAX,EAAa;EAAC,IAAGA,CAAH,EAAK;IAAC,IAAIE,CAAC,GAAC,EAAN;;IAAS,KAAI,MAAME,CAAV,IAAeJ,CAAf,EAAiB,OAAKI,CAAL,KAASF,CAAC,GAAC,OAAKA,CAAL,IAAQ8G,CAAC,CAAC9G,CAAD,CAAD,GAAK8G,CAAC,CAAC5G,CAAD,CAAd,GAAkBA,CAAlB,GAAoBF,CAA/B;;IAAkC,OAAOA,CAAP;EAAS;;EAAA,OAAM,EAAN;AAAS;;AAAA,SAASgH,CAAT,CAAWlH,CAAX,EAAaE,CAAb,EAAe;EAAC,OAAOiH,CAAC,CAACnH,CAAC,CAACmB,SAAH,EAAajB,CAAb,CAAR;AAAwB;;AAAA,SAASkH,CAAT,CAAWpH,CAAX,EAAa;EAAC,OAAM,uBAAqBA,CAAC,EAAEmB,SAAH,CAAaY,IAAxC;AAA6C;;AAAA,SAASoF,CAAT,CAAWnH,CAAX,EAAaE,CAAb,EAAe;EAAC,IAAG,QAAMF,CAAT,EAAW,OAAM,CAAC,CAAP;;EAAS,QAAOA,CAAC,CAAC+B,IAAT;IAAe,KAAI,aAAJ;MAAkB,OAAOoF,CAAC,CAACnH,CAAC,CAACqC,OAAH,EAAWnC,CAAX,CAAD,IAAgBiH,CAAC,CAACnH,CAAC,CAACiC,KAAH,EAAS/B,CAAT,CAAxB;;IAAoC,KAAI,iBAAJ;MAAsB,KAAI,MAAME,CAAV,IAAeJ,CAAC,CAACsC,OAAjB,EAAyB,IAAG6E,CAAC,CAAC/G,CAAD,EAAGF,CAAH,CAAJ,EAAU,OAAM,CAAC,CAAP;;MAAS,OAAM,EAAE,aAAWF,CAAC,CAACoC,MAAb,IAAqB,CAAC+E,CAAC,CAACnH,CAAC,CAACqC,OAAH,EAAWnC,CAAX,CAAzB,KAAyC,EAAE,SAAOF,CAAC,CAACwC,IAAT,IAAe,CAAC2E,CAAC,CAACnH,CAAC,CAACwC,IAAH,EAAQtC,CAAR,CAAnB,CAA/C;;IAA8E,KAAI,WAAJ;IAAgB,KAAI,MAAJ;IAAW,KAAI,SAAJ;IAAc,KAAI,MAAJ;IAAW,KAAI,WAAJ;IAAgB,KAAI,QAAJ;IAAa,KAAI,QAAJ;MAAa,OAAM,CAAC,CAAP;;IAAS,KAAI,iBAAJ;MAAsB,KAAI,MAAME,CAAV,IAAeJ,CAAC,CAACiC,KAAjB,EAAuB,IAAGkF,CAAC,CAAC/G,CAAD,EAAGF,CAAH,CAAJ,EAAU,OAAM,CAAC,CAAP;;MAAS,OAAM,CAAC,CAAP;;IAAS,KAAI,kBAAJ;MAAuB,OAAOiH,CAAC,CAACnH,CAAC,CAACgD,IAAH,EAAQ9C,CAAR,CAAR;;IAAmB,KAAI,mBAAJ;MAAwB,OAAOiH,CAAC,CAACnH,CAAC,CAACkD,IAAH,EAAQhD,CAAR,CAAD,IAAaiH,CAAC,CAACnH,CAAC,CAACmD,KAAH,EAASjD,CAAT,CAArB;;IAAiC,KAAI,kBAAJ;MAAuB,OAAOA,CAAC,CAACuC,WAAF,OAAkBzC,CAAC,CAAC2D,MAAF,CAASlB,WAAT,EAAzB;;IAAgD,KAAI,UAAJ;MAAe,OAAO0E,CAAC,CAACnH,CAAC,CAAC4D,IAAH,EAAQ1D,CAAR,CAAR;EAA9jB;;EAAilB,OAAM,CAAC,CAAP;AAAS;;AAAA,SAASmH,CAAT,CAAWrH,CAAX,EAAa;EAAC,IAAIE,CAAC,GAAC,EAAN;EAAS,OAAOA,CAAC,IAAEF,CAAC,CAACsH,MAAF,CAASlD,WAAT,EAAH,EAA0BlE,CAAjC;AAAmC;;AAAA,SAAS8B,CAAT,CAAWhC,CAAX,EAAaE,CAAb,EAAeE,CAAf,EAAiB;EAAC,IAAIE,CAAC,GAAC,EAAN;EAAS,OAAOA,CAAC,GAAC,sBAAoBJ,CAAC,CAAC6B,IAAtB,GAA2BsF,CAAC,CAACnH,CAAD,CAA5B,GAAgCmH,CAAC,CAACnH,CAAC,CAACqH,KAAH,CAAD,GAAW,MAAX,GAAkBF,CAAC,CAACnH,CAAC,CAACsH,GAAH,CAArD,EAA6D,cAAYpH,CAAZ,GAAc,GAAd,GAAkBJ,CAAlB,GAAoB,GAApB,GAAwBM,CAA5F;AAA8F;;AAAA,SAAOuC,CAAC,IAAI4E,qBAAZ,EAAkCpG,CAAC,IAAIqG,kBAAvC,EAA0DpG,CAAC,IAAIqG,yBAA/D,EAAyF7F,CAAC,IAAI8F,OAA9F,EAAsG5F,CAAC,IAAI6F,oBAA3G,EAAgIT,CAAC,IAAIU,aAArI,EAAmJlF,CAAC,IAAImF,cAAxJ,EAAuKtE,CAAC,IAAIuE,SAA5K,EAAsLtC,CAAC,IAAIuC,WAA3L,EAAuMpG,CAAC,IAAIqG,uBAA5M,EAAoOhB,CAAC,IAAIiB,YAAzO,EAAsPlH,CAAC,IAAImH,aAA3P,EAAyQxG,CAAC,IAAIyG,qBAA9Q,EAAoSxE,CAAC,IAAIyE,mCAAzS"},"metadata":{},"sourceType":"module"}