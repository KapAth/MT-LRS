{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../request.js\";\nimport r from \"../../core/Error.js\";\nimport o from \"../../core/Logger.js\";\nimport { isSome as i } from \"../../core/maybe.js\";\nimport { debounce as s } from \"../../core/promiseUtils.js\";\nimport { urlToObject as a } from \"../../core/urlUtils.js\";\nimport { property as n } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { reader as l } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as p } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as c } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { updateOrigins as d } from \"../../core/accessorSupport/originUtils.js\";\nimport u from \"../../geometry/Extent.js\";\nimport m from \"../../geometry/HeightModelInfo.js\";\nimport y from \"../../geometry/SpatialReference.js\";\nimport { titleFromUrlAndName as h, parse as f, cleanTitle as v, sanitizeUrlWithLayerId as S, writeUrlWithLayerId as g } from \"../support/arcgisLayerUrl.js\";\nimport { id as w, url as I } from \"../support/commonProperties.js\";\nimport { fetchIndexInfo as x } from \"../support/I3SIndexInfo.js\";\nimport { getLoader as b } from \"../support/schemaValidatorLoader.js\";\nimport _ from \"../../portal/Portal.js\";\nimport j from \"../../portal/PortalItem.js\";\nimport { saveResources as R } from \"../../webdoc/support/saveUtils.js\";\n\nconst A = \"esri.layers.mixins.SceneService\",\n      N = o.getLogger(A),\n      E = o => {\n  let E = class extends o {\n    constructor() {\n      var _this;\n\n      (super(...arguments), _this = this), this.spatialReference = null, this.fullExtent = null, this.heightModelInfo = null, this.minScale = 0, this.maxScale = 0, this.version = {\n        major: Number.NaN,\n        minor: Number.NaN,\n        versionString: \"\"\n      }, this.copyright = null, this.sublayerTitleMode = \"item-title\", this.title = null, this.layerId = null, this.indexInfo = null, this._debouncedSaveOperations = s( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (e, t, r) {\n          switch (e) {\n            case L.SAVE:\n              return _this._save(t);\n\n            case L.SAVE_AS:\n              return _this._saveAs(r, t);\n          }\n        });\n\n        return function (_x, _x2, _x3) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n\n    readSpatialReference(e, t) {\n      return this._readSpatialReference(t);\n    }\n\n    _readSpatialReference(e) {\n      if (null != e.spatialReference) return y.fromJSON(e.spatialReference);\n      {\n        const t = e.store,\n              r = t.indexCRS || t.geographicCRS,\n              o = r && parseInt(r.substring(r.lastIndexOf(\"/\") + 1, r.length), 10);\n        return null != o ? new y(o) : null;\n      }\n    }\n\n    readFullExtent(e, t, r) {\n      if (null != e && \"object\" == typeof e) {\n        const o = null == e.spatialReference ? { ...e,\n          spatialReference: this._readSpatialReference(t)\n        } : e;\n        return u.fromJSON(o, r);\n      }\n\n      const o = t.store,\n            i = this._readSpatialReference(t);\n\n      return null == i || null == o || null == o.extent || !Array.isArray(o.extent) || o.extent.some(e => e < U) ? null : new u({\n        xmin: o.extent[0],\n        ymin: o.extent[1],\n        xmax: o.extent[2],\n        ymax: o.extent[3],\n        spatialReference: i\n      });\n    }\n\n    parseVersionString(e) {\n      const t = {\n        major: Number.NaN,\n        minor: Number.NaN,\n        versionString: e\n      },\n            r = e.split(\".\");\n      return r.length >= 2 && (t.major = parseInt(r[0], 10), t.minor = parseInt(r[1], 10)), t;\n    }\n\n    readVersion(e, t) {\n      const r = t.store,\n            o = null != r.version ? r.version.toString() : \"\";\n      return this.parseVersionString(o);\n    }\n\n    readTitlePortalItem(e) {\n      return \"item-title\" !== this.sublayerTitleMode ? void 0 : e;\n    }\n\n    readTitleService(e, t) {\n      const r = this.portalItem && this.portalItem.title;\n      if (\"item-title\" === this.sublayerTitleMode) return h(this.url, t.name);\n      let o = t.name;\n\n      if (!o && this.url) {\n        const e = f(this.url);\n        i(e) && (o = e.title);\n      }\n\n      return \"item-title-and-service-name\" === this.sublayerTitleMode && r && (o = r + \" - \" + o), v(o);\n    }\n\n    set url(e) {\n      const t = S({\n        layer: this,\n        url: e,\n        nonStandardUrlAllowed: !1,\n        logger: N\n      });\n      this._set(\"url\", t.url), null != t.layerId && this._set(\"layerId\", t.layerId);\n    }\n\n    writeUrl(e, t, r, o) {\n      g(this, e, \"layers\", t, o);\n    }\n\n    get parsedUrl() {\n      const e = this._get(\"url\"),\n            t = a(e);\n\n      return null != this.layerId && (t.path = `${t.path}/layers/${this.layerId}`), t;\n    }\n\n    _fetchIndexAndUpdateExtent(e, t) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        _this2.indexInfo = x(_this2.parsedUrl.path, _this2.rootNode, e, _this2.apiKey, N, t), null == _this2.fullExtent || _this2.fullExtent.hasZ || _this2._updateExtent(yield _this2.indexInfo);\n      })();\n    }\n\n    _updateExtent(e) {\n      if (\"page\" === e?.type) {\n        const t = e.rootIndex % e.pageSize,\n              o = e.rootPage?.nodes?.[t];\n        if (null == o || null == o.obb || null == o.obb.center || null == o.obb.halfSize) throw new r(\"sceneservice:invalid-node-page\", \"Invalid node page.\");\n        if (o.obb.center[0] < U || null == this.fullExtent || this.fullExtent.hasZ) return;\n        const i = o.obb.halfSize,\n              s = o.obb.center[2],\n              a = Math.sqrt(i[0] * i[0] + i[1] * i[1] + i[2] * i[2]);\n        this.fullExtent.zmin = s - a, this.fullExtent.zmax = s + a;\n      } else if (\"node\" === e?.type) {\n        const t = e.rootNode?.mbs;\n        if (!Array.isArray(t) || 4 !== t.length || t[0] < U) return;\n        const r = t[2],\n              o = t[3],\n              {\n          fullExtent: i\n        } = this;\n        i && (i.zmin = r - o, i.zmax = r + o);\n      }\n    }\n\n    _fetchService(e) {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        if (null == _this3.url) throw new r(\"sceneservice:url-not-set\", \"Scene service can not be loaded without valid portal item or url\");\n\n        if (null == _this3.layerId && /SceneServer\\/*$/i.test(_this3.url)) {\n          const t = yield _this3._fetchFirstLayerId(e);\n          null != t && (_this3.layerId = t);\n        }\n\n        return _this3._fetchServiceLayer(e);\n      })();\n    }\n\n    _fetchFirstLayerId(e) {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        const r = yield t(_this4.url, {\n          query: {\n            f: \"json\",\n            token: _this4.apiKey\n          },\n          responseType: \"json\",\n          signal: e\n        });\n        if (r.data && Array.isArray(r.data.layers) && r.data.layers.length > 0) return r.data.layers[0].id;\n      })();\n    }\n\n    _fetchServiceLayer(e) {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        const r = yield t(_this5.parsedUrl?.path ?? \"\", {\n          query: {\n            f: \"json\",\n            token: _this5.apiKey\n          },\n          responseType: \"json\",\n          signal: e\n        });\n        r.ssl && (_this5.url = _this5.url.replace(/^http:/i, \"https:\"));\n        let o = !1;\n        if (r.data.layerType && \"Voxel\" === r.data.layerType && (o = !0), o) return _this5._fetchVoxelServiceLayer();\n        const i = r.data;\n        _this5.read(i, _this5._getServiceContext()), _this5.validateLayer(i);\n      })();\n    }\n\n    _fetchVoxelServiceLayer(e) {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* () {\n        const r = (yield t(_this6.parsedUrl?.path + \"/layer\", {\n          query: {\n            f: \"json\",\n            token: _this6.apiKey\n          },\n          responseType: \"json\",\n          signal: e\n        })).data;\n        _this6.read(r, _this6._getServiceContext()), _this6.validateLayer(r);\n      })();\n    }\n\n    _getServiceContext() {\n      return {\n        origin: \"service\",\n        portalItem: this.portalItem,\n        portal: this.portalItem?.portal,\n        url: this.parsedUrl\n      };\n    }\n\n    _ensureLoadBeforeSave() {\n      var _this7 = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this7.load(), \"beforeSave\" in _this7 && \"function\" == typeof _this7.beforeSave && (yield _this7.beforeSave());\n      })();\n    }\n\n    validateLayer(e) {}\n\n    _updateTypeKeywords(e, t, r) {\n      e.typeKeywords || (e.typeKeywords = []);\n      const o = t.getTypeKeywords();\n\n      for (const i of o) e.typeKeywords.push(i);\n\n      e.typeKeywords && (e.typeKeywords = e.typeKeywords.filter((e, t, r) => r.indexOf(e) === t), r === T.newItem && (e.typeKeywords = e.typeKeywords.filter(e => \"Hosted Service\" !== e)));\n    }\n\n    _saveAs(e, t) {\n      var _this8 = this;\n\n      return _asyncToGenerator(function* () {\n        const o = { ...K,\n          ...t\n        };\n        let i = j.from(e);\n        i || (N.error(\"_saveAs(): requires a portal item parameter\"), yield Promise.reject(new r(\"sceneservice:portal-item-required\", \"_saveAs() requires a portal item to save to\"))), i.id && (i = i.clone(), i.id = null);\n\n        const s = i.portal || _.getDefault();\n\n        yield _this8._ensureLoadBeforeSave(), i.type = O, i.portal = s;\n        const a = {\n          origin: \"portal-item\",\n          url: null,\n          messages: [],\n          portal: s,\n          portalItem: i,\n          writtenProperties: [],\n          blockedRelativeUrls: [],\n          resources: {\n            toAdd: [],\n            toUpdate: [],\n            toKeep: [],\n            pendingOperations: []\n          }\n        },\n              n = {\n          layers: [_this8.write({}, a)]\n        };\n        return yield Promise.all(a.resources.pendingOperations ?? []), yield _this8._validateAgainstJSONSchema(n, a, o), i.url = _this8.url, i.title || (i.title = _this8.title), _this8._updateTypeKeywords(i, o, T.newItem), yield s.signIn(), yield s.user?.addItem({\n          item: i,\n          folder: o && o.folder,\n          data: n\n        }), yield R(_this8.resourceReferences, a, null), _this8.portalItem = i, d(a), a.portalItem = i, i;\n      })();\n    }\n\n    _save(e) {\n      var _this9 = this;\n\n      return _asyncToGenerator(function* () {\n        const t = { ...K,\n          ...e\n        };\n        if (!_this9.portalItem) throw N.error(\"_save(): requires the .portalItem property to be set\"), new r(\"sceneservice:portal-item-not-set\", \"Portal item to save to has not been set on this SceneService\");\n        if (_this9.portalItem.type !== O) throw N.error(\"_save(): Non-matching portal item type. Got \" + _this9.portalItem.type + \", expected \" + O), new r(\"sceneservice:portal-item-wrong-type\", `Portal item needs to have type \"${O}\"`);\n        yield _this9._ensureLoadBeforeSave();\n        const o = {\n          origin: \"portal-item\",\n          url: _this9.portalItem.itemUrl && a(_this9.portalItem.itemUrl),\n          messages: [],\n          portal: _this9.portalItem.portal || _.getDefault(),\n          portalItem: _this9.portalItem,\n          writtenProperties: [],\n          blockedRelativeUrls: [],\n          resources: {\n            toAdd: [],\n            toUpdate: [],\n            toKeep: [],\n            pendingOperations: []\n          }\n        },\n              i = {\n          layers: [_this9.write({}, o)]\n        };\n        return yield Promise.all(o.resources.pendingOperations ?? []), yield _this9._validateAgainstJSONSchema(i, o, t), _this9.portalItem.url = _this9.url, _this9.portalItem.title || (_this9.portalItem.title = _this9.title), _this9._updateTypeKeywords(_this9.portalItem, t, T.existingItem), yield _this9.portalItem.update({\n          data: i\n        }), yield R(_this9.resourceReferences, o, null), d(o), _this9.portalItem;\n      })();\n    }\n\n    _validateAgainstJSONSchema(e, t, o) {\n      return _asyncToGenerator(function* () {\n        let i = t.messages?.filter(e => \"error\" === e.type).map(e => new r(e.name, e.message, e.details)) ?? [];\n        o?.validationOptions?.ignoreUnsupported && (i = i.filter(e => \"layer:unsupported\" !== e.name && \"symbol:unsupported\" !== e.name && \"symbol-layer:unsupported\" !== e.name && \"property:unsupported\" !== e.name && \"url:unsupported\" !== e.name && \"scenemodification:unsupported\" !== e.name));\n        const s = o?.validationOptions,\n              a = s?.enabled,\n              n = b();\n\n        if (a && n) {\n          const t = (yield n()).validate(e, o.portalItemLayerType);\n\n          if (t.length > 0) {\n            const e = `Layer item did not validate:\\n${t.join(\"\\n\")}`;\n\n            if (N.error(`_validateAgainstJSONSchema(): ${e}`), \"throw\" === s.failPolicy) {\n              const e = t.map(e => new r(\"sceneservice:schema-validation\", e)).concat(i);\n              throw new r(\"sceneservice-validate:error\", \"Failed to save layer item due to schema validation, see `details.errors`.\", {\n                combined: e\n              });\n            }\n          }\n        }\n\n        if (i.length > 0) throw new r(\"sceneservice:save\", \"Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information\", {\n          errors: i\n        });\n      })();\n    }\n\n  };\n  return e([n(w)], E.prototype, \"id\", void 0), e([n({\n    type: y\n  })], E.prototype, \"spatialReference\", void 0), e([l(\"spatialReference\", [\"spatialReference\", \"store.indexCRS\", \"store.geographicCRS\"])], E.prototype, \"readSpatialReference\", null), e([n({\n    type: u\n  })], E.prototype, \"fullExtent\", void 0), e([l(\"fullExtent\", [\"fullExtent\", \"store.extent\", \"spatialReference\", \"store.indexCRS\", \"store.geographicCRS\"])], E.prototype, \"readFullExtent\", null), e([n({\n    readOnly: !0,\n    type: m\n  })], E.prototype, \"heightModelInfo\", void 0), e([n({\n    type: Number,\n    json: {\n      name: \"layerDefinition.minScale\",\n      write: !0,\n      origins: {\n        service: {\n          read: {\n            source: \"minScale\"\n          },\n          write: !1\n        }\n      }\n    }\n  })], E.prototype, \"minScale\", void 0), e([n({\n    type: Number,\n    json: {\n      name: \"layerDefinition.maxScale\",\n      write: !0,\n      origins: {\n        service: {\n          read: {\n            source: \"maxScale\"\n          },\n          write: !1\n        }\n      }\n    }\n  })], E.prototype, \"maxScale\", void 0), e([n({\n    readOnly: !0\n  })], E.prototype, \"version\", void 0), e([l(\"version\", [\"store.version\"])], E.prototype, \"readVersion\", null), e([n({\n    type: String,\n    json: {\n      read: {\n        source: \"copyrightText\"\n      }\n    }\n  })], E.prototype, \"copyright\", void 0), e([n({\n    type: String,\n    json: {\n      read: !1\n    }\n  })], E.prototype, \"sublayerTitleMode\", void 0), e([n({\n    type: String\n  })], E.prototype, \"title\", void 0), e([l(\"portal-item\", \"title\")], E.prototype, \"readTitlePortalItem\", null), e([l(\"service\", \"title\", [\"name\"])], E.prototype, \"readTitleService\", null), e([n({\n    type: Number,\n    json: {\n      origins: {\n        service: {\n          read: {\n            source: \"id\"\n          }\n        },\n        \"portal-item\": {\n          write: {\n            target: \"id\",\n            isRequired: !0,\n            ignoreOrigin: !0\n          },\n          read: !1\n        }\n      }\n    }\n  })], E.prototype, \"layerId\", void 0), e([n(I)], E.prototype, \"url\", null), e([c(\"url\")], E.prototype, \"writeUrl\", null), e([n()], E.prototype, \"parsedUrl\", null), e([n({\n    readOnly: !0\n  })], E.prototype, \"store\", void 0), e([n({\n    type: String,\n    readOnly: !0,\n    json: {\n      read: {\n        source: \"store.rootNode\"\n      }\n    }\n  })], E.prototype, \"rootNode\", void 0), E = e([p(A)], E), E;\n},\n      U = -1e38;\n\nvar T;\n!function (e) {\n  e[e.existingItem = 0] = \"existingItem\", e[e.newItem = 1] = \"newItem\";\n}(T || (T = {}));\nconst O = \"Scene Service\",\n      K = {\n  getTypeKeywords: () => [],\n  portalItemLayerType: \"unknown\",\n  validationOptions: {\n    enabled: !0,\n    ignoreUnsupported: !1,\n    failPolicy: \"throw\"\n  }\n};\nvar L;\n!function (e) {\n  e[e.SAVE = 0] = \"SAVE\", e[e.SAVE_AS = 1] = \"SAVE_AS\";\n}(L || (L = {}));\nexport { O as SCENE_SERVICE_ITEM_TYPE, L as SaveOperationType, E as SceneService };","map":{"version":3,"names":["_","e","t","r","o","isSome","i","debounce","s","urlToObject","a","property","n","reader","l","subclass","p","writer","c","updateOrigins","d","u","m","y","titleFromUrlAndName","h","parse","f","cleanTitle","v","sanitizeUrlWithLayerId","S","writeUrlWithLayerId","g","id","w","url","I","fetchIndexInfo","x","getLoader","b","j","saveResources","R","A","N","getLogger","E","constructor","arguments","spatialReference","fullExtent","heightModelInfo","minScale","maxScale","version","major","Number","NaN","minor","versionString","copyright","sublayerTitleMode","title","layerId","indexInfo","_debouncedSaveOperations","L","SAVE","_save","SAVE_AS","_saveAs","readSpatialReference","_readSpatialReference","fromJSON","store","indexCRS","geographicCRS","parseInt","substring","lastIndexOf","length","readFullExtent","extent","Array","isArray","some","U","xmin","ymin","xmax","ymax","parseVersionString","split","readVersion","toString","readTitlePortalItem","readTitleService","portalItem","name","layer","nonStandardUrlAllowed","logger","_set","writeUrl","parsedUrl","_get","path","_fetchIndexAndUpdateExtent","rootNode","apiKey","hasZ","_updateExtent","type","rootIndex","pageSize","rootPage","nodes","obb","center","halfSize","Math","sqrt","zmin","zmax","mbs","_fetchService","test","_fetchFirstLayerId","_fetchServiceLayer","query","token","responseType","signal","data","layers","ssl","replace","layerType","_fetchVoxelServiceLayer","read","_getServiceContext","validateLayer","origin","portal","_ensureLoadBeforeSave","load","beforeSave","_updateTypeKeywords","typeKeywords","getTypeKeywords","push","filter","indexOf","T","newItem","K","from","error","Promise","reject","clone","getDefault","O","messages","writtenProperties","blockedRelativeUrls","resources","toAdd","toUpdate","toKeep","pendingOperations","write","all","_validateAgainstJSONSchema","signIn","user","addItem","item","folder","resourceReferences","itemUrl","existingItem","update","map","message","details","validationOptions","ignoreUnsupported","enabled","validate","portalItemLayerType","join","failPolicy","concat","combined","errors","prototype","readOnly","json","origins","service","source","String","target","isRequired","ignoreOrigin","SCENE_SERVICE_ITEM_TYPE","SaveOperationType","SceneService"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/mixins/SceneService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import r from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{isSome as i}from\"../../core/maybe.js\";import{debounce as s}from\"../../core/promiseUtils.js\";import{urlToObject as a}from\"../../core/urlUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as c}from\"../../core/accessorSupport/decorators/writer.js\";import{updateOrigins as d}from\"../../core/accessorSupport/originUtils.js\";import u from\"../../geometry/Extent.js\";import m from\"../../geometry/HeightModelInfo.js\";import y from\"../../geometry/SpatialReference.js\";import{titleFromUrlAndName as h,parse as f,cleanTitle as v,sanitizeUrlWithLayerId as S,writeUrlWithLayerId as g}from\"../support/arcgisLayerUrl.js\";import{id as w,url as I}from\"../support/commonProperties.js\";import{fetchIndexInfo as x}from\"../support/I3SIndexInfo.js\";import{getLoader as b}from\"../support/schemaValidatorLoader.js\";import _ from\"../../portal/Portal.js\";import j from\"../../portal/PortalItem.js\";import{saveResources as R}from\"../../webdoc/support/saveUtils.js\";const A=\"esri.layers.mixins.SceneService\",N=o.getLogger(A),E=o=>{let E=class extends o{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.copyright=null,this.sublayerTitleMode=\"item-title\",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=s((async(e,t,r)=>{switch(e){case L.SAVE:return this._save(t);case L.SAVE_AS:return this._saveAs(r,t)}}))}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return y.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,o=r&&parseInt(r.substring(r.lastIndexOf(\"/\")+1,r.length),10);return null!=o?new y(o):null}}readFullExtent(e,t,r){if(null!=e&&\"object\"==typeof e){const o=null==e.spatialReference?{...e,spatialReference:this._readSpatialReference(t)}:e;return u.fromJSON(o,r)}const o=t.store,i=this._readSpatialReference(t);return null==i||null==o||null==o.extent||!Array.isArray(o.extent)||o.extent.some((e=>e<U))?null:new u({xmin:o.extent[0],ymin:o.extent[1],xmax:o.extent[2],ymax:o.extent[3],spatialReference:i})}parseVersionString(e){const t={major:Number.NaN,minor:Number.NaN,versionString:e},r=e.split(\".\");return r.length>=2&&(t.major=parseInt(r[0],10),t.minor=parseInt(r[1],10)),t}readVersion(e,t){const r=t.store,o=null!=r.version?r.version.toString():\"\";return this.parseVersionString(o)}readTitlePortalItem(e){return\"item-title\"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if(\"item-title\"===this.sublayerTitleMode)return h(this.url,t.name);let o=t.name;if(!o&&this.url){const e=f(this.url);i(e)&&(o=e.title)}return\"item-title-and-service-name\"===this.sublayerTitleMode&&r&&(o=r+\" - \"+o),v(o)}set url(e){const t=S({layer:this,url:e,nonStandardUrlAllowed:!1,logger:N});this._set(\"url\",t.url),null!=t.layerId&&this._set(\"layerId\",t.layerId)}writeUrl(e,t,r,o){g(this,e,\"layers\",t,o)}get parsedUrl(){const e=this._get(\"url\"),t=a(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=x(this.parsedUrl.path,this.rootNode,e,this.apiKey,N,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if(\"page\"===e?.type){const t=e.rootIndex%e.pageSize,o=e.rootPage?.nodes?.[t];if(null==o||null==o.obb||null==o.obb.center||null==o.obb.halfSize)throw new r(\"sceneservice:invalid-node-page\",\"Invalid node page.\");if(o.obb.center[0]<U||null==this.fullExtent||this.fullExtent.hasZ)return;const i=o.obb.halfSize,s=o.obb.center[2],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);this.fullExtent.zmin=s-a,this.fullExtent.zmax=s+a}else if(\"node\"===e?.type){const t=e.rootNode?.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<U)return;const r=t[2],o=t[3],{fullExtent:i}=this;i&&(i.zmin=r-o,i.zmax=r+o)}}async _fetchService(e){if(null==this.url)throw new r(\"sceneservice:url-not-set\",\"Scene service can not be loaded without valid portal item or url\");if(null==this.layerId&&/SceneServer\\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const r=await t(this.url,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});if(r.data&&Array.isArray(r.data.layers)&&r.data.layers.length>0)return r.data.layers[0].id}async _fetchServiceLayer(e){const r=await t(this.parsedUrl?.path??\"\",{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e});r.ssl&&(this.url=this.url.replace(/^http:/i,\"https:\"));let o=!1;if(r.data.layerType&&\"Voxel\"===r.data.layerType&&(o=!0),o)return this._fetchVoxelServiceLayer();const i=r.data;this.read(i,this._getServiceContext()),this.validateLayer(i)}async _fetchVoxelServiceLayer(e){const r=(await t(this.parsedUrl?.path+\"/layer\",{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(r,this._getServiceContext()),this.validateLayer(r)}_getServiceContext(){return{origin:\"service\",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}}async _ensureLoadBeforeSave(){await this.load(),\"beforeSave\"in this&&\"function\"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const o=t.getTypeKeywords();for(const i of o)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)),r===T.newItem&&(e.typeKeywords=e.typeKeywords.filter((e=>\"Hosted Service\"!==e))))}async _saveAs(e,t){const o={...K,...t};let i=j.from(e);i||(N.error(\"_saveAs(): requires a portal item parameter\"),await Promise.reject(new r(\"sceneservice:portal-item-required\",\"_saveAs() requires a portal item to save to\"))),i.id&&(i=i.clone(),i.id=null);const s=i.portal||_.getDefault();await this._ensureLoadBeforeSave(),i.type=O,i.portal=s;const a={origin:\"portal-item\",url:null,messages:[],portal:s,portalItem:i,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write({},a)]};return await Promise.all(a.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(n,a,o),i.url=this.url,i.title||(i.title=this.title),this._updateTypeKeywords(i,o,T.newItem),await s.signIn(),await(s.user?.addItem({item:i,folder:o&&o.folder,data:n})),await R(this.resourceReferences,a,null),this.portalItem=i,d(a),a.portalItem=i,i}async _save(e){const t={...K,...e};if(!this.portalItem)throw N.error(\"_save(): requires the .portalItem property to be set\"),new r(\"sceneservice:portal-item-not-set\",\"Portal item to save to has not been set on this SceneService\");if(this.portalItem.type!==O)throw N.error(\"_save(): Non-matching portal item type. Got \"+this.portalItem.type+\", expected \"+O),new r(\"sceneservice:portal-item-wrong-type\",`Portal item needs to have type \"${O}\"`);await this._ensureLoadBeforeSave();const o={origin:\"portal-item\",url:this.portalItem.itemUrl&&a(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||_.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},i={layers:[this.write({},o)]};return await Promise.all(o.resources.pendingOperations??[]),await this._validateAgainstJSONSchema(i,o,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,T.existingItem),await this.portalItem.update({data:i}),await R(this.resourceReferences,o,null),d(o),this.portalItem}async _validateAgainstJSONSchema(e,t,o){let i=t.messages?.filter((e=>\"error\"===e.type)).map((e=>new r(e.name,e.message,e.details)))??[];o?.validationOptions?.ignoreUnsupported&&(i=i.filter((e=>\"layer:unsupported\"!==e.name&&\"symbol:unsupported\"!==e.name&&\"symbol-layer:unsupported\"!==e.name&&\"property:unsupported\"!==e.name&&\"url:unsupported\"!==e.name&&\"scenemodification:unsupported\"!==e.name)));const s=o?.validationOptions,a=s?.enabled,n=b();if(a&&n){const t=(await n()).validate(e,o.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\\n${t.join(\"\\n\")}`;if(N.error(`_validateAgainstJSONSchema(): ${e}`),\"throw\"===s.failPolicy){const e=t.map((e=>new r(\"sceneservice:schema-validation\",e))).concat(i);throw new r(\"sceneservice-validate:error\",\"Failed to save layer item due to schema validation, see `details.errors`.\",{combined:e})}}}if(i.length>0)throw new r(\"sceneservice:save\",\"Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:i})}};return e([n(w)],E.prototype,\"id\",void 0),e([n({type:y})],E.prototype,\"spatialReference\",void 0),e([l(\"spatialReference\",[\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],E.prototype,\"readSpatialReference\",null),e([n({type:u})],E.prototype,\"fullExtent\",void 0),e([l(\"fullExtent\",[\"fullExtent\",\"store.extent\",\"spatialReference\",\"store.indexCRS\",\"store.geographicCRS\"])],E.prototype,\"readFullExtent\",null),e([n({readOnly:!0,type:m})],E.prototype,\"heightModelInfo\",void 0),e([n({type:Number,json:{name:\"layerDefinition.minScale\",write:!0,origins:{service:{read:{source:\"minScale\"},write:!1}}}})],E.prototype,\"minScale\",void 0),e([n({type:Number,json:{name:\"layerDefinition.maxScale\",write:!0,origins:{service:{read:{source:\"maxScale\"},write:!1}}}})],E.prototype,\"maxScale\",void 0),e([n({readOnly:!0})],E.prototype,\"version\",void 0),e([l(\"version\",[\"store.version\"])],E.prototype,\"readVersion\",null),e([n({type:String,json:{read:{source:\"copyrightText\"}}})],E.prototype,\"copyright\",void 0),e([n({type:String,json:{read:!1}})],E.prototype,\"sublayerTitleMode\",void 0),e([n({type:String})],E.prototype,\"title\",void 0),e([l(\"portal-item\",\"title\")],E.prototype,\"readTitlePortalItem\",null),e([l(\"service\",\"title\",[\"name\"])],E.prototype,\"readTitleService\",null),e([n({type:Number,json:{origins:{service:{read:{source:\"id\"}},\"portal-item\":{write:{target:\"id\",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],E.prototype,\"layerId\",void 0),e([n(I)],E.prototype,\"url\",null),e([c(\"url\")],E.prototype,\"writeUrl\",null),e([n()],E.prototype,\"parsedUrl\",null),e([n({readOnly:!0})],E.prototype,\"store\",void 0),e([n({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],E.prototype,\"rootNode\",void 0),E=e([p(A)],E),E},U=-1e38;var T;!function(e){e[e.existingItem=0]=\"existingItem\",e[e.newItem=1]=\"newItem\"}(T||(T={}));const O=\"Scene Service\",K={getTypeKeywords:()=>[],portalItemLayerType:\"unknown\",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:\"throw\"}};var L;!function(e){e[e.SAVE=0]=\"SAVE\",e[e.SAVE_AS=1]=\"SAVE_AS\"}(L||(L={}));export{O as SCENE_SERVICE_ITEM_TYPE,L as SaveOperationType,E as SceneService};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}