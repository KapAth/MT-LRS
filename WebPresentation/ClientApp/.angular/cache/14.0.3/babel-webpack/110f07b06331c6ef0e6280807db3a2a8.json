{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../core/maybe.js\";\nimport { watch as t } from \"../../core/reactiveUtils.js\";\nimport { addFrameTask as a } from \"../../core/scheduling.js\";\n\nclass s {\n  constructor(t) {\n    this.view = t, this._stationaryHandle = null, this._frameTaskHandle = null, this._updateParameters = null, this._updateRequested = !1, this.stationary = !0, this.animationInProgress = !1, this.prepare = () => {\n      this._updateParameters && (this._updateParameters.state = this.view.state, this._updateParameters.stationary = this.view.stationary, this._updateParameters.pixelRatio = window.devicePixelRatio, this._updateParameters.renderingOptions = this.view.renderingOptions);\n    }, this.update = () => {\n      this._updateRequested = !1;\n      const {\n        basemapView: t,\n        graphicsView: a,\n        labelManager: s,\n        layerViews: i,\n        state: {\n          id: r\n        }\n      } = this.view;\n      t?.baseLayerViews.forEach(this._updateLayerView, this), i.forEach(this._updateLayerView, this), t?.referenceLayerViews.forEach(this._updateLayerView, this), e(s) && (s.lastUpdateId !== r && (s.viewChange(), s.lastUpdateId = r), s.updateRequested && s.processUpdate(this._updateParameters)), e(a) && (a.lastUpdateId !== r && (a.viewChange(), a.lastUpdateId = r), a.updateRequested && a.processUpdate(this._updateParameters)), this.view.graphicsTileStore.setViewState(this._updateParameters.state), this.animationInProgress || this._updateRequested || this._frameTaskHandle?.pause();\n    };\n  }\n\n  destroy() {\n    this.stop();\n  }\n\n  start() {\n    if (this._frameTaskHandle) return;\n    const e = this.view;\n    this.stationary = e.stationary, this._updateParameters = {\n      state: e.state,\n      pixelRatio: window.devicePixelRatio,\n      stationary: this.stationary,\n      renderingOptions: e.renderingOptions\n    }, this._stationaryHandle = t(() => e.stationary, e => {\n      this.stationary = e, this.requestFrame();\n    }), this._frameTaskHandle = a(this), this.requestUpdate();\n  }\n\n  stop() {\n    this._frameTaskHandle && (this._updateRequested = !1, this._stationaryHandle?.remove(), this._frameTaskHandle.remove(), this._updateParameters = this._stationaryHandle = this._frameTaskHandle = null, this.stationary = !0, this.animationInProgress = !1);\n  }\n\n  requestUpdate() {\n    this._updateRequested || (this._updateRequested = !0, this.requestFrame());\n  }\n\n  requestFrame() {\n    this._frameTaskHandle && this._frameTaskHandle.resume();\n  }\n\n  _updateLayerView(e) {\n    if (!e.attached) return void this.requestUpdate();\n    const t = this.view.state,\n          a = e.lastUpdateId;\n    null != a && (this.stationary || e.moving) || (e.moving = !0, e.moveStart()), a !== t.id && e.viewChange(), this.stationary && e.moving && (e.moving = !1, e.moveEnd()), e.lastUpdateId = t.id, e.updateRequested && e.processUpdate(this._updateParameters), \"layerViews\" in e && e.layerViews.forEach(this._updateLayerView, this);\n  }\n\n}\n\nexport { s as default };","map":{"version":3,"names":["isSome","e","watch","t","addFrameTask","a","s","constructor","view","_stationaryHandle","_frameTaskHandle","_updateParameters","_updateRequested","stationary","animationInProgress","prepare","state","pixelRatio","window","devicePixelRatio","renderingOptions","update","basemapView","graphicsView","labelManager","layerViews","i","id","r","baseLayerViews","forEach","_updateLayerView","referenceLayerViews","lastUpdateId","viewChange","updateRequested","processUpdate","graphicsTileStore","setViewState","pause","destroy","stop","start","requestFrame","requestUpdate","remove","resume","attached","moving","moveStart","moveEnd","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/FrameTask.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{watch as t}from\"../../core/reactiveUtils.js\";import{addFrameTask as a}from\"../../core/scheduling.js\";class s{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{this._updateRequested=!1;const{basemapView:t,graphicsView:a,labelManager:s,layerViews:i,state:{id:r}}=this.view;t?.baseLayerViews.forEach(this._updateLayerView,this),i.forEach(this._updateLayerView,this),t?.referenceLayerViews.forEach(this._updateLayerView,this),e(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),e(a)&&(a.lastUpdateId!==r&&(a.viewChange(),a.lastUpdateId=r),a.updateRequested&&a.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=t((()=>e.stationary),(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=a(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const t=this.view.state,a=e.lastUpdateId;null!=a&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),a!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),\"layerViews\"in e&&e.layerViews.forEach(this._updateLayerView,this)}}export{s as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}