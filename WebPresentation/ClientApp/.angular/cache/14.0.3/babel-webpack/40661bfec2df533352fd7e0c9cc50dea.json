{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { toHSV as t } from \"../../core/colorUtils.js\";\nimport { JSONSupport as r } from \"../../core/JSONSupport.js\";\nimport s from \"../../core/Logger.js\";\nimport { unwrap as o, isSome as a, isNone as n } from \"../../core/maybe.js\";\nimport { property as i } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { subclass as l } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport u from \"../../layers/support/RasterInfo.js\";\nimport { extractBands as c, colorize as p, remapColor as d, lookupPixels as h, createColormapLUT as m, isValidPixelBlock as f } from \"../../layers/support/rasterFunctions/pixelUtils.js\";\nimport { stretch as y, getStretchCutoff as b, createStretchLUT as g, computeGammaValues as S, createHistogramEqualizationLUT as k } from \"../../layers/support/rasterFunctions/stretchUtils.js\";\nimport { hillshade as R, tintHillshade as x, calculateHillshadeParams as I } from \"../../layers/support/rasterFunctions/surfaceUtils.js\";\nimport { convertColorRampToColormap as C } from \"./colorRampUtils.js\";\n\nfunction L(e, t) {\n  const {\n    attributeTable: r,\n    bandCount: s\n  } = e;\n  if (n(r) || s > 1) return !1;\n\n  if (t) {\n    if (null == r.fields.find(e => e.name.toLowerCase() === t.toLowerCase())) return !1;\n  }\n\n  return !0;\n}\n\nfunction _(e) {\n  const {\n    bandCount: t,\n    dataType: r,\n    pixelType: s\n  } = e;\n  return \"elevation\" === r || \"generic\" === r && 1 === t && (\"s16\" === s || \"f32\" === s || \"f64\" === s);\n}\n\nfunction V(e) {\n  const {\n    bandCount: t,\n    colormap: r\n  } = e;\n  return a(r) && r.length > 0 && 1 === t;\n}\n\nlet v = class extends r {\n  constructor(e) {\n    super(e);\n  }\n\n  bind() {\n    const {\n      rendererJSON: e\n    } = this;\n    if (!e) return {\n      success: !1\n    };\n    let t;\n\n    switch (this.lookup = {\n      rendererJSON: {}\n    }, e.type) {\n      case \"uniqueValue\":\n        t = this._updateUVRenderer(e);\n        break;\n\n      case \"rasterColormap\":\n        t = this._updateColormapRenderer(e);\n        break;\n\n      case \"rasterStretch\":\n        t = this._updateStretchRenderer(e);\n        break;\n\n      case \"classBreaks\":\n        t = this._updateClassBreaksRenderer(e);\n        break;\n\n      case \"rasterShadedRelief\":\n        t = this._updateShadedReliefRenderer(e);\n        break;\n\n      case \"vectorField\":\n        t = this._updateVectorFieldRenderer();\n        break;\n\n      case \"flowRenderer\":\n        t = this._updateFlowRenderer();\n    }\n\n    return t;\n  }\n\n  symbolize(e) {\n    let t = e && e.pixelBlock;\n    if (!O(t)) return t;\n    if (e.simpleStretchParams && \"rasterStretch\" === this.rendererJSON.type) return this.simpleStretch(t, e.simpleStretchParams);\n\n    try {\n      let r;\n\n      switch (t.pixels.length > 3 && (t = c(t, [0, 1, 2])), this.rendererJSON.type) {\n        case \"uniqueValue\":\n        case \"rasterColormap\":\n          r = this._symbolizeColormap(t);\n          break;\n\n        case \"classBreaks\":\n          r = this._symbolizeClassBreaks(t);\n          break;\n\n        case \"rasterStretch\":\n          r = this._symbolizeStretch(t, e.bandIds);\n          break;\n\n        case \"rasterShadedRelief\":\n          {\n            const s = e.extent,\n                  o = s.spatialReference.isGeographic,\n                  a = {\n              x: (s.xmax - s.xmin) / t.width,\n              y: (s.ymax - s.ymin) / t.height\n            };\n            r = this._symbolizeShadedRelief(t, {\n              isGCS: o,\n              resolution: a\n            });\n            break;\n          }\n      }\n\n      return r;\n    } catch (r) {\n      return s.getLogger(this.declaredClass).error(\"symbolize\", r.message), t;\n    }\n  }\n\n  simpleStretch(e, t) {\n    if (!O(e)) return e;\n\n    try {\n      return e.pixels.length > 3 && (e = c(e, [0, 1, 2])), y(e, { ...t,\n        isRenderer: !0\n      });\n    } catch (r) {\n      return s.getLogger(this.declaredClass).error(\"symbolize\", r.message), e;\n    }\n  }\n\n  generateWebGLParameters(e) {\n    if ([\"uniqueValue\", \"rasterColormap\", \"classBreaks\"].includes(this.rendererJSON.type)) {\n      const {\n        indexedColormap: e,\n        offset: t\n      } = this.lookup.colormapLut || {};\n      return {\n        colormap: e,\n        colormapOffset: t,\n        type: \"lut\"\n      };\n    }\n\n    const {\n      pixelBlock: t,\n      isGCS: r,\n      resolution: s,\n      bandIds: o\n    } = e,\n          {\n      rendererJSON: a\n    } = this;\n    return \"rasterStretch\" === a.type ? this._generateStretchWebGLParams(t, a, o) : \"rasterShadedRelief\" === a.type ? this._generateShadedReliefWebGLParams(a, r, s ?? void 0) : \"vectorField\" === a.type ? this._generateVectorFieldWebGLParams(a) : null;\n  }\n\n  _isLUTChanged(e) {\n    if (!this.lookup || !this.lookup.rendererJSON) return !0;\n\n    if (\"colorRamp\" in this.rendererJSON) {\n      const t = this.rendererJSON.colorRamp;\n      return e ? JSON.stringify(t) !== JSON.stringify(this.lookup.rendererJSON.colorRamp) : (this.rendererJSON, this.lookup.rendererJSON, JSON.stringify(this.rendererJSON) !== JSON.stringify(this.lookup.rendererJSON));\n    }\n\n    return JSON.stringify(this.rendererJSON) !== JSON.stringify(this.lookup.rendererJSON);\n  }\n\n  _symbolizeColormap(e) {\n    if (this._isLUTChanged()) {\n      if (!this.bind().success) return e;\n    }\n\n    return p(e, this.lookup.colormapLut);\n  }\n\n  _symbolizeClassBreaks(e) {\n    const {\n      canUseIndexedLUT: t\n    } = this._analyzeClassBreaks(this.rendererJSON);\n\n    if (this._isLUTChanged()) {\n      if (!this.bind().success) return e;\n    }\n\n    return t ? p(e, this.lookup.colormapLut) : d(e, this.lookup.remapLut ?? []);\n  }\n\n  _symbolizeStretch(e, t) {\n    const {\n      rasterInfo: r\n    } = this,\n          {\n      pixelType: s,\n      bandCount: a\n    } = r,\n          n = this.rendererJSON,\n          i = [\"u8\", \"u16\", \"s8\", \"s16\"].includes(s);\n    let l, u;\n    const {\n      dra: c\n    } = n,\n          {\n      gamma: d\n    } = this.lookup;\n\n    if (\"histogramEqualization\" === n.stretchType) {\n      const s = c ? null : this.lookup?.histogramLut,\n            o = b(n, {\n        rasterInfo: r,\n        pixelBlock: e,\n        bandIds: t,\n        returnHistogramLut: !s\n      }),\n            a = y(e, { ...o,\n        gamma: d,\n        isRenderer: !0\n      });\n      u = h(a, {\n        lut: c ? o.histogramLut : s,\n        offset: 0\n      });\n    } else if (i) {\n      if (c) {\n        const o = b(n, {\n          rasterInfo: r,\n          pixelBlock: e,\n          bandIds: t\n        });\n        l = g({\n          pixelType: s,\n          ...o,\n          gamma: d,\n          rounding: \"floor\"\n        });\n      } else if (this._isLUTChanged()) {\n        if (!this.bind().success) return e;\n        l = this.lookup ? this.lookup.stretchLut : null;\n      } else l = this.lookup ? this.lookup.stretchLut : null;\n\n      if (!l) return e;\n      a > 1 && t?.length === o(e)?.pixels.length && l?.lut.length === a && (l = {\n        lut: t.map(e => l.lut[e]),\n        offset: l.offset\n      }), u = h(e, l);\n    } else {\n      const s = b(n, {\n        rasterInfo: r,\n        pixelBlock: e,\n        bandIds: t\n      });\n      u = y(e, { ...s,\n        gamma: d,\n        isRenderer: !0\n      });\n    }\n\n    if (n.colorRamp) {\n      if (this._isLUTChanged(!0)) {\n        if (!this.bind().success) return e;\n      }\n\n      u = p(u, this.lookup?.colormapLut);\n    }\n\n    return u;\n  }\n\n  _symbolizeShadedRelief(e, t) {\n    const r = this.rendererJSON,\n          s = { ...r,\n      ...t\n    },\n          a = R(e, s);\n    if (!r.colorRamp) return a;\n    let n;\n\n    if (this._isLUTChanged(!0)) {\n      if (!this.bind().success) return a;\n      n = this.lookup ? this.lookup.hsvMap : null;\n    } else n = this.lookup ? this.lookup.hsvMap : null;\n\n    if (!n) return a;\n    const i = o(this.rasterInfo.statistics)?.[0] ?? {\n      min: 0,\n      max: 8e3\n    };\n    return x(a, e, n, i), a;\n  }\n\n  _isVectorFieldData() {\n    const {\n      bandCount: e,\n      dataType: t\n    } = this.rasterInfo;\n    return 2 === e && (\"vector-magdir\" === t || \"vector-uv\" === t);\n  }\n\n  _updateVectorFieldRenderer() {\n    return this._isVectorFieldData() ? {\n      success: !0\n    } : {\n      success: !1,\n      error: `Unsupported data type \"${this.rasterInfo.dataType}\"; VectorFieldRenderer only supports \"vector-magdir\" and \"vector-uv\".`\n    };\n  }\n\n  _updateFlowRenderer() {\n    return this._isVectorFieldData() ? {\n      success: !0\n    } : {\n      success: !1,\n      error: `Unsupported data type \"${this.rasterInfo.dataType}\"; FlowRenderer only supports \"vector-magdir\" and \"vector-uv\".`\n    };\n  }\n\n  _updateUVRenderer(e) {\n    const {\n      bandCount: t,\n      attributeTable: r,\n      pixelType: s\n    } = this.rasterInfo,\n          o = e.field1;\n    if (!o) return {\n      success: !1,\n      error: \"Unsupported renderer; missing UniqueValueRenderer.field.\"\n    };\n    const n = e.defaultSymbol,\n          i = 1 === t && [\"u8\", \"s8\"].includes(s);\n    if (!L(this.rasterInfo, o) && !i) return {\n      success: !1,\n      error: \"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table.\"\n    };\n    const l = [];\n\n    if (a(r)) {\n      const t = r.fields.find(e => \"value\" === e.name.toLowerCase());\n      if (!t) return {\n        success: !1,\n        error: \"Unsupported data; the data's raster attribute table does not have a value field.\"\n      };\n      r.features.forEach(r => {\n        const s = e.uniqueValueInfos?.find(e => String(e.value) === String(r.attributes[o])),\n              a = s?.symbol?.color;\n        a ? l.push([r.attributes[t.name]].concat(a)) : n && l.push([r.attributes[t.name]].concat(n.color));\n      });\n    } else {\n      if (\"value\" !== o.toLowerCase()) return {\n        success: !1,\n        error: 'Unsupported renderer; UniqueValueRenderer.field must be \"Value\" when raster attribute table is not availalbe.'\n      };\n      e.uniqueValueInfos?.forEach(e => {\n        const t = e?.symbol?.color;\n        t ? l.push([parseInt(\"\" + e.value, 10)].concat(t)) : n && l.push([parseInt(\"\" + e.value, 10)].concat(n?.color));\n      });\n    }\n\n    if (0 === l.length) return {\n      success: !1,\n      error: \"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table.\"\n    };\n    const u = m({\n      colormap: l\n    });\n    return this.lookup = {\n      rendererJSON: e,\n      colormapLut: u\n    }, this.canRenderInWebGL = !0, {\n      success: !0\n    };\n  }\n\n  _updateColormapRenderer(e) {\n    if (!V(this.rasterInfo)) return {\n      success: !1,\n      error: \"Unsupported data; the data source does not have a colormap.\"\n    };\n    const t = e.colormapInfos.map(e => [e.value].concat(e.color)).sort((e, t) => e[0] - t[0]);\n    if (!t || 0 === t.length) return {\n      success: !1,\n      error: \"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos.\"\n    };\n    const r = m({\n      colormap: t\n    });\n    return this.lookup = {\n      rendererJSON: e,\n      colormapLut: r\n    }, this.canRenderInWebGL = !0, {\n      success: !0\n    };\n  }\n\n  _updateShadedReliefRenderer(e) {\n    if (!_(this.rasterInfo)) return {\n      success: !1,\n      error: `Unsupported data type \"${this.rasterInfo.dataType}\"; ShadedReliefRenderer only supports \"elevation\", or single band float/s16 data.`\n    };\n\n    if (e.colorRamp) {\n      const r = C(e.colorRamp, {\n        interpolateAlpha: !0\n      }),\n            s = m({\n        colormap: r\n      }),\n            o = [],\n            a = s.indexedColormap;\n\n      for (let e = 0; e < a.length; e += 4) {\n        const r = t({\n          r: a[e],\n          g: a[e + 1],\n          b: a[e + 2]\n        });\n        o.push([r.h / 60, r.s / 100, 255 * r.v / 100]);\n      }\n\n      this.lookup = {\n        rendererJSON: e,\n        colormapLut: s,\n        hsvMap: o\n      };\n    } else this.lookup = null;\n\n    return this.canRenderInWebGL = !0, {\n      success: !0\n    };\n  }\n\n  _analyzeClassBreaks(e) {\n    const {\n      attributeTable: t,\n      pixelType: r\n    } = this.rasterInfo,\n          s = a(t) ? t.fields.find(e => \"value\" === e.name.toLowerCase()) : null,\n          o = a(t) ? t.fields.find(t => t.name.toLowerCase() === e.field.toLowerCase()) : null,\n          n = null != s && null !== o;\n    return {\n      canUseIndexedLUT: [\"u8\", \"u16\", \"s8\", \"s16\"].includes(r) || n,\n      tableValueField: s,\n      tableBreakField: o\n    };\n  }\n\n  _updateClassBreaksRenderer(e) {\n    const {\n      attributeTable: t\n    } = this.rasterInfo,\n          {\n      canUseIndexedLUT: r,\n      tableValueField: s,\n      tableBreakField: o\n    } = this._analyzeClassBreaks(e),\n          n = e.classBreakInfos;\n\n    if (!n?.length) return {\n      success: !1,\n      error: \"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos.\"\n    };\n    const i = n.sort((e, t) => e.classMaxValue - t.classMaxValue),\n          l = i[i.length - 1];\n    let u = e.minValue;\n\n    if (!r) {\n      const t = [];\n\n      for (let e = 0; e < i.length; e++) t.push({\n        value: i[e].classMinValue ?? u,\n        mappedColor: i[e].symbol.color\n      }), u = i[e].classMaxValue;\n\n      return t.push({\n        value: l.classMaxValue,\n        mappedColor: l.symbol.color\n      }), this.lookup = {\n        rendererJSON: e,\n        remapLut: t\n      }, this.canRenderInWebGL = !1, {\n        success: !0\n      };\n    }\n\n    const c = [];\n\n    if (a(t) && null != s && null !== o && s !== o) {\n      const r = s.name,\n            a = o.name,\n            n = i[i.length - 1],\n            {\n        classMaxValue: l\n      } = n;\n      u = e.minValue;\n\n      for (const e of t.features) {\n        const t = e.attributes[r],\n              s = e.attributes[a],\n              o = s === l ? n : s < u ? null : i.find(({\n          classMaxValue: e\n        }) => e > s);\n        o && c.push([t].concat(o.symbol.color));\n      }\n    } else {\n      u = Math.floor(e.minValue);\n\n      for (let e = 0; e < i.length; e++) {\n        const t = i[e];\n\n        for (let e = u; e < t.classMaxValue; e++) c.push([e].concat(t.symbol.color));\n\n        u = Math.ceil(t.classMaxValue);\n      }\n\n      l.classMaxValue === u && c.push([l.classMaxValue].concat(l.symbol.color));\n    }\n\n    const p = m({\n      colormap: c,\n      fillUnspecified: !1\n    });\n    return this.lookup = {\n      rendererJSON: e,\n      colormapLut: p\n    }, this.canRenderInWebGL = !0, {\n      success: !0\n    };\n  }\n\n  _isHistogramRequired(e) {\n    return \"percentClip\" === e || \"histogramEqualization\" === e;\n  }\n\n  _isValidRasterStatistics(e) {\n    return a(e) && e.length > 0 && null != e[0].min && null != e[0].max;\n  }\n\n  _updateStretchRenderer(e) {\n    let {\n      stretchType: t,\n      dra: r\n    } = e;\n    if (!(\"none\" === t || e.statistics?.length || this._isValidRasterStatistics(this.rasterInfo.statistics) || r)) return {\n      success: !1,\n      error: \"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used.\"\n    };\n    const s = o(e.histograms || this.rasterInfo.histograms);\n    !this._isHistogramRequired(e.stretchType) || s?.length || r || (t = \"minMax\");\n    const {\n      computeGamma: a,\n      useGamma: n,\n      colorRamp: i\n    } = e;\n    let {\n      gamma: l\n    } = e;\n\n    if (n && a && !l?.length) {\n      const t = e.statistics?.length ? e.statistics : o(this.rasterInfo.statistics);\n      l = S(this.rasterInfo.pixelType, t);\n    }\n\n    const u = this.rasterInfo.pixelType,\n          c = !r && [\"u8\", \"u16\", \"s8\", \"s16\"].includes(u);\n\n    if (\"histogramEqualization\" === t) {\n      const t = s.map(e => k(e));\n      this.lookup = {\n        rendererJSON: e,\n        histogramLut: t\n      };\n    } else if (c) {\n      const t = b(e, {\n        rasterInfo: this.rasterInfo\n      }),\n            r = g({\n        pixelType: u,\n        ...t,\n        gamma: n ? l : null,\n        rounding: \"floor\"\n      });\n      this.lookup = {\n        rendererJSON: e,\n        stretchLut: r\n      };\n    }\n\n    if (i) {\n      const t = C(i, {\n        interpolateAlpha: !0\n      });\n      this.lookup || (this.lookup = {\n        rendererJSON: e\n      }), this.lookup.colormapLut = m({\n        colormap: t\n      }), this.lookup.rendererJSON = e;\n    }\n\n    return this.lookup.gamma = n && l?.length ? l : null, this.canRenderInWebGL = !0, {\n      success: !0\n    };\n  }\n\n  _generateStretchWebGLParams(e, t, r) {\n    let s = null,\n        o = null;\n    const n = this.lookup && this.lookup.colormapLut;\n    t.colorRamp && n && (s = n.indexedColormap, o = n.offset), \"histogramEqualization\" === t.stretchType && (t = { ...t,\n      stretchType: \"minMax\"\n    });\n    const {\n      gamma: i\n    } = this.lookup,\n          l = !!(t.useGamma && i && i.some(e => 1 !== e)),\n          {\n      minCutOff: u,\n      maxCutOff: c,\n      outMin: p,\n      outMax: d\n    } = b(t, {\n      rasterInfo: this.rasterInfo,\n      pixelBlock: e,\n      bandIds: r\n    });\n    let h = 0;\n    a(e) && (h = e.getPlaneCount(), 2 === h && ((e = e.clone()).statistics = [e.statistics[0]], e.pixels = [e.pixels[0]]));\n    const {\n      bandCount: m\n    } = this.rasterInfo,\n          f = Math.min(3, r?.length || h || m, m),\n          y = new Float32Array(f),\n          g = s || l ? 1 : 255;\n    let S;\n\n    for (S = 0; S < u.length; S++) y[S] = c[S] === u[S] ? 0 : (d - p) / (c[S] - u[S]) / g;\n\n    const k = new Float32Array(f);\n    if (l && i) for (S = 0; S < f; S++) i[S] > 1 ? i[S] > 2 ? k[S] = 6.5 + (i[S] - 2) ** 2.5 : k[S] = 6.5 + 100 * (2 - i[S]) ** 4 : k[S] = 1;\n    return {\n      bandCount: f,\n      outMin: p / g,\n      outMax: d / g,\n      minCutOff: u,\n      maxCutOff: c,\n      factor: y,\n      useGamma: l,\n      gamma: l ? i : [1, 1, 1],\n      gammaCorrection: l ? k : [1, 1, 1],\n      colormap: s,\n      colormapOffset: o,\n      stretchType: t.stretchType,\n      type: \"stretch\"\n    };\n  }\n\n  _generateShadedReliefWebGLParams(e, t = !1, r = {\n    x: 0,\n    y: 0\n  }) {\n    let s = null,\n        a = null;\n    const n = this.lookup && this.lookup.colormapLut;\n    e.colorRamp && n && (s = n.indexedColormap, a = n.offset);\n    const i = { ...e,\n      isGCS: t,\n      resolution: r\n    },\n          l = I(i),\n          u = o(this.rasterInfo.statistics)?.[0];\n    return { ...l,\n      minValue: u?.min ?? 0,\n      maxValue: u?.max ?? 8e3,\n      hillshadeType: \"traditional\" === e.hillshadeType ? 0 : 1,\n      type: \"hillshade\",\n      colormap: s,\n      colormapOffset: a\n    };\n  }\n\n  _generateVectorFieldWebGLParams(e) {\n    const {\n      style: t,\n      inputUnit: r,\n      outputUnit: s,\n      visualVariables: o,\n      symbolTileSize: n,\n      flowRepresentation: i\n    } = e;\n    let l;\n    const u = this.rasterInfo.statistics?.[0].min ?? 0,\n          c = this.rasterInfo.statistics?.[0].max ?? 50,\n          p = o?.find(e => \"sizeInfo\" === e.type) ?? {\n      type: \"sizeInfo\",\n      field: \"Magnitude\",\n      maxDataValue: c,\n      maxSize: .8 * n,\n      minDataValue: u,\n      minSize: .2 * n\n    },\n          d = p.minDataValue ?? u,\n          h = p.maxDataValue ?? c,\n          m = a(p.maxSize) && a(p.minSize) ? [p.minSize / n, p.maxSize / n] : [.2, .8];\n\n    if (\"wind_speed\" === t) {\n      const e = (m[0] + m[1]) / 2;\n      m[0] = m[1] = e;\n    }\n\n    const f = a(d) && a(h) ? [d, h] : null;\n    if (\"classified_arrow\" === t) if (a(d) && a(h) && a(p)) {\n      l = [];\n      const e = (p.maxDataValue - p.minDataValue) / 5;\n\n      for (let t = 0; t < 6; t++) l.push(p.minDataValue + e * t);\n    } else l = [0, 1e-6, 3.5, 7, 10.5, 14];\n    const y = \"flow_to\" === i === (\"ocean_current_kn\" === t || \"ocean_current_m\" === t) ? 0 : Math.PI,\n          b = o?.find(e => \"rotationInfo\" === e.type);\n    return {\n      breakValues: l,\n      dataRange: f,\n      inputUnit: r,\n      outputUnit: s,\n      symbolTileSize: n,\n      symbolPercentRange: m,\n      style: t || \"single_arrow\",\n      rotation: y,\n      rotationType: this.rasterInfo.storageInfo?.tileInfo && \"vector-uv\" === this.rasterInfo.dataType ? \"geographic\" : b?.rotationType || e.rotationType,\n      type: \"vectorField\"\n    };\n  }\n\n};\n\nfunction O(e) {\n  return f(e) && 0 !== e.validPixelCount;\n}\n\ne([i({\n  json: {\n    write: !0\n  }\n})], v.prototype, \"rendererJSON\", void 0), e([i({\n  type: u,\n  json: {\n    write: !0\n  }\n})], v.prototype, \"rasterInfo\", void 0), e([i({\n  json: {\n    write: !0\n  }\n})], v.prototype, \"lookup\", void 0), e([i()], v.prototype, \"canRenderInWebGL\", void 0), v = e([l(\"esri.renderers.support.RasterSymbolizer\")], v);\nconst T = v;\nexport { T as default };","map":{"version":3,"names":["_","e","toHSV","t","JSONSupport","r","s","unwrap","o","isSome","a","isNone","n","property","i","subclass","l","u","extractBands","c","colorize","p","remapColor","d","lookupPixels","h","createColormapLUT","m","isValidPixelBlock","f","stretch","y","getStretchCutoff","b","createStretchLUT","g","computeGammaValues","S","createHistogramEqualizationLUT","k","hillshade","R","tintHillshade","x","calculateHillshadeParams","I","convertColorRampToColormap","C","L","attributeTable","bandCount","fields","find","name","toLowerCase","dataType","pixelType","V","colormap","length","v","constructor","bind","rendererJSON","success","lookup","type","_updateUVRenderer","_updateColormapRenderer","_updateStretchRenderer","_updateClassBreaksRenderer","_updateShadedReliefRenderer","_updateVectorFieldRenderer","_updateFlowRenderer","symbolize","pixelBlock","O","simpleStretchParams","simpleStretch","pixels","_symbolizeColormap","_symbolizeClassBreaks","_symbolizeStretch","bandIds","extent","spatialReference","isGeographic","xmax","xmin","width","ymax","ymin","height","_symbolizeShadedRelief","isGCS","resolution","getLogger","declaredClass","error","message","isRenderer","generateWebGLParameters","includes","indexedColormap","offset","colormapLut","colormapOffset","_generateStretchWebGLParams","_generateShadedReliefWebGLParams","_generateVectorFieldWebGLParams","_isLUTChanged","colorRamp","JSON","stringify","canUseIndexedLUT","_analyzeClassBreaks","remapLut","rasterInfo","dra","gamma","stretchType","histogramLut","returnHistogramLut","lut","rounding","stretchLut","map","hsvMap","statistics","min","max","_isVectorFieldData","field1","defaultSymbol","features","forEach","uniqueValueInfos","String","value","attributes","symbol","color","push","concat","parseInt","canRenderInWebGL","colormapInfos","sort","interpolateAlpha","field","tableValueField","tableBreakField","classBreakInfos","classMaxValue","minValue","classMinValue","mappedColor","Math","floor","ceil","fillUnspecified","_isHistogramRequired","_isValidRasterStatistics","histograms","computeGamma","useGamma","some","minCutOff","maxCutOff","outMin","outMax","getPlaneCount","clone","Float32Array","factor","gammaCorrection","maxValue","hillshadeType","style","inputUnit","outputUnit","visualVariables","symbolTileSize","flowRepresentation","maxDataValue","maxSize","minDataValue","minSize","PI","breakValues","dataRange","symbolPercentRange","rotation","rotationType","storageInfo","tileInfo","validPixelCount","json","write","prototype","T","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/renderers/support/RasterSymbolizer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{toHSV as t}from\"../../core/colorUtils.js\";import{JSONSupport as r}from\"../../core/JSONSupport.js\";import s from\"../../core/Logger.js\";import{unwrap as o,isSome as a,isNone as n}from\"../../core/maybe.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import u from\"../../layers/support/RasterInfo.js\";import{extractBands as c,colorize as p,remapColor as d,lookupPixels as h,createColormapLUT as m,isValidPixelBlock as f}from\"../../layers/support/rasterFunctions/pixelUtils.js\";import{stretch as y,getStretchCutoff as b,createStretchLUT as g,computeGammaValues as S,createHistogramEqualizationLUT as k}from\"../../layers/support/rasterFunctions/stretchUtils.js\";import{hillshade as R,tintHillshade as x,calculateHillshadeParams as I}from\"../../layers/support/rasterFunctions/surfaceUtils.js\";import{convertColorRampToColormap as C}from\"./colorRampUtils.js\";function L(e,t){const{attributeTable:r,bandCount:s}=e;if(n(r)||s>1)return!1;if(t){if(null==r.fields.find((e=>e.name.toLowerCase()===t.toLowerCase())))return!1}return!0}function _(e){const{bandCount:t,dataType:r,pixelType:s}=e;return\"elevation\"===r||\"generic\"===r&&1===t&&(\"s16\"===s||\"f32\"===s||\"f64\"===s)}function V(e){const{bandCount:t,colormap:r}=e;return a(r)&&r.length>0&&1===t}let v=class extends r{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case\"uniqueValue\":t=this._updateUVRenderer(e);break;case\"rasterColormap\":t=this._updateColormapRenderer(e);break;case\"rasterStretch\":t=this._updateStretchRenderer(e);break;case\"classBreaks\":t=this._updateClassBreaksRenderer(e);break;case\"rasterShadedRelief\":t=this._updateShadedReliefRenderer(e);break;case\"vectorField\":t=this._updateVectorFieldRenderer();break;case\"flowRenderer\":t=this._updateFlowRenderer()}return t}symbolize(e){let t=e&&e.pixelBlock;if(!O(t))return t;if(e.simpleStretchParams&&\"rasterStretch\"===this.rendererJSON.type)return this.simpleStretch(t,e.simpleStretchParams);try{let r;switch(t.pixels.length>3&&(t=c(t,[0,1,2])),this.rendererJSON.type){case\"uniqueValue\":case\"rasterColormap\":r=this._symbolizeColormap(t);break;case\"classBreaks\":r=this._symbolizeClassBreaks(t);break;case\"rasterStretch\":r=this._symbolizeStretch(t,e.bandIds);break;case\"rasterShadedRelief\":{const s=e.extent,o=s.spatialReference.isGeographic,a={x:(s.xmax-s.xmin)/t.width,y:(s.ymax-s.ymin)/t.height};r=this._symbolizeShadedRelief(t,{isGCS:o,resolution:a});break}}return r}catch(r){return s.getLogger(this.declaredClass).error(\"symbolize\",r.message),t}}simpleStretch(e,t){if(!O(e))return e;try{return e.pixels.length>3&&(e=c(e,[0,1,2])),y(e,{...t,isRenderer:!0})}catch(r){return s.getLogger(this.declaredClass).error(\"symbolize\",r.message),e}}generateWebGLParameters(e){if([\"uniqueValue\",\"rasterColormap\",\"classBreaks\"].includes(this.rendererJSON.type)){const{indexedColormap:e,offset:t}=this.lookup.colormapLut||{};return{colormap:e,colormapOffset:t,type:\"lut\"}}const{pixelBlock:t,isGCS:r,resolution:s,bandIds:o}=e,{rendererJSON:a}=this;return\"rasterStretch\"===a.type?this._generateStretchWebGLParams(t,a,o):\"rasterShadedRelief\"===a.type?this._generateShadedReliefWebGLParams(a,r,s??void 0):\"vectorField\"===a.type?this._generateVectorFieldWebGLParams(a):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if(\"colorRamp\"in this.rendererJSON){const t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){if(this._isLUTChanged()){if(!this.bind().success)return e}return p(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const{canUseIndexedLUT:t}=this._analyzeClassBreaks(this.rendererJSON);if(this._isLUTChanged()){if(!this.bind().success)return e}return t?p(e,this.lookup.colormapLut):d(e,this.lookup.remapLut??[])}_symbolizeStretch(e,t){const{rasterInfo:r}=this,{pixelType:s,bandCount:a}=r,n=this.rendererJSON,i=[\"u8\",\"u16\",\"s8\",\"s16\"].includes(s);let l,u;const{dra:c}=n,{gamma:d}=this.lookup;if(\"histogramEqualization\"===n.stretchType){const s=c?null:this.lookup?.histogramLut,o=b(n,{rasterInfo:r,pixelBlock:e,bandIds:t,returnHistogramLut:!s}),a=y(e,{...o,gamma:d,isRenderer:!0});u=h(a,{lut:c?o.histogramLut:s,offset:0})}else if(i){if(c){const o=b(n,{rasterInfo:r,pixelBlock:e,bandIds:t});l=g({pixelType:s,...o,gamma:d,rounding:\"floor\"})}else if(this._isLUTChanged()){if(!this.bind().success)return e;l=this.lookup?this.lookup.stretchLut:null}else l=this.lookup?this.lookup.stretchLut:null;if(!l)return e;a>1&&t?.length===o(e)?.pixels.length&&l?.lut.length===a&&(l={lut:t.map((e=>l.lut[e])),offset:l.offset}),u=h(e,l)}else{const s=b(n,{rasterInfo:r,pixelBlock:e,bandIds:t});u=y(e,{...s,gamma:d,isRenderer:!0})}if(n.colorRamp){if(this._isLUTChanged(!0)){if(!this.bind().success)return e}u=p(u,this.lookup?.colormapLut)}return u}_symbolizeShadedRelief(e,t){const r=this.rendererJSON,s={...r,...t},a=R(e,s);if(!r.colorRamp)return a;let n;if(this._isLUTChanged(!0)){if(!this.bind().success)return a;n=this.lookup?this.lookup.hsvMap:null}else n=this.lookup?this.lookup.hsvMap:null;if(!n)return a;const i=o(this.rasterInfo.statistics)?.[0]??{min:0,max:8e3};return x(a,e,n,i),a}_isVectorFieldData(){const{bandCount:e,dataType:t}=this.rasterInfo;return 2===e&&(\"vector-magdir\"===t||\"vector-uv\"===t)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type \"${this.rasterInfo.dataType}\"; VectorFieldRenderer only supports \"vector-magdir\" and \"vector-uv\".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type \"${this.rasterInfo.dataType}\"; FlowRenderer only supports \"vector-magdir\" and \"vector-uv\".`}}_updateUVRenderer(e){const{bandCount:t,attributeTable:r,pixelType:s}=this.rasterInfo,o=e.field1;if(!o)return{success:!1,error:\"Unsupported renderer; missing UniqueValueRenderer.field.\"};const n=e.defaultSymbol,i=1===t&&[\"u8\",\"s8\"].includes(s);if(!L(this.rasterInfo,o)&&!i)return{success:!1,error:\"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table.\"};const l=[];if(a(r)){const t=r.fields.find((e=>\"value\"===e.name.toLowerCase()));if(!t)return{success:!1,error:\"Unsupported data; the data's raster attribute table does not have a value field.\"};r.features.forEach((r=>{const s=e.uniqueValueInfos?.find((e=>String(e.value)===String(r.attributes[o]))),a=s?.symbol?.color;a?l.push([r.attributes[t.name]].concat(a)):n&&l.push([r.attributes[t.name]].concat(n.color))}))}else{if(\"value\"!==o.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be \"Value\" when raster attribute table is not availalbe.'};e.uniqueValueInfos?.forEach((e=>{const t=e?.symbol?.color;t?l.push([parseInt(\"\"+e.value,10)].concat(t)):n&&l.push([parseInt(\"\"+e.value,10)].concat(n?.color))}))}if(0===l.length)return{success:!1,error:\"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table.\"};const u=m({colormap:l});return this.lookup={rendererJSON:e,colormapLut:u},this.canRenderInWebGL=!0,{success:!0}}_updateColormapRenderer(e){if(!V(this.rasterInfo))return{success:!1,error:\"Unsupported data; the data source does not have a colormap.\"};const t=e.colormapInfos.map((e=>[e.value].concat(e.color))).sort(((e,t)=>e[0]-t[0]));if(!t||0===t.length)return{success:!1,error:\"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos.\"};const r=m({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,{success:!0}}_updateShadedReliefRenderer(e){if(!_(this.rasterInfo))return{success:!1,error:`Unsupported data type \"${this.rasterInfo.dataType}\"; ShadedReliefRenderer only supports \"elevation\", or single band float/s16 data.`};if(e.colorRamp){const r=C(e.colorRamp,{interpolateAlpha:!0}),s=m({colormap:r}),o=[],a=s.indexedColormap;for(let e=0;e<a.length;e+=4){const r=t({r:a[e],g:a[e+1],b:a[e+2]});o.push([r.h/60,r.s/100,255*r.v/100])}this.lookup={rendererJSON:e,colormapLut:s,hsvMap:o}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(e){const{attributeTable:t,pixelType:r}=this.rasterInfo,s=a(t)?t.fields.find((e=>\"value\"===e.name.toLowerCase())):null,o=a(t)?t.fields.find((t=>t.name.toLowerCase()===e.field.toLowerCase())):null,n=null!=s&&null!==o;return{canUseIndexedLUT:[\"u8\",\"u16\",\"s8\",\"s16\"].includes(r)||n,tableValueField:s,tableBreakField:o}}_updateClassBreaksRenderer(e){const{attributeTable:t}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:s,tableBreakField:o}=this._analyzeClassBreaks(e),n=e.classBreakInfos;if(!n?.length)return{success:!1,error:\"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos.\"};const i=n.sort(((e,t)=>e.classMaxValue-t.classMaxValue)),l=i[i.length-1];let u=e.minValue;if(!r){const t=[];for(let e=0;e<i.length;e++)t.push({value:i[e].classMinValue??u,mappedColor:i[e].symbol.color}),u=i[e].classMaxValue;return t.push({value:l.classMaxValue,mappedColor:l.symbol.color}),this.lookup={rendererJSON:e,remapLut:t},this.canRenderInWebGL=!1,{success:!0}}const c=[];if(a(t)&&null!=s&&null!==o&&s!==o){const r=s.name,a=o.name,n=i[i.length-1],{classMaxValue:l}=n;u=e.minValue;for(const e of t.features){const t=e.attributes[r],s=e.attributes[a],o=s===l?n:s<u?null:i.find((({classMaxValue:e})=>e>s));o&&c.push([t].concat(o.symbol.color))}}else{u=Math.floor(e.minValue);for(let e=0;e<i.length;e++){const t=i[e];for(let e=u;e<t.classMaxValue;e++)c.push([e].concat(t.symbol.color));u=Math.ceil(t.classMaxValue)}l.classMaxValue===u&&c.push([l.classMaxValue].concat(l.symbol.color))}const p=m({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:p},this.canRenderInWebGL=!0,{success:!0}}_isHistogramRequired(e){return\"percentClip\"===e||\"histogramEqualization\"===e}_isValidRasterStatistics(e){return a(e)&&e.length>0&&null!=e[0].min&&null!=e[0].max}_updateStretchRenderer(e){let{stretchType:t,dra:r}=e;if(!(\"none\"===t||e.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||r))return{success:!1,error:\"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used.\"};const s=o(e.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(e.stretchType)||s?.length||r||(t=\"minMax\");const{computeGamma:a,useGamma:n,colorRamp:i}=e;let{gamma:l}=e;if(n&&a&&!l?.length){const t=e.statistics?.length?e.statistics:o(this.rasterInfo.statistics);l=S(this.rasterInfo.pixelType,t)}const u=this.rasterInfo.pixelType,c=!r&&[\"u8\",\"u16\",\"s8\",\"s16\"].includes(u);if(\"histogramEqualization\"===t){const t=s.map((e=>k(e)));this.lookup={rendererJSON:e,histogramLut:t}}else if(c){const t=b(e,{rasterInfo:this.rasterInfo}),r=g({pixelType:u,...t,gamma:n?l:null,rounding:\"floor\"});this.lookup={rendererJSON:e,stretchLut:r}}if(i){const t=C(i,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=m({colormap:t}),this.lookup.rendererJSON=e}return this.lookup.gamma=n&&l?.length?l:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(e,t,r){let s=null,o=null;const n=this.lookup&&this.lookup.colormapLut;t.colorRamp&&n&&(s=n.indexedColormap,o=n.offset),\"histogramEqualization\"===t.stretchType&&(t={...t,stretchType:\"minMax\"});const{gamma:i}=this.lookup,l=!!(t.useGamma&&i&&i.some((e=>1!==e))),{minCutOff:u,maxCutOff:c,outMin:p,outMax:d}=b(t,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r});let h=0;a(e)&&(h=e.getPlaneCount(),2===h&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const{bandCount:m}=this.rasterInfo,f=Math.min(3,r?.length||h||m,m),y=new Float32Array(f),g=s||l?1:255;let S;for(S=0;S<u.length;S++)y[S]=c[S]===u[S]?0:(d-p)/(c[S]-u[S])/g;const k=new Float32Array(f);if(l&&i)for(S=0;S<f;S++)i[S]>1?i[S]>2?k[S]=6.5+(i[S]-2)**2.5:k[S]=6.5+100*(2-i[S])**4:k[S]=1;return{bandCount:f,outMin:p/g,outMax:d/g,minCutOff:u,maxCutOff:c,factor:y,useGamma:l,gamma:l?i:[1,1,1],gammaCorrection:l?k:[1,1,1],colormap:s,colormapOffset:o,stretchType:t.stretchType,type:\"stretch\"}}_generateShadedReliefWebGLParams(e,t=!1,r={x:0,y:0}){let s=null,a=null;const n=this.lookup&&this.lookup.colormapLut;e.colorRamp&&n&&(s=n.indexedColormap,a=n.offset);const i={...e,isGCS:t,resolution:r},l=I(i),u=o(this.rasterInfo.statistics)?.[0];return{...l,minValue:u?.min??0,maxValue:u?.max??8e3,hillshadeType:\"traditional\"===e.hillshadeType?0:1,type:\"hillshade\",colormap:s,colormapOffset:a}}_generateVectorFieldWebGLParams(e){const{style:t,inputUnit:r,outputUnit:s,visualVariables:o,symbolTileSize:n,flowRepresentation:i}=e;let l;const u=this.rasterInfo.statistics?.[0].min??0,c=this.rasterInfo.statistics?.[0].max??50,p=o?.find((e=>\"sizeInfo\"===e.type))??{type:\"sizeInfo\",field:\"Magnitude\",maxDataValue:c,maxSize:.8*n,minDataValue:u,minSize:.2*n},d=p.minDataValue??u,h=p.maxDataValue??c,m=a(p.maxSize)&&a(p.minSize)?[p.minSize/n,p.maxSize/n]:[.2,.8];if(\"wind_speed\"===t){const e=(m[0]+m[1])/2;m[0]=m[1]=e}const f=a(d)&&a(h)?[d,h]:null;if(\"classified_arrow\"===t)if(a(d)&&a(h)&&a(p)){l=[];const e=(p.maxDataValue-p.minDataValue)/5;for(let t=0;t<6;t++)l.push(p.minDataValue+e*t)}else l=[0,1e-6,3.5,7,10.5,14];const y=\"flow_to\"===i===(\"ocean_current_kn\"===t||\"ocean_current_m\"===t)?0:Math.PI,b=o?.find((e=>\"rotationInfo\"===e.type));return{breakValues:l,dataRange:f,inputUnit:r,outputUnit:s,symbolTileSize:n,symbolPercentRange:m,style:t||\"single_arrow\",rotation:y,rotationType:this.rasterInfo.storageInfo?.tileInfo&&\"vector-uv\"===this.rasterInfo.dataType?\"geographic\":b?.rotationType||e.rotationType,type:\"vectorField\"}}};function O(e){return f(e)&&0!==e.validPixelCount}e([i({json:{write:!0}})],v.prototype,\"rendererJSON\",void 0),e([i({type:u,json:{write:!0}})],v.prototype,\"rasterInfo\",void 0),e([i({json:{write:!0}})],v.prototype,\"lookup\",void 0),e([i()],v.prototype,\"canRenderInWebGL\",void 0),v=e([l(\"esri.renderers.support.RasterSymbolizer\")],v);const T=v;export{T as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}