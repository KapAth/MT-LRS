{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Error.js\";\nimport { clone as t } from \"../../core/lang.js\";\nimport { isSome as i } from \"../../core/maybe.js\";\nimport { getDeepValue as n } from \"../../core/object.js\";\nimport { numberToJSON as r } from \"../../core/accessorSupport/extensions/serializableProperty/writer.js\";\nimport { isFeatureCollectionLayer as o } from \"../../layers/support/layerUtils.js\";\nconst l = new Set([\"bing-maps\", \"imagery\", \"imagery-tile\", \"map-image\", \"open-street-map\", \"tile\", \"unknown\", \"unsupported\", \"vector-tile\", \"web-tile\", \"wms\", \"wmts\"]),\n      a = new Set([\"csv\", \"feature\", \"geo-rss\", \"geojson\", \"group\", \"imagery\", \"imagery-tile\", \"kml\", \"map-image\", \"map-notes\", \"media\", \"ogc-feature\", \"route\", \"subtype-group\", \"tile\", \"unknown\", \"unsupported\", \"vector-tile\", \"web-tile\", \"wfs\", \"wms\", \"wmts\"]);\n\nfunction s(e) {\n  l.delete(e), a.delete(e);\n}\n\nfunction m(e) {\n  l.add(e), a.add(e);\n}\n\nfunction p(e) {\n  return \"basemap\" === e.layerContainerType ? l : \"operational-layers\" === e.layerContainerType ? a : null;\n}\n\nfunction c(e, t) {\n  if (t.restrictedWebMapWriting) {\n    const n = p(t);\n    return !i(n) || n.has(e.type) && !o(e);\n  }\n\n  return !0;\n}\n\nfunction d(e, t) {\n  if (t) if (o(e)) {\n    const i = n(\"featureCollection.layers\", t),\n          r = i && i[0] && i[0].layerDefinition;\n    r && u(e, r);\n  } else if (\"stream\" === e.type) {\n    u(e, t.layerDefinition = t.layerDefinition || {});\n  } else \"group\" !== e.type && u(e, t);\n}\n\nfunction u(e, t) {\n  \"maxScale\" in e && (t.maxScale = r(e.maxScale) ?? void 0), \"minScale\" in e && (t.minScale = r(e.minScale) ?? void 0);\n}\n\nfunction f(e, t) {\n  if (d(e, t), t && (\"blendMode\" in e && (t.blendMode = e.blendMode, \"normal\" === t.blendMode && delete t.blendMode), t.opacity = r(e.opacity) ?? void 0, t.title = e.title || \"Layer\", t.visibility = e.visible, \"legendEnabled\" in e && \"wmts\" !== e.type)) if (o(e)) {\n    const i = t.featureCollection;\n    i && (i.showLegend = e.legendEnabled);\n  } else t.showLegend = e.legendEnabled;\n}\n\nfunction y(n, r, o) {\n  if (!(\"write\" in n) || !n.write) return o && o.messages && o.messages.push(new e(\"layer:unsupported\", `Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`, {\n    layer: n\n  })), null;\n\n  if (c(n, o)) {\n    const e = {};\n    return n.write(e, o) ? e : null;\n  }\n\n  return i(r) && f(n, r = t(r)), r;\n}\n\nexport { m as disableRestrictedWriting, s as enableRestrictedWriting, y as getLayerJSON };","map":{"version":3,"names":["e","clone","t","isSome","i","getDeepValue","n","numberToJSON","r","isFeatureCollectionLayer","o","l","Set","a","s","delete","m","add","p","layerContainerType","c","restrictedWebMapWriting","has","type","d","layerDefinition","u","maxScale","minScale","f","blendMode","opacity","title","visibility","visible","featureCollection","showLegend","legendEnabled","y","write","messages","push","id","declaredClass","layer","disableRestrictedWriting","enableRestrictedWriting","getLayerJSON"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/webdoc/support/writeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{clone as t}from\"../../core/lang.js\";import{isSome as i}from\"../../core/maybe.js\";import{getDeepValue as n}from\"../../core/object.js\";import{numberToJSON as r}from\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import{isFeatureCollectionLayer as o}from\"../../layers/support/layerUtils.js\";const l=new Set([\"bing-maps\",\"imagery\",\"imagery-tile\",\"map-image\",\"open-street-map\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wms\",\"wmts\"]),a=new Set([\"csv\",\"feature\",\"geo-rss\",\"geojson\",\"group\",\"imagery\",\"imagery-tile\",\"kml\",\"map-image\",\"map-notes\",\"media\",\"ogc-feature\",\"route\",\"subtype-group\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wfs\",\"wms\",\"wmts\"]);function s(e){l.delete(e),a.delete(e)}function m(e){l.add(e),a.add(e)}function p(e){return\"basemap\"===e.layerContainerType?l:\"operational-layers\"===e.layerContainerType?a:null}function c(e,t){if(t.restrictedWebMapWriting){const n=p(t);return!i(n)||n.has(e.type)&&!o(e)}return!0}function d(e,t){if(t)if(o(e)){const i=n(\"featureCollection.layers\",t),r=i&&i[0]&&i[0].layerDefinition;r&&u(e,r)}else if(\"stream\"===e.type){u(e,t.layerDefinition=t.layerDefinition||{})}else\"group\"!==e.type&&u(e,t)}function u(e,t){\"maxScale\"in e&&(t.maxScale=r(e.maxScale)??void 0),\"minScale\"in e&&(t.minScale=r(e.minScale)??void 0)}function f(e,t){if(d(e,t),t&&(\"blendMode\"in e&&(t.blendMode=e.blendMode,\"normal\"===t.blendMode&&delete t.blendMode),t.opacity=r(e.opacity)??void 0,t.title=e.title||\"Layer\",t.visibility=e.visible,\"legendEnabled\"in e&&\"wmts\"!==e.type))if(o(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function y(n,r,o){if(!(\"write\"in n)||!n.write)return o&&o.messages&&o.messages.push(new e(\"layer:unsupported\",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`,{layer:n})),null;if(c(n,o)){const e={};return n.write(e,o)?e:null}return i(r)&&f(n,r=t(r)),r}export{m as disableRestrictedWriting,s as enableRestrictedWriting,y as getLayerJSON};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}