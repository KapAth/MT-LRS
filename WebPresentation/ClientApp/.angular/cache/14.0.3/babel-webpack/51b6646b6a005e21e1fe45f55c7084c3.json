{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/BidiEngine.js\";\nimport { assertIsSome as t } from \"../../../../../core/maybe.js\";\nimport { numericHash as n } from \"../../../../../core/string.js\";\nimport { GeometryType as i, Point as s } from \"../../../../../geometry/support/TileClipper.js\";\nimport { BucketType as a } from \"../enums.js\";\nimport { C_DEG_TO_RAD as o, log2 as r, interpolate as l } from \"../GeometryUtils.js\";\nimport { TILE_PIXEL_RATIO as h, Anchor as x, TILE_COORD_SIZE as c } from \"../Placement.js\";\nimport { SDF_GLYPH_SIZE as d, TextShaping as g } from \"../TextShaping.js\";\nimport f from \"./BaseBucket.js\";\nimport { TextTransform as y, SymbolPlacement as m, RotationAlignment as u, TextWritingMode as p, SymbolAnchor as _, TextJustification as M } from \"../style/StyleDefinition.js\";\nimport { IconLayout as P, TextLayout as I } from \"../style/StyleLayer.js\";\nconst b = 10;\n\nfunction A(e, t) {\n  return e.iconMosaicItem && t.iconMosaicItem ? e.iconMosaicItem.page === t.iconMosaicItem.page ? 0 : e.iconMosaicItem.page - t.iconMosaicItem.page : e.iconMosaicItem && !t.iconMosaicItem ? 1 : !e.iconMosaicItem && t.iconMosaicItem ? -1 : 0;\n}\n\nclass L extends f {\n  constructor(e, t, n, i, s, o, r, l) {\n    super(e, t, l.getSpriteItems()), this.type = a.SYMBOL, this._markerMap = new Map(), this._glyphMap = new Map(), this._glyphBufferDataStorage = new Map(), this._isIconSDF = !1, this._iconVertexBuffer = n, this._iconIndexBuffer = i, this._textVertexBuffer = s, this._textIndexBuffer = o, this._placementEngine = r, this._workerTileHandler = l;\n  }\n\n  get markerPageMap() {\n    return this._markerMap;\n  }\n\n  get glyphsPageMap() {\n    return this._glyphMap;\n  }\n\n  get symbolInstances() {\n    return this._symbolInstances;\n  }\n\n  getResources(e, t, i) {\n    const s = this.layer,\n          a = this.zoom;\n    e && e.setExtent(this.layerExtent);\n    const o = s.getLayoutProperty(\"icon-image\"),\n          r = s.getLayoutProperty(\"text-field\");\n    let l = s.getLayoutProperty(\"text-transform\"),\n        h = s.getLayoutProperty(\"text-font\");\n    const x = [];\n    let c, d, g, f;\n    o && !o.isDataDriven && (c = o.getValue(a)), r && !r.isDataDriven && (d = r.getValue(a)), l && l.isDataDriven || (g = s.getLayoutValue(\"text-transform\", a), l = null), h && h.isDataDriven || (f = s.getLayoutValue(\"text-font\", a), h = null);\n\n    for (const m of this._features) {\n      const u = m.getGeometry(e);\n      if (!u || 0 === u.length) continue;\n\n      let p, _;\n\n      o && (p = o.isDataDriven ? o.getValue(a, m) : this._replaceKeys(c, m.values), p && t(p));\n      let M = !1;\n\n      if (r && (_ = r.isDataDriven ? r.getValue(a, m) : this._replaceKeys(d, m.values), _)) {\n        switch (_ = _.replace(/\\\\n/g, \"\\n\"), l && (g = l.getValue(a, m)), g) {\n          case y.LOWERCASE:\n            _ = _.toLowerCase();\n            break;\n\n          case y.UPPERCASE:\n            _ = _.toUpperCase();\n        }\n\n        if (L._bidiEngine.hasBidiChar(_)) {\n          let e;\n          e = \"rtl\" === L._bidiEngine.checkContextual(_) ? \"IDNNN\" : \"ICNNN\", _ = L._bidiEngine.bidiTransform(_, e, \"VLYSN\"), M = !0;\n        }\n\n        const e = _.length;\n\n        if (e > 0) {\n          h && (f = h.getValue(a, m));\n\n          for (const t of f) {\n            let n = i[t];\n            n || (n = i[t] = new Set());\n\n            for (let t = 0; t < e; t++) {\n              const e = _.charCodeAt(t);\n\n              n.add(e);\n            }\n          }\n        }\n      }\n\n      if (!p && !_) continue;\n      const P = s.getLayoutValue(\"symbol-sort-key\", a, m),\n            I = {\n        feature: m,\n        sprite: p,\n        label: _,\n        rtl: M,\n        geometry: u,\n        hash: (_ ? n(_) : 0) ^ (p ? n(p) : 0),\n        priority: P,\n        textFont: f\n      };\n      x.push(I);\n    }\n\n    this._symbolFeatures = x;\n  }\n\n  processFeatures(e) {\n    e && e.setExtent(this.layerExtent);\n    const n = this.layer,\n          s = this.zoom,\n          a = n.getLayoutValue(\"symbol-placement\", s),\n          r = a !== m.POINT,\n          l = n.getLayoutValue(\"symbol-spacing\", s) * h,\n          f = n.getLayoutProperty(\"icon-image\"),\n          y = n.getLayoutProperty(\"text-field\"),\n          b = f ? new P(n, s, r) : null,\n          V = y ? new I(n, s, r) : null,\n          T = this._workerTileHandler;\n    let w;\n    f && (w = T.getSpriteItems()), this._iconIndexStart = 3 * this._iconIndexBuffer.index, this._textIndexStart = 3 * this._textIndexBuffer.index, this._iconIndexCount = 0, this._textIndexCount = 0, this._markerMap.clear(), this._glyphMap.clear();\n    const B = [];\n    let C = 1;\n    V && V.size && (C = V.size / d);\n    const R = V ? V.maxAngle * o : 0,\n          D = V ? V.size * h : 0;\n\n    for (const o of this._symbolFeatures) {\n      let e;\n      b && w && o.sprite && (e = w[o.sprite], e && e.sdf && (this._isIconSDF = !0));\n      let n;\n      !!e && b.update(s, o.feature);\n      let f = 0;\n      const y = o.label;\n\n      if (y) {\n        t(V), V.update(s, o.feature);\n        const e = r && V.rotationAlignment === u.MAP ? V.keepUpright : V.writingMode && V.writingMode.includes(p.VERTICAL);\n        let i = .5;\n\n        switch (V.anchor) {\n          case _.TOP_LEFT:\n          case _.LEFT:\n          case _.BOTTOM_LEFT:\n            i = 0;\n            break;\n\n          case _.TOP_RIGHT:\n          case _.RIGHT:\n          case _.BOTTOM_RIGHT:\n            i = 1;\n        }\n\n        let a = .5;\n\n        switch (V.anchor) {\n          case _.TOP_LEFT:\n          case _.TOP:\n          case _.TOP_RIGHT:\n            a = 0;\n            break;\n\n          case _.BOTTOM_LEFT:\n          case _.BOTTOM:\n          case _.BOTTOM_RIGHT:\n            a = 1;\n        }\n\n        let l = .5;\n\n        switch (V.justify) {\n          case M.AUTO:\n            l = i;\n            break;\n\n          case M.LEFT:\n            l = 0;\n            break;\n\n          case M.RIGHT:\n            l = 1;\n        }\n\n        const x = V.letterSpacing * d,\n              c = r ? 0 : V.maxWidth * d,\n              m = V.lineHeight * d,\n              P = o.textFont.map(e => T.getGlyphItems(e));\n\n        if (n = new g(P, c, m, x, i, a, l).getShaping(y, o.rtl, e), n && n.length > 0) {\n          let e = 1e30,\n              t = -1e30;\n\n          for (const i of n) e = Math.min(e, i.x), t = Math.max(t, i.x);\n\n          f = (t - e + 2 * d) * C * h;\n        }\n      }\n\n      for (let t of o.geometry) {\n        const s = [];\n\n        if (a === m.LINE) {\n          if (n?.length && V?.size) {\n            const e = V.size * h * (2 + Math.min(2, 4 * Math.abs(V.offset[1])));\n            t = L._smoothVertices(t, e);\n          }\n\n          L._pushAnchors(s, t, l, f);\n        } else a === m.LINE_CENTER ? L._pushCenterAnchor(s, t) : o.feature.type === i.Polygon ? L._pushCentroid(s, t) : s.push(new x(t[0].x, t[0].y));\n\n        for (const i of s) {\n          if (i.x < 0 || i.x > c || i.y < 0 || i.y > c) continue;\n          if (r && f > 0 && V?.rotationAlignment === u.MAP && !L._honorsTextMaxAngle(t, i, f, R, D)) continue;\n          const s = {\n            shaping: n,\n            line: t,\n            iconMosaicItem: e,\n            anchor: i,\n            symbolFeature: o,\n            textColliders: [],\n            iconColliders: [],\n            textVertexRanges: [],\n            iconVertexRanges: []\n          };\n          B.push(s), this._processFeature(s, b, V);\n        }\n      }\n    }\n\n    B.sort(A), this._addPlacedGlyphs(), this._symbolInstances = B;\n  }\n\n  serialize() {\n    let e = 11;\n    e += this.layerUIDs.length, e += 3 * this.markerPageMap.size, e += 3 * this.glyphsPageMap.size, e += L._symbolsSerializationLength(this._symbolInstances), e += this._iconVertexBuffer.array.length, e += this._iconIndexBuffer.array.length, e += this._textVertexBuffer.array.length, e += this._textIndexBuffer.array.length;\n    const t = new Uint32Array(e),\n          n = new Int32Array(t.buffer),\n          i = new Float32Array(t.buffer);\n    let s = 0;\n    t[s++] = this.type, t[s++] = this.layerUIDs.length;\n\n    for (let a = 0; a < this.layerUIDs.length; a++) t[s++] = this.layerUIDs[a];\n\n    t[s++] = this._isIconSDF ? 1 : 0, t[s++] = this.markerPageMap.size;\n\n    for (const [a, [o, r]] of this.markerPageMap) t[s++] = a, t[s++] = o, t[s++] = r;\n\n    t[s++] = this.glyphsPageMap.size;\n\n    for (const [a, [o, r]] of this.glyphsPageMap) t[s++] = a, t[s++] = o, t[s++] = r;\n\n    t[s++] = this._iconVertexBuffer.index / 4, t[s++] = this._textVertexBuffer.index / 4, s = L.serializeSymbols(t, n, i, s, this._symbolInstances), t[s++] = this._iconVertexBuffer.array.length;\n\n    for (let a = 0; a < this._iconVertexBuffer.array.length; a++) n[s++] = this._iconVertexBuffer.array[a];\n\n    t[s++] = this._iconIndexBuffer.array.length;\n\n    for (let a = 0; a < this._iconIndexBuffer.array.length; a++) t[s++] = this._iconIndexBuffer.array[a];\n\n    t[s++] = this._textVertexBuffer.array.length;\n\n    for (let a = 0; a < this._textVertexBuffer.array.length; a++) n[s++] = this._textVertexBuffer.array[a];\n\n    t[s++] = this._textIndexBuffer.array.length;\n\n    for (let a = 0; a < this._textIndexBuffer.array.length; a++) t[s++] = this._textIndexBuffer.array[a];\n\n    return t.buffer;\n  }\n\n  static _symbolsSerializationLength(e) {\n    let t = 0;\n    t += 1;\n\n    for (const n of e || []) {\n      t += 4, t += 1;\n\n      for (const e of n.textColliders) t += b;\n\n      for (const e of n.iconColliders) t += b;\n\n      t += 1, t += 2 * n.textVertexRanges.length, t += 1, t += 2 * n.iconVertexRanges.length;\n    }\n\n    return t;\n  }\n\n  static serializeSymbols(e, t, n, i, s) {\n    s = s || [], t[i++] = s.length;\n\n    for (const a of s) {\n      t[i++] = a.anchor.x, t[i++] = a.anchor.y, t[i++] = a.symbolFeature.hash, t[i++] = a.symbolFeature.priority, t[i++] = a.textColliders.length + a.iconColliders.length;\n\n      for (const e of a.textColliders) t[i++] = e.xTile, t[i++] = e.yTile, t[i++] = e.dxPixels, t[i++] = e.dyPixels, t[i++] = e.hard ? 1 : 0, t[i++] = e.partIndex, n[i++] = e.minLod, n[i++] = e.maxLod, t[i++] = e.width, t[i++] = e.height;\n\n      for (const e of a.iconColliders) t[i++] = e.xTile, t[i++] = e.yTile, t[i++] = e.dxPixels, t[i++] = e.dyPixels, t[i++] = e.hard ? 1 : 0, t[i++] = e.partIndex, n[i++] = e.minLod, n[i++] = e.maxLod, t[i++] = e.width, t[i++] = e.height;\n\n      t[i++] = a.textVertexRanges.length;\n\n      for (const [e, n] of a.textVertexRanges) t[i++] = e, t[i++] = n;\n\n      t[i++] = a.iconVertexRanges.length;\n\n      for (const [e, n] of a.iconVertexRanges) t[i++] = e, t[i++] = n;\n    }\n\n    return i;\n  }\n\n  _replaceKeys(e, t) {\n    return e.replace(/{([^{}]+)}/g, (e, n) => n in t ? t[n] : \"\");\n  }\n\n  _processFeature(e, t, n) {\n    const {\n      line: i,\n      iconMosaicItem: s,\n      shaping: a,\n      anchor: o\n    } = e,\n          l = this.zoom,\n          h = this.layer,\n          x = !!s;\n    let c = !0;\n    x && (c = t?.optional || !s);\n    const d = a && a.length > 0,\n          g = !d || n?.optional;\n    let f, y;\n\n    if (x && (f = this._placementEngine.getIconPlacement(o, s, t)), (f || c) && (d && (y = this._placementEngine.getTextPlacement(o, a, i, n)), y || g)) {\n      if (f && y || (g || c ? g || y ? c || f || (y = null) : f = null : (f = null, y = null)), y) {\n        const t = h.hasDataDrivenText ? h.textMaterial.encodeAttributes(e.symbolFeature.feature, l, h) : null;\n\n        if (this._storePlacedGlyphs(e, y.shapes, l, n.rotationAlignment, t), y.textColliders) {\n          e.textColliders = y.textColliders;\n\n          for (const e of y.textColliders) {\n            e.minLod = Math.max(l + r(e.minLod), 0), e.maxLod = Math.min(l + r(e.maxLod), 25);\n            const t = e.angle;\n\n            if (t) {\n              const n = Math.cos(t),\n                    i = Math.sin(t),\n                    s = e.dxPixels * n - e.dyPixels * i,\n                    a = e.dxPixels * i + e.dyPixels * n,\n                    o = (e.dxPixels + e.width) * n - e.dyPixels * i,\n                    r = (e.dxPixels + e.width) * i + e.dyPixels * n,\n                    l = e.dxPixels * n - (e.dyPixels + e.height) * i,\n                    h = e.dxPixels * i + (e.dyPixels + e.height) * n,\n                    x = (e.dxPixels + e.width) * n - (e.dyPixels + e.height) * i,\n                    c = (e.dxPixels + e.width) * i + (e.dyPixels + e.height) * n,\n                    d = Math.min(s, o, l, x),\n                    g = Math.max(s, o, l, x),\n                    f = Math.min(a, r, h, c),\n                    y = Math.max(a, r, h, c);\n              e.dxPixels = d, e.dyPixels = f, e.width = g - d, e.height = y - f;\n            }\n          }\n        }\n      }\n\n      if (f) {\n        const n = h.hasDataDrivenIcon ? h.iconMaterial.encodeAttributes(e.symbolFeature.feature, l, h) : null;\n\n        if (this._addPlacedIcons(e, f.shapes, l, s.page, t.rotationAlignment === u.VIEWPORT, n), f.iconColliders) {\n          e.iconColliders = f.iconColliders;\n\n          for (const e of f.iconColliders) {\n            e.minLod = Math.max(l + r(e.minLod), 0), e.maxLod = Math.min(l + r(e.maxLod), 25);\n            const t = e.angle;\n\n            if (t) {\n              const n = Math.cos(t),\n                    i = Math.sin(t),\n                    s = e.dxPixels * n - e.dyPixels * i,\n                    a = e.dxPixels * i + e.dyPixels * n,\n                    o = (e.dxPixels + e.width) * n - e.dyPixels * i,\n                    r = (e.dxPixels + e.width) * i + e.dyPixels * n,\n                    l = e.dxPixels * n - (e.dyPixels + e.height) * i,\n                    h = e.dxPixels * i + (e.dyPixels + e.height) * n,\n                    x = (e.dxPixels + e.width) * n - (e.dyPixels + e.height) * i,\n                    c = (e.dxPixels + e.width) * i + (e.dyPixels + e.height) * n,\n                    d = Math.min(s, o, l, x),\n                    g = Math.max(s, o, l, x),\n                    f = Math.min(a, r, h, c),\n                    y = Math.max(a, r, h, c);\n              e.dxPixels = d, e.dyPixels = f, e.width = g - d, e.height = y - f;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  _addPlacedIcons(e, t, n, i, s, a) {\n    const o = Math.max(n - 1, 0),\n          l = this._iconVertexBuffer,\n          h = this._iconIndexBuffer,\n          x = this._markerMap;\n\n    for (const c of t) {\n      const t = s ? 0 : Math.max(n + r(c.minzoom), o),\n            d = s ? 25 : Math.min(n + r(c.maxzoom), 25);\n      if (d <= t) continue;\n      const g = c.tl,\n            f = c.tr,\n            y = c.bl,\n            m = c.br,\n            u = c.mosaicRect,\n            p = c.labelAngle,\n            _ = c.minAngle,\n            M = c.maxAngle,\n            P = c.anchor,\n            I = l.index,\n            b = u.x,\n            A = u.y,\n            L = b + u.width,\n            V = A + u.height,\n            T = l.index;\n      l.add(P.x, P.y, g.x, g.y, b, A, p, _, M, t, d, a), l.add(P.x, P.y, f.x, f.y, L, A, p, _, M, t, d, a), l.add(P.x, P.y, y.x, y.y, b, V, p, _, M, t, d, a), l.add(P.x, P.y, m.x, m.y, L, V, p, _, M, t, d, a), e.iconVertexRanges.length > 0 && e.iconVertexRanges[0][0] + e.iconVertexRanges[0][1] === T ? e.iconVertexRanges[0][1] += 4 : e.iconVertexRanges.push([T, 4]), h.add(I + 0, I + 1, I + 2), h.add(I + 1, I + 2, I + 3), x.has(i) ? x.get(i)[1] += 6 : x.set(i, [this._iconIndexStart + this._iconIndexCount, 6]), this._iconIndexCount += 6;\n    }\n  }\n\n  _addPlacedGlyphs() {\n    const e = this._textVertexBuffer,\n          t = this._textIndexBuffer,\n          n = this._glyphMap;\n\n    for (const [i, s] of this._glyphBufferDataStorage) for (const a of s) {\n      const s = e.index,\n            o = a.symbolInstance,\n            r = a.ddAttributes,\n            l = e.index;\n      e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.tl[0], a.tl[1], a.xmin, a.ymin, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.tr[0], a.tr[1], a.xmax, a.ymin, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.bl[0], a.bl[1], a.xmin, a.ymax, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), e.add(a.glyphAnchor[0], a.glyphAnchor[1], a.br[0], a.br[1], a.xmax, a.ymax, a.labelAngle, a.minAngle, a.maxAngle, a.minLod, a.maxLod, r), o.textVertexRanges.length > 0 && o.textVertexRanges[0][0] + o.textVertexRanges[0][1] === l ? o.textVertexRanges[0][1] += 4 : o.textVertexRanges.push([l, 4]), t.add(s + 0, s + 1, s + 2), t.add(s + 1, s + 2, s + 3), n.has(i) ? n.get(i)[1] += 6 : n.set(i, [this._textIndexStart + this._textIndexCount, 6]), this._textIndexCount += 6;\n    }\n\n    this._glyphBufferDataStorage.clear();\n  }\n\n  _storePlacedGlyphs(e, t, n, i, s) {\n    const a = Math.max(n - 1, 0),\n          o = i === u.VIEWPORT;\n\n    let l, h, x, c, d, g, f, y, m, p, _;\n\n    for (const u of t) {\n      if (l = o ? 0 : Math.max(n + r(u.minzoom), a), h = o ? 25 : Math.min(n + r(u.maxzoom), 25), h <= l) continue;\n      x = u.tl, c = u.tr, d = u.bl, g = u.br, f = u.labelAngle, y = u.minAngle, m = u.maxAngle, p = u.anchor, _ = u.mosaicRect, this._glyphBufferDataStorage.has(u.page) || this._glyphBufferDataStorage.set(u.page, []);\n\n      this._glyphBufferDataStorage.get(u.page).push({\n        glyphAnchor: [p.x, p.y],\n        tl: [x.x, x.y],\n        tr: [c.x, c.y],\n        bl: [d.x, d.y],\n        br: [g.x, g.y],\n        xmin: _.x,\n        ymin: _.y,\n        xmax: _.x + _.width,\n        ymax: _.y + _.height,\n        labelAngle: f,\n        minAngle: y,\n        maxAngle: m,\n        minLod: l,\n        maxLod: h,\n        placementLod: a,\n        symbolInstance: e,\n        ddAttributes: s\n      });\n    }\n  }\n\n  static _pushAnchors(e, t, n, i) {\n    n += i;\n    let a = 0;\n    const o = t.length - 1;\n\n    for (let l = 0; l < o; l++) a += s.distance(t[l], t[l + 1]);\n\n    let r = i || n;\n    if (r *= .5, a <= r) return;\n    const h = r / a;\n    let c = 0,\n        d = -(n = a / Math.max(Math.round(a / n), 1)) / 2;\n    const g = t.length - 1;\n\n    for (let s = 0; s < g; s++) {\n      const i = t[s],\n            a = t[s + 1],\n            o = a.x - i.x,\n            r = a.y - i.y,\n            g = Math.sqrt(o * o + r * r);\n      let f;\n\n      for (; d + n < c + g;) {\n        d += n;\n        const t = (d - c) / g,\n              y = l(i.x, a.x, t),\n              m = l(i.y, a.y, t);\n        void 0 === f && (f = Math.atan2(r, o)), e.push(new x(y, m, f, s, h));\n      }\n\n      c += g;\n    }\n  }\n\n  static _pushCenterAnchor(e, t) {\n    let n = 0;\n    const i = t.length - 1;\n\n    for (let l = 0; l < i; l++) n += s.distance(t[l], t[l + 1]);\n\n    const a = n / 2;\n    let o = 0;\n    const r = t.length - 1;\n\n    for (let s = 0; s < r; s++) {\n      const n = t[s],\n            i = t[s + 1],\n            r = i.x - n.x,\n            h = i.y - n.y,\n            c = Math.sqrt(r * r + h * h);\n\n      if (a < o + c) {\n        const t = (a - o) / c,\n              d = l(n.x, i.x, t),\n              g = l(n.y, i.y, t),\n              f = Math.atan2(h, r);\n        return void e.push(new x(d, g, f, s, 0));\n      }\n\n      o += c;\n    }\n  }\n\n  static _deviation(e, t, n) {\n    const i = (t.x - e.x) * (n.x - t.x) + (t.y - e.y) * (n.y - t.y),\n          s = (t.x - e.x) * (n.y - t.y) - (t.y - e.y) * (n.x - t.x);\n    return Math.atan2(s, i);\n  }\n\n  static _honorsTextMaxAngle(e, t, n, i, a) {\n    let o = 0;\n    const r = n / 2;\n    let l = new s(t.x, t.y),\n        h = t.segment + 1;\n\n    for (; o > -r;) {\n      if (--h, h < 0) return !1;\n      o -= s.distance(e[h], l), l = e[h];\n    }\n\n    o += s.distance(e[h], e[h + 1]);\n    const x = [];\n    let c = 0;\n    const d = e.length;\n\n    for (; o < r;) {\n      const t = e[h];\n      let n,\n          r = h;\n\n      do {\n        if (++r, r === d) return !1;\n        n = e[r];\n      } while (n.isEqual(t));\n\n      let l,\n          g = r;\n\n      do {\n        if (++g, g === d) return !1;\n        l = e[g];\n      } while (l.isEqual(n));\n\n      const f = this._deviation(t, n, l);\n\n      for (x.push({\n        deviation: f,\n        distToAnchor: o\n      }), c += f; o - x[0].distToAnchor > a;) c -= x.shift().deviation;\n\n      if (Math.abs(c) > i) return !1;\n      o += s.distance(n, l), h = r;\n    }\n\n    return !0;\n  }\n\n  static _smoothVertices(e, t) {\n    if (t <= 0) return e;\n    let n = e.length;\n    if (n < 3) return e;\n    const i = [];\n    let a = 0,\n        o = 0;\n    i.push(0);\n\n    for (let y = 1; y < n; y++) {\n      const t = s.distance(e[y], e[y - 1]);\n      t > 0 && (a += t, i.push(a), o++, o !== y && (e[o] = e[y]));\n    }\n\n    if (n = o + 1, n < 3) return e;\n    t = Math.min(t, .2 * a);\n    const r = e[0].x,\n          l = e[0].y,\n          h = e[n - 1].x,\n          x = e[n - 1].y,\n          c = s.sub(e[0], e[1]);\n    c.normalize(), e[0].x += t * c.x, e[0].y += t * c.y, c.assignSub(e[n - 1], e[n - 2]), c.normalize(), e[n - 1].x += t * c.x, e[n - 1].y += t * c.y, i[0] -= t, i[n - 1] += t;\n    const d = [];\n    d.push(new s(r, l));\n    const g = 1e-6,\n          f = .5 * t;\n\n    for (let y = 1; y < n - 1; y++) {\n      let a = 0,\n          o = 0,\n          r = 0;\n\n      for (let n = y - 1; n >= 0; n--) {\n        const s = f + i[n + 1] - i[y];\n        if (s < 0) break;\n        const l = i[n + 1] - i[n],\n              h = i[y] - i[n] < f ? 1 : s / l;\n        if (h < g) break;\n        const x = h * h,\n              c = h * s - .5 * x * l,\n              d = h * l / t,\n              m = e[n + 1],\n              u = e[n].x - m.x,\n              p = e[n].y - m.y;\n        a += d / c * (m.x * h * s + .5 * x * (s * u - l * m.x) - x * h * l * u / 3), o += d / c * (m.y * h * s + .5 * x * (s * p - l * m.y) - x * h * l * p / 3), r += d;\n      }\n\n      for (let s = y + 1; s < n; s++) {\n        const n = f - i[s - 1] + i[y];\n        if (n < 0) break;\n        const l = i[s] - i[s - 1],\n              h = i[s] - i[y] < f ? 1 : n / l;\n        if (h < g) break;\n        const x = h * h,\n              c = h * n - .5 * x * l,\n              d = h * l / t,\n              m = e[s - 1],\n              u = e[s].x - m.x,\n              p = e[s].y - m.y;\n        a += d / c * (m.x * h * n + .5 * x * (n * u - l * m.x) - x * h * l * u / 3), o += d / c * (m.y * h * n + .5 * x * (n * p - l * m.y) - x * h * l * p / 3), r += d;\n      }\n\n      d.push(new s(a / r, o / r));\n    }\n\n    return d.push(new s(h, x)), e[0].x = r, e[0].y = l, e[n - 1].x = h, e[n - 1].y = x, d;\n  }\n\n  static _pushCentroid(e, t) {\n    const n = 0,\n          i = 0,\n          s = 4096,\n          a = 4096,\n          o = t.length - 1;\n    let r = 0,\n        l = 0,\n        h = 0,\n        c = t[0].x,\n        d = t[0].y;\n    c > s && (c = s), c < n && (c = n), d > a && (d = a), d < i && (d = i);\n\n    for (let x = 1; x < o; x++) {\n      let e = t[x].x,\n          o = t[x].y,\n          g = t[x + 1].x,\n          f = t[x + 1].y;\n      e > s && (e = s), e < n && (e = n), o > a && (o = a), o < i && (o = i), g > s && (g = s), g < n && (g = n), f > a && (f = a), f < i && (f = i);\n      const y = (e - c) * (f - d) - (g - c) * (o - d);\n      r += y * (c + e + g), l += y * (d + o + f), h += y;\n    }\n\n    r /= 3 * h, l /= 3 * h, isNaN(r) || isNaN(l) || e.push(new x(r, l));\n  }\n\n}\n\nL._bidiEngine = new e();\nexport { L as default };","map":{"version":3,"names":["e","assertIsSome","t","numericHash","n","GeometryType","i","Point","s","BucketType","a","C_DEG_TO_RAD","o","log2","r","interpolate","l","TILE_PIXEL_RATIO","h","Anchor","x","TILE_COORD_SIZE","c","SDF_GLYPH_SIZE","d","TextShaping","g","f","TextTransform","y","SymbolPlacement","m","RotationAlignment","u","TextWritingMode","p","SymbolAnchor","_","TextJustification","M","IconLayout","P","TextLayout","I","b","A","iconMosaicItem","page","L","constructor","getSpriteItems","type","SYMBOL","_markerMap","Map","_glyphMap","_glyphBufferDataStorage","_isIconSDF","_iconVertexBuffer","_iconIndexBuffer","_textVertexBuffer","_textIndexBuffer","_placementEngine","_workerTileHandler","markerPageMap","glyphsPageMap","symbolInstances","_symbolInstances","getResources","layer","zoom","setExtent","layerExtent","getLayoutProperty","isDataDriven","getValue","getLayoutValue","_features","getGeometry","length","_replaceKeys","values","replace","LOWERCASE","toLowerCase","UPPERCASE","toUpperCase","_bidiEngine","hasBidiChar","checkContextual","bidiTransform","Set","charCodeAt","add","feature","sprite","label","rtl","geometry","hash","priority","textFont","push","_symbolFeatures","processFeatures","POINT","V","T","w","_iconIndexStart","index","_textIndexStart","_iconIndexCount","_textIndexCount","clear","B","C","size","R","maxAngle","D","sdf","update","rotationAlignment","MAP","keepUpright","writingMode","includes","VERTICAL","anchor","TOP_LEFT","LEFT","BOTTOM_LEFT","TOP_RIGHT","RIGHT","BOTTOM_RIGHT","TOP","BOTTOM","justify","AUTO","letterSpacing","maxWidth","lineHeight","map","getGlyphItems","getShaping","Math","min","max","LINE","abs","offset","_smoothVertices","_pushAnchors","LINE_CENTER","_pushCenterAnchor","Polygon","_pushCentroid","_honorsTextMaxAngle","shaping","line","symbolFeature","textColliders","iconColliders","textVertexRanges","iconVertexRanges","_processFeature","sort","_addPlacedGlyphs","serialize","layerUIDs","_symbolsSerializationLength","array","Uint32Array","Int32Array","buffer","Float32Array","serializeSymbols","xTile","yTile","dxPixels","dyPixels","hard","partIndex","minLod","maxLod","width","height","optional","getIconPlacement","getTextPlacement","hasDataDrivenText","textMaterial","encodeAttributes","_storePlacedGlyphs","shapes","angle","cos","sin","hasDataDrivenIcon","iconMaterial","_addPlacedIcons","VIEWPORT","minzoom","maxzoom","tl","tr","bl","br","mosaicRect","labelAngle","minAngle","has","get","set","symbolInstance","ddAttributes","glyphAnchor","xmin","ymin","xmax","ymax","placementLod","distance","round","sqrt","atan2","_deviation","segment","isEqual","deviation","distToAnchor","shift","sub","normalize","assignSub","isNaN","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/vectorTiles/buckets/SymbolBucket.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/BidiEngine.js\";import{assertIsSome as t}from\"../../../../../core/maybe.js\";import{numericHash as n}from\"../../../../../core/string.js\";import{GeometryType as i,Point as s}from\"../../../../../geometry/support/TileClipper.js\";import{BucketType as a}from\"../enums.js\";import{C_DEG_TO_RAD as o,log2 as r,interpolate as l}from\"../GeometryUtils.js\";import{TILE_PIXEL_RATIO as h,Anchor as x,TILE_COORD_SIZE as c}from\"../Placement.js\";import{SDF_GLYPH_SIZE as d,TextShaping as g}from\"../TextShaping.js\";import f from\"./BaseBucket.js\";import{TextTransform as y,SymbolPlacement as m,RotationAlignment as u,TextWritingMode as p,SymbolAnchor as _,TextJustification as M}from\"../style/StyleDefinition.js\";import{IconLayout as P,TextLayout as I}from\"../style/StyleLayer.js\";const b=10;function A(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}class L extends f{constructor(e,t,n,i,s,o,r,l){super(e,t,l.getSpriteItems()),this.type=a.SYMBOL,this._markerMap=new Map,this._glyphMap=new Map,this._glyphBufferDataStorage=new Map,this._isIconSDF=!1,this._iconVertexBuffer=n,this._iconIndexBuffer=i,this._textVertexBuffer=s,this._textIndexBuffer=o,this._placementEngine=r,this._workerTileHandler=l}get markerPageMap(){return this._markerMap}get glyphsPageMap(){return this._glyphMap}get symbolInstances(){return this._symbolInstances}getResources(e,t,i){const s=this.layer,a=this.zoom;e&&e.setExtent(this.layerExtent);const o=s.getLayoutProperty(\"icon-image\"),r=s.getLayoutProperty(\"text-field\");let l=s.getLayoutProperty(\"text-transform\"),h=s.getLayoutProperty(\"text-font\");const x=[];let c,d,g,f;o&&!o.isDataDriven&&(c=o.getValue(a)),r&&!r.isDataDriven&&(d=r.getValue(a)),l&&l.isDataDriven||(g=s.getLayoutValue(\"text-transform\",a),l=null),h&&h.isDataDriven||(f=s.getLayoutValue(\"text-font\",a),h=null);for(const m of this._features){const u=m.getGeometry(e);if(!u||0===u.length)continue;let p,_;o&&(p=o.isDataDriven?o.getValue(a,m):this._replaceKeys(c,m.values),p&&t(p));let M=!1;if(r&&(_=r.isDataDriven?r.getValue(a,m):this._replaceKeys(d,m.values),_)){switch(_=_.replace(/\\\\n/g,\"\\n\"),l&&(g=l.getValue(a,m)),g){case y.LOWERCASE:_=_.toLowerCase();break;case y.UPPERCASE:_=_.toUpperCase()}if(L._bidiEngine.hasBidiChar(_)){let e;e=\"rtl\"===L._bidiEngine.checkContextual(_)?\"IDNNN\":\"ICNNN\",_=L._bidiEngine.bidiTransform(_,e,\"VLYSN\"),M=!0}const e=_.length;if(e>0){h&&(f=h.getValue(a,m));for(const t of f){let n=i[t];n||(n=i[t]=new Set);for(let t=0;t<e;t++){const e=_.charCodeAt(t);n.add(e)}}}}if(!p&&!_)continue;const P=s.getLayoutValue(\"symbol-sort-key\",a,m),I={feature:m,sprite:p,label:_,rtl:M,geometry:u,hash:(_?n(_):0)^(p?n(p):0),priority:P,textFont:f};x.push(I)}this._symbolFeatures=x}processFeatures(e){e&&e.setExtent(this.layerExtent);const n=this.layer,s=this.zoom,a=n.getLayoutValue(\"symbol-placement\",s),r=a!==m.POINT,l=n.getLayoutValue(\"symbol-spacing\",s)*h,f=n.getLayoutProperty(\"icon-image\"),y=n.getLayoutProperty(\"text-field\"),b=f?new P(n,s,r):null,V=y?new I(n,s,r):null,T=this._workerTileHandler;let w;f&&(w=T.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();const B=[];let C=1;V&&V.size&&(C=V.size/d);const R=V?V.maxAngle*o:0,D=V?V.size*h:0;for(const o of this._symbolFeatures){let e;b&&w&&o.sprite&&(e=w[o.sprite],e&&e.sdf&&(this._isIconSDF=!0));let n;!!e&&b.update(s,o.feature);let f=0;const y=o.label;if(y){t(V),V.update(s,o.feature);const e=r&&V.rotationAlignment===u.MAP?V.keepUpright:V.writingMode&&V.writingMode.includes(p.VERTICAL);let i=.5;switch(V.anchor){case _.TOP_LEFT:case _.LEFT:case _.BOTTOM_LEFT:i=0;break;case _.TOP_RIGHT:case _.RIGHT:case _.BOTTOM_RIGHT:i=1}let a=.5;switch(V.anchor){case _.TOP_LEFT:case _.TOP:case _.TOP_RIGHT:a=0;break;case _.BOTTOM_LEFT:case _.BOTTOM:case _.BOTTOM_RIGHT:a=1}let l=.5;switch(V.justify){case M.AUTO:l=i;break;case M.LEFT:l=0;break;case M.RIGHT:l=1}const x=V.letterSpacing*d,c=r?0:V.maxWidth*d,m=V.lineHeight*d,P=o.textFont.map((e=>T.getGlyphItems(e)));if(n=new g(P,c,m,x,i,a,l).getShaping(y,o.rtl,e),n&&n.length>0){let e=1e30,t=-1e30;for(const i of n)e=Math.min(e,i.x),t=Math.max(t,i.x);f=(t-e+2*d)*C*h}}for(let t of o.geometry){const s=[];if(a===m.LINE){if(n?.length&&V?.size){const e=V.size*h*(2+Math.min(2,4*Math.abs(V.offset[1])));t=L._smoothVertices(t,e)}L._pushAnchors(s,t,l,f)}else a===m.LINE_CENTER?L._pushCenterAnchor(s,t):o.feature.type===i.Polygon?L._pushCentroid(s,t):s.push(new x(t[0].x,t[0].y));for(const i of s){if(i.x<0||i.x>c||i.y<0||i.y>c)continue;if(r&&f>0&&V?.rotationAlignment===u.MAP&&!L._honorsTextMaxAngle(t,i,f,R,D))continue;const s={shaping:n,line:t,iconMosaicItem:e,anchor:i,symbolFeature:o,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};B.push(s),this._processFeature(s,b,V)}}}B.sort(A),this._addPlacedGlyphs(),this._symbolInstances=B}serialize(){let e=11;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=L._symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;const t=new Uint32Array(e),n=new Int32Array(t.buffer),i=new Float32Array(t.buffer);let s=0;t[s++]=this.type,t[s++]=this.layerUIDs.length;for(let a=0;a<this.layerUIDs.length;a++)t[s++]=this.layerUIDs[a];t[s++]=this._isIconSDF?1:0,t[s++]=this.markerPageMap.size;for(const[a,[o,r]]of this.markerPageMap)t[s++]=a,t[s++]=o,t[s++]=r;t[s++]=this.glyphsPageMap.size;for(const[a,[o,r]]of this.glyphsPageMap)t[s++]=a,t[s++]=o,t[s++]=r;t[s++]=this._iconVertexBuffer.index/4,t[s++]=this._textVertexBuffer.index/4,s=L.serializeSymbols(t,n,i,s,this._symbolInstances),t[s++]=this._iconVertexBuffer.array.length;for(let a=0;a<this._iconVertexBuffer.array.length;a++)n[s++]=this._iconVertexBuffer.array[a];t[s++]=this._iconIndexBuffer.array.length;for(let a=0;a<this._iconIndexBuffer.array.length;a++)t[s++]=this._iconIndexBuffer.array[a];t[s++]=this._textVertexBuffer.array.length;for(let a=0;a<this._textVertexBuffer.array.length;a++)n[s++]=this._textVertexBuffer.array[a];t[s++]=this._textIndexBuffer.array.length;for(let a=0;a<this._textIndexBuffer.array.length;a++)t[s++]=this._textIndexBuffer.array[a];return t.buffer}static _symbolsSerializationLength(e){let t=0;t+=1;for(const n of e||[]){t+=4,t+=1;for(const e of n.textColliders)t+=b;for(const e of n.iconColliders)t+=b;t+=1,t+=2*n.textVertexRanges.length,t+=1,t+=2*n.iconVertexRanges.length}return t}static serializeSymbols(e,t,n,i,s){s=s||[],t[i++]=s.length;for(const a of s){t[i++]=a.anchor.x,t[i++]=a.anchor.y,t[i++]=a.symbolFeature.hash,t[i++]=a.symbolFeature.priority,t[i++]=a.textColliders.length+a.iconColliders.length;for(const e of a.textColliders)t[i++]=e.xTile,t[i++]=e.yTile,t[i++]=e.dxPixels,t[i++]=e.dyPixels,t[i++]=e.hard?1:0,t[i++]=e.partIndex,n[i++]=e.minLod,n[i++]=e.maxLod,t[i++]=e.width,t[i++]=e.height;for(const e of a.iconColliders)t[i++]=e.xTile,t[i++]=e.yTile,t[i++]=e.dxPixels,t[i++]=e.dyPixels,t[i++]=e.hard?1:0,t[i++]=e.partIndex,n[i++]=e.minLod,n[i++]=e.maxLod,t[i++]=e.width,t[i++]=e.height;t[i++]=a.textVertexRanges.length;for(const[e,n]of a.textVertexRanges)t[i++]=e,t[i++]=n;t[i++]=a.iconVertexRanges.length;for(const[e,n]of a.iconVertexRanges)t[i++]=e,t[i++]=n}return i}_replaceKeys(e,t){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?t[n]:\"\"))}_processFeature(e,t,n){const{line:i,iconMosaicItem:s,shaping:a,anchor:o}=e,l=this.zoom,h=this.layer,x=!!s;let c=!0;x&&(c=t?.optional||!s);const d=a&&a.length>0,g=!d||n?.optional;let f,y;if(x&&(f=this._placementEngine.getIconPlacement(o,s,t)),(f||c)&&(d&&(y=this._placementEngine.getTextPlacement(o,a,i,n)),y||g)){if(f&&y||(g||c?g||y?c||f||(y=null):f=null:(f=null,y=null)),y){const t=h.hasDataDrivenText?h.textMaterial.encodeAttributes(e.symbolFeature.feature,l,h):null;if(this._storePlacedGlyphs(e,y.shapes,l,n.rotationAlignment,t),y.textColliders){e.textColliders=y.textColliders;for(const e of y.textColliders){e.minLod=Math.max(l+r(e.minLod),0),e.maxLod=Math.min(l+r(e.maxLod),25);const t=e.angle;if(t){const n=Math.cos(t),i=Math.sin(t),s=e.dxPixels*n-e.dyPixels*i,a=e.dxPixels*i+e.dyPixels*n,o=(e.dxPixels+e.width)*n-e.dyPixels*i,r=(e.dxPixels+e.width)*i+e.dyPixels*n,l=e.dxPixels*n-(e.dyPixels+e.height)*i,h=e.dxPixels*i+(e.dyPixels+e.height)*n,x=(e.dxPixels+e.width)*n-(e.dyPixels+e.height)*i,c=(e.dxPixels+e.width)*i+(e.dyPixels+e.height)*n,d=Math.min(s,o,l,x),g=Math.max(s,o,l,x),f=Math.min(a,r,h,c),y=Math.max(a,r,h,c);e.dxPixels=d,e.dyPixels=f,e.width=g-d,e.height=y-f}}}}if(f){const n=h.hasDataDrivenIcon?h.iconMaterial.encodeAttributes(e.symbolFeature.feature,l,h):null;if(this._addPlacedIcons(e,f.shapes,l,s.page,t.rotationAlignment===u.VIEWPORT,n),f.iconColliders){e.iconColliders=f.iconColliders;for(const e of f.iconColliders){e.minLod=Math.max(l+r(e.minLod),0),e.maxLod=Math.min(l+r(e.maxLod),25);const t=e.angle;if(t){const n=Math.cos(t),i=Math.sin(t),s=e.dxPixels*n-e.dyPixels*i,a=e.dxPixels*i+e.dyPixels*n,o=(e.dxPixels+e.width)*n-e.dyPixels*i,r=(e.dxPixels+e.width)*i+e.dyPixels*n,l=e.dxPixels*n-(e.dyPixels+e.height)*i,h=e.dxPixels*i+(e.dyPixels+e.height)*n,x=(e.dxPixels+e.width)*n-(e.dyPixels+e.height)*i,c=(e.dxPixels+e.width)*i+(e.dyPixels+e.height)*n,d=Math.min(s,o,l,x),g=Math.max(s,o,l,x),f=Math.min(a,r,h,c),y=Math.max(a,r,h,c);e.dxPixels=d,e.dyPixels=f,e.width=g-d,e.height=y-f}}}}}}_addPlacedIcons(e,t,n,i,s,a){const o=Math.max(n-1,0),l=this._iconVertexBuffer,h=this._iconIndexBuffer,x=this._markerMap;for(const c of t){const t=s?0:Math.max(n+r(c.minzoom),o),d=s?25:Math.min(n+r(c.maxzoom),25);if(d<=t)continue;const g=c.tl,f=c.tr,y=c.bl,m=c.br,u=c.mosaicRect,p=c.labelAngle,_=c.minAngle,M=c.maxAngle,P=c.anchor,I=l.index,b=u.x,A=u.y,L=b+u.width,V=A+u.height,T=l.index;l.add(P.x,P.y,g.x,g.y,b,A,p,_,M,t,d,a),l.add(P.x,P.y,f.x,f.y,L,A,p,_,M,t,d,a),l.add(P.x,P.y,y.x,y.y,b,V,p,_,M,t,d,a),l.add(P.x,P.y,m.x,m.y,L,V,p,_,M,t,d,a),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===T?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([T,4]),h.add(I+0,I+1,I+2),h.add(I+1,I+2,I+3),x.has(i)?x.get(i)[1]+=6:x.set(i,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}_addPlacedGlyphs(){const e=this._textVertexBuffer,t=this._textIndexBuffer,n=this._glyphMap;for(const[i,s]of this._glyphBufferDataStorage)for(const a of s){const s=e.index,o=a.symbolInstance,r=a.ddAttributes,l=e.index;e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tl[0],a.tl[1],a.xmin,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.tr[0],a.tr[1],a.xmax,a.ymin,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.bl[0],a.bl[1],a.xmin,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),e.add(a.glyphAnchor[0],a.glyphAnchor[1],a.br[0],a.br[1],a.xmax,a.ymax,a.labelAngle,a.minAngle,a.maxAngle,a.minLod,a.maxLod,r),o.textVertexRanges.length>0&&o.textVertexRanges[0][0]+o.textVertexRanges[0][1]===l?o.textVertexRanges[0][1]+=4:o.textVertexRanges.push([l,4]),t.add(s+0,s+1,s+2),t.add(s+1,s+2,s+3),n.has(i)?n.get(i)[1]+=6:n.set(i,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}this._glyphBufferDataStorage.clear()}_storePlacedGlyphs(e,t,n,i,s){const a=Math.max(n-1,0),o=i===u.VIEWPORT;let l,h,x,c,d,g,f,y,m,p,_;for(const u of t){if(l=o?0:Math.max(n+r(u.minzoom),a),h=o?25:Math.min(n+r(u.maxzoom),25),h<=l)continue;x=u.tl,c=u.tr,d=u.bl,g=u.br,f=u.labelAngle,y=u.minAngle,m=u.maxAngle,p=u.anchor,_=u.mosaicRect,this._glyphBufferDataStorage.has(u.page)||this._glyphBufferDataStorage.set(u.page,[]);this._glyphBufferDataStorage.get(u.page).push({glyphAnchor:[p.x,p.y],tl:[x.x,x.y],tr:[c.x,c.y],bl:[d.x,d.y],br:[g.x,g.y],xmin:_.x,ymin:_.y,xmax:_.x+_.width,ymax:_.y+_.height,labelAngle:f,minAngle:y,maxAngle:m,minLod:l,maxLod:h,placementLod:a,symbolInstance:e,ddAttributes:s})}}static _pushAnchors(e,t,n,i){n+=i;let a=0;const o=t.length-1;for(let l=0;l<o;l++)a+=s.distance(t[l],t[l+1]);let r=i||n;if(r*=.5,a<=r)return;const h=r/a;let c=0,d=-(n=a/Math.max(Math.round(a/n),1))/2;const g=t.length-1;for(let s=0;s<g;s++){const i=t[s],a=t[s+1],o=a.x-i.x,r=a.y-i.y,g=Math.sqrt(o*o+r*r);let f;for(;d+n<c+g;){d+=n;const t=(d-c)/g,y=l(i.x,a.x,t),m=l(i.y,a.y,t);void 0===f&&(f=Math.atan2(r,o)),e.push(new x(y,m,f,s,h))}c+=g}}static _pushCenterAnchor(e,t){let n=0;const i=t.length-1;for(let l=0;l<i;l++)n+=s.distance(t[l],t[l+1]);const a=n/2;let o=0;const r=t.length-1;for(let s=0;s<r;s++){const n=t[s],i=t[s+1],r=i.x-n.x,h=i.y-n.y,c=Math.sqrt(r*r+h*h);if(a<o+c){const t=(a-o)/c,d=l(n.x,i.x,t),g=l(n.y,i.y,t),f=Math.atan2(h,r);return void e.push(new x(d,g,f,s,0))}o+=c}}static _deviation(e,t,n){const i=(t.x-e.x)*(n.x-t.x)+(t.y-e.y)*(n.y-t.y),s=(t.x-e.x)*(n.y-t.y)-(t.y-e.y)*(n.x-t.x);return Math.atan2(s,i)}static _honorsTextMaxAngle(e,t,n,i,a){let o=0;const r=n/2;let l=new s(t.x,t.y),h=t.segment+1;for(;o>-r;){if(--h,h<0)return!1;o-=s.distance(e[h],l),l=e[h]}o+=s.distance(e[h],e[h+1]);const x=[];let c=0;const d=e.length;for(;o<r;){const t=e[h];let n,r=h;do{if(++r,r===d)return!1;n=e[r]}while(n.isEqual(t));let l,g=r;do{if(++g,g===d)return!1;l=e[g]}while(l.isEqual(n));const f=this._deviation(t,n,l);for(x.push({deviation:f,distToAnchor:o}),c+=f;o-x[0].distToAnchor>a;)c-=x.shift().deviation;if(Math.abs(c)>i)return!1;o+=s.distance(n,l),h=r}return!0}static _smoothVertices(e,t){if(t<=0)return e;let n=e.length;if(n<3)return e;const i=[];let a=0,o=0;i.push(0);for(let y=1;y<n;y++){const t=s.distance(e[y],e[y-1]);t>0&&(a+=t,i.push(a),o++,o!==y&&(e[o]=e[y]))}if(n=o+1,n<3)return e;t=Math.min(t,.2*a);const r=e[0].x,l=e[0].y,h=e[n-1].x,x=e[n-1].y,c=s.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[n-1],e[n-2]),c.normalize(),e[n-1].x+=t*c.x,e[n-1].y+=t*c.y,i[0]-=t,i[n-1]+=t;const d=[];d.push(new s(r,l));const g=1e-6,f=.5*t;for(let y=1;y<n-1;y++){let a=0,o=0,r=0;for(let n=y-1;n>=0;n--){const s=f+i[n+1]-i[y];if(s<0)break;const l=i[n+1]-i[n],h=i[y]-i[n]<f?1:s/l;if(h<g)break;const x=h*h,c=h*s-.5*x*l,d=h*l/t,m=e[n+1],u=e[n].x-m.x,p=e[n].y-m.y;a+=d/c*(m.x*h*s+.5*x*(s*u-l*m.x)-x*h*l*u/3),o+=d/c*(m.y*h*s+.5*x*(s*p-l*m.y)-x*h*l*p/3),r+=d}for(let s=y+1;s<n;s++){const n=f-i[s-1]+i[y];if(n<0)break;const l=i[s]-i[s-1],h=i[s]-i[y]<f?1:n/l;if(h<g)break;const x=h*h,c=h*n-.5*x*l,d=h*l/t,m=e[s-1],u=e[s].x-m.x,p=e[s].y-m.y;a+=d/c*(m.x*h*n+.5*x*(n*u-l*m.x)-x*h*l*u/3),o+=d/c*(m.y*h*n+.5*x*(n*p-l*m.y)-x*h*l*p/3),r+=d}d.push(new s(a/r,o/r))}return d.push(new s(h,x)),e[0].x=r,e[0].y=l,e[n-1].x=h,e[n-1].y=x,d}static _pushCentroid(e,t){const n=0,i=0,s=4096,a=4096,o=t.length-1;let r=0,l=0,h=0,c=t[0].x,d=t[0].y;c>s&&(c=s),c<n&&(c=n),d>a&&(d=a),d<i&&(d=i);for(let x=1;x<o;x++){let e=t[x].x,o=t[x].y,g=t[x+1].x,f=t[x+1].y;e>s&&(e=s),e<n&&(e=n),o>a&&(o=a),o<i&&(o=i),g>s&&(g=s),g<n&&(g=n),f>a&&(f=a),f<i&&(f=i);const y=(e-c)*(f-d)-(g-c)*(o-d);r+=y*(c+e+g),l+=y*(d+o+f),h+=y}r/=3*h,l/=3*h,isNaN(r)||isNaN(l)||e.push(new x(r,l))}}L._bidiEngine=new e;export{L as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}