{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../core/Collection.js\";\nimport i from \"../core/Error.js\";\nimport o from \"../core/Logger.js\";\nimport { isSome as r, isNone as s } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as n } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as l } from \"../core/promiseUtils.js\";\nimport { property as a } from \"../core/accessorSupport/decorators/property.js\";\nimport { Integer as u } from \"../core/accessorSupport/ensureType.js\";\nimport \"../core/arrayUtils.js\";\nimport { reader as p } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as c } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { n as m } from \"../chunks/vec3.js\";\nimport { f as y } from \"../chunks/vec3f64.js\";\nimport d from \"../geometry/Extent.js\";\nimport f from \"./Layer.js\";\nimport { APIKeyMixin as v } from \"./mixins/APIKeyMixin.js\";\nimport { ArcGISService as h } from \"./mixins/ArcGISService.js\";\nimport { OperationalLayer as b } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as g } from \"./mixins/PortalLayer.js\";\nimport { ScaleRangeLayer as S } from \"./mixins/ScaleRangeLayer.js\";\nimport { SceneService as V } from \"./mixins/SceneService.js\";\nimport { sanitizeUrl as x } from \"./support/arcgisLayerUrl.js\";\nimport { legendEnabled as j, url as w, popupEnabled as I } from \"./support/commonProperties.js\";\nimport T from \"./support/Field.js\";\nimport D from \"./voxel/VoxelSection.js\";\nimport F from \"./voxel/VoxelSimpleShading.js\";\nimport N from \"./voxel/VoxelVariable.js\";\nimport L from \"./voxel/VoxelVariableStyle.js\";\nimport P from \"./voxel/VoxelVolume.js\";\nimport A from \"./voxel/VoxelVolumeIndex.js\";\nimport E from \"./voxel/VoxelVolumeStyle.js\";\nimport { createPopupTemplate as O } from \"../support/popupUtils.js\";\nconst R = \"esri.layers.VoxelLayer\",\n      M = o.getLogger(R);\nlet z = class extends V(h(b(g(S(n(v(f))))))) {\n  constructor(e) {\n    super(e), this.serviceRoot = \"\", this.operationalLayerType = \"Voxel\", this.legendEnabled = !0, this.title = null, this.sections = null, this.currentVariableId = 0, this.volumeStyles = null, this.renderMode = \"volume\", this.variableStyles = null, this.enableSlices = !0, this.enableSections = !0, this.enableDynamicSections = !0, this.enableIsosurfaces = !0, this.shading = new F(), this.opacity = 1, this.variables = new t(), this.volumes = new t(), this.index = null, this.minScale = 0, this.maxScale = 0, this.type = \"voxel\", this.version = {\n      major: Number.NaN,\n      minor: Number.NaN,\n      versionString: \"\"\n    }, this.fullExtent = null, this.popupEnabled = !0, this.popupTemplate = null, this.test = null, this.volumeStyles = new (t.ofType(E))(), this.variableStyles = new (t.ofType(L))(), this.sections = new (t.ofType(D))(), e?.constantUpscaling && (this.test = {\n      constantUpscaling: !0\n    });\n  }\n\n  set url(e) {\n    this._set(\"url\", x(e, M));\n  }\n\n  load(e) {\n    const t = r(e) ? e.signal : null,\n          i = this.loadFromPortal({\n      supportedTypes: [\"Scene Service\"]\n    }, e).catch(l).then(() => this._fetchService(t)).then(() => this.serviceRoot = this.url);\n    return this.addResolvingPromise(i), Promise.resolve(this);\n  }\n\n  read(e, t) {\n    super.read(e, t);\n\n    for (const i of this.volumes) i.spatialReference = this.spatialReference;\n  }\n\n  readVersion(e, t) {\n    return super.parseVersionString(e);\n  }\n\n  validateLayer(e) {\n    if (e.layerType && e.layerType !== this.operationalLayerType) throw new i(\"voxel-layer:layer-type-not-supported\", \"VoxelLayer does not support this layer type\", {\n      layerType: e.layerType\n    });\n    if (isNaN(this.version.major) || isNaN(this.version.minor) || this.version.major < 3) throw new i(\"layer:service-version-not-supported\", \"Service version is not supported.\", {\n      serviceVersion: this.version.versionString,\n      supportedVersions: \"3.x\"\n    });\n    if (this.version.major > 3) throw new i(\"layer:service-version-too-new\", \"Service version is too new.\", {\n      serviceVersion: this.version.versionString,\n      supportedVersions: \"3.x\"\n    });\n  }\n\n  readFullExtent(e, t, i) {\n    if (null != e && \"object\" == typeof e) {\n      const o = d.fromJSON(e, i);\n\n      if (0 === o.zmin && 0 === o.zmax && Array.isArray(t.volumes)) {\n        const e = P.fromJSON(t.volumes[0]);\n\n        if (e.isValid && \"xyt\" !== e.volumeType) {\n          const t = e.dimensions[2];\n\n          if (t.isRegular) {\n            let e = t.regularSpacing.offset,\n                i = t.regularSpacing.offset + t.regularSpacing.scale * (t.size - 1);\n\n            if (e > i) {\n              const t = e;\n              e = i, i = t;\n            }\n\n            o.zmin = e, o.zmax = i;\n          }\n        }\n      }\n\n      return o;\n    }\n\n    return null;\n  }\n\n  get voxelFields() {\n    const e = [new T({\n      name: \"Voxel.ServiceValue\",\n      alias: \"Value\",\n      domain: null,\n      editable: !1,\n      length: 128,\n      type: \"string\"\n    }), new T({\n      name: \"Voxel.ServiceVariableLabel\",\n      alias: \"Variable\",\n      domain: null,\n      editable: !1,\n      length: 128,\n      type: \"string\"\n    }), new T({\n      name: \"Voxel.Position\",\n      alias: \"Voxel Position\",\n      domain: null,\n      editable: !1,\n      length: 128,\n      type: \"string\"\n    })],\n          t = this.getVolume(null);\n\n    if (r(t)) {\n      if (\"xyzt\" === t.volumeType || \"xyt\" === t.volumeType) {\n        const t = new T({\n          name: \"Voxel.ServiceLocalTime\",\n          alias: \"Local Time\",\n          domain: null,\n          editable: !1,\n          length: 128,\n          type: \"string\"\n        });\n        e.push(t);\n        const i = new T({\n          name: \"Voxel.ServiceNativeTime\",\n          alias: \"Native Time\",\n          domain: null,\n          editable: !1,\n          length: 128,\n          type: \"string\"\n        });\n        e.push(i);\n      }\n\n      if (\"xyt\" !== t.volumeType) {\n        const t = new T({\n          name: \"Voxel.ServiceDepth\",\n          alias: \"Depth\",\n          domain: null,\n          editable: !1,\n          length: 128,\n          type: \"string\"\n        });\n        e.push(t);\n      }\n    }\n\n    return e;\n  }\n\n  get defaultPopupTemplate() {\n    return this.createPopupTemplate();\n  }\n\n  createPopupTemplate(e) {\n    const t = this.voxelFields,\n          i = this.title;\n    return O({\n      fields: t,\n      title: i\n    }, e);\n  }\n\n  getConfiguration() {\n    const e = {\n      layerType: this.operationalLayerType,\n      version: this.version.versionString,\n      name: this.title,\n      spatialReference: this.spatialReference,\n      fullExtent: this.fullExtent,\n      volumes: this.volumes.toJSON(),\n      variables: this.variables.toJSON(),\n      index: this.index?.toJSON(),\n      sections: this.getSections(),\n      style: {\n        volumeStyles: this.getVolumeStyles(),\n        currentVariableId: this.currentVariableId,\n        renderMode: this.renderMode,\n        variableStyles: this.getVariableStyles(),\n        enableSections: this.enableSections,\n        enableDynamicSections: this.enableDynamicSections,\n        enableIsosurfaces: this.enableIsosurfaces,\n        enableSlices: this.enableSlices,\n        shading: this.shading\n      }\n    };\n    return e.index && this.index?.isValid() ? JSON.stringify(e) : \"\";\n  }\n\n  getVariableStyle(e) {\n    let t = -1;\n    t = r(e) ? e : this.currentVariableId;\n    if (!this.variableStyles || -1 === t) return null;\n    const i = this.variableStyles.findIndex(e => e.variableId === t);\n    return i < 0 ? null : this.variableStyles.getItemAt(i);\n  }\n\n  getVariable(e) {\n    let t = -1;\n    if (t = r(e) ? e : this.currentVariableId, !this.variables || -1 === t) return null;\n    const i = this.variables.findIndex(e => e.id === t);\n    return i < 0 ? null : this.variables.getItemAt(i);\n  }\n\n  getVolume(e) {\n    const t = this.getVariable(e);\n    return r(t) ? this.volumes.find(({\n      id: e\n    }) => e === t.volumeId) : null;\n  }\n\n  getVolumeStyle(e) {\n    const t = this.getVariable(e);\n    return r(t) ? this.volumeStyles.find(({\n      volumeId: e\n    }) => e === t.volumeId) : null;\n  }\n\n  getColorForContinuousDataValue(e, t, i) {\n    const o = this.getVariable(e);\n    if (s(o) || \"continuous\" !== o.renderingFormat?.continuity) return null;\n    if (!this.variableStyles) return null;\n    const r = this.variableStyles.findIndex(t => t.variableId === e);\n    if (r < 0) return null;\n    const n = this.variableStyles.getItemAt(r);\n    return n.transferFunction ? n.transferFunction.getColorForContinuousDataValue(t, i) : null;\n  }\n\n  getSections() {\n    const e = [];\n\n    for (const t of this.sections) e.push(new D({\n      enabled: t.enabled,\n      href: t.href,\n      id: t.id,\n      label: t.label,\n      normal: t.normal,\n      point: t.point,\n      sizeInPixel: t.sizeInPixel,\n      slices: t.slices,\n      timeId: t.timeId,\n      variableId: t.variableId\n    }));\n\n    return e;\n  }\n\n  getVariableStyles() {\n    const e = [];\n\n    for (const t of this.variableStyles) {\n      const i = this._getVariable(t);\n\n      if (r(i)) {\n        const o = t.clone();\n        o.isosurfaces.length > 4 && (o.isosurfaces = o.isosurfaces.slice(0, 3), M.error(\"A maximum of 4 isosurfaces are supported for Voxel Layers.\"));\n\n        for (const e of o.isosurfaces) if (!e.colorLocked) {\n          const t = this.getColorForContinuousDataValue(o.variableId, e.value, !1);\n          null === t || t.equals(e.color) || (e.color = t);\n        }\n\n        if (\"continuous\" === i.renderingFormat.continuity) (null === o.transferFunction || o.transferFunction.colorStops.length < 2) && M.error(`VoxelVariableStyle for variable ${i.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`), null !== o.transferFunction && (Array.isArray(o.transferFunction.stretchRange) && 2 === o.transferFunction.stretchRange.length || (M.error(`VoxelVariableStyle for variable ${i.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`), o.transferFunction.stretchRange = [0, 1], o.transferFunction.colorStops.removeAll()));else if (\"discrete\" === i.renderingFormat.continuity) if (0 === t.uniqueValues.length) M.error(`VoxelVariableStyle for variable ${i.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);else for (const e of t.uniqueValues) null !== e.label && void 0 !== e.label || null === e.value || void 0 === e.value || (e.label = e.value.toString());\n        e.push(o);\n      } else M.error(`VoxelVariable ID=${t.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`);\n    }\n\n    return e;\n  }\n\n  getVolumeStyles() {\n    const e = [];\n\n    for (const t of this.volumeStyles) {\n      const i = this._getVolumeFromVolumeId(t.volumeId);\n\n      if (r(i)) {\n        const o = t.clone();\n\n        for (const e of o.slices) this._isPlaneValid(e, [0, 1, i.zDimension], i.dimensions) || (e.enabled = !1, e.label = \"invalid\");\n\n        for (const e of o.dynamicSections) this._isPlaneValid(e, [0, 1, i.zDimension], i.dimensions) || (e.enabled = !1, e.label = \"invalid\");\n\n        e.push(o);\n      } else M.error(`VoxelVolume ID=${t.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`);\n    }\n\n    return e;\n  }\n\n  _getVariable(e) {\n    const t = e.variableId;\n\n    for (const i of this.variables) if (i.id === t) return i;\n\n    return null;\n  }\n\n  _getVolumeFromVolumeId(e) {\n    for (const t of this.volumes) if (t.id === e) return t;\n\n    return null;\n  }\n\n  _isPlaneValid(e, t, i) {\n    if (!e.point) return !1;\n    if (!Array.isArray(e.point) || 3 !== e.point.length) return !1;\n    if (!e.normal) return !1;\n    if (!Array.isArray(e.normal) || 3 !== e.normal.length) return !1;\n\n    for (let s = 0; s < 3; ++s) {\n      const o = e.point[s];\n      if (o < 0 || o >= i[t[s]].size) return !1;\n    }\n\n    const o = y(e.normal[0], e.normal[1], e.normal[2]);\n    m(o, o);\n    const r = 1e-6;\n    return !(Math.abs(o[0]) + Math.abs(o[1]) + Math.abs(o[2]) < r) && (e.normal[0] = o[0], e.normal[1] = o[1], e.normal[2] = o[2], !0);\n  }\n\n};\ne([a({\n  type: [\"Voxel\"]\n})], z.prototype, \"operationalLayerType\", void 0), e([a(j)], z.prototype, \"legendEnabled\", void 0), e([a({\n  json: {\n    write: !0\n  }\n})], z.prototype, \"title\", void 0), e([a(w)], z.prototype, \"url\", null), e([a({\n  type: t.ofType(D),\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.sections\",\n        write: !0\n      }\n    }\n  }\n})], z.prototype, \"sections\", void 0), e([a({\n  type: u,\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.currentVariableId\",\n        write: {\n          enabled: !0,\n          isRequired: !0,\n          ignoreOrigin: !0\n        }\n      },\n      service: {\n        name: \"style.currentVariableId\"\n      }\n    }\n  }\n})], z.prototype, \"currentVariableId\", void 0), e([a({\n  type: t.ofType(E),\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.volumeStyles\",\n        write: !0\n      },\n      service: {\n        name: \"style.volumeStyles\"\n      }\n    }\n  }\n})], z.prototype, \"volumeStyles\", void 0), e([a({\n  type: [\"volume\", \"surfaces\"],\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.renderMode\",\n        write: !0\n      },\n      service: {\n        name: \"style.renderMode\"\n      }\n    }\n  }\n})], z.prototype, \"renderMode\", void 0), e([a({\n  type: t.ofType(L),\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.variableStyles\",\n        write: !0\n      },\n      service: {\n        name: \"style.variableStyles\"\n      }\n    }\n  }\n})], z.prototype, \"variableStyles\", void 0), e([a({\n  type: Boolean,\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.enableSlices\",\n        write: !0\n      },\n      service: {\n        name: \"style.enableSlices\"\n      }\n    }\n  }\n})], z.prototype, \"enableSlices\", void 0), e([a({\n  type: Boolean,\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.enableSections\",\n        write: !0\n      },\n      service: {\n        name: \"style.enableSections\"\n      }\n    }\n  }\n})], z.prototype, \"enableSections\", void 0), e([a({\n  type: Boolean,\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.enableDynamicSections\",\n        write: !0\n      },\n      service: {\n        name: \"style.enableDynamicSections\"\n      }\n    }\n  }\n})], z.prototype, \"enableDynamicSections\", void 0), e([a({\n  type: Boolean,\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.enableIsosurfaces\",\n        write: !0\n      },\n      service: {\n        name: \"style.enableIsosurfaces\"\n      }\n    }\n  }\n})], z.prototype, \"enableIsosurfaces\", void 0), e([a({\n  type: F,\n  json: {\n    origins: {\n      \"web-scene\": {\n        name: \"layerDefinition.style.shading\",\n        write: !0\n      },\n      service: {\n        name: \"style.shading\"\n      }\n    }\n  }\n})], z.prototype, \"shading\", void 0), e([a({\n  type: [\"show\", \"hide\"]\n})], z.prototype, \"listMode\", void 0), e([a({\n  type: Number,\n  range: {\n    min: 0,\n    max: 1\n  },\n  nonNullable: !0,\n  json: {\n    read: !1,\n    write: !1,\n    origins: {\n      \"web-scene\": {\n        read: !1,\n        write: !1\n      },\n      \"portal-item\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], z.prototype, \"opacity\", void 0), e([a({\n  type: t.ofType(N)\n})], z.prototype, \"variables\", void 0), e([a({\n  type: t.ofType(P)\n})], z.prototype, \"volumes\", void 0), e([a({\n  type: A\n})], z.prototype, \"index\", void 0), e([a({\n  type: Number,\n  json: {\n    name: \"layerDefinition.minScale\",\n    read: !1,\n    write: !1,\n    origins: {\n      service: {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], z.prototype, \"minScale\", void 0), e([a({\n  type: Number,\n  json: {\n    name: \"layerDefinition.maxScale\",\n    read: !1,\n    write: !1,\n    origins: {\n      service: {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], z.prototype, \"maxScale\", void 0), e([a({\n  json: {\n    read: !1\n  },\n  readOnly: !0\n})], z.prototype, \"type\", void 0), e([a({\n  readOnly: !0,\n  json: {\n    name: \"serviceVersion\"\n  }\n})], z.prototype, \"version\", void 0), e([p(\"service\", \"version\")], z.prototype, \"readVersion\", null), e([a({\n  type: d\n})], z.prototype, \"fullExtent\", void 0), e([p(\"service\", \"fullExtent\", [\"fullExtent\"])], z.prototype, \"readFullExtent\", null), e([a({\n  readOnly: !0,\n  clonable: !1,\n  json: {\n    read: !1\n  }\n})], z.prototype, \"voxelFields\", null), e([a(I)], z.prototype, \"popupEnabled\", void 0), e([a({\n  readOnly: !0\n})], z.prototype, \"defaultPopupTemplate\", null), z = e([c(R)], z);\nconst _ = z;\nexport { _ as default };","map":{"version":3,"names":["_","e","t","i","o","isSome","r","isNone","s","MultiOriginJSONMixin","n","throwIfAbortError","l","property","a","Integer","u","reader","p","subclass","c","m","f","y","d","APIKeyMixin","v","ArcGISService","h","OperationalLayer","b","PortalLayer","g","ScaleRangeLayer","S","SceneService","V","sanitizeUrl","x","legendEnabled","j","url","w","popupEnabled","I","T","D","F","N","L","P","A","E","createPopupTemplate","O","R","M","getLogger","z","constructor","serviceRoot","operationalLayerType","title","sections","currentVariableId","volumeStyles","renderMode","variableStyles","enableSlices","enableSections","enableDynamicSections","enableIsosurfaces","shading","opacity","variables","volumes","index","minScale","maxScale","type","version","major","Number","NaN","minor","versionString","fullExtent","popupTemplate","test","ofType","constantUpscaling","_set","load","signal","loadFromPortal","supportedTypes","catch","then","_fetchService","addResolvingPromise","Promise","resolve","read","spatialReference","readVersion","parseVersionString","validateLayer","layerType","isNaN","serviceVersion","supportedVersions","readFullExtent","fromJSON","zmin","zmax","Array","isArray","isValid","volumeType","dimensions","isRegular","regularSpacing","offset","scale","size","voxelFields","name","alias","domain","editable","length","getVolume","push","defaultPopupTemplate","fields","getConfiguration","toJSON","getSections","style","getVolumeStyles","getVariableStyles","JSON","stringify","getVariableStyle","findIndex","variableId","getItemAt","getVariable","id","find","volumeId","getVolumeStyle","getColorForContinuousDataValue","renderingFormat","continuity","transferFunction","enabled","href","label","normal","point","sizeInPixel","slices","timeId","_getVariable","clone","isosurfaces","slice","error","colorLocked","value","equals","color","colorStops","stretchRange","removeAll","uniqueValues","toString","_getVolumeFromVolumeId","_isPlaneValid","zDimension","dynamicSections","Math","abs","prototype","json","write","origins","isRequired","ignoreOrigin","service","Boolean","range","min","max","nonNullable","readOnly","clonable","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/VoxelLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/Collection.js\";import i from\"../core/Error.js\";import o from\"../core/Logger.js\";import{isSome as r,isNone as s}from\"../core/maybe.js\";import{MultiOriginJSONMixin as n}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as l}from\"../core/promiseUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import{Integer as u}from\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{reader as p}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import{n as m}from\"../chunks/vec3.js\";import{f as y}from\"../chunks/vec3f64.js\";import d from\"../geometry/Extent.js\";import f from\"./Layer.js\";import{APIKeyMixin as v}from\"./mixins/APIKeyMixin.js\";import{ArcGISService as h}from\"./mixins/ArcGISService.js\";import{OperationalLayer as b}from\"./mixins/OperationalLayer.js\";import{PortalLayer as g}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as S}from\"./mixins/ScaleRangeLayer.js\";import{SceneService as V}from\"./mixins/SceneService.js\";import{sanitizeUrl as x}from\"./support/arcgisLayerUrl.js\";import{legendEnabled as j,url as w,popupEnabled as I}from\"./support/commonProperties.js\";import T from\"./support/Field.js\";import D from\"./voxel/VoxelSection.js\";import F from\"./voxel/VoxelSimpleShading.js\";import N from\"./voxel/VoxelVariable.js\";import L from\"./voxel/VoxelVariableStyle.js\";import P from\"./voxel/VoxelVolume.js\";import A from\"./voxel/VoxelVolumeIndex.js\";import E from\"./voxel/VoxelVolumeStyle.js\";import{createPopupTemplate as O}from\"../support/popupUtils.js\";const R=\"esri.layers.VoxelLayer\",M=o.getLogger(R);let z=class extends(V(h(b(g(S(n(v(f)))))))){constructor(e){super(e),this.serviceRoot=\"\",this.operationalLayerType=\"Voxel\",this.legendEnabled=!0,this.title=null,this.sections=null,this.currentVariableId=0,this.volumeStyles=null,this.renderMode=\"volume\",this.variableStyles=null,this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new F,this.opacity=1,this.variables=new t,this.volumes=new t,this.index=null,this.minScale=0,this.maxScale=0,this.type=\"voxel\",this.version={major:Number.NaN,minor:Number.NaN,versionString:\"\"},this.fullExtent=null,this.popupEnabled=!0,this.popupTemplate=null,this.test=null,this.volumeStyles=new(t.ofType(E)),this.variableStyles=new(t.ofType(L)),this.sections=new(t.ofType(D)),e?.constantUpscaling&&(this.test={constantUpscaling:!0})}set url(e){this._set(\"url\",x(e,M))}load(e){const t=r(e)?e.signal:null,i=this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e).catch(l).then((()=>this._fetchService(t))).then((()=>this.serviceRoot=this.url));return this.addResolvingPromise(i),Promise.resolve(this)}read(e,t){super.read(e,t);for(const i of this.volumes)i.spatialReference=this.spatialReference}readVersion(e,t){return super.parseVersionString(e)}validateLayer(e){if(e.layerType&&e.layerType!==this.operationalLayerType)throw new i(\"voxel-layer:layer-type-not-supported\",\"VoxelLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor)||this.version.major<3)throw new i(\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"3.x\"});if(this.version.major>3)throw new i(\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"3.x\"})}readFullExtent(e,t,i){if(null!=e&&\"object\"==typeof e){const o=d.fromJSON(e,i);if(0===o.zmin&&0===o.zmax&&Array.isArray(t.volumes)){const e=P.fromJSON(t.volumes[0]);if(e.isValid&&\"xyt\"!==e.volumeType){const t=e.dimensions[2];if(t.isRegular){let e=t.regularSpacing.offset,i=t.regularSpacing.offset+t.regularSpacing.scale*(t.size-1);if(e>i){const t=e;e=i,i=t}o.zmin=e,o.zmax=i}}}return o}return null}get voxelFields(){const e=[new T({name:\"Voxel.ServiceValue\",alias:\"Value\",domain:null,editable:!1,length:128,type:\"string\"}),new T({name:\"Voxel.ServiceVariableLabel\",alias:\"Variable\",domain:null,editable:!1,length:128,type:\"string\"}),new T({name:\"Voxel.Position\",alias:\"Voxel Position\",domain:null,editable:!1,length:128,type:\"string\"})],t=this.getVolume(null);if(r(t)){if(\"xyzt\"===t.volumeType||\"xyt\"===t.volumeType){const t=new T({name:\"Voxel.ServiceLocalTime\",alias:\"Local Time\",domain:null,editable:!1,length:128,type:\"string\"});e.push(t);const i=new T({name:\"Voxel.ServiceNativeTime\",alias:\"Native Time\",domain:null,editable:!1,length:128,type:\"string\"});e.push(i)}if(\"xyt\"!==t.volumeType){const t=new T({name:\"Voxel.ServiceDepth\",alias:\"Depth\",domain:null,editable:!1,length:128,type:\"string\"});e.push(t)}}return e}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(e){const t=this.voxelFields,i=this.title;return O({fields:t,title:i},e)}getConfiguration(){const e={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:this.index?.toJSON(),sections:this.getSections(),style:{volumeStyles:this.getVolumeStyles(),currentVariableId:this.currentVariableId,renderMode:this.renderMode,variableStyles:this.getVariableStyles(),enableSections:this.enableSections,enableDynamicSections:this.enableDynamicSections,enableIsosurfaces:this.enableIsosurfaces,enableSlices:this.enableSlices,shading:this.shading}};return e.index&&this.index?.isValid()?JSON.stringify(e):\"\"}getVariableStyle(e){let t=-1;t=r(e)?e:this.currentVariableId;if(!this.variableStyles||-1===t)return null;const i=this.variableStyles.findIndex((e=>e.variableId===t));return i<0?null:this.variableStyles.getItemAt(i)}getVariable(e){let t=-1;if(t=r(e)?e:this.currentVariableId,!this.variables||-1===t)return null;const i=this.variables.findIndex((e=>e.id===t));return i<0?null:this.variables.getItemAt(i)}getVolume(e){const t=this.getVariable(e);return r(t)?this.volumes.find((({id:e})=>e===t.volumeId)):null}getVolumeStyle(e){const t=this.getVariable(e);return r(t)?this.volumeStyles.find((({volumeId:e})=>e===t.volumeId)):null}getColorForContinuousDataValue(e,t,i){const o=this.getVariable(e);if(s(o)||\"continuous\"!==o.renderingFormat?.continuity)return null;if(!this.variableStyles)return null;const r=this.variableStyles.findIndex((t=>t.variableId===e));if(r<0)return null;const n=this.variableStyles.getItemAt(r);return n.transferFunction?n.transferFunction.getColorForContinuousDataValue(t,i):null}getSections(){const e=[];for(const t of this.sections)e.push(new D({enabled:t.enabled,href:t.href,id:t.id,label:t.label,normal:t.normal,point:t.point,sizeInPixel:t.sizeInPixel,slices:t.slices,timeId:t.timeId,variableId:t.variableId}));return e}getVariableStyles(){const e=[];for(const t of this.variableStyles){const i=this._getVariable(t);if(r(i)){const o=t.clone();o.isosurfaces.length>4&&(o.isosurfaces=o.isosurfaces.slice(0,3),M.error(\"A maximum of 4 isosurfaces are supported for Voxel Layers.\"));for(const e of o.isosurfaces)if(!e.colorLocked){const t=this.getColorForContinuousDataValue(o.variableId,e.value,!1);null===t||t.equals(e.color)||(e.color=t)}if(\"continuous\"===i.renderingFormat.continuity)(null===o.transferFunction||o.transferFunction.colorStops.length<2)&&M.error(`VoxelVariableStyle for variable ${i.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`),null!==o.transferFunction&&(Array.isArray(o.transferFunction.stretchRange)&&2===o.transferFunction.stretchRange.length||(M.error(`VoxelVariableStyle for variable ${i.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`),o.transferFunction.stretchRange=[0,1],o.transferFunction.colorStops.removeAll()));else if(\"discrete\"===i.renderingFormat.continuity)if(0===t.uniqueValues.length)M.error(`VoxelVariableStyle for variable ${i.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);else for(const e of t.uniqueValues)null!==e.label&&void 0!==e.label||null===e.value||void 0===e.value||(e.label=e.value.toString());e.push(o)}else M.error(`VoxelVariable ID=${t.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`)}return e}getVolumeStyles(){const e=[];for(const t of this.volumeStyles){const i=this._getVolumeFromVolumeId(t.volumeId);if(r(i)){const o=t.clone();for(const e of o.slices)this._isPlaneValid(e,[0,1,i.zDimension],i.dimensions)||(e.enabled=!1,e.label=\"invalid\");for(const e of o.dynamicSections)this._isPlaneValid(e,[0,1,i.zDimension],i.dimensions)||(e.enabled=!1,e.label=\"invalid\");e.push(o)}else M.error(`VoxelVolume ID=${t.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`)}return e}_getVariable(e){const t=e.variableId;for(const i of this.variables)if(i.id===t)return i;return null}_getVolumeFromVolumeId(e){for(const t of this.volumes)if(t.id===e)return t;return null}_isPlaneValid(e,t,i){if(!e.point)return!1;if(!Array.isArray(e.point)||3!==e.point.length)return!1;if(!e.normal)return!1;if(!Array.isArray(e.normal)||3!==e.normal.length)return!1;for(let s=0;s<3;++s){const o=e.point[s];if(o<0||o>=i[t[s]].size)return!1}const o=y(e.normal[0],e.normal[1],e.normal[2]);m(o,o);const r=1e-6;return!(Math.abs(o[0])+Math.abs(o[1])+Math.abs(o[2])<r)&&(e.normal[0]=o[0],e.normal[1]=o[1],e.normal[2]=o[2],!0)}};e([a({type:[\"Voxel\"]})],z.prototype,\"operationalLayerType\",void 0),e([a(j)],z.prototype,\"legendEnabled\",void 0),e([a({json:{write:!0}})],z.prototype,\"title\",void 0),e([a(w)],z.prototype,\"url\",null),e([a({type:t.ofType(D),json:{origins:{\"web-scene\":{name:\"layerDefinition.sections\",write:!0}}}})],z.prototype,\"sections\",void 0),e([a({type:u,json:{origins:{\"web-scene\":{name:\"layerDefinition.style.currentVariableId\",write:{enabled:!0,isRequired:!0,ignoreOrigin:!0}},service:{name:\"style.currentVariableId\"}}}})],z.prototype,\"currentVariableId\",void 0),e([a({type:t.ofType(E),json:{origins:{\"web-scene\":{name:\"layerDefinition.style.volumeStyles\",write:!0},service:{name:\"style.volumeStyles\"}}}})],z.prototype,\"volumeStyles\",void 0),e([a({type:[\"volume\",\"surfaces\"],json:{origins:{\"web-scene\":{name:\"layerDefinition.style.renderMode\",write:!0},service:{name:\"style.renderMode\"}}}})],z.prototype,\"renderMode\",void 0),e([a({type:t.ofType(L),json:{origins:{\"web-scene\":{name:\"layerDefinition.style.variableStyles\",write:!0},service:{name:\"style.variableStyles\"}}}})],z.prototype,\"variableStyles\",void 0),e([a({type:Boolean,json:{origins:{\"web-scene\":{name:\"layerDefinition.style.enableSlices\",write:!0},service:{name:\"style.enableSlices\"}}}})],z.prototype,\"enableSlices\",void 0),e([a({type:Boolean,json:{origins:{\"web-scene\":{name:\"layerDefinition.style.enableSections\",write:!0},service:{name:\"style.enableSections\"}}}})],z.prototype,\"enableSections\",void 0),e([a({type:Boolean,json:{origins:{\"web-scene\":{name:\"layerDefinition.style.enableDynamicSections\",write:!0},service:{name:\"style.enableDynamicSections\"}}}})],z.prototype,\"enableDynamicSections\",void 0),e([a({type:Boolean,json:{origins:{\"web-scene\":{name:\"layerDefinition.style.enableIsosurfaces\",write:!0},service:{name:\"style.enableIsosurfaces\"}}}})],z.prototype,\"enableIsosurfaces\",void 0),e([a({type:F,json:{origins:{\"web-scene\":{name:\"layerDefinition.style.shading\",write:!0},service:{name:\"style.shading\"}}}})],z.prototype,\"shading\",void 0),e([a({type:[\"show\",\"hide\"]})],z.prototype,\"listMode\",void 0),e([a({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{\"web-scene\":{read:!1,write:!1},\"portal-item\":{read:!1,write:!1}}}})],z.prototype,\"opacity\",void 0),e([a({type:t.ofType(N)})],z.prototype,\"variables\",void 0),e([a({type:t.ofType(P)})],z.prototype,\"volumes\",void 0),e([a({type:A})],z.prototype,\"index\",void 0),e([a({type:Number,json:{name:\"layerDefinition.minScale\",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],z.prototype,\"minScale\",void 0),e([a({type:Number,json:{name:\"layerDefinition.maxScale\",read:!1,write:!1,origins:{service:{read:!1,write:!1}}}})],z.prototype,\"maxScale\",void 0),e([a({json:{read:!1},readOnly:!0})],z.prototype,\"type\",void 0),e([a({readOnly:!0,json:{name:\"serviceVersion\"}})],z.prototype,\"version\",void 0),e([p(\"service\",\"version\")],z.prototype,\"readVersion\",null),e([a({type:d})],z.prototype,\"fullExtent\",void 0),e([p(\"service\",\"fullExtent\",[\"fullExtent\"])],z.prototype,\"readFullExtent\",null),e([a({readOnly:!0,clonable:!1,json:{read:!1}})],z.prototype,\"voxelFields\",null),e([a(I)],z.prototype,\"popupEnabled\",void 0),e([a({readOnly:!0})],z.prototype,\"defaultPopupTemplate\",null),z=e([c(R)],z);const _=z;export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}