{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport t from \"../../Graphic.js\";\nimport { rasterRendererTypes as i, websceneRasterRendererTypes as r, read as s } from \"../../rasterRenderers.js\";\nimport n from \"../../request.js\";\nimport o from \"../../core/Error.js\";\nimport { strict as a } from \"../../core/jsonMap.js\";\nimport { clone as l } from \"../../core/lang.js\";\nimport u from \"../../core/Logger.js\";\nimport { isSome as p, isNone as c, unwrap as m } from \"../../core/maybe.js\";\nimport { watch as d } from \"../../core/reactiveUtils.js\";\nimport { urlToObject as h } from \"../../core/urlUtils.js\";\nimport { property as f, ensureRange as g } from \"../../core/accessorSupport/decorators/property.js\";\nimport { Integer as y, ensureClass as R, ensureNumber as b } from \"../../core/accessorSupport/ensureType.js\";\nimport { reader as S } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as v } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { writer as x } from \"../../core/accessorSupport/decorators/writer.js\";\nimport { opacity as I, url as w } from \"../support/commonProperties.js\";\nimport _ from \"../support/DimensionalDefinition.js\";\nimport { ExportImageServiceParameters as F } from \"../support/ExportImageServiceParameters.js\";\nimport D from \"../support/Field.js\";\nimport j from \"../support/FieldsIndex.js\";\nimport { createBitmap as P } from \"../support/imageBitmapUtils.js\";\nimport { isSupportedRendererType as T } from \"../support/imageryRendererUtils.js\";\nimport O from \"../support/MosaicRule.js\";\nimport N from \"../support/MultidimensionalSubset.js\";\nimport C from \"../support/PixelBlock.js\";\nimport { interpolationKebab as M, noDataInterpretationKebab as A } from \"../support/rasterEnums.js\";\nimport J from \"../support/RasterFunction.js\";\nimport q from \"../support/RasterInfo.js\";\nimport E from \"../support/RasterJobHandler.js\";\nimport { intersectMultimensionalSubset as V, getSubsetVariablesFromMdInfo as H, getDefaultMultidimensionalDefinition as Q } from \"../support/rasterDatasets/multidimensionalUtils.js\";\nimport { decode as U, getFormat as L } from \"../support/rasterFormats/RasterCodec.js\";\nimport { uvComponentToVector as z } from \"../support/rasterFunctions/vectorFieldUtils.js\";\nimport { getSupportedRendererTypes as B, getDefaultBandCombination as k, createDefaultRenderer as G, normalizeRendererJSON as W } from \"../../renderers/support/rasterRendererHelper.js\";\nimport $ from \"../../renderers/support/RasterSymbolizer.js\";\nimport { computeAngles as K, computePixelSpaceLocations as X, computeHistograms as Y, computeStatisticsHistograms as Z, measureHeight as ee, measureAreaAndPerimeter as te, measureDistanceAndAngle as ie, measurePointOrCentroid as re, getImageSpatialReferenceQueryParameter as se, getSamples as ne, identify as oe } from \"../../rest/imageService.js\";\nimport \"../../core/has.js\";\nimport \"../support/source/DataLayerSource.js\";\nimport { executeQueryJSON as ae } from \"../../rest/query/executeQueryJSON.js\";\nimport \"../../config.js\";\nimport \"../../kernel.js\";\nimport \"../../core/unitUtils.js\";\nimport \"../../geometry/support/spatialReferenceUtils.js\";\nimport \"../graphics/featureConversionUtils.js\";\nimport le from \"../../geometry/Extent.js\";\nimport \"../../geometry/Geometry.js\";\nimport \"../../geometry/Multipoint.js\";\nimport \"../../geometry/Point.js\";\nimport ue from \"../../geometry/Polygon.js\";\nimport \"../../geometry/Polyline.js\";\nimport \"../../geometry/support/normalizeUtils.js\";\nimport \"../../core/pbf.js\";\nimport pe from \"../../rest/support/FeatureSet.js\";\nimport ce from \"../../rest/support/Query.js\";\nimport \"../../rest/query/support/AttachmentInfo.js\";\nimport \"../../rest/support/AttachmentQuery.js\";\nimport { executeForCount as me } from \"../../rest/query/executeForCount.js\";\nimport { executeForIds as de } from \"../../rest/query/executeForIds.js\";\nimport \"../../rest/support/RelationshipQuery.js\";\nimport \"../../rest/support/TopFeaturesQuery.js\";\nimport { fetchServiceRasterInfo as he, generateRasterInfo as fe } from \"../../rest/imageService/fetchRasterInfo.js\";\nimport { getCatalogItemRasterInfo as ge } from \"../../rest/imageService/getCatalogItemRasterInfo.js\";\nimport ye from \"../../rest/support/ImageAngleParameters.js\";\nimport Re from \"../../rest/support/ImageAreaParameters.js\";\nimport be from \"../../rest/support/ImageDistanceParameters.js\";\nimport Se from \"../../rest/support/ImageHeightParameters.js\";\nimport ve from \"../../rest/support/ImageHistogramParameters.js\";\nimport xe from \"../../rest/support/ImageIdentifyParameters.js\";\nimport Ie from \"../../rest/support/ImagePixelLocationParameters.js\";\nimport we from \"../../rest/support/ImagePointParameters.js\";\nimport _e from \"../../rest/support/ImageSampleParameters.js\";\nimport { createFlowMesh as Fe } from \"../../views/2d/engine/flow/dataUtils.js\";\nimport De from \"../../geometry/SpatialReference.js\";\nconst je = a()({\n  U1: \"u1\",\n  U2: \"u2\",\n  U4: \"u4\",\n  U8: \"u8\",\n  S8: \"s8\",\n  U16: \"u16\",\n  S16: \"s16\",\n  U32: \"u32\",\n  S32: \"s32\",\n  F32: \"f32\",\n  F64: \"f64\",\n  C64: \"c64\",\n  C128: \"c128\",\n  UNKNOWN: \"unknown\"\n}),\n      Pe = new Set([\"png\", \"png8\", \"png24\", \"png32\", \"jpg\", \"bmp\", \"gif\", \"jpgpng\", \"lerc\", \"tiff\"]),\n      Te = g(b, {\n  min: 0,\n  max: 255\n});\n\nfunction Oe(e) {\n  if (!e) return null;\n  const t = JSON.stringify(e).match(/\"rasterFunction\":\"(.*?\")/gi)?.map(e => e.replace('\"rasterFunction\":\"', \"\").replace('\"', \"\"));\n  return t ? t.join(\"/\") : null;\n}\n\nconst Ne = a => {\n  let g = class extends a {\n    constructor() {\n      super(...arguments), this._functionRasterInfos = {}, this._rasterJobHandler = {\n        instance: null,\n        refCount: 0,\n        connectionPromise: null\n      }, this._cachedRendererJson = null, this._serviceSupportsMosaicRule = null, this._rasterAttributeTableFieldPrefix = \"Raster.\", this.adjustAspectRatio = null, this.bandIds = void 0, this.capabilities = null, this.compressionQuality = void 0, this.compressionTolerance = .01, this.copyright = null, this.defaultMosaicRule = null, this.definitionExpression = null, this.exportImageServiceParameters = null, this.rasterInfo = null, this.fields = null, this.fullExtent = null, this.hasMultidimensions = !1, this.imageMaxHeight = 4100, this.imageMaxWidth = 4100, this.interpolation = void 0, this.minScale = 0, this.maxScale = 0, this.multidimensionalInfo = null, this.multidimensionalSubset = null, this.noData = null, this.noDataInterpretation = void 0, this.objectIdField = null, this.geometryType = \"polygon\", this.typeIdField = null, this.types = [], this.pixelFilter = null, this.raster = void 0, this.sourceType = null, this.viewId = void 0, this.symbolizer = null, this.rasterFunctionInfos = null, this.serviceDataType = null, this.spatialReference = null, this.pixelType = null, this.serviceRasterInfo = null, this.sourceJSON = null, this.url = null, this.version = void 0;\n    }\n\n    initialize() {\n      this._set(\"exportImageServiceParameters\", new F({\n        layer: this\n      }));\n    }\n\n    readServiceSupportsMosaicRule(e, t) {\n      return this._isMosaicRuleSupported(t);\n    }\n\n    get _rasterFunctionNamesIndex() {\n      const e = new Map();\n      return !this.rasterFunctionInfos || p(this.rasterFunctionInfos) && this.rasterFunctionInfos.length < 1 || p(this.rasterFunctionInfos) && this.rasterFunctionInfos.forEach(t => {\n        e.set(t.name.toLowerCase().replace(/ /gi, \"_\"), t.name);\n      }), e;\n    }\n\n    readBandIds(e, t) {\n      if (Array.isArray(e) && e.length > 0 && e.every(e => \"number\" == typeof e)) return e;\n    }\n\n    readCapabilities(e, t) {\n      return this._readCapabilities(t);\n    }\n\n    writeCompressionQuality(e, t, i) {\n      null != e && \"lerc\" !== this.format && (t[i] = e);\n    }\n\n    writeCompressionTolerance(e, t, i) {\n      \"lerc\" === this.format && null != e && (t[i] = e);\n    }\n\n    readDefaultMosaicRule(e, t) {\n      return this._serviceSupportsMosaicRule ? O.fromJSON(t) : null;\n    }\n\n    get fieldsIndex() {\n      return this.fields ? new j(this.fields) : null;\n    }\n\n    set format(e) {\n      e && Pe.has(e.toLowerCase()) && this._set(\"format\", e.toLowerCase());\n    }\n\n    readFormat(e, t) {\n      return \"esriImageServiceDataTypeVector-UV\" === t.serviceDataType || \"esriImageServiceDataTypeVector-MagDir\" === t.serviceDataType || null != this.pixelFilter ? \"lerc\" : \"jpgpng\";\n    }\n\n    readMinScale(e, t) {\n      return null != t.minLOD && null != t.maxLOD ? e : 0;\n    }\n\n    readMaxScale(e, t) {\n      return null != t.minLOD && null != t.maxLOD ? e : 0;\n    }\n\n    set mosaicRule(e) {\n      let t = e;\n      t && t.mosaicMethod && (t = O.fromJSON({ ...t.toJSON(),\n        mosaicMethod: t.mosaicMethod,\n        mosaicOperation: t.mosaicOperation\n      })), this._set(\"mosaicRule\", t);\n    }\n\n    readMosaicRule(e, t) {\n      const i = e || t.mosaicRule;\n      return i ? O.fromJSON(i) : this._isMosaicRuleSupported(t) ? O.fromJSON(t) : null;\n    }\n\n    writeMosaicRule(e, t, i) {\n      let r = this.mosaicRule;\n      const s = this.definitionExpression;\n      r ? s && s !== r.where && (r = r.clone(), r.where = s) : s && (r = new O({\n        where: s\n      })), this._isValidCustomizedMosaicRule(r) && (t[i] = r.toJSON());\n    }\n\n    writeNoData(e, t, i) {\n      null != e && \"number\" == typeof e && (t[i] = Te(e));\n    }\n\n    readObjectIdField(e, t) {\n      if (!e) {\n        const i = t.fields.filter(e => \"esriFieldTypeOID\" === e.type || \"oid\" === e.type);\n        e = i && i[0] && i[0].name;\n      }\n\n      return e;\n    }\n\n    get parsedUrl() {\n      return h(this.url);\n    }\n\n    readSourceType(e, t) {\n      return this._isMosaicDataset(t) ? \"mosaic-dataset\" : \"raster-dataset\";\n    }\n\n    set renderer(e) {\n      this.loaded && (e = this._configRenderer(e)), this._set(\"renderer\", e);\n    }\n\n    readRenderer(e, t, i) {\n      const r = t?.layerDefinition?.drawingInfo?.renderer,\n            n = s(r, i);\n      return null == n ? null : (\"vector-field\" === n.type && t.symbolTileSize && !r.symbolTileSize && (n.symbolTileSize = t.symbolTileSize), T(n) || u.getLogger(this.declaredClass).warn(\"ArcGISImageService\", \"Imagery layer doesn't support given renderer type.\"), n);\n    }\n\n    writeRenderer(e, t, i) {\n      t.layerDefinition = t.layerDefinition || {}, t.layerDefinition.drawingInfo = t.layerDefinition.drawingInfo || {}, t.layerDefinition.drawingInfo.renderer = e.toJSON(), \"vector-field\" === e.type && (t.symbolTileSize = e.symbolTileSize);\n    }\n\n    get rasterFields() {\n      const e = this._rasterAttributeTableFieldPrefix || \"Raster.\",\n            t = new D({\n        name: \"Raster.ItemPixelValue\",\n        alias: \"Item Pixel Value\",\n        domain: null,\n        editable: !1,\n        length: 50,\n        type: \"string\"\n      }),\n            i = new D({\n        name: \"Raster.ServicePixelValue\",\n        alias: \"Service Pixel Value\",\n        domain: null,\n        editable: !1,\n        length: 50,\n        type: \"string\"\n      }),\n            r = new D({\n        name: \"Raster.ServicePixelValue.Raw\",\n        alias: \"Raw Service Pixel Value\",\n        domain: null,\n        editable: !1,\n        length: 50,\n        type: \"string\"\n      });\n      let s = this.fields ? l(this.fields) : [];\n      s.push(i), this.capabilities?.operations.supportsQuery && this.fields && this.fields.length > 0 && s.push(t), this.version >= 10.4 && p(this.rasterFunctionInfos) && this.rasterFunctionInfos.some(e => \"none\" === e.name.toLowerCase()) && s.push(r), p(this.rasterFunctionInfos) && this.rasterFunctionInfos.filter(e => \"none\" !== e.name.toLowerCase()).forEach(e => {\n        s.push(new D({\n          name: \"Raster.ServicePixelValue.\" + e.name,\n          alias: e.name,\n          domain: null,\n          editable: !1,\n          length: 50,\n          type: \"string\"\n        }));\n      }), this._isVectorDataSet() && (s.push(new D({\n        name: \"Raster.Magnitude\",\n        alias: \"Magnitude\",\n        domain: null,\n        editable: !1,\n        type: \"double\"\n      })), s.push(new D({\n        name: \"Raster.Direction\",\n        alias: \"Direction\",\n        domain: null,\n        editable: !1,\n        type: \"double\"\n      })));\n      const {\n        attributeTable: n\n      } = this.rasterInfo ?? {};\n\n      if (p(n)) {\n        const t = n.fields.filter(e => \"esriFieldTypeOID\" !== e.type && \"value\" !== e.name.toLowerCase()).map(t => {\n          const i = l(t);\n          return i.name = e + t.name, i;\n        });\n        s = s.concat(t);\n      }\n\n      return s;\n    }\n\n    set renderingRule(e) {\n      let t = e;\n      t && t.rasterFunction && (t = J.fromJSON({ ...t.toJSON(),\n        rasterFunction: t.rasterFunction,\n        rasterFunctionArguments: t.rasterFunctionArguments\n      })), this._set(\"renderingRule\", t);\n    }\n\n    readRenderingRule(e, t) {\n      const i = t.rasterFunctionInfos;\n      return t.renderingRule || i && i.length && \"None\" !== i[0].name ? this._isRFTJson(t.renderingRule) ? J.fromJSON({\n        rasterFunctionDefinition: t.renderingRule\n      }) : J.fromJSON(t.renderingRule || {\n        rasterFunctionInfos: t.rasterFunctionInfos\n      }) : null;\n    }\n\n    writeRenderingRule(e, t, i) {\n      const r = e.toJSON();\n      r.rasterFunctionDefinition ? t[i] = r.rasterFunctionDefinition : t[i] = r;\n    }\n\n    readSpatialReference(e, t) {\n      const i = e || t.extent.spatialReference;\n      return i ? De.fromJSON(i) : null;\n    }\n\n    readPixelType(e) {\n      return je.fromJSON(e) || e;\n    }\n\n    writePixelType(e, t, i) {\n      (c(this.serviceRasterInfo) || this.pixelType !== this.serviceRasterInfo.pixelType) && (t[i] = je.toJSON(e));\n    }\n\n    readVersion(e, t) {\n      let i = t.currentVersion;\n      return i || (i = t.hasOwnProperty(\"fields\") || t.hasOwnProperty(\"timeInfo\") ? 10 : 9.3), i;\n    }\n\n    applyFilter(e) {\n      let t = e;\n      return this.pixelFilter && (t = this._clonePixelData(e), this.pixelFilter(t)), t;\n    }\n\n    applyRenderer(e, t) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        let i = e;\n        const {\n          renderer: r,\n          symbolizer: s,\n          pixelFilter: n,\n          bandIds: o\n        } = _this;\n\n        if (!_this._isPicture() && r && s && !n) {\n          const n = JSON.stringify(_this._cachedRendererJson) !== JSON.stringify(r.toJSON()),\n                a = _this._rasterJobHandler.instance;\n\n          if (a) {\n            n && (s.bind(), yield a.updateSymbolizer(s, t), _this._cachedRendererJson = r.toJSON());\n            const l = yield a.symbolize({\n              bandIds: o,\n              ...e\n            }, t);\n            i = {\n              extent: e.extent,\n              pixelBlock: l\n            };\n          } else i = {\n            extent: e.extent,\n            pixelBlock: s.symbolize({\n              bandIds: o,\n              ...e\n            })\n          };\n        }\n\n        return i;\n      })();\n    }\n\n    destroy() {\n      this._shutdownJobHandler();\n    }\n\n    increaseRasterJobHandlerUsage() {\n      this._rasterJobHandler.refCount++;\n    }\n\n    decreaseRasterJobHandlerUsage() {\n      this._rasterJobHandler.refCount--, this._rasterJobHandler.refCount <= 0 && this._shutdownJobHandler();\n    }\n\n    computeAngles(e, t) {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!(yield _this2._fetchCapabilities(t?.signal)).operations.supportsComputeAngles) throw new o(\"imagery-layer:compute-angles\", \"this operation is not supported on the input image service\");\n        return e = R(ye, e).clone(), K(_this2.url, e, _this2._getRequestOptions(t));\n      })();\n    }\n\n    computePixelSpaceLocations(e, t) {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!(yield _this3._fetchCapabilities(t?.signal)).operations.supportsComputePixelLocation) throw new o(\"imagery-layer:compute-pixel-space-locations\", \"this operation is not supported on the input image service\");\n        return e = R(Ie, e).clone(), X(_this3.url, e, _this3._getRequestOptions(t));\n      })();\n    }\n\n    computeHistograms(e, t) {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!(yield _this4._fetchCapabilities(t?.signal)).operations.supportsComputeHistograms) throw new o(\"imagery-layer:compute-histograms\", \"this operation is not supported on the input image service\");\n        return e = R(ve, e).clone(), _this4._applyMosaicAndRenderingRules(e), Y(_this4.url, e, _this4._getRequestOptions(t));\n      })();\n    }\n\n    computeStatisticsHistograms(e, t) {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!(yield _this5._fetchCapabilities(t?.signal)).operations.supportsComputeStatisticsHistograms) throw new o(\"imagery-layer:compute-statistics-histograms\", \"this operation is not supported on the input image service\");\n        return e = R(ve, e).clone(), _this5._applyMosaicAndRenderingRules(e), Z(_this5.url, e, _this5._getRequestOptions(t));\n      })();\n    }\n\n    measureHeight(e, t) {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* () {\n        const i = yield _this6._fetchCapabilities(t?.signal);\n        if (!(\"base-and-top\" === e.operationType ? i.mensuration.supportsHeightFromBaseAndTop : \"base-and-top-shadow\" === e.operationType ? i.mensuration.supportsHeightFromBaseAndTopShadow : i.mensuration.supportsHeightFromTopAndTopShadow)) throw new o(\"imagery-layer:measure-height\", \"this operation is not supported on the input image service\");\n        return e = R(Se, e).clone(), _this6._applyMosaicAndRenderingRules(e), ee(_this6.url, e, _this6._getRequestOptions(t));\n      })();\n    }\n\n    measureAreaAndPerimeter(e, t) {\n      var _this7 = this;\n\n      return _asyncToGenerator(function* () {\n        const i = yield _this7._fetchCapabilities(t?.signal);\n        if (!(i.mensuration.supportsAreaAndPerimeter && (!e.is3D || i.mensuration.supports3D))) throw new o(\"imagery-layer:measure-area-and-perimeter\", \"this operation is not supported on the input image service\");\n        return e = R(Re, e).clone(), _this7._applyMosaicAndRenderingRules(e), te(_this7.url, e, _this7._getRequestOptions(t));\n      })();\n    }\n\n    measureDistanceAndAngle(e, t) {\n      var _this8 = this;\n\n      return _asyncToGenerator(function* () {\n        const i = yield _this8._fetchCapabilities(t?.signal);\n        if (!(i.mensuration.supportsDistanceAndAngle && (!e.is3D || i.mensuration.supports3D))) throw new o(\"imagery-layer:measure-distance-and-angle\", \"this operation is not supported on the input image service\");\n        return e = R(be, e).clone(), _this8._applyMosaicAndRenderingRules(e), ie(_this8.url, e, _this8._getRequestOptions(t));\n      })();\n    }\n\n    measurePointOrCentroid(e, t) {\n      var _this9 = this;\n\n      return _asyncToGenerator(function* () {\n        const i = yield _this9._fetchCapabilities(t?.signal);\n        if (!(i.mensuration.supportsPointOrCentroid && (!e.is3D || i.mensuration.supports3D))) throw new o(\"imagery-layer:measure-point-or-centroid\", \"this operation is not supported on the input image service\");\n        return e = R(we, e).clone(), _this9._applyMosaicAndRenderingRules(e), re(_this9.url, e, _this9._getRequestOptions(t));\n      })();\n    }\n\n    getField(e) {\n      const {\n        fieldsIndex: t\n      } = this;\n      return p(t) ? t.get(e) : void 0;\n    }\n\n    getFieldDomain(e, t) {\n      const i = this.getField(e);\n      return i ? i.domain : null;\n    }\n\n    fetchImage(e, t, i, r = {}) {\n      var _this10 = this;\n\n      return _asyncToGenerator(function* () {\n        if (null == e || null == t || null == i) throw new o(\"imagery-layer:fetch-image\", \"Insufficient parameters for requesting an image. A valid extent, width and height values are required.\");\n\n        if (_this10.renderer || _this10.symbolizer) {\n          const e = yield _this10.generateRasterInfo(_this10.renderingRule, {\n            signal: r.signal\n          });\n          e && (_this10.rasterInfo = e);\n        }\n\n        const s = _this10.getExportImageServiceParameters(e, t, i, r.timeExtent);\n\n        if (null == s) {\n          if (r.requestAsImageElement && _this10._canRequestImageElement(_this10.format)) {\n            const e = document.createElement(\"canvas\");\n\n            if (e.width = t, e.height = i, r.returnImageBitmap) {\n              return {\n                imageBitmap: yield P(e, `${b(_this10.parsedUrl)}/exportImage`)\n              };\n            }\n\n            return {\n              imageOrCanvasElement: e\n            };\n          }\n\n          const {\n            bandIds: s,\n            rasterInfo: n\n          } = _this10,\n                o = (s?.length || n.bandCount) ?? 0,\n                a = t * i,\n                l = n.pixelType,\n                u = [];\n\n          for (let e = 0; e < o; e++) u.push(C.createEmptyBand(l, a));\n\n          return {\n            pixelData: {\n              pixelBlock: new C({\n                width: t,\n                height: i,\n                pixels: u,\n                mask: new Uint8Array(a),\n                pixelType: l\n              }),\n              extent: e\n            }\n          };\n        }\n\n        const n = !!r.requestAsImageElement && !_this10.pixelFilter,\n              a = n && !!r.returnImageBitmap,\n              l = {\n          imageServiceParameters: s,\n          imageProps: {\n            extent: e,\n            width: t,\n            height: i,\n            format: _this10.format\n          },\n          requestAsImageElement: n,\n          returnImageBitmap: a,\n          signal: r.signal\n        };\n        return _this10._requestArrayBuffer(l);\n      })();\n    }\n\n    fetchKeyProperties(e) {\n      return n(b(this.parsedUrl) + \"/keyProperties\", {\n        query: this._getQueryParams({\n          renderingRule: this.version >= 10.3 ? e?.renderingRule : null\n        })\n      }).then(e => e.data);\n    }\n\n    fetchRasterAttributeTable(e) {\n      return this.version < 10.1 ? Promise.reject(new o(\"#fetchRasterAttributeTable()\", \"Failed to get rasterAttributeTable\")) : n(b(this.parsedUrl) + \"/rasterAttributeTable\", {\n        query: this._getQueryParams({\n          renderingRule: this.version >= 10.3 ? e?.renderingRule : null\n        })\n      }).then(e => pe.fromJSON(e.data));\n    }\n\n    getCatalogItemRasterInfo(e, t) {\n      const i = { ...t,\n        query: this._getQueryParams()\n      };\n      return ge(b(this.parsedUrl), e, i);\n    }\n\n    getCatalogItemICSInfo(e, t) {\n      var _this11 = this;\n\n      return _asyncToGenerator(function* () {\n        const {\n          data: i\n        } = yield n(b(_this11.parsedUrl) + \"/\" + e + \"/info/ics\", {\n          query: _this11._getQueryParams(),\n          ...t\n        }),\n              r = i && i.ics;\n        if (!r) return;\n        let s = null;\n\n        try {\n          s = (yield n(b(_this11.parsedUrl) + \"/\" + e + \"/info\", {\n            query: _this11._getQueryParams(),\n            ...t\n          })).data.extent;\n        } catch {}\n\n        if (!s || !s.spatialReference) return {\n          ics: r,\n          icsToPixelTransform: null,\n          icsExtent: null,\n          northDirection: null\n        };\n        const o = _this11.version >= 10.7 ? n(b(_this11.parsedUrl) + \"/\" + e + \"/info/icstopixel\", {\n          query: _this11._getQueryParams(),\n          ...t\n        }).then(e => e.data).catch(() => ({})) : {},\n              a = s.spatialReference,\n              l = {\n          geometries: JSON.stringify({\n            geometryType: \"esriGeometryEnvelope\",\n            geometries: [s]\n          }),\n          inSR: a.wkid || JSON.stringify(a),\n          outSR: \"0:\" + e\n        },\n              u = n(b(_this11.parsedUrl) + \"/project\", {\n          query: _this11._getQueryParams(l),\n          ...t\n        }).then(e => e.data).catch(() => ({})),\n              p = 5,\n              c = (s.xmin + s.xmax) / 2,\n              m = (s.ymax - s.ymin) / (p + 1),\n              d = s.ymin + m,\n              h = [];\n\n        for (let n = 0; n < p; n++) h.push({\n          x: c,\n          y: d + m * n\n        });\n\n        const f = {\n          geometries: JSON.stringify({\n            geometryType: \"esriGeometryPoint\",\n            geometries: h\n          }),\n          inSR: a.wkid || JSON.stringify(a),\n          outSR: \"0:\" + e\n        },\n              g = n(b(_this11.parsedUrl) + \"/project\", {\n          query: _this11._getQueryParams(f),\n          ...t\n        }).then(e => e.data).catch(() => ({})),\n              y = yield Promise.all([o, u, g]);\n        let R = y[0].ipxf;\n\n        if (null == R) {\n          const e = r.geodataXform?.xf_0;\n          \"topup\" === e?.name?.toLowerCase() && 6 === e?.coefficients?.length && (R = {\n            affine: {\n              name: \"ics [sensor: Frame] to pixel (column, row) transformation\",\n              coefficients: e.coefficients,\n              cellsizeRatio: 0,\n              type: \"GeometricXform\"\n            }\n          });\n        }\n\n        const S = le.fromJSON(y[1] && y[1].geometries && y[1].geometries[0]);\n        S && (S.spatialReference = new De({\n          wkid: 0,\n          imageCoordinateSystem: r\n        }));\n        const v = y[2].geometries ? y[2].geometries.filter(e => null != e && null != e.x && null != e.y && \"NaN\" !== e.x && \"NaN\" !== e.y) : [],\n              x = v.length;\n        if (x < 3) return {\n          ics: r,\n          icsToPixelTransform: R,\n          icsExtent: S,\n          northDirection: null\n        };\n        let I = 0,\n            w = 0,\n            _ = 0,\n            F = 0;\n\n        for (let n = 0; n < x; n++) I += v[n].x, w += v[n].y, _ += v[n].x * v[n].x, F += v[n].x * v[n].y;\n\n        const D = (x * F - I * w) / (x * _ - I * I);\n        let j = 0;\n        const P = v[p - 1].x > v[0].x,\n              T = v[p - 1].y > v[0].y;\n        return D === 1 / 0 ? j = T ? 90 : 270 : 0 === D ? j = P ? 0 : 180 : D > 0 ? j = P ? 180 * Math.atan(D) / Math.PI : 180 * Math.atan(D) / Math.PI + 180 : D < 0 && (j = T ? 180 + 180 * Math.atan(D) / Math.PI : 360 + 180 * Math.atan(D) / Math.PI), {\n          ics: r,\n          icsToPixelTransform: R,\n          icsExtent: S,\n          northDirection: j\n        };\n      })();\n    }\n\n    generateRasterInfo(e, t) {\n      var _this12 = this;\n\n      return _asyncToGenerator(function* () {\n        if (e = R(J, e), _this12.serviceRasterInfo && (!e || \"none\" === e.functionName?.toLowerCase() || _this12._isVectorFieldResampleFunction(e))) return _this12.serviceRasterInfo;\n        const i = Oe(e);\n        if (!i) return null;\n        if (_this12._functionRasterInfos[i]) return _this12._functionRasterInfos[i];\n\n        const r = _this12._generateRasterInfo(e, t);\n\n        _this12._functionRasterInfos[i] = r;\n\n        try {\n          return yield r;\n        } catch {\n          return _this12._functionRasterInfos[i] = null, null;\n        }\n      })();\n    }\n\n    getExportImageServiceParameters(e, t, i, r) {\n      e = e.clone().shiftCentralMeridian();\n      const s = se(e.spatialReference, b(this.parsedUrl));\n      this.pixelType !== this.serviceRasterInfo.pixelType && (this.exportImageServiceParameters.pixelType = this.pixelType);\n      const n = this.exportImageServiceParameters.toJSON(),\n            {\n        bandIds: o,\n        noData: a\n      } = n;\n      let {\n        renderingRule: l\n      } = n;\n      const u = this.renderingRule?.rasterFunctionDefinition,\n            c = !this.renderer || \"raster-stretch\" === this.renderer.type;\n\n      if (o?.length && this._hasRenderingRule(this.renderingRule) && !u && c) {\n        const e = {\n          rasterFunction: \"ExtractBand\",\n          rasterFunctionArguments: {\n            BandIds: o\n          }\n        };\n        if (\"Stretch\" === l.rasterFunction) e.rasterFunctionArguments.Raster = l.rasterFunctionArguments.Raster, l.rasterFunctionArguments.Raster = e;else if (\"Colormap\" === l.rasterFunction) {\n          const t = l.rasterFunctionArguments.Raster;\n          \"Stretch\" === t?.rasterFunction ? (e.rasterFunctionArguments.Raster = t.rasterFunctionArguments.Raster, t.rasterFunctionArguments.Raster = e) : (e.rasterFunctionArguments.Raster = t, l.rasterFunctionArguments.Raster = e);\n        } else e.rasterFunctionArguments.Raster = l, l = e;\n        n.bandIds = void 0;\n      } else n.bandIds = o?.join(\",\");\n\n      a instanceof Array && a.length > 0 && (n.noData = a.join(\",\"));\n\n      const m = this._processMultidimensionalIntersection(null, r, this.exportImageServiceParameters.mosaicRule);\n\n      if (m.isOutSide) return null;\n      n.mosaicRule = p(m.mosaicRule) ? JSON.stringify(m.mosaicRule) : null, r = m.timeExtent, n.renderingRule = this._getRenderingRuleString(J.fromJSON(l));\n      const d = {};\n\n      if (p(r)) {\n        const {\n          start: e,\n          end: t\n        } = r.toJSON();\n        e && t && e === t ? d.time = \"\" + e : null == e && null == t || (d.time = `${e ?? \"null\"},${t ?? \"null\"}`);\n      }\n\n      return {\n        bbox: e.xmin + \",\" + e.ymin + \",\" + e.xmax + \",\" + e.ymax,\n        bboxSR: s,\n        imageSR: s,\n        size: t + \",\" + i,\n        ...n,\n        ...d\n      };\n    }\n\n    getSamples(e, t) {\n      var _this13 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!(yield _this13._fetchCapabilities(t?.signal))?.operations.supportsGetSamples) throw new o(\"imagery-layer:get-samples\", \"getSamples operation is not supported on the input image service\");\n        e = R(_e, e).clone();\n        const {\n          raster: i\n        } = _this13;\n        return i && null == e.raster && (e.raster = i), ne(_this13.url, e, _this13._getRequestOptions(t));\n      })();\n    }\n\n    identify(e, t) {\n      var _this14 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!(yield _this14._fetchCapabilities(t?.signal)).operations.supportsIdentify) throw new o(\"imagery-layer:identify\", \"identify operation is not supported on the input image service\");\n        e = R(xe, e).clone();\n\n        const i = _this14._processMultidimensionalIntersection(e.geometry, e.timeExtent, e.mosaicRule || _this14.mosaicRule);\n\n        if (i.isOutSide) throw new o(\"imagery-layer:identify\", \"the request cannot be fulfilled when falling outside of the multidimensional subset\");\n        e.timeExtent = m(i.timeExtent), e.mosaicRule = m(i.mosaicRule);\n        const {\n          raster: r,\n          renderingRule: s\n        } = _this14;\n        return s && null == e.renderingRule && (e.renderingRule = s), r && null == e.raster && (e.raster = r), oe(_this14.url, e, _this14._getRequestOptions(t));\n      })();\n    }\n\n    createQuery() {\n      const e = new ce();\n      return e.outFields = [\"*\"], e.returnGeometry = !0, e.where = this.definitionExpression || \"1=1\", e;\n    }\n\n    queryRasters(e, t) {\n      var _this15 = this;\n\n      return _asyncToGenerator(function* () {\n        return ({\n          query: e,\n          requestOptions: t\n        } = yield _this15._prepareForQuery(e, t)), ae(_this15.url, e, t);\n      })();\n    }\n\n    queryObjectIds(e, t) {\n      var _this16 = this;\n\n      return _asyncToGenerator(function* () {\n        return ({\n          query: e,\n          requestOptions: t\n        } = yield _this16._prepareForQuery(e, t)), de(_this16.url, e, t);\n      })();\n    }\n\n    queryRasterCount(e, t) {\n      var _this17 = this;\n\n      return _asyncToGenerator(function* () {\n        return ({\n          query: e,\n          requestOptions: t\n        } = yield _this17._prepareForQuery(e, t)), me(_this17.url, e, t);\n      })();\n    }\n\n    queryVisibleRasters(e, t) {\n      var _this18 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!e) throw new o(\"imagery-layer: query-visible-rasters\", \"missing query parameter\");\n        yield _this18.load();\n        const {\n          pixelSize: i,\n          returnDomainValues: r,\n          returnTopmostRaster: s,\n          showNoDataRecords: n\n        } = t || {\n          pixelSize: null,\n          returnDomainValues: !1,\n          returnTopmostRaster: !1,\n          showNoDataRecords: !1\n        };\n        let a = !1,\n            l = null,\n            u = null;\n        const d = \"raster.servicepixelvalue\",\n              h = _this18._rasterFunctionNamesIndex;\n\n        if (p(e.outFields) && (a = e.outFields.some(e => !e.toLowerCase().includes(d)), _this18.version >= 10.4)) {\n          const t = e.outFields.filter(e => e.toLowerCase().includes(d) && e.length > d.length).map(e => {\n            const t = e.slice(d.length + 1);\n            return [_this18._updateRenderingRulesFunctionName(t, h), t];\n          });\n          l = t.map(e => new J({\n            functionName: e[0]\n          })), u = t.map(e => e[1]);\n          const {\n            renderingRule: i\n          } = _this18;\n          0 === l.length ? i?.functionName ? (l.push(i), u.push(i.functionName)) : l = null : i?.functionName && !l.some(e => e.functionName === i.functionName) && (l.push(i), u.push(i.functionName));\n        }\n\n        const f = c(e.outSpatialReference) || e.outSpatialReference.equals(_this18.spatialReference),\n              {\n          multidimensionalSubset: g\n        } = _this18;\n        let y = e.timeExtent || _this18.timeExtent;\n\n        if (g) {\n          const {\n            isOutside: t,\n            intersection: i\n          } = V(g, {\n            geometry: m(e.geometry),\n            timeExtent: m(e.timeExtent),\n            multidimensionalDefinition: _this18.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition\n          });\n          if (t) throw new o(\"imagery-layer:query-visible-rasters\", \"the request cannot be fulfilled when falling outside of the multidimensional subset\");\n          i && p(i.timeExtent) && (y = i.timeExtent);\n        }\n\n        const R = _this18._combineMosaicRuleWithTimeExtent(_this18.exportImageServiceParameters.mosaicRule, y),\n              b = _this18._getQueryParams({\n          geometry: e.geometry,\n          timeExtent: y,\n          mosaicRule: R,\n          renderingRule: _this18.version < 10.4 ? _this18.renderingRule : null,\n          renderingRules: l,\n          pixelSize: i,\n          returnCatalogItems: a,\n          returnGeometry: f,\n          raster: _this18.raster,\n          maxItemCount: s ? 1 : null\n        });\n\n        delete b.f;\n        const S = new xe(b);\n\n        try {\n          yield _this18.generateRasterInfo(_this18.renderingRule);\n          const i = yield oe(_this18.url, S, {\n            signal: t?.signal,\n            query: { ..._this18.customParameters\n            }\n          }),\n                s = e.outFields,\n                o = null != i.value && i.value.toLowerCase().includes(\"nodata\");\n          if (!(a && !f && i?.catalogItems?.features.length && (n || !o))) return _this18._processVisibleRastersResponse(i, {\n            returnDomainValues: r,\n            templateRRFunctionNames: u,\n            showNoDataRecords: n,\n            templateFields: s\n          });\n          const l = _this18.objectIdField || \"ObjectId\",\n                c = i.catalogItems?.features ?? [],\n                m = c.map(e => e.attributes?.[l]),\n                d = new ce({\n            objectIds: m,\n            returnGeometry: !0,\n            outSpatialReference: e.outSpatialReference,\n            outFields: [l]\n          }),\n                h = yield _this18.queryRasters(d);\n          return h?.features?.length && h.features.forEach(t => {\n            c.forEach(i => {\n              i.attributes[l] === t.attributes[l] && (i.geometry = new ue(t.geometry), p(e.outSpatialReference) && (i.geometry.spatialReference = e.outSpatialReference));\n            });\n          }), _this18._processVisibleRastersResponse(i, {\n            returnDomainValues: r,\n            templateRRFunctionNames: u,\n            showNoDataRecords: n,\n            templateFields: s\n          });\n        } catch {\n          throw new o(\"imagery-layer:query-visible-rasters\", \"encountered error when querying visible rasters\");\n        }\n      })();\n    }\n\n    fetchVariableStatisticsHistograms(e, t) {\n      var _this19 = this;\n\n      return _asyncToGenerator(function* () {\n        const i = n(b(_this19.parsedUrl) + \"/statistics\", {\n          query: _this19._getQueryParams({\n            variable: e\n          }),\n          signal: t\n        }).then(e => e.data?.statistics),\n              r = n(b(_this19.parsedUrl) + \"/histograms\", {\n          query: _this19._getQueryParams({\n            variable: e\n          }),\n          signal: t\n        }).then(e => e.data?.histograms),\n              s = yield Promise.all([i, r]);\n        return s[0] && s[0].forEach(e => {\n          e.avg = e.mean, e.stddev = e.standardDeviation;\n        }), {\n          statistics: s[0] || null,\n          histograms: s[1] || null\n        };\n      })();\n    }\n\n    createFlowMesh(e, t) {\n      var _this20 = this;\n\n      return _asyncToGenerator(function* () {\n        const i = _this20._rasterJobHandler.instance;\n        return i ? i.createFlowMesh(e, t) : Fe(e.meshType, e.simulationSettings, e.flowData, p(t.signal) ? t.signal : new AbortController().signal);\n      })();\n    }\n\n    getMultidimensionalSubsetVariables(e) {\n      const t = e ?? this.serviceRasterInfo.multidimensionalInfo;\n      return H(this.multidimensionalSubset, t);\n    }\n\n    _fetchService(e) {\n      var _this21 = this;\n\n      return _asyncToGenerator(function* () {\n        yield _this21._fetchServiceInfo(e), _this21.rasterInfo || (_this21.rasterInfo = _this21.serviceRasterInfo);\n\n        const t = _this21.sourceJSON,\n              i = p(_this21.serviceRasterInfo) ? Promise.resolve(_this21.serviceRasterInfo) : he(b(_this21.parsedUrl), t, {\n          signal: e,\n          query: _this21._getQueryParams()\n        }).then(e => (_this21._set(\"serviceRasterInfo\", e), _this21._set(\"multidimensionalInfo\", e.multidimensionalInfo), e)),\n              r = _this21._hasRenderingRule(_this21.renderingRule) ? _this21.generateRasterInfo(_this21.renderingRule, {\n          signal: e\n        }) : null,\n              s = _this21._getRasterFunctionInfos();\n\n        return Promise.all([i, r, s]).then(e => {\n          e[1] ? _this21._set(\"rasterInfo\", e[1]) : _this21._set(\"rasterInfo\", e[0]), e[2] && _this21._set(\"rasterFunctionInfos\", e[2]), _this21.renderer && !_this21._isSupportedRenderer(_this21.renderer) && (_this21._set(\"renderer\", null), u.getLogger(_this21.declaredClass).warn(\"ArcGISImageService\", \"Switching to the default renderer. Renderer applied is not valid for this Imagery Layer\")), _this21._set(\"renderer\", _this21._configRenderer(_this21.renderer)), _this21.addHandles([d(() => _this21.renderingRule, e => {\n            (_this21.renderer || _this21.symbolizer || _this21.popupEnabled && _this21.popupTemplate) && _this21.generateRasterInfo(e).then(e => {\n              e && (_this21.rasterInfo = e);\n            });\n          })]);\n          const {\n            serviceRasterInfo: t\n          } = _this21;\n          p(t.multidimensionalInfo) && _this21._updateMultidimensionalDefinition(t);\n        });\n      })();\n    }\n\n    _combineMosaicRuleWithTimeExtent(e, t) {\n      const i = this.timeInfo,\n            {\n        multidimensionalInfo: r\n      } = this.serviceRasterInfo;\n      if (c(e) || c(r) || c(t) || c(i?.startField)) return e;\n      const {\n        startField: s\n      } = i,\n            n = r.variables.some(e => e.dimensions.some(e => e.name === s)) ? s : \"StdTime\";\n      if (e = e.clone(), \"mosaic-dataset\" === this.sourceType) return e.multidimensionalDefinition = e.multidimensionalDefinition?.filter(e => e.dimensionName !== n), this._cleanupMultidimensionalDefinition(e);\n      e.multidimensionalDefinition = e.multidimensionalDefinition || [];\n      const o = e.multidimensionalDefinition.filter(e => e.dimensionName === n),\n            a = p(t.start) ? t.start.getTime() : null,\n            l = p(t.end) ? t.end.getTime() : null,\n            u = null == a || null == l || a === l,\n            m = u ? [a || l] : [[a, l]],\n            d = this.version >= 10.8;\n      if (o.length) o.forEach(e => {\n        e.dimensionName === n && (d ? (e.dimensionName = null, e.isSlice = !1, e.values = []) : (e.isSlice = u, e.values = m));\n      });else if (!d) {\n        const t = e.multidimensionalDefinition.filter(e => null != e.variableName && null == e.dimensionName);\n        t.length ? t.forEach(e => {\n          e.dimensionName = n, e.isSlice = u, e.values = m;\n        }) : e.multidimensionalDefinition.push(new _({\n          variableName: \"\",\n          dimensionName: n,\n          isSlice: u,\n          values: m\n        }));\n      }\n      return this._cleanupMultidimensionalDefinition(e);\n    }\n\n    _cleanupMultidimensionalDefinition(e) {\n      return c(e) ? null : (e.multidimensionalDefinition && (e.multidimensionalDefinition = e.multidimensionalDefinition.filter(e => !(!e.variableName && !e.dimensionName)), 0 === e.multidimensionalDefinition.length && (e.multidimensionalDefinition = null)), \"mosaic-dataset\" !== this.sourceType && null == e.multidimensionalDefinition ? null : e);\n    }\n\n    _prepareForQuery(e, t) {\n      var _this22 = this;\n\n      return _asyncToGenerator(function* () {\n        if (!(yield _this22._fetchCapabilities(t?.signal)).operations.supportsQuery) throw new o(\"imagery-layer:query-rasters\", \"query operation is not supported on the input image service\");\n        return e = p(e) ? R(ce, e) : _this22.createQuery(), t = _this22._getRequestOptions(t), _this22.raster && (t.query = { ...t.query,\n          raster: _this22.raster\n        }), {\n          query: e,\n          requestOptions: t\n        };\n      })();\n    }\n\n    _initJobHandler() {\n      var _this23 = this;\n\n      return _asyncToGenerator(function* () {\n        if (null != _this23._rasterJobHandler.connectionPromise) return _this23._rasterJobHandler.connectionPromise;\n        const e = new E();\n        _this23._rasterJobHandler.connectionPromise = e.initialize().then(() => {\n          _this23._rasterJobHandler.instance = e;\n        }, () => {}), yield _this23._rasterJobHandler.connectionPromise;\n      })();\n    }\n\n    _shutdownJobHandler() {\n      this._rasterJobHandler.instance && this._rasterJobHandler.instance.destroy(), this._rasterJobHandler.instance = null, this._rasterJobHandler.connectionPromise = null, this._rasterJobHandler.refCount = 0, this._cachedRendererJson = null;\n    }\n\n    _isSupportedRenderer(e) {\n      const {\n        rasterInfo: t,\n        renderingRule: i\n      } = this;\n      return \"unique-value\" === e.type && this._hasRenderingRule(i) && 1 === t?.bandCount && [\"u8\", \"s8\"].includes(t.pixelType) || null != t && null != e && B(t).includes(e.type);\n    }\n\n    _fetchCapabilities(e) {\n      var _this24 = this;\n\n      return _asyncToGenerator(function* () {\n        return _this24.capabilities || (yield _this24._fetchServiceInfo(e)), _this24.capabilities;\n      })();\n    }\n\n    _fetchServiceInfo(e) {\n      var _this25 = this;\n\n      return _asyncToGenerator(function* () {\n        let t = _this25.sourceJSON;\n\n        if (!t) {\n          const {\n            data: i,\n            ssl: r\n          } = yield n(b(_this25.parsedUrl), {\n            query: _this25._getQueryParams(),\n            signal: e\n          });\n          t = i, _this25.sourceJSON = t, r && (_this25.url = _this25.url.replace(/^http:/i, \"https:\"));\n        }\n\n        if (t.capabilities?.toLowerCase().split(\",\").map(e => e.trim()).indexOf(\"tilesonly\") > -1) throw new o(\"imagery-layer:fetch-service-info\", \"use ImageryTileLayer to open tiles-only image services\");\n\n        _this25.read(t, {\n          origin: \"service\",\n          url: _this25.parsedUrl\n        });\n      })();\n    }\n\n    _isMosaicDataset(e) {\n      return e.serviceSourceType ? \"esriImageServiceSourceTypeMosaicDataset\" === e.serviceSourceType : e.fields?.length > 0;\n    }\n\n    _isMosaicRuleSupported(e) {\n      if (!e) return !1;\n\n      const t = this._isMosaicDataset(e),\n            i = e.currentVersion >= 10.71 && e.hasMultidimensions && !(e.fields?.length > 1);\n\n      return t || i;\n    }\n\n    _isVectorFieldResampleFunction(e) {\n      if (c(e)) return !1;\n      const {\n        functionName: t,\n        functionArguments: i\n      } = e,\n            r = \"resample\" === t?.toLowerCase(),\n            s = i?.ResampleType || i?.resampleType;\n      return r && (7 === s || 10 === s);\n    }\n\n    _isPicture() {\n      return !this.format || this.format.includes(\"jpg\") || this.format.includes(\"png\");\n    }\n\n    _configRenderer(e) {\n      const t = this._isPicture(),\n            {\n        rasterInfo: i\n      } = this;\n\n      if (!t && !this.pixelFilter || this._isVectorDataSet()) {\n        if (!this.bandIds && i.bandCount >= 3) {\n          const e = k(i);\n          !e || 3 === i.bandCount && 0 === e[0] && 1 === e[1] && 2 === e[2] || (this.bandIds = e);\n        }\n\n        e || (e = G(i, {\n          bandIds: this.bandIds,\n          variableName: this.renderingRule ? null : this.mosaicRule?.multidimensionalDefinition?.[0].variableName\n        }));\n        const t = W(e.toJSON());\n        this.symbolizer ? (this.symbolizer.rendererJSON = t, this.symbolizer.rasterInfo = i) : this.symbolizer = new $({\n          rendererJSON: t,\n          rasterInfo: i\n        }), this.symbolizer.bind().success || (this.symbolizer = null);\n      }\n\n      return e;\n    }\n\n    _clonePixelData(e) {\n      return null == e ? e : {\n        extent: e.extent && e.extent.clone(),\n        pixelBlock: p(e.pixelBlock) ? e.pixelBlock.clone() : null\n      };\n    }\n\n    _getQueryParams(e) {\n      e && p(e.renderingRule) && \"string\" != typeof e.renderingRule && (e.renderingRule = this._getRenderingRuleString(e.renderingRule));\n      const {\n        raster: t,\n        viewId: i\n      } = this;\n      return {\n        raster: t,\n        viewId: i,\n        f: \"json\",\n        ...e,\n        ...this.customParameters\n      };\n    }\n\n    _getRequestOptions(e) {\n      return { ...e,\n        query: { ...e?.query,\n          ...this.customParameters\n        }\n      };\n    }\n\n    _decodePixelBlock(e, t, i) {\n      return this._rasterJobHandler.instance ? this._rasterJobHandler.instance.decode({\n        data: e,\n        options: t\n      }) : U(e, t, i);\n    }\n\n    _getRasterFunctionInfos(e) {\n      var _this26 = this;\n\n      return _asyncToGenerator(function* () {\n        const t = _this26.sourceJSON.rasterFunctionInfos;\n        if (_this26.loaded) return t;\n\n        if (t && _this26.version >= 10.3) {\n          if (1 === t.length && \"none\" === t[0].name.toLowerCase()) return t;\n          return (yield n(b(_this26.parsedUrl) + \"/rasterFunctionInfos\", {\n            query: _this26._getQueryParams(),\n            signal: e\n          })).data?.rasterFunctionInfos;\n        }\n\n        return null;\n      })();\n    }\n\n    _canRequestImageElement(e) {\n      return !this.pixelFilter && (!e || e.includes(\"png\"));\n    }\n\n    _requestArrayBuffer(e) {\n      var _this27 = this;\n\n      return _asyncToGenerator(function* () {\n        const {\n          imageProps: t,\n          requestAsImageElement: i,\n          returnImageBitmap: r,\n          signal: s\n        } = e;\n\n        if (i && _this27._canRequestImageElement(t.format)) {\n          const i = `${b(_this27.parsedUrl)}/exportImage`,\n                {\n            data: o\n          } = yield n(i, {\n            responseType: r ? \"blob\" : \"image\",\n            query: _this27._getQueryParams({\n              f: \"image\",\n              ..._this27.refreshParameters,\n              ...e.imageServiceParameters\n            }),\n            signal: s\n          });\n\n          if (o instanceof Blob) {\n            return {\n              imageBitmap: yield P(o, i),\n              params: t\n            };\n          }\n\n          return {\n            imageOrCanvasElement: o,\n            params: t\n          };\n        }\n\n        const a = _this27._initJobHandler(),\n              l = n(b(_this27.parsedUrl) + \"/exportImage\", {\n          responseType: \"array-buffer\",\n          query: _this27._getQueryParams({\n            f: \"image\",\n            ...e.imageServiceParameters\n          }),\n          signal: s\n        }),\n              u = (yield Promise.all([l, a]))[0].data,\n              p = t.format || \"jpgpng\";\n\n        let c = p;\n        if (\"bsq\" !== c && \"bip\" !== c && (c = L(u)), !c) throw new o(\"imagery-layer:fetch-image\", \"unsupported format signature \" + String.fromCharCode.apply(null, new Uint8Array(u)));\n        const m = {\n          signal: s\n        },\n              d = \"gif\" === p || \"bmp\" === p || p.includes(\"png\") && (\"png\" === c || \"jpg\" === c) ? U(u, {\n          useCanvas: !0,\n          ...t\n        }, m) : _this27._decodePixelBlock(u, {\n          width: t.width,\n          height: t.height,\n          planes: null,\n          pixelType: null,\n          noDataValue: null,\n          format: p\n        }, m);\n        return {\n          pixelData: {\n            pixelBlock: yield d,\n            extent: t.extent\n          },\n          params: t\n        };\n      })();\n    }\n\n    _generateRasterInfo(e, t) {\n      const i = { ...t,\n        query: this._getQueryParams()\n      };\n      return fe(b(this.parsedUrl), e, i);\n    }\n\n    _isValidCustomizedMosaicRule(e) {\n      return e && JSON.stringify(e.toJSON()) !== JSON.stringify(this.defaultMosaicRule?.toJSON());\n    }\n\n    _updateMultidimensionalDefinition(e) {\n      if (this._isValidCustomizedMosaicRule(this.mosaicRule)) return;\n      let t = Q(e, {\n        multidimensionalSubset: this.multidimensionalSubset\n      });\n\n      if (p(t) && t.length > 0) {\n        this.mosaicRule = this.mosaicRule || new O();\n        const e = this.mosaicRule.multidimensionalDefinition;\n        !this.sourceJSON.defaultVariableName && this.renderingRule && \"none\" !== this.renderingRule.functionName?.toLowerCase() && t.forEach(e => e.variableName = \"\"), t = t.filter(({\n          variableName: e,\n          dimensionName: t\n        }) => e && \"*\" !== e || t), !e?.length && t.length && (this.mosaicRule.multidimensionalDefinition = t);\n      }\n    }\n\n    _processVisibleRastersResponse(e, i) {\n      i = i || {};\n      const r = e.value,\n            {\n        templateRRFunctionNames: s,\n        showNoDataRecords: n,\n        returnDomainValues: o,\n        templateFields: a\n      } = i,\n            l = e.processedValues;\n      let u = e.catalogItems && e.catalogItems.features,\n          c = e.properties && e.properties.Values && e.properties.Values.map(e => e.replace(/ /gi, \", \")) || [];\n      const m = this.objectIdField || \"ObjectId\",\n            d = \"string\" == typeof r && r.toLowerCase().includes(\"nodata\"),\n            h = [];\n\n      if (r && !u && !d) {\n        const e = {};\n        e[m] = 0;\n        c = [r], u = [new t(this.fullExtent, null, e)];\n      }\n\n      if (!u) return [];\n      let f, g, y;\n      this._updateResponseFieldNames(u, a), d && !n && (u = []);\n\n      for (let t = 0; t < u.length; t++) {\n        if (f = u[t], null != r) {\n          if (g = c[t], y = this.renderingRule && l && l.length > 0 && s && s.length > 0 && s.includes(this.renderingRule.functionName) ? l[s.indexOf(this.renderingRule.functionName)] : r, \"nodata\" === g.toLowerCase() && !n) continue;\n          const e = \"Raster.ItemPixelValue\",\n                i = \"Raster.ServicePixelValue\";\n          f.attributes[e] = g, f.attributes[i] = y, this._updateFeatureWithMagDirValues(f, g);\n          const o = this.fields && this.fields.length > 0;\n          let a = this.renderingRule && p(this.serviceRasterInfo.attributeTable) ? o ? g : r : y;\n          this.renderingRule || (a = o ? g : r), this._updateFeatureWithRasterAttributeTableValues(f, a);\n        }\n\n        if (f.sourceLayer = f.layer = this, o && this._updateFeatureWithDomainValues(f), s && l && s.length === l.length) for (let e = 0; e < s.length; e++) {\n          const t = \"Raster.ServicePixelValue.\" + s[e];\n          f.attributes[t] = l[e];\n        }\n        h.push(u[t]);\n      }\n\n      return h;\n    }\n\n    _processMultidimensionalIntersection(e, t, i) {\n      const {\n        multidimensionalSubset: r\n      } = this;\n      if (!r) return {\n        isOutSide: !1,\n        timeExtent: t,\n        mosaicRule: i = this._combineMosaicRuleWithTimeExtent(i, t)\n      };\n\n      if (r) {\n        const {\n          isOutside: i,\n          intersection: s\n        } = V(r, {\n          geometry: e,\n          timeExtent: t\n        });\n        if (i) return {\n          isOutSide: !0,\n          timeExtent: null,\n          mosaicRule: null\n        };\n        s && p(s.timeExtent) && (t = s.timeExtent);\n      }\n\n      if (i = this._combineMosaicRuleWithTimeExtent(i, t), p(i) && i.multidimensionalDefinition) {\n        const {\n          isOutside: e\n        } = V(r, {\n          multidimensionalDefinition: i.multidimensionalDefinition\n        });\n        if (e) return {\n          isOutSide: !0,\n          timeExtent: null,\n          mosaicRule: null\n        };\n      }\n\n      return {\n        isOutSide: !1,\n        timeExtent: t,\n        mosaicRule: i\n      };\n    }\n\n    _updateFeatureWithRasterAttributeTableValues(e, t) {\n      const i = this.rasterInfo.attributeTable || this.serviceRasterInfo.attributeTable;\n      if (c(i)) return;\n      const {\n        features: r,\n        fields: s\n      } = i,\n            n = s.map(e => e.name).filter(e => \"value\" === e.toLowerCase()),\n            o = n && n[0];\n      if (!o) return;\n      const a = r.filter(e => e.attributes[o] === (null != t ? parseInt(t, 10) : null));\n      a && a[0] && s.forEach(t => {\n        const i = this._rasterAttributeTableFieldPrefix + t.name;\n        e.attributes[i] = a[0].attributes[t.name];\n      });\n    }\n\n    _updateFeatureWithMagDirValues(e, t) {\n      if (!this._isVectorDataSet()) return;\n      const i = t.split(/,\\s*/).map(e => parseFloat(e)),\n            r = i.map(e => [e]),\n            s = i.map(e => ({\n        minValue: e,\n        maxValue: e,\n        noDataValue: null\n      })),\n            n = new C({\n        height: 1,\n        width: 1,\n        pixelType: \"f32\",\n        pixels: r,\n        statistics: s\n      });\n      null != this.pixelFilter && this.pixelFilter({\n        pixelBlock: n,\n        extent: new le(0, 0, 0, 0, this.spatialReference)\n      });\n      const o = \"esriImageServiceDataTypeVector-MagDir\" === this.serviceDataType ? [n.pixels[0][0], n.pixels[1][0]] : z([n.pixels[0][0], n.pixels[1][0]]);\n      e.attributes[\"Raster.Magnitude\"] = o[0], e.attributes[\"Raster.Direction\"] = o[1];\n    }\n\n    _updateFeatureWithDomainValues(e) {\n      const t = this.fields && this.fields.filter(e => e.domain && \"coded-value\" === e.domain.type);\n      null != t && t.forEach(t => {\n        const i = e.attributes[t.name];\n\n        if (null != i) {\n          const r = t.domain.codedValues.find(e => e.code === i);\n          r && (e.attributes[t.name] = r.name);\n        }\n      });\n    }\n\n    _updateResponseFieldNames(e, t) {\n      if (!t || t.length < 1) return;\n      const i = this.fieldsIndex;\n      c(i) || e.forEach(e => {\n        if (e && e.attributes) for (const r of t) {\n          const t = i.get(r)?.name;\n          t && t !== r && (e.attributes[r] = e.attributes[t], delete e.attributes[t]);\n        }\n      });\n    }\n\n    _getRenderingRuleString(e) {\n      if (this._hasRenderingRule(e)) {\n        let t = e.toJSON();\n        return t = t.rasterFunctionDefinition ?? t, (t.thumbnail || t.thumbnailEx) && (t.thumbnail = t.thumbnailEx = null), JSON.stringify(t);\n      }\n\n      return null;\n    }\n\n    _hasRenderingRule(e) {\n      return null != e && null != e.functionName && \"none\" !== e.functionName.toLowerCase();\n    }\n\n    _updateRenderingRulesFunctionName(e, t) {\n      if (!e || e.length < 1) return;\n      if (\"Raw\" === e) return e.replace(\"Raw\", \"None\");\n      const i = e.toLowerCase().replace(/ /gi, \"_\");\n      return t.has(i) ? t.get(i) : e;\n    }\n\n    _isRFTJson(e) {\n      return e && e.name && e.arguments && e.function && e.hasOwnProperty(\"functionType\");\n    }\n\n    _isVectorDataSet() {\n      return \"esriImageServiceDataTypeVector-UV\" === this.serviceDataType || \"esriImageServiceDataTypeVector-MagDir\" === this.serviceDataType;\n    }\n\n    _applyMosaicAndRenderingRules(e) {\n      const {\n        raster: t,\n        mosaicRule: i,\n        renderingRule: r\n      } = this;\n      r && null == e.renderingRule && (e.renderingRule = r), i && null == e.mosaicRule && (e.mosaicRule = i), t && null == e.raster && (e.raster = t);\n    }\n\n    _readCapabilities(e) {\n      const t = e.capabilities ? e.capabilities.toLowerCase().split(\",\").map(e => e.trim()) : [\"image\", \"catalog\"],\n            {\n        currentVersion: i,\n        advancedQueryCapabilities: r,\n        maxRecordCount: s\n      } = e,\n            n = t.includes(\"image\"),\n            o = \"esriImageServiceDataTypeElevation\" === e.serviceDataType,\n            a = !!(e.spatialReference || e.extent && e.extent.spatialReference),\n            l = t.includes(\"edit\"),\n            u = t.includes(\"mensuration\") && a,\n            p = null == e.mensurationCapabilities ? [] : e.mensurationCapabilities.toLowerCase().split(\",\").map(e => e.trim()),\n            c = u && p.includes(\"basic\");\n      return {\n        data: {\n          supportsAttachment: !1\n        },\n        operations: {\n          supportsComputeHistograms: n,\n          supportsExportImage: n,\n          supportsIdentify: n,\n          supportsMeasure: u,\n          supportsDownload: t.includes(\"download\"),\n          supportsQuery: t.includes(\"catalog\") && e.fields && e.fields.length > 0,\n          supportsGetSamples: i >= 10.2 && n,\n          supportsProject: i >= 10.3 && n,\n          supportsComputeStatisticsHistograms: i >= 10.4 && n,\n          supportsQueryBoundary: i >= 10.6 && n,\n          supportsCalculateVolume: i >= 10.7 && o,\n          supportsComputePixelLocation: i >= 10.7 && t.includes(\"catalog\"),\n          supportsComputeAngles: i >= 10.91,\n          supportsAdd: l,\n          supportsDelete: l,\n          supportsEditing: l,\n          supportsUpdate: l,\n          supportsCalculate: !1,\n          supportsTruncate: !1,\n          supportsValidateSql: !1,\n          supportsChangeTracking: !1,\n          supportsQueryAttachments: !1,\n          supportsResizeAttachments: !1,\n          supportsSync: !1,\n          supportsExceedsLimitStatistics: !1,\n          supportsQueryAnalytics: !1,\n          supportsQueryTopFeatures: !1\n        },\n        query: {\n          maxRecordCount: s,\n          maxRecordCountFactor: void 0,\n          supportsStatistics: !!r?.supportsStatistics,\n          supportsOrderBy: !!r?.supportsOrderBy,\n          supportsDistinct: !!r?.supportsDistinct,\n          supportsPagination: !!r?.supportsPagination,\n          supportsStandardizedQueriesOnly: !!r?.useStandardizedQueries,\n          supportsPercentileStatistics: !!r?.supportsPercentileStatistics,\n          supportsCentroid: !!r?.supportsReturningGeometryCentroid,\n          supportsDistance: !!r?.supportsQueryWithDistance,\n          supportsExtent: !!r?.supportsReturningQueryExtent,\n          supportsGeometryProperties: !!r?.supportsReturningGeometryProperties,\n          supportsHavingClause: !!r?.supportsHavingClause,\n          supportsQuantization: !1,\n          supportsQuantizationEditMode: !1,\n          supportsQueryGeometry: !1,\n          supportsResultType: !1,\n          supportsMaxRecordCountFactor: !1,\n          supportsSqlExpression: !1,\n          supportsTopFeaturesQuery: !1,\n          supportsQueryByOthers: !1,\n          supportsHistoricMoment: !1,\n          supportsFormatPBF: !1,\n          supportsDisjointSpatialRelationship: !1,\n          supportsCacheHint: !1,\n          supportsSpatialAggregationStatistics: !1,\n          supportedSpatialAggregationStatistics: {\n            envelope: !1,\n            centroid: !1,\n            convexHull: !1\n          },\n          supportsDefaultSpatialReference: !!r?.supportsDefaultSR,\n          supportsFullTextSearch: !1,\n          supportsCompactGeometry: !1,\n          standardMaxRecordCount: void 0,\n          tileMaxRecordCount: void 0\n        },\n        mensuration: {\n          supportsDistanceAndAngle: c,\n          supportsAreaAndPerimeter: c,\n          supportsPointOrCentroid: c,\n          supportsHeightFromBaseAndTop: u && p.includes(\"base-top height\"),\n          supportsHeightFromBaseAndTopShadow: u && p.includes(\"base-top shadow height\"),\n          supportsHeightFromTopAndTopShadow: u && p.includes(\"top-top shadow height\"),\n          supports3D: u && p.includes(\"3d\")\n        }\n      };\n    }\n\n  };\n\n  function b(e) {\n    return e?.path ?? \"\";\n  }\n\n  return e([f()], g.prototype, \"_functionRasterInfos\", void 0), e([f()], g.prototype, \"_rasterJobHandler\", void 0), e([f()], g.prototype, \"_cachedRendererJson\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"_serviceSupportsMosaicRule\", void 0), e([S(\"_serviceSupportsMosaicRule\", [\"currentVersion\", \"fields\"])], g.prototype, \"readServiceSupportsMosaicRule\", null), e([f()], g.prototype, \"_rasterAttributeTableFieldPrefix\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"_rasterFunctionNamesIndex\", null), e([f()], g.prototype, \"adjustAspectRatio\", void 0), e([f({\n    type: [y],\n    json: {\n      write: !0\n    }\n  })], g.prototype, \"bandIds\", void 0), e([S(\"bandIds\")], g.prototype, \"readBandIds\", null), e([f({\n    readOnly: !0,\n    json: {\n      read: !1\n    }\n  })], g.prototype, \"capabilities\", void 0), e([S(\"service\", \"capabilities\", [\"capabilities\", \"currentVersion\", \"serviceDataType\"])], g.prototype, \"readCapabilities\", null), e([f({\n    type: Number\n  })], g.prototype, \"compressionQuality\", void 0), e([x(\"compressionQuality\")], g.prototype, \"writeCompressionQuality\", null), e([f({\n    type: Number\n  })], g.prototype, \"compressionTolerance\", void 0), e([x(\"compressionTolerance\")], g.prototype, \"writeCompressionTolerance\", null), e([f({\n    json: {\n      read: {\n        source: \"copyrightText\"\n      }\n    }\n  })], g.prototype, \"copyright\", void 0), e([f({\n    readOnly: !0,\n    dependsOn: [\"_serviceSupportsMosaicRule\"]\n  })], g.prototype, \"defaultMosaicRule\", void 0), e([S(\"defaultMosaicRule\", [\"defaultMosaicMethod\"])], g.prototype, \"readDefaultMosaicRule\", null), e([f({\n    type: String,\n    json: {\n      name: \"layerDefinition.definitionExpression\",\n      write: {\n        enabled: !0,\n        allowNull: !0\n      }\n    }\n  })], g.prototype, \"definitionExpression\", void 0), e([f({\n    readOnly: !0,\n    constructOnly: !0\n  })], g.prototype, \"exportImageServiceParameters\", void 0), e([f()], g.prototype, \"rasterInfo\", void 0), e([f({\n    readOnly: !0,\n    type: [D]\n  })], g.prototype, \"fields\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"fieldsIndex\", null), e([f({\n    type: [\"png\", \"png8\", \"png24\", \"png32\", \"jpg\", \"bmp\", \"gif\", \"jpgpng\", \"lerc\", \"tiff\"],\n    json: {\n      write: !0\n    }\n  })], g.prototype, \"format\", null), e([S(\"service\", \"format\", [\"serviceDataType\"])], g.prototype, \"readFormat\", null), e([f({\n    type: le\n  })], g.prototype, \"fullExtent\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"hasMultidimensions\", void 0), e([f({\n    json: {\n      read: {\n        source: \"maxImageHeight\"\n      }\n    }\n  })], g.prototype, \"imageMaxHeight\", void 0), e([f({\n    json: {\n      read: {\n        source: \"maxImageWidth\"\n      }\n    }\n  })], g.prototype, \"imageMaxWidth\", void 0), e([f({\n    type: String,\n    json: {\n      type: M.jsonValues,\n      read: M.read,\n      write: M.write\n    }\n  })], g.prototype, \"interpolation\", void 0), e([f()], g.prototype, \"minScale\", void 0), e([S(\"service\", \"minScale\")], g.prototype, \"readMinScale\", null), e([f()], g.prototype, \"maxScale\", void 0), e([S(\"service\", \"maxScale\")], g.prototype, \"readMaxScale\", null), e([f({\n    type: O\n  })], g.prototype, \"mosaicRule\", null), e([S(\"mosaicRule\", [\"mosaicRule\", \"defaultMosaicMethod\"])], g.prototype, \"readMosaicRule\", null), e([x(\"mosaicRule\")], g.prototype, \"writeMosaicRule\", null), e([f()], g.prototype, \"multidimensionalInfo\", void 0), e([f({\n    type: N,\n    json: {\n      write: !0\n    }\n  })], g.prototype, \"multidimensionalSubset\", void 0), e([f({\n    json: {\n      type: y\n    }\n  })], g.prototype, \"noData\", void 0), e([x(\"noData\")], g.prototype, \"writeNoData\", null), e([f({\n    type: String,\n    json: {\n      type: A.jsonValues,\n      read: A.read,\n      write: A.write\n    }\n  })], g.prototype, \"noDataInterpretation\", void 0), e([f({\n    type: String,\n    readOnly: !0,\n    json: {\n      read: {\n        source: [\"fields\"]\n      }\n    }\n  })], g.prototype, \"objectIdField\", void 0), e([S(\"objectIdField\")], g.prototype, \"readObjectIdField\", null), e([f({})], g.prototype, \"geometryType\", void 0), e([f({})], g.prototype, \"typeIdField\", void 0), e([f({})], g.prototype, \"types\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"parsedUrl\", null), e([f({\n    type: Function\n  })], g.prototype, \"pixelFilter\", void 0), e([f()], g.prototype, \"raster\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"sourceType\", void 0), e([S(\"sourceType\", [\"serviceSourceType\", \"fields\"])], g.prototype, \"readSourceType\", null), e([f()], g.prototype, \"viewId\", void 0), e([f({\n    types: i,\n    json: {\n      name: \"layerDefinition.drawingInfo.renderer\",\n      origins: {\n        \"web-scene\": {\n          types: r,\n          name: \"layerDefinition.drawingInfo.renderer\",\n          write: {\n            overridePolicy: e => ({\n              enabled: e && \"vector-field\" !== e.type && \"flow\" !== e.type\n            })\n          }\n        }\n      }\n    }\n  })], g.prototype, \"renderer\", null), e([S(\"renderer\")], g.prototype, \"readRenderer\", null), e([x(\"renderer\")], g.prototype, \"writeRenderer\", null), e([f()], g.prototype, \"symbolizer\", void 0), e([f(I)], g.prototype, \"opacity\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"rasterFields\", null), e([f({\n    constructOnly: !0\n  })], g.prototype, \"rasterFunctionInfos\", void 0), e([f({\n    type: J\n  })], g.prototype, \"renderingRule\", null), e([S(\"renderingRule\", [\"renderingRule\", \"rasterFunctionInfos\"])], g.prototype, \"readRenderingRule\", null), e([x(\"renderingRule\")], g.prototype, \"writeRenderingRule\", null), e([f()], g.prototype, \"serviceDataType\", void 0), e([f({\n    readOnly: !0,\n    type: De\n  })], g.prototype, \"spatialReference\", void 0), e([S(\"spatialReference\", [\"spatialReference\", \"extent\"])], g.prototype, \"readSpatialReference\", null), e([f({\n    json: {\n      type: je.jsonValues\n    }\n  })], g.prototype, \"pixelType\", void 0), e([S(\"pixelType\")], g.prototype, \"readPixelType\", null), e([x(\"pixelType\")], g.prototype, \"writePixelType\", null), e([f({\n    constructOnly: !0,\n    type: q\n  })], g.prototype, \"serviceRasterInfo\", void 0), e([f()], g.prototype, \"sourceJSON\", void 0), e([f(w)], g.prototype, \"url\", void 0), e([f({\n    readOnly: !0\n  })], g.prototype, \"version\", void 0), e([S(\"version\", [\"currentVersion\", \"fields\", \"timeInfo\"])], g.prototype, \"readVersion\", null), g = e([v(\"esri.layers.mixins.ArcGISImageService\")], g), g;\n};\n\nexport { Ne as ArcGISImageService };","map":{"version":3,"names":["_","e","t","rasterRendererTypes","i","websceneRasterRendererTypes","r","read","s","n","o","strict","a","clone","l","u","isSome","p","isNone","c","unwrap","m","watch","d","urlToObject","h","property","f","ensureRange","g","Integer","y","ensureClass","R","ensureNumber","b","reader","S","subclass","v","writer","x","opacity","I","url","w","ExportImageServiceParameters","F","D","j","createBitmap","P","isSupportedRendererType","T","O","N","C","interpolationKebab","M","noDataInterpretationKebab","A","J","q","E","intersectMultimensionalSubset","V","getSubsetVariablesFromMdInfo","H","getDefaultMultidimensionalDefinition","Q","decode","U","getFormat","L","uvComponentToVector","z","getSupportedRendererTypes","B","getDefaultBandCombination","k","createDefaultRenderer","G","normalizeRendererJSON","W","$","computeAngles","K","computePixelSpaceLocations","X","computeHistograms","Y","computeStatisticsHistograms","Z","measureHeight","ee","measureAreaAndPerimeter","te","measureDistanceAndAngle","ie","measurePointOrCentroid","re","getImageSpatialReferenceQueryParameter","se","getSamples","ne","identify","oe","executeQueryJSON","ae","le","ue","pe","ce","executeForCount","me","executeForIds","de","fetchServiceRasterInfo","he","generateRasterInfo","fe","getCatalogItemRasterInfo","ge","ye","Re","be","Se","ve","xe","Ie","we","_e","createFlowMesh","Fe","De","je","U1","U2","U4","U8","S8","U16","S16","U32","S32","F32","F64","C64","C128","UNKNOWN","Pe","Set","Te","min","max","Oe","JSON","stringify","match","map","replace","join","Ne","constructor","arguments","_functionRasterInfos","_rasterJobHandler","instance","refCount","connectionPromise","_cachedRendererJson","_serviceSupportsMosaicRule","_rasterAttributeTableFieldPrefix","adjustAspectRatio","bandIds","capabilities","compressionQuality","compressionTolerance","copyright","defaultMosaicRule","definitionExpression","exportImageServiceParameters","rasterInfo","fields","fullExtent","hasMultidimensions","imageMaxHeight","imageMaxWidth","interpolation","minScale","maxScale","multidimensionalInfo","multidimensionalSubset","noData","noDataInterpretation","objectIdField","geometryType","typeIdField","types","pixelFilter","raster","sourceType","viewId","symbolizer","rasterFunctionInfos","serviceDataType","spatialReference","pixelType","serviceRasterInfo","sourceJSON","version","initialize","_set","layer","readServiceSupportsMosaicRule","_isMosaicRuleSupported","_rasterFunctionNamesIndex","Map","length","forEach","set","name","toLowerCase","readBandIds","Array","isArray","every","readCapabilities","_readCapabilities","writeCompressionQuality","format","writeCompressionTolerance","readDefaultMosaicRule","fromJSON","fieldsIndex","has","readFormat","readMinScale","minLOD","maxLOD","readMaxScale","mosaicRule","mosaicMethod","toJSON","mosaicOperation","readMosaicRule","writeMosaicRule","where","_isValidCustomizedMosaicRule","writeNoData","readObjectIdField","filter","type","parsedUrl","readSourceType","_isMosaicDataset","renderer","loaded","_configRenderer","readRenderer","layerDefinition","drawingInfo","symbolTileSize","getLogger","declaredClass","warn","writeRenderer","rasterFields","alias","domain","editable","push","operations","supportsQuery","some","_isVectorDataSet","attributeTable","concat","renderingRule","rasterFunction","rasterFunctionArguments","readRenderingRule","_isRFTJson","rasterFunctionDefinition","writeRenderingRule","readSpatialReference","extent","readPixelType","writePixelType","readVersion","currentVersion","hasOwnProperty","applyFilter","_clonePixelData","applyRenderer","_isPicture","bind","updateSymbolizer","symbolize","pixelBlock","destroy","_shutdownJobHandler","increaseRasterJobHandlerUsage","decreaseRasterJobHandlerUsage","_fetchCapabilities","signal","supportsComputeAngles","_getRequestOptions","supportsComputePixelLocation","supportsComputeHistograms","_applyMosaicAndRenderingRules","supportsComputeStatisticsHistograms","operationType","mensuration","supportsHeightFromBaseAndTop","supportsHeightFromBaseAndTopShadow","supportsHeightFromTopAndTopShadow","supportsAreaAndPerimeter","is3D","supports3D","supportsDistanceAndAngle","supportsPointOrCentroid","getField","get","getFieldDomain","fetchImage","getExportImageServiceParameters","timeExtent","requestAsImageElement","_canRequestImageElement","document","createElement","width","height","returnImageBitmap","imageBitmap","imageOrCanvasElement","bandCount","createEmptyBand","pixelData","pixels","mask","Uint8Array","imageServiceParameters","imageProps","_requestArrayBuffer","fetchKeyProperties","query","_getQueryParams","then","data","fetchRasterAttributeTable","Promise","reject","getCatalogItemICSInfo","ics","icsToPixelTransform","icsExtent","northDirection","catch","geometries","inSR","wkid","outSR","xmin","xmax","ymax","ymin","all","ipxf","geodataXform","xf_0","coefficients","affine","cellsizeRatio","imageCoordinateSystem","Math","atan","PI","functionName","_isVectorFieldResampleFunction","_generateRasterInfo","shiftCentralMeridian","_hasRenderingRule","BandIds","Raster","_processMultidimensionalIntersection","isOutSide","_getRenderingRuleString","start","end","time","bbox","bboxSR","imageSR","size","supportsGetSamples","supportsIdentify","geometry","createQuery","outFields","returnGeometry","queryRasters","requestOptions","_prepareForQuery","queryObjectIds","queryRasterCount","queryVisibleRasters","load","pixelSize","returnDomainValues","returnTopmostRaster","showNoDataRecords","includes","slice","_updateRenderingRulesFunctionName","outSpatialReference","equals","isOutside","intersection","multidimensionalDefinition","_combineMosaicRuleWithTimeExtent","renderingRules","returnCatalogItems","maxItemCount","customParameters","value","catalogItems","features","_processVisibleRastersResponse","templateRRFunctionNames","templateFields","attributes","objectIds","fetchVariableStatisticsHistograms","variable","statistics","histograms","avg","mean","stddev","standardDeviation","meshType","simulationSettings","flowData","AbortController","getMultidimensionalSubsetVariables","_fetchService","_fetchServiceInfo","resolve","_getRasterFunctionInfos","_isSupportedRenderer","addHandles","popupEnabled","popupTemplate","_updateMultidimensionalDefinition","timeInfo","startField","variables","dimensions","dimensionName","_cleanupMultidimensionalDefinition","getTime","isSlice","values","variableName","_initJobHandler","ssl","split","trim","indexOf","origin","serviceSourceType","functionArguments","ResampleType","resampleType","rendererJSON","success","_decodePixelBlock","options","responseType","refreshParameters","Blob","params","String","fromCharCode","apply","useCanvas","planes","noDataValue","defaultVariableName","processedValues","properties","Values","_updateResponseFieldNames","_updateFeatureWithMagDirValues","_updateFeatureWithRasterAttributeTableValues","sourceLayer","_updateFeatureWithDomainValues","parseInt","parseFloat","minValue","maxValue","codedValues","find","code","thumbnail","thumbnailEx","function","advancedQueryCapabilities","maxRecordCount","mensurationCapabilities","supportsAttachment","supportsExportImage","supportsMeasure","supportsDownload","supportsProject","supportsQueryBoundary","supportsCalculateVolume","supportsAdd","supportsDelete","supportsEditing","supportsUpdate","supportsCalculate","supportsTruncate","supportsValidateSql","supportsChangeTracking","supportsQueryAttachments","supportsResizeAttachments","supportsSync","supportsExceedsLimitStatistics","supportsQueryAnalytics","supportsQueryTopFeatures","maxRecordCountFactor","supportsStatistics","supportsOrderBy","supportsDistinct","supportsPagination","supportsStandardizedQueriesOnly","useStandardizedQueries","supportsPercentileStatistics","supportsCentroid","supportsReturningGeometryCentroid","supportsDistance","supportsQueryWithDistance","supportsExtent","supportsReturningQueryExtent","supportsGeometryProperties","supportsReturningGeometryProperties","supportsHavingClause","supportsQuantization","supportsQuantizationEditMode","supportsQueryGeometry","supportsResultType","supportsMaxRecordCountFactor","supportsSqlExpression","supportsTopFeaturesQuery","supportsQueryByOthers","supportsHistoricMoment","supportsFormatPBF","supportsDisjointSpatialRelationship","supportsCacheHint","supportsSpatialAggregationStatistics","supportedSpatialAggregationStatistics","envelope","centroid","convexHull","supportsDefaultSpatialReference","supportsDefaultSR","supportsFullTextSearch","supportsCompactGeometry","standardMaxRecordCount","tileMaxRecordCount","path","prototype","readOnly","json","write","Number","source","dependsOn","enabled","allowNull","constructOnly","jsonValues","Function","origins","overridePolicy","ArcGISImageService"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/mixins/ArcGISImageService.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import t from\"../../Graphic.js\";import{rasterRendererTypes as i,websceneRasterRendererTypes as r,read as s}from\"../../rasterRenderers.js\";import n from\"../../request.js\";import o from\"../../core/Error.js\";import{strict as a}from\"../../core/jsonMap.js\";import{clone as l}from\"../../core/lang.js\";import u from\"../../core/Logger.js\";import{isSome as p,isNone as c,unwrap as m}from\"../../core/maybe.js\";import{watch as d}from\"../../core/reactiveUtils.js\";import{urlToObject as h}from\"../../core/urlUtils.js\";import{property as f,ensureRange as g}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as y,ensureClass as R,ensureNumber as b}from\"../../core/accessorSupport/ensureType.js\";import{reader as S}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as v}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as x}from\"../../core/accessorSupport/decorators/writer.js\";import{opacity as I,url as w}from\"../support/commonProperties.js\";import _ from\"../support/DimensionalDefinition.js\";import{ExportImageServiceParameters as F}from\"../support/ExportImageServiceParameters.js\";import D from\"../support/Field.js\";import j from\"../support/FieldsIndex.js\";import{createBitmap as P}from\"../support/imageBitmapUtils.js\";import{isSupportedRendererType as T}from\"../support/imageryRendererUtils.js\";import O from\"../support/MosaicRule.js\";import N from\"../support/MultidimensionalSubset.js\";import C from\"../support/PixelBlock.js\";import{interpolationKebab as M,noDataInterpretationKebab as A}from\"../support/rasterEnums.js\";import J from\"../support/RasterFunction.js\";import q from\"../support/RasterInfo.js\";import E from\"../support/RasterJobHandler.js\";import{intersectMultimensionalSubset as V,getSubsetVariablesFromMdInfo as H,getDefaultMultidimensionalDefinition as Q}from\"../support/rasterDatasets/multidimensionalUtils.js\";import{decode as U,getFormat as L}from\"../support/rasterFormats/RasterCodec.js\";import{uvComponentToVector as z}from\"../support/rasterFunctions/vectorFieldUtils.js\";import{getSupportedRendererTypes as B,getDefaultBandCombination as k,createDefaultRenderer as G,normalizeRendererJSON as W}from\"../../renderers/support/rasterRendererHelper.js\";import $ from\"../../renderers/support/RasterSymbolizer.js\";import{computeAngles as K,computePixelSpaceLocations as X,computeHistograms as Y,computeStatisticsHistograms as Z,measureHeight as ee,measureAreaAndPerimeter as te,measureDistanceAndAngle as ie,measurePointOrCentroid as re,getImageSpatialReferenceQueryParameter as se,getSamples as ne,identify as oe}from\"../../rest/imageService.js\";import\"../../core/has.js\";import\"../support/source/DataLayerSource.js\";import{executeQueryJSON as ae}from\"../../rest/query/executeQueryJSON.js\";import\"../../config.js\";import\"../../kernel.js\";import\"../../core/unitUtils.js\";import\"../../geometry/support/spatialReferenceUtils.js\";import\"../graphics/featureConversionUtils.js\";import le from\"../../geometry/Extent.js\";import\"../../geometry/Geometry.js\";import\"../../geometry/Multipoint.js\";import\"../../geometry/Point.js\";import ue from\"../../geometry/Polygon.js\";import\"../../geometry/Polyline.js\";import\"../../geometry/support/normalizeUtils.js\";import\"../../core/pbf.js\";import pe from\"../../rest/support/FeatureSet.js\";import ce from\"../../rest/support/Query.js\";import\"../../rest/query/support/AttachmentInfo.js\";import\"../../rest/support/AttachmentQuery.js\";import{executeForCount as me}from\"../../rest/query/executeForCount.js\";import{executeForIds as de}from\"../../rest/query/executeForIds.js\";import\"../../rest/support/RelationshipQuery.js\";import\"../../rest/support/TopFeaturesQuery.js\";import{fetchServiceRasterInfo as he,generateRasterInfo as fe}from\"../../rest/imageService/fetchRasterInfo.js\";import{getCatalogItemRasterInfo as ge}from\"../../rest/imageService/getCatalogItemRasterInfo.js\";import ye from\"../../rest/support/ImageAngleParameters.js\";import Re from\"../../rest/support/ImageAreaParameters.js\";import be from\"../../rest/support/ImageDistanceParameters.js\";import Se from\"../../rest/support/ImageHeightParameters.js\";import ve from\"../../rest/support/ImageHistogramParameters.js\";import xe from\"../../rest/support/ImageIdentifyParameters.js\";import Ie from\"../../rest/support/ImagePixelLocationParameters.js\";import we from\"../../rest/support/ImagePointParameters.js\";import _e from\"../../rest/support/ImageSampleParameters.js\";import{createFlowMesh as Fe}from\"../../views/2d/engine/flow/dataUtils.js\";import De from\"../../geometry/SpatialReference.js\";const je=a()({U1:\"u1\",U2:\"u2\",U4:\"u4\",U8:\"u8\",S8:\"s8\",U16:\"u16\",S16:\"s16\",U32:\"u32\",S32:\"s32\",F32:\"f32\",F64:\"f64\",C64:\"c64\",C128:\"c128\",UNKNOWN:\"unknown\"}),Pe=new Set([\"png\",\"png8\",\"png24\",\"png32\",\"jpg\",\"bmp\",\"gif\",\"jpgpng\",\"lerc\",\"tiff\"]),Te=g(b,{min:0,max:255});function Oe(e){if(!e)return null;const t=JSON.stringify(e).match(/\"rasterFunction\":\"(.*?\")/gi)?.map((e=>e.replace('\"rasterFunction\":\"',\"\").replace('\"',\"\")));return t?t.join(\"/\"):null}const Ne=a=>{let g=class extends a{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix=\"Raster.\",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType=\"polygon\",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set(\"exportImageServiceParameters\",new F({layer:this}))}readServiceSupportsMosaicRule(e,t){return this._isMosaicRuleSupported(t)}get _rasterFunctionNamesIndex(){const e=new Map;return!this.rasterFunctionInfos||p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.length<1||p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach((t=>{e.set(t.name.toLowerCase().replace(/ /gi,\"_\"),t.name)})),e}readBandIds(e,t){if(Array.isArray(e)&&e.length>0&&e.every((e=>\"number\"==typeof e)))return e}readCapabilities(e,t){return this._readCapabilities(t)}writeCompressionQuality(e,t,i){null!=e&&\"lerc\"!==this.format&&(t[i]=e)}writeCompressionTolerance(e,t,i){\"lerc\"===this.format&&null!=e&&(t[i]=e)}readDefaultMosaicRule(e,t){return this._serviceSupportsMosaicRule?O.fromJSON(t):null}get fieldsIndex(){return this.fields?new j(this.fields):null}set format(e){e&&Pe.has(e.toLowerCase())&&this._set(\"format\",e.toLowerCase())}readFormat(e,t){return\"esriImageServiceDataTypeVector-UV\"===t.serviceDataType||\"esriImageServiceDataTypeVector-MagDir\"===t.serviceDataType||null!=this.pixelFilter?\"lerc\":\"jpgpng\"}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}set mosaicRule(e){let t=e;t&&t.mosaicMethod&&(t=O.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set(\"mosaicRule\",t)}readMosaicRule(e,t){const i=e||t.mosaicRule;return i?O.fromJSON(i):this._isMosaicRuleSupported(t)?O.fromJSON(t):null}writeMosaicRule(e,t,i){let r=this.mosaicRule;const s=this.definitionExpression;r?s&&s!==r.where&&(r=r.clone(),r.where=s):s&&(r=new O({where:s})),this._isValidCustomizedMosaicRule(r)&&(t[i]=r.toJSON())}writeNoData(e,t,i){null!=e&&\"number\"==typeof e&&(t[i]=Te(e))}readObjectIdField(e,t){if(!e){const i=t.fields.filter((e=>\"esriFieldTypeOID\"===e.type||\"oid\"===e.type));e=i&&i[0]&&i[0].name}return e}get parsedUrl(){return h(this.url)}readSourceType(e,t){return this._isMosaicDataset(t)?\"mosaic-dataset\":\"raster-dataset\"}set renderer(e){this.loaded&&(e=this._configRenderer(e)),this._set(\"renderer\",e)}readRenderer(e,t,i){const r=t?.layerDefinition?.drawingInfo?.renderer,n=s(r,i);return null==n?null:(\"vector-field\"===n.type&&t.symbolTileSize&&!r.symbolTileSize&&(n.symbolTileSize=t.symbolTileSize),T(n)||u.getLogger(this.declaredClass).warn(\"ArcGISImageService\",\"Imagery layer doesn't support given renderer type.\"),n)}writeRenderer(e,t,i){t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.toJSON(),\"vector-field\"===e.type&&(t.symbolTileSize=e.symbolTileSize)}get rasterFields(){const e=this._rasterAttributeTableFieldPrefix||\"Raster.\",t=new D({name:\"Raster.ItemPixelValue\",alias:\"Item Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"}),i=new D({name:\"Raster.ServicePixelValue\",alias:\"Service Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"}),r=new D({name:\"Raster.ServicePixelValue.Raw\",alias:\"Raw Service Pixel Value\",domain:null,editable:!1,length:50,type:\"string\"});let s=this.fields?l(this.fields):[];s.push(i),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&s.push(t),this.version>=10.4&&p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some((e=>\"none\"===e.name.toLowerCase()))&&s.push(r),p(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter((e=>\"none\"!==e.name.toLowerCase())).forEach((e=>{s.push(new D({name:\"Raster.ServicePixelValue.\"+e.name,alias:e.name,domain:null,editable:!1,length:50,type:\"string\"}))})),this._isVectorDataSet()&&(s.push(new D({name:\"Raster.Magnitude\",alias:\"Magnitude\",domain:null,editable:!1,type:\"double\"})),s.push(new D({name:\"Raster.Direction\",alias:\"Direction\",domain:null,editable:!1,type:\"double\"})));const{attributeTable:n}=this.rasterInfo??{};if(p(n)){const t=n.fields.filter((e=>\"esriFieldTypeOID\"!==e.type&&\"value\"!==e.name.toLowerCase())).map((t=>{const i=l(t);return i.name=e+t.name,i}));s=s.concat(t)}return s}set renderingRule(e){let t=e;t&&t.rasterFunction&&(t=J.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set(\"renderingRule\",t)}readRenderingRule(e,t){const i=t.rasterFunctionInfos;return t.renderingRule||i&&i.length&&\"None\"!==i[0].name?this._isRFTJson(t.renderingRule)?J.fromJSON({rasterFunctionDefinition:t.renderingRule}):J.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}writeRenderingRule(e,t,i){const r=e.toJSON();r.rasterFunctionDefinition?t[i]=r.rasterFunctionDefinition:t[i]=r}readSpatialReference(e,t){const i=e||t.extent.spatialReference;return i?De.fromJSON(i):null}readPixelType(e){return je.fromJSON(e)||e}writePixelType(e,t,i){(c(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(t[i]=je.toJSON(e))}readVersion(e,t){let i=t.currentVersion;return i||(i=t.hasOwnProperty(\"fields\")||t.hasOwnProperty(\"timeInfo\")?10:9.3),i}applyFilter(e){let t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t}async applyRenderer(e,t){let i=e;const{renderer:r,symbolizer:s,pixelFilter:n,bandIds:o}=this;if(!this._isPicture()&&r&&s&&!n){const n=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(r.toJSON()),a=this._rasterJobHandler.instance;if(a){n&&(s.bind(),await a.updateSymbolizer(s,t),this._cachedRendererJson=r.toJSON());const l=await a.symbolize({bandIds:o,...e},t);i={extent:e.extent,pixelBlock:l}}else i={extent:e.extent,pixelBlock:s.symbolize({bandIds:o,...e})}}return i}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeAngles)throw new o(\"imagery-layer:compute-angles\",\"this operation is not supported on the input image service\");return e=R(ye,e).clone(),K(this.url,e,this._getRequestOptions(t))}async computePixelSpaceLocations(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputePixelLocation)throw new o(\"imagery-layer:compute-pixel-space-locations\",\"this operation is not supported on the input image service\");return e=R(Ie,e).clone(),X(this.url,e,this._getRequestOptions(t))}async computeHistograms(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeHistograms)throw new o(\"imagery-layer:compute-histograms\",\"this operation is not supported on the input image service\");return e=R(ve,e).clone(),this._applyMosaicAndRenderingRules(e),Y(this.url,e,this._getRequestOptions(t))}async computeStatisticsHistograms(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeStatisticsHistograms)throw new o(\"imagery-layer:compute-statistics-histograms\",\"this operation is not supported on the input image service\");return e=R(ve,e).clone(),this._applyMosaicAndRenderingRules(e),Z(this.url,e,this._getRequestOptions(t))}async measureHeight(e,t){const i=await this._fetchCapabilities(t?.signal);if(!(\"base-and-top\"===e.operationType?i.mensuration.supportsHeightFromBaseAndTop:\"base-and-top-shadow\"===e.operationType?i.mensuration.supportsHeightFromBaseAndTopShadow:i.mensuration.supportsHeightFromTopAndTopShadow))throw new o(\"imagery-layer:measure-height\",\"this operation is not supported on the input image service\");return e=R(Se,e).clone(),this._applyMosaicAndRenderingRules(e),ee(this.url,e,this._getRequestOptions(t))}async measureAreaAndPerimeter(e,t){const i=await this._fetchCapabilities(t?.signal);if(!(i.mensuration.supportsAreaAndPerimeter&&(!e.is3D||i.mensuration.supports3D)))throw new o(\"imagery-layer:measure-area-and-perimeter\",\"this operation is not supported on the input image service\");return e=R(Re,e).clone(),this._applyMosaicAndRenderingRules(e),te(this.url,e,this._getRequestOptions(t))}async measureDistanceAndAngle(e,t){const i=await this._fetchCapabilities(t?.signal);if(!(i.mensuration.supportsDistanceAndAngle&&(!e.is3D||i.mensuration.supports3D)))throw new o(\"imagery-layer:measure-distance-and-angle\",\"this operation is not supported on the input image service\");return e=R(be,e).clone(),this._applyMosaicAndRenderingRules(e),ie(this.url,e,this._getRequestOptions(t))}async measurePointOrCentroid(e,t){const i=await this._fetchCapabilities(t?.signal);if(!(i.mensuration.supportsPointOrCentroid&&(!e.is3D||i.mensuration.supports3D)))throw new o(\"imagery-layer:measure-point-or-centroid\",\"this operation is not supported on the input image service\");return e=R(we,e).clone(),this._applyMosaicAndRenderingRules(e),re(this.url,e,this._getRequestOptions(t))}getField(e){const{fieldsIndex:t}=this;return p(t)?t.get(e):void 0}getFieldDomain(e,t){const i=this.getField(e);return i?i.domain:null}async fetchImage(e,t,i,r={}){if(null==e||null==t||null==i)throw new o(\"imagery-layer:fetch-image\",\"Insufficient parameters for requesting an image. A valid extent, width and height values are required.\");if(this.renderer||this.symbolizer){const e=await this.generateRasterInfo(this.renderingRule,{signal:r.signal});e&&(this.rasterInfo=e)}const s=this.getExportImageServiceParameters(e,t,i,r.timeExtent);if(null==s){if(r.requestAsImageElement&&this._canRequestImageElement(this.format)){const e=document.createElement(\"canvas\");if(e.width=t,e.height=i,r.returnImageBitmap){return{imageBitmap:await P(e,`${b(this.parsedUrl)}/exportImage`)}}return{imageOrCanvasElement:e}}const{bandIds:s,rasterInfo:n}=this,o=(s?.length||n.bandCount)??0,a=t*i,l=n.pixelType,u=[];for(let e=0;e<o;e++)u.push(C.createEmptyBand(l,a));return{pixelData:{pixelBlock:new C({width:t,height:i,pixels:u,mask:new Uint8Array(a),pixelType:l}),extent:e}}}const n=!!r.requestAsImageElement&&!this.pixelFilter,a=n&&!!r.returnImageBitmap,l={imageServiceParameters:s,imageProps:{extent:e,width:t,height:i,format:this.format},requestAsImageElement:n,returnImageBitmap:a,signal:r.signal};return this._requestArrayBuffer(l)}fetchKeyProperties(e){return n(b(this.parsedUrl)+\"/keyProperties\",{query:this._getQueryParams({renderingRule:this.version>=10.3?e?.renderingRule:null})}).then((e=>e.data))}fetchRasterAttributeTable(e){return this.version<10.1?Promise.reject(new o(\"#fetchRasterAttributeTable()\",\"Failed to get rasterAttributeTable\")):n(b(this.parsedUrl)+\"/rasterAttributeTable\",{query:this._getQueryParams({renderingRule:this.version>=10.3?e?.renderingRule:null})}).then((e=>pe.fromJSON(e.data)))}getCatalogItemRasterInfo(e,t){const i={...t,query:this._getQueryParams()};return ge(b(this.parsedUrl),e,i)}async getCatalogItemICSInfo(e,t){const{data:i}=await n(b(this.parsedUrl)+\"/\"+e+\"/info/ics\",{query:this._getQueryParams(),...t}),r=i&&i.ics;if(!r)return;let s=null;try{s=(await n(b(this.parsedUrl)+\"/\"+e+\"/info\",{query:this._getQueryParams(),...t})).data.extent}catch{}if(!s||!s.spatialReference)return{ics:r,icsToPixelTransform:null,icsExtent:null,northDirection:null};const o=this.version>=10.7?n(b(this.parsedUrl)+\"/\"+e+\"/info/icstopixel\",{query:this._getQueryParams(),...t}).then((e=>e.data)).catch((()=>({}))):{},a=s.spatialReference,l={geometries:JSON.stringify({geometryType:\"esriGeometryEnvelope\",geometries:[s]}),inSR:a.wkid||JSON.stringify(a),outSR:\"0:\"+e},u=n(b(this.parsedUrl)+\"/project\",{query:this._getQueryParams(l),...t}).then((e=>e.data)).catch((()=>({}))),p=5,c=(s.xmin+s.xmax)/2,m=(s.ymax-s.ymin)/(p+1),d=s.ymin+m,h=[];for(let n=0;n<p;n++)h.push({x:c,y:d+m*n});const f={geometries:JSON.stringify({geometryType:\"esriGeometryPoint\",geometries:h}),inSR:a.wkid||JSON.stringify(a),outSR:\"0:\"+e},g=n(b(this.parsedUrl)+\"/project\",{query:this._getQueryParams(f),...t}).then((e=>e.data)).catch((()=>({}))),y=await Promise.all([o,u,g]);let R=y[0].ipxf;if(null==R){const e=r.geodataXform?.xf_0;\"topup\"===e?.name?.toLowerCase()&&6===e?.coefficients?.length&&(R={affine:{name:\"ics [sensor: Frame] to pixel (column, row) transformation\",coefficients:e.coefficients,cellsizeRatio:0,type:\"GeometricXform\"}})}const S=le.fromJSON(y[1]&&y[1].geometries&&y[1].geometries[0]);S&&(S.spatialReference=new De({wkid:0,imageCoordinateSystem:r}));const v=y[2].geometries?y[2].geometries.filter((e=>null!=e&&null!=e.x&&null!=e.y&&\"NaN\"!==e.x&&\"NaN\"!==e.y)):[],x=v.length;if(x<3)return{ics:r,icsToPixelTransform:R,icsExtent:S,northDirection:null};let I=0,w=0,_=0,F=0;for(let n=0;n<x;n++)I+=v[n].x,w+=v[n].y,_+=v[n].x*v[n].x,F+=v[n].x*v[n].y;const D=(x*F-I*w)/(x*_-I*I);let j=0;const P=v[p-1].x>v[0].x,T=v[p-1].y>v[0].y;return D===1/0?j=T?90:270:0===D?j=P?0:180:D>0?j=P?180*Math.atan(D)/Math.PI:180*Math.atan(D)/Math.PI+180:D<0&&(j=T?180+180*Math.atan(D)/Math.PI:360+180*Math.atan(D)/Math.PI),{ics:r,icsToPixelTransform:R,icsExtent:S,northDirection:j}}async generateRasterInfo(e,t){if(e=R(J,e),this.serviceRasterInfo&&(!e||\"none\"===e.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(e)))return this.serviceRasterInfo;const i=Oe(e);if(!i)return null;if(this._functionRasterInfos[i])return this._functionRasterInfos[i];const r=this._generateRasterInfo(e,t);this._functionRasterInfos[i]=r;try{return await r}catch{return this._functionRasterInfos[i]=null,null}}getExportImageServiceParameters(e,t,i,r){e=e.clone().shiftCentralMeridian();const s=se(e.spatialReference,b(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const n=this.exportImageServiceParameters.toJSON(),{bandIds:o,noData:a}=n;let{renderingRule:l}=n;const u=this.renderingRule?.rasterFunctionDefinition,c=!this.renderer||\"raster-stretch\"===this.renderer.type;if(o?.length&&this._hasRenderingRule(this.renderingRule)&&!u&&c){const e={rasterFunction:\"ExtractBand\",rasterFunctionArguments:{BandIds:o}};if(\"Stretch\"===l.rasterFunction)e.rasterFunctionArguments.Raster=l.rasterFunctionArguments.Raster,l.rasterFunctionArguments.Raster=e;else if(\"Colormap\"===l.rasterFunction){const t=l.rasterFunctionArguments.Raster;\"Stretch\"===t?.rasterFunction?(e.rasterFunctionArguments.Raster=t.rasterFunctionArguments.Raster,t.rasterFunctionArguments.Raster=e):(e.rasterFunctionArguments.Raster=t,l.rasterFunctionArguments.Raster=e)}else e.rasterFunctionArguments.Raster=l,l=e;n.bandIds=void 0}else n.bandIds=o?.join(\",\");a instanceof Array&&a.length>0&&(n.noData=a.join(\",\"));const m=this._processMultidimensionalIntersection(null,r,this.exportImageServiceParameters.mosaicRule);if(m.isOutSide)return null;n.mosaicRule=p(m.mosaicRule)?JSON.stringify(m.mosaicRule):null,r=m.timeExtent,n.renderingRule=this._getRenderingRuleString(J.fromJSON(l));const d={};if(p(r)){const{start:e,end:t}=r.toJSON();e&&t&&e===t?d.time=\"\"+e:null==e&&null==t||(d.time=`${e??\"null\"},${t??\"null\"}`)}return{bbox:e.xmin+\",\"+e.ymin+\",\"+e.xmax+\",\"+e.ymax,bboxSR:s,imageSR:s,size:t+\",\"+i,...n,...d}}async getSamples(e,t){if(!(await this._fetchCapabilities(t?.signal))?.operations.supportsGetSamples)throw new o(\"imagery-layer:get-samples\",\"getSamples operation is not supported on the input image service\");e=R(_e,e).clone();const{raster:i}=this;return i&&null==e.raster&&(e.raster=i),ne(this.url,e,this._getRequestOptions(t))}async identify(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsIdentify)throw new o(\"imagery-layer:identify\",\"identify operation is not supported on the input image service\");e=R(xe,e).clone();const i=this._processMultidimensionalIntersection(e.geometry,e.timeExtent,e.mosaicRule||this.mosaicRule);if(i.isOutSide)throw new o(\"imagery-layer:identify\",\"the request cannot be fulfilled when falling outside of the multidimensional subset\");e.timeExtent=m(i.timeExtent),e.mosaicRule=m(i.mosaicRule);const{raster:r,renderingRule:s}=this;return s&&null==e.renderingRule&&(e.renderingRule=s),r&&null==e.raster&&(e.raster=r),oe(this.url,e,this._getRequestOptions(t))}createQuery(){const e=new ce;return e.outFields=[\"*\"],e.returnGeometry=!0,e.where=this.definitionExpression||\"1=1\",e}async queryRasters(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),ae(this.url,e,t)}async queryObjectIds(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),de(this.url,e,t)}async queryRasterCount(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),me(this.url,e,t)}async queryVisibleRasters(e,t){if(!e)throw new o(\"imagery-layer: query-visible-rasters\",\"missing query parameter\");await this.load();const{pixelSize:i,returnDomainValues:r,returnTopmostRaster:s,showNoDataRecords:n}=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let a=!1,l=null,u=null;const d=\"raster.servicepixelvalue\",h=this._rasterFunctionNamesIndex;if(p(e.outFields)&&(a=e.outFields.some((e=>!e.toLowerCase().includes(d))),this.version>=10.4)){const t=e.outFields.filter((e=>e.toLowerCase().includes(d)&&e.length>d.length)).map((e=>{const t=e.slice(d.length+1);return[this._updateRenderingRulesFunctionName(t,h),t]}));l=t.map((e=>new J({functionName:e[0]}))),u=t.map((e=>e[1]));const{renderingRule:i}=this;0===l.length?i?.functionName?(l.push(i),u.push(i.functionName)):l=null:i?.functionName&&!l.some((e=>e.functionName===i.functionName))&&(l.push(i),u.push(i.functionName))}const f=c(e.outSpatialReference)||e.outSpatialReference.equals(this.spatialReference),{multidimensionalSubset:g}=this;let y=e.timeExtent||this.timeExtent;if(g){const{isOutside:t,intersection:i}=V(g,{geometry:m(e.geometry),timeExtent:m(e.timeExtent),multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(t)throw new o(\"imagery-layer:query-visible-rasters\",\"the request cannot be fulfilled when falling outside of the multidimensional subset\");i&&p(i.timeExtent)&&(y=i.timeExtent)}const R=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,y),b=this._getQueryParams({geometry:e.geometry,timeExtent:y,mosaicRule:R,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:l,pixelSize:i,returnCatalogItems:a,returnGeometry:f,raster:this.raster,maxItemCount:s?1:null});delete b.f;const S=new xe(b);try{await this.generateRasterInfo(this.renderingRule);const i=await oe(this.url,S,{signal:t?.signal,query:{...this.customParameters}}),s=e.outFields,o=null!=i.value&&i.value.toLowerCase().includes(\"nodata\");if(!(a&&!f&&i?.catalogItems?.features.length&&(n||!o)))return this._processVisibleRastersResponse(i,{returnDomainValues:r,templateRRFunctionNames:u,showNoDataRecords:n,templateFields:s});const l=this.objectIdField||\"ObjectId\",c=i.catalogItems?.features??[],m=c.map((e=>e.attributes?.[l])),d=new ce({objectIds:m,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[l]}),h=await this.queryRasters(d);return h?.features?.length&&h.features.forEach((t=>{c.forEach((i=>{i.attributes[l]===t.attributes[l]&&(i.geometry=new ue(t.geometry),p(e.outSpatialReference)&&(i.geometry.spatialReference=e.outSpatialReference))}))})),this._processVisibleRastersResponse(i,{returnDomainValues:r,templateRRFunctionNames:u,showNoDataRecords:n,templateFields:s})}catch{throw new o(\"imagery-layer:query-visible-rasters\",\"encountered error when querying visible rasters\")}}async fetchVariableStatisticsHistograms(e,t){const i=n(b(this.parsedUrl)+\"/statistics\",{query:this._getQueryParams({variable:e}),signal:t}).then((e=>e.data?.statistics)),r=n(b(this.parsedUrl)+\"/histograms\",{query:this._getQueryParams({variable:e}),signal:t}).then((e=>e.data?.histograms)),s=await Promise.all([i,r]);return s[0]&&s[0].forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:s[0]||null,histograms:s[1]||null}}async createFlowMesh(e,t){const i=this._rasterJobHandler.instance;return i?i.createFlowMesh(e,t):Fe(e.meshType,e.simulationSettings,e.flowData,p(t.signal)?t.signal:(new AbortController).signal)}getMultidimensionalSubsetVariables(e){const t=e??this.serviceRasterInfo.multidimensionalInfo;return H(this.multidimensionalSubset,t)}async _fetchService(e){await this._fetchServiceInfo(e),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const t=this.sourceJSON,i=p(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):he(b(this.parsedUrl),t,{signal:e,query:this._getQueryParams()}).then((e=>(this._set(\"serviceRasterInfo\",e),this._set(\"multidimensionalInfo\",e.multidimensionalInfo),e))),r=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:e}):null,s=this._getRasterFunctionInfos();return Promise.all([i,r,s]).then((e=>{e[1]?this._set(\"rasterInfo\",e[1]):this._set(\"rasterInfo\",e[0]),e[2]&&this._set(\"rasterFunctionInfos\",e[2]),this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set(\"renderer\",null),u.getLogger(this.declaredClass).warn(\"ArcGISImageService\",\"Switching to the default renderer. Renderer applied is not valid for this Imagery Layer\")),this._set(\"renderer\",this._configRenderer(this.renderer)),this.addHandles([d((()=>this.renderingRule),(e=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(e).then((e=>{e&&(this.rasterInfo=e)}))}))]);const{serviceRasterInfo:t}=this;p(t.multidimensionalInfo)&&this._updateMultidimensionalDefinition(t)}))}_combineMosaicRuleWithTimeExtent(e,t){const i=this.timeInfo,{multidimensionalInfo:r}=this.serviceRasterInfo;if(c(e)||c(r)||c(t)||c(i?.startField))return e;const{startField:s}=i,n=r.variables.some((e=>e.dimensions.some((e=>e.name===s))))?s:\"StdTime\";if(e=e.clone(),\"mosaic-dataset\"===this.sourceType)return e.multidimensionalDefinition=e.multidimensionalDefinition?.filter((e=>e.dimensionName!==n)),this._cleanupMultidimensionalDefinition(e);e.multidimensionalDefinition=e.multidimensionalDefinition||[];const o=e.multidimensionalDefinition.filter((e=>e.dimensionName===n)),a=p(t.start)?t.start.getTime():null,l=p(t.end)?t.end.getTime():null,u=null==a||null==l||a===l,m=u?[a||l]:[[a,l]],d=this.version>=10.8;if(o.length)o.forEach((e=>{e.dimensionName===n&&(d?(e.dimensionName=null,e.isSlice=!1,e.values=[]):(e.isSlice=u,e.values=m))}));else if(!d){const t=e.multidimensionalDefinition.filter((e=>null!=e.variableName&&null==e.dimensionName));t.length?t.forEach((e=>{e.dimensionName=n,e.isSlice=u,e.values=m})):e.multidimensionalDefinition.push(new _({variableName:\"\",dimensionName:n,isSlice:u,values:m}))}return this._cleanupMultidimensionalDefinition(e)}_cleanupMultidimensionalDefinition(e){return c(e)?null:(e.multidimensionalDefinition&&(e.multidimensionalDefinition=e.multidimensionalDefinition.filter((e=>!(!e.variableName&&!e.dimensionName))),0===e.multidimensionalDefinition.length&&(e.multidimensionalDefinition=null)),\"mosaic-dataset\"!==this.sourceType&&null==e.multidimensionalDefinition?null:e)}async _prepareForQuery(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsQuery)throw new o(\"imagery-layer:query-rasters\",\"query operation is not supported on the input image service\");return e=p(e)?R(ce,e):this.createQuery(),t=this._getRequestOptions(t),this.raster&&(t.query={...t.query,raster:this.raster}),{query:e,requestOptions:t}}async _initJobHandler(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const e=new E;this._rasterJobHandler.connectionPromise=e.initialize().then((()=>{this._rasterJobHandler.instance=e}),(()=>{})),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(e){const{rasterInfo:t,renderingRule:i}=this;return\"unique-value\"===e.type&&this._hasRenderingRule(i)&&1===t?.bandCount&&[\"u8\",\"s8\"].includes(t.pixelType)||null!=t&&null!=e&&B(t).includes(e.type)}async _fetchCapabilities(e){return this.capabilities||await this._fetchServiceInfo(e),this.capabilities}async _fetchServiceInfo(e){let t=this.sourceJSON;if(!t){const{data:i,ssl:r}=await n(b(this.parsedUrl),{query:this._getQueryParams(),signal:e});t=i,this.sourceJSON=t,r&&(this.url=this.url.replace(/^http:/i,\"https:\"))}if(t.capabilities?.toLowerCase().split(\",\").map((e=>e.trim())).indexOf(\"tilesonly\")>-1)throw new o(\"imagery-layer:fetch-service-info\",\"use ImageryTileLayer to open tiles-only image services\");this.read(t,{origin:\"service\",url:this.parsedUrl})}_isMosaicDataset(e){return e.serviceSourceType?\"esriImageServiceSourceTypeMosaicDataset\"===e.serviceSourceType:e.fields?.length>0}_isMosaicRuleSupported(e){if(!e)return!1;const t=this._isMosaicDataset(e),i=e.currentVersion>=10.71&&e.hasMultidimensions&&!(e.fields?.length>1);return t||i}_isVectorFieldResampleFunction(e){if(c(e))return!1;const{functionName:t,functionArguments:i}=e,r=\"resample\"===t?.toLowerCase(),s=i?.ResampleType||i?.resampleType;return r&&(7===s||10===s)}_isPicture(){return!this.format||this.format.includes(\"jpg\")||this.format.includes(\"png\")}_configRenderer(e){const t=this._isPicture(),{rasterInfo:i}=this;if(!t&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&i.bandCount>=3){const e=k(i);!e||3===i.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}e||(e=G(i,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}));const t=W(e.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=t,this.symbolizer.rasterInfo=i):this.symbolizer=new $({rendererJSON:t,rasterInfo:i}),this.symbolizer.bind().success||(this.symbolizer=null)}return e}_clonePixelData(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:p(e.pixelBlock)?e.pixelBlock.clone():null}}_getQueryParams(e){e&&p(e.renderingRule)&&\"string\"!=typeof e.renderingRule&&(e.renderingRule=this._getRenderingRuleString(e.renderingRule));const{raster:t,viewId:i}=this;return{raster:t,viewId:i,f:\"json\",...e,...this.customParameters}}_getRequestOptions(e){return{...e,query:{...e?.query,...this.customParameters}}}_decodePixelBlock(e,t,i){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):U(e,t,i)}async _getRasterFunctionInfos(e){const t=this.sourceJSON.rasterFunctionInfos;if(this.loaded)return t;if(t&&this.version>=10.3){if(1===t.length&&\"none\"===t[0].name.toLowerCase())return t;return(await n(b(this.parsedUrl)+\"/rasterFunctionInfos\",{query:this._getQueryParams(),signal:e})).data?.rasterFunctionInfos}return null}_canRequestImageElement(e){return!this.pixelFilter&&(!e||e.includes(\"png\"))}async _requestArrayBuffer(e){const{imageProps:t,requestAsImageElement:i,returnImageBitmap:r,signal:s}=e;if(i&&this._canRequestImageElement(t.format)){const i=`${b(this.parsedUrl)}/exportImage`,{data:o}=await n(i,{responseType:r?\"blob\":\"image\",query:this._getQueryParams({f:\"image\",...this.refreshParameters,...e.imageServiceParameters}),signal:s});if(o instanceof Blob){return{imageBitmap:await P(o,i),params:t}}return{imageOrCanvasElement:o,params:t}}const a=this._initJobHandler(),l=n(b(this.parsedUrl)+\"/exportImage\",{responseType:\"array-buffer\",query:this._getQueryParams({f:\"image\",...e.imageServiceParameters}),signal:s}),u=(await Promise.all([l,a]))[0].data,p=t.format||\"jpgpng\";let c=p;if(\"bsq\"!==c&&\"bip\"!==c&&(c=L(u)),!c)throw new o(\"imagery-layer:fetch-image\",\"unsupported format signature \"+String.fromCharCode.apply(null,new Uint8Array(u)));const m={signal:s},d=\"gif\"===p||\"bmp\"===p||p.includes(\"png\")&&(\"png\"===c||\"jpg\"===c)?U(u,{useCanvas:!0,...t},m):this._decodePixelBlock(u,{width:t.width,height:t.height,planes:null,pixelType:null,noDataValue:null,format:p},m);return{pixelData:{pixelBlock:await d,extent:t.extent},params:t}}_generateRasterInfo(e,t){const i={...t,query:this._getQueryParams()};return fe(b(this.parsedUrl),e,i)}_isValidCustomizedMosaicRule(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(e){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;let t=Q(e,{multidimensionalSubset:this.multidimensionalSubset});if(p(t)&&t.length>0){this.mosaicRule=this.mosaicRule||new O;const e=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.renderingRule&&\"none\"!==this.renderingRule.functionName?.toLowerCase()&&t.forEach((e=>e.variableName=\"\")),t=t.filter((({variableName:e,dimensionName:t})=>e&&\"*\"!==e||t)),!e?.length&&t.length&&(this.mosaicRule.multidimensionalDefinition=t)}}_processVisibleRastersResponse(e,i){i=i||{};const r=e.value,{templateRRFunctionNames:s,showNoDataRecords:n,returnDomainValues:o,templateFields:a}=i,l=e.processedValues;let u=e.catalogItems&&e.catalogItems.features,c=e.properties&&e.properties.Values&&e.properties.Values.map((e=>e.replace(/ /gi,\", \")))||[];const m=this.objectIdField||\"ObjectId\",d=\"string\"==typeof r&&r.toLowerCase().includes(\"nodata\"),h=[];if(r&&!u&&!d){const e={};e[m]=0;c=[r],u=[new t(this.fullExtent,null,e)]}if(!u)return[];let f,g,y;this._updateResponseFieldNames(u,a),d&&!n&&(u=[]);for(let t=0;t<u.length;t++){if(f=u[t],null!=r){if(g=c[t],y=this.renderingRule&&l&&l.length>0&&s&&s.length>0&&s.includes(this.renderingRule.functionName)?l[s.indexOf(this.renderingRule.functionName)]:r,\"nodata\"===g.toLowerCase()&&!n)continue;const e=\"Raster.ItemPixelValue\",i=\"Raster.ServicePixelValue\";f.attributes[e]=g,f.attributes[i]=y,this._updateFeatureWithMagDirValues(f,g);const o=this.fields&&this.fields.length>0;let a=this.renderingRule&&p(this.serviceRasterInfo.attributeTable)?o?g:r:y;this.renderingRule||(a=o?g:r),this._updateFeatureWithRasterAttributeTableValues(f,a)}if(f.sourceLayer=f.layer=this,o&&this._updateFeatureWithDomainValues(f),s&&l&&s.length===l.length)for(let e=0;e<s.length;e++){const t=\"Raster.ServicePixelValue.\"+s[e];f.attributes[t]=l[e]}h.push(u[t])}return h}_processMultidimensionalIntersection(e,t,i){const{multidimensionalSubset:r}=this;if(!r)return{isOutSide:!1,timeExtent:t,mosaicRule:i=this._combineMosaicRuleWithTimeExtent(i,t)};if(r){const{isOutside:i,intersection:s}=V(r,{geometry:e,timeExtent:t});if(i)return{isOutSide:!0,timeExtent:null,mosaicRule:null};s&&p(s.timeExtent)&&(t=s.timeExtent)}if(i=this._combineMosaicRuleWithTimeExtent(i,t),p(i)&&i.multidimensionalDefinition){const{isOutside:e}=V(r,{multidimensionalDefinition:i.multidimensionalDefinition});if(e)return{isOutSide:!0,timeExtent:null,mosaicRule:null}}return{isOutSide:!1,timeExtent:t,mosaicRule:i}}_updateFeatureWithRasterAttributeTableValues(e,t){const i=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(c(i))return;const{features:r,fields:s}=i,n=s.map((e=>e.name)).filter((e=>\"value\"===e.toLowerCase())),o=n&&n[0];if(!o)return;const a=r.filter((e=>e.attributes[o]===(null!=t?parseInt(t,10):null)));a&&a[0]&&s.forEach((t=>{const i=this._rasterAttributeTableFieldPrefix+t.name;e.attributes[i]=a[0].attributes[t.name]}))}_updateFeatureWithMagDirValues(e,t){if(!this._isVectorDataSet())return;const i=t.split(/,\\s*/).map((e=>parseFloat(e))),r=i.map((e=>[e])),s=i.map((e=>({minValue:e,maxValue:e,noDataValue:null}))),n=new C({height:1,width:1,pixelType:\"f32\",pixels:r,statistics:s});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:n,extent:new le(0,0,0,0,this.spatialReference)});const o=\"esriImageServiceDataTypeVector-MagDir\"===this.serviceDataType?[n.pixels[0][0],n.pixels[1][0]]:z([n.pixels[0][0],n.pixels[1][0]]);e.attributes[\"Raster.Magnitude\"]=o[0],e.attributes[\"Raster.Direction\"]=o[1]}_updateFeatureWithDomainValues(e){const t=this.fields&&this.fields.filter((e=>e.domain&&\"coded-value\"===e.domain.type));null!=t&&t.forEach((t=>{const i=e.attributes[t.name];if(null!=i){const r=t.domain.codedValues.find((e=>e.code===i));r&&(e.attributes[t.name]=r.name)}}))}_updateResponseFieldNames(e,t){if(!t||t.length<1)return;const i=this.fieldsIndex;c(i)||e.forEach((e=>{if(e&&e.attributes)for(const r of t){const t=i.get(r)?.name;t&&t!==r&&(e.attributes[r]=e.attributes[t],delete e.attributes[t])}}))}_getRenderingRuleString(e){if(this._hasRenderingRule(e)){let t=e.toJSON();return t=t.rasterFunctionDefinition??t,(t.thumbnail||t.thumbnailEx)&&(t.thumbnail=t.thumbnailEx=null),JSON.stringify(t)}return null}_hasRenderingRule(e){return null!=e&&null!=e.functionName&&\"none\"!==e.functionName.toLowerCase()}_updateRenderingRulesFunctionName(e,t){if(!e||e.length<1)return;if(\"Raw\"===e)return e.replace(\"Raw\",\"None\");const i=e.toLowerCase().replace(/ /gi,\"_\");return t.has(i)?t.get(i):e}_isRFTJson(e){return e&&e.name&&e.arguments&&e.function&&e.hasOwnProperty(\"functionType\")}_isVectorDataSet(){return\"esriImageServiceDataTypeVector-UV\"===this.serviceDataType||\"esriImageServiceDataTypeVector-MagDir\"===this.serviceDataType}_applyMosaicAndRenderingRules(e){const{raster:t,mosaicRule:i,renderingRule:r}=this;r&&null==e.renderingRule&&(e.renderingRule=r),i&&null==e.mosaicRule&&(e.mosaicRule=i),t&&null==e.raster&&(e.raster=t)}_readCapabilities(e){const t=e.capabilities?e.capabilities.toLowerCase().split(\",\").map((e=>e.trim())):[\"image\",\"catalog\"],{currentVersion:i,advancedQueryCapabilities:r,maxRecordCount:s}=e,n=t.includes(\"image\"),o=\"esriImageServiceDataTypeElevation\"===e.serviceDataType,a=!!(e.spatialReference||e.extent&&e.extent.spatialReference),l=t.includes(\"edit\"),u=t.includes(\"mensuration\")&&a,p=null==e.mensurationCapabilities?[]:e.mensurationCapabilities.toLowerCase().split(\",\").map((e=>e.trim())),c=u&&p.includes(\"basic\");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:n,supportsExportImage:n,supportsIdentify:n,supportsMeasure:u,supportsDownload:t.includes(\"download\"),supportsQuery:t.includes(\"catalog\")&&e.fields&&e.fields.length>0,supportsGetSamples:i>=10.2&&n,supportsProject:i>=10.3&&n,supportsComputeStatisticsHistograms:i>=10.4&&n,supportsQueryBoundary:i>=10.6&&n,supportsCalculateVolume:i>=10.7&&o,supportsComputePixelLocation:i>=10.7&&t.includes(\"catalog\"),supportsComputeAngles:i>=10.91,supportsAdd:l,supportsDelete:l,supportsEditing:l,supportsUpdate:l,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:s,maxRecordCountFactor:void 0,supportsStatistics:!!r?.supportsStatistics,supportsOrderBy:!!r?.supportsOrderBy,supportsDistinct:!!r?.supportsDistinct,supportsPagination:!!r?.supportsPagination,supportsStandardizedQueriesOnly:!!r?.useStandardizedQueries,supportsPercentileStatistics:!!r?.supportsPercentileStatistics,supportsCentroid:!!r?.supportsReturningGeometryCentroid,supportsDistance:!!r?.supportsQueryWithDistance,supportsExtent:!!r?.supportsReturningQueryExtent,supportsGeometryProperties:!!r?.supportsReturningGeometryProperties,supportsHavingClause:!!r?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!r?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:c,supportsAreaAndPerimeter:c,supportsPointOrCentroid:c,supportsHeightFromBaseAndTop:u&&p.includes(\"base-top height\"),supportsHeightFromBaseAndTopShadow:u&&p.includes(\"base-top shadow height\"),supportsHeightFromTopAndTopShadow:u&&p.includes(\"top-top shadow height\"),supports3D:u&&p.includes(\"3d\")}}}};function b(e){return e?.path??\"\"}return e([f()],g.prototype,\"_functionRasterInfos\",void 0),e([f()],g.prototype,\"_rasterJobHandler\",void 0),e([f()],g.prototype,\"_cachedRendererJson\",void 0),e([f({readOnly:!0})],g.prototype,\"_serviceSupportsMosaicRule\",void 0),e([S(\"_serviceSupportsMosaicRule\",[\"currentVersion\",\"fields\"])],g.prototype,\"readServiceSupportsMosaicRule\",null),e([f()],g.prototype,\"_rasterAttributeTableFieldPrefix\",void 0),e([f({readOnly:!0})],g.prototype,\"_rasterFunctionNamesIndex\",null),e([f()],g.prototype,\"adjustAspectRatio\",void 0),e([f({type:[y],json:{write:!0}})],g.prototype,\"bandIds\",void 0),e([S(\"bandIds\")],g.prototype,\"readBandIds\",null),e([f({readOnly:!0,json:{read:!1}})],g.prototype,\"capabilities\",void 0),e([S(\"service\",\"capabilities\",[\"capabilities\",\"currentVersion\",\"serviceDataType\"])],g.prototype,\"readCapabilities\",null),e([f({type:Number})],g.prototype,\"compressionQuality\",void 0),e([x(\"compressionQuality\")],g.prototype,\"writeCompressionQuality\",null),e([f({type:Number})],g.prototype,\"compressionTolerance\",void 0),e([x(\"compressionTolerance\")],g.prototype,\"writeCompressionTolerance\",null),e([f({json:{read:{source:\"copyrightText\"}}})],g.prototype,\"copyright\",void 0),e([f({readOnly:!0,dependsOn:[\"_serviceSupportsMosaicRule\"]})],g.prototype,\"defaultMosaicRule\",void 0),e([S(\"defaultMosaicRule\",[\"defaultMosaicMethod\"])],g.prototype,\"readDefaultMosaicRule\",null),e([f({type:String,json:{name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],g.prototype,\"definitionExpression\",void 0),e([f({readOnly:!0,constructOnly:!0})],g.prototype,\"exportImageServiceParameters\",void 0),e([f()],g.prototype,\"rasterInfo\",void 0),e([f({readOnly:!0,type:[D]})],g.prototype,\"fields\",void 0),e([f({readOnly:!0})],g.prototype,\"fieldsIndex\",null),e([f({type:[\"png\",\"png8\",\"png24\",\"png32\",\"jpg\",\"bmp\",\"gif\",\"jpgpng\",\"lerc\",\"tiff\"],json:{write:!0}})],g.prototype,\"format\",null),e([S(\"service\",\"format\",[\"serviceDataType\"])],g.prototype,\"readFormat\",null),e([f({type:le})],g.prototype,\"fullExtent\",void 0),e([f({readOnly:!0})],g.prototype,\"hasMultidimensions\",void 0),e([f({json:{read:{source:\"maxImageHeight\"}}})],g.prototype,\"imageMaxHeight\",void 0),e([f({json:{read:{source:\"maxImageWidth\"}}})],g.prototype,\"imageMaxWidth\",void 0),e([f({type:String,json:{type:M.jsonValues,read:M.read,write:M.write}})],g.prototype,\"interpolation\",void 0),e([f()],g.prototype,\"minScale\",void 0),e([S(\"service\",\"minScale\")],g.prototype,\"readMinScale\",null),e([f()],g.prototype,\"maxScale\",void 0),e([S(\"service\",\"maxScale\")],g.prototype,\"readMaxScale\",null),e([f({type:O})],g.prototype,\"mosaicRule\",null),e([S(\"mosaicRule\",[\"mosaicRule\",\"defaultMosaicMethod\"])],g.prototype,\"readMosaicRule\",null),e([x(\"mosaicRule\")],g.prototype,\"writeMosaicRule\",null),e([f()],g.prototype,\"multidimensionalInfo\",void 0),e([f({type:N,json:{write:!0}})],g.prototype,\"multidimensionalSubset\",void 0),e([f({json:{type:y}})],g.prototype,\"noData\",void 0),e([x(\"noData\")],g.prototype,\"writeNoData\",null),e([f({type:String,json:{type:A.jsonValues,read:A.read,write:A.write}})],g.prototype,\"noDataInterpretation\",void 0),e([f({type:String,readOnly:!0,json:{read:{source:[\"fields\"]}}})],g.prototype,\"objectIdField\",void 0),e([S(\"objectIdField\")],g.prototype,\"readObjectIdField\",null),e([f({})],g.prototype,\"geometryType\",void 0),e([f({})],g.prototype,\"typeIdField\",void 0),e([f({})],g.prototype,\"types\",void 0),e([f({readOnly:!0})],g.prototype,\"parsedUrl\",null),e([f({type:Function})],g.prototype,\"pixelFilter\",void 0),e([f()],g.prototype,\"raster\",void 0),e([f({readOnly:!0})],g.prototype,\"sourceType\",void 0),e([S(\"sourceType\",[\"serviceSourceType\",\"fields\"])],g.prototype,\"readSourceType\",null),e([f()],g.prototype,\"viewId\",void 0),e([f({types:i,json:{name:\"layerDefinition.drawingInfo.renderer\",origins:{\"web-scene\":{types:r,name:\"layerDefinition.drawingInfo.renderer\",write:{overridePolicy:e=>({enabled:e&&\"vector-field\"!==e.type&&\"flow\"!==e.type})}}}}})],g.prototype,\"renderer\",null),e([S(\"renderer\")],g.prototype,\"readRenderer\",null),e([x(\"renderer\")],g.prototype,\"writeRenderer\",null),e([f()],g.prototype,\"symbolizer\",void 0),e([f(I)],g.prototype,\"opacity\",void 0),e([f({readOnly:!0})],g.prototype,\"rasterFields\",null),e([f({constructOnly:!0})],g.prototype,\"rasterFunctionInfos\",void 0),e([f({type:J})],g.prototype,\"renderingRule\",null),e([S(\"renderingRule\",[\"renderingRule\",\"rasterFunctionInfos\"])],g.prototype,\"readRenderingRule\",null),e([x(\"renderingRule\")],g.prototype,\"writeRenderingRule\",null),e([f()],g.prototype,\"serviceDataType\",void 0),e([f({readOnly:!0,type:De})],g.prototype,\"spatialReference\",void 0),e([S(\"spatialReference\",[\"spatialReference\",\"extent\"])],g.prototype,\"readSpatialReference\",null),e([f({json:{type:je.jsonValues}})],g.prototype,\"pixelType\",void 0),e([S(\"pixelType\")],g.prototype,\"readPixelType\",null),e([x(\"pixelType\")],g.prototype,\"writePixelType\",null),e([f({constructOnly:!0,type:q})],g.prototype,\"serviceRasterInfo\",void 0),e([f()],g.prototype,\"sourceJSON\",void 0),e([f(w)],g.prototype,\"url\",void 0),e([f({readOnly:!0})],g.prototype,\"version\",void 0),e([S(\"version\",[\"currentVersion\",\"fields\",\"timeInfo\"])],g.prototype,\"readVersion\",null),g=e([v(\"esri.layers.mixins.ArcGISImageService\")],g),g};export{Ne as ArcGISImageService};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}