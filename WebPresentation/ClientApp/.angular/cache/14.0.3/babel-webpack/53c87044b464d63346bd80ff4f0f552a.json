{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { Pos2us as e } from \"../2d/engine/webgl/DefaultVertexAttributeLayouts.js\";\nimport { BufferObject as t } from \"./BufferObject.js\";\nimport { TargetType as r, DepthStencilTargetType as i, TextureType as s, TextureWrapMode as o, PixelFormat as a, PixelType as n, TextureSamplingMode as p, Usage as m, ClearBufferBit as g, PrimitiveType as d } from \"./enums.js\";\nimport { FramebufferObject as _ } from \"./FramebufferObject.js\";\nimport { Texture as u } from \"./Texture.js\";\nimport { VertexArrayObject as c } from \"./VertexArrayObject.js\";\nimport { WebGLDriverTestModule as h } from \"./WebGLDriverTestModule.js\";\n\nclass l extends h {\n  constructor(e) {\n    super(), this._rctx = e, this._image = new Image(), this._image.src = \"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\", this._image.width = 5, this._image.height = 5, this._image.decode();\n    const t = \"\\n    precision highp float;\\n\\n    attribute vec2 a_pos;\\n    varying vec2 v_uv;\\n\\n    void main() {\\n      v_uv = a_pos;\\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n    }\\n    \",\n          r = \"\\n    precision highp float;\\n\\n    varying vec2 v_uv;\\n    uniform sampler2D u_texture;\\n\\n    void main() {\\n      gl_FragColor = texture2D(u_texture, v_uv);\\n    }\\n    \";\n    this._program = e.programCache.acquire(t, r, new Map([[\"a_pos\", 0]]));\n  }\n\n  dispose() {\n    super.dispose(), this._image.src = \"\";\n  }\n\n  _test(h) {\n    const l = this._rctx;\n    if (!l.gl) return h.dispose(), !0;\n    const f = new _(l, {\n      colorTarget: r.TEXTURE,\n      depthStencilTarget: i.NONE\n    }, {\n      target: s.TEXTURE_2D,\n      wrapMode: o.CLAMP_TO_EDGE,\n      pixelFormat: a.RGBA,\n      dataType: n.UNSIGNED_BYTE,\n      samplingMode: p.NEAREST,\n      width: 1,\n      height: 1\n    }),\n          w = t.createVertex(l, m.STATIC_DRAW, new Uint16Array([0, 0, 1, 0, 0, 1, 1, 1])),\n          E = new c(l, new Map([[\"a_pos\", 0]]), e, {\n      geometry: w\n    }),\n          v = new u(l, {\n      dataType: n.UNSIGNED_BYTE,\n      pixelFormat: a.RGBA,\n      preMultiplyAlpha: !1,\n      wrapMode: o.CLAMP_TO_EDGE,\n      samplingMode: p.LINEAR\n    }, this._image);\n    l.useProgram(h), l.bindTexture(v, 0), h.setUniform1i(\"u_texture\", 0);\n    const T = l.getBoundFramebufferObject(),\n          {\n      x,\n      y: A,\n      width: b,\n      height: y\n    } = l.getViewport();\n    l.bindFramebuffer(f), l.setViewport(0, 0, 1, 1), l.setClearColor(0, 0, 0, 0), l.setBlendingEnabled(!1), l.clearSafe(g.COLOR_BUFFER_BIT), l.bindVAO(E), l.drawArrays(d.TRIANGLE_STRIP, 0, 4);\n    const j = new Uint8Array(4);\n    return f.readPixels(0, 0, 1, 1, a.RGBA, n.UNSIGNED_BYTE, j), E.dispose(!1), w.dispose(), f.dispose(), v.dispose(), l.setViewport(x, A, b, y), l.bindFramebuffer(T), 255 !== j[0];\n  }\n\n}\n\nexport { l as SVGPremultipliedAlpha };","map":{"version":3,"names":["Pos2us","e","BufferObject","t","TargetType","r","DepthStencilTargetType","i","TextureType","s","TextureWrapMode","o","PixelFormat","a","PixelType","n","TextureSamplingMode","p","Usage","m","ClearBufferBit","g","PrimitiveType","d","FramebufferObject","_","Texture","u","VertexArrayObject","c","WebGLDriverTestModule","h","l","constructor","_rctx","_image","Image","src","width","height","decode","_program","programCache","acquire","Map","dispose","_test","gl","f","colorTarget","TEXTURE","depthStencilTarget","NONE","target","TEXTURE_2D","wrapMode","CLAMP_TO_EDGE","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","NEAREST","w","createVertex","STATIC_DRAW","Uint16Array","E","geometry","v","preMultiplyAlpha","LINEAR","useProgram","bindTexture","setUniform1i","T","getBoundFramebufferObject","x","y","A","b","getViewport","bindFramebuffer","setViewport","setClearColor","setBlendingEnabled","clearSafe","COLOR_BUFFER_BIT","bindVAO","drawArrays","TRIANGLE_STRIP","j","Uint8Array","readPixels","SVGPremultipliedAlpha"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{Pos2us as e}from\"../2d/engine/webgl/DefaultVertexAttributeLayouts.js\";import{BufferObject as t}from\"./BufferObject.js\";import{TargetType as r,DepthStencilTargetType as i,TextureType as s,TextureWrapMode as o,PixelFormat as a,PixelType as n,TextureSamplingMode as p,Usage as m,ClearBufferBit as g,PrimitiveType as d}from\"./enums.js\";import{FramebufferObject as _}from\"./FramebufferObject.js\";import{Texture as u}from\"./Texture.js\";import{VertexArrayObject as c}from\"./VertexArrayObject.js\";import{WebGLDriverTestModule as h}from\"./WebGLDriverTestModule.js\";class l extends h{constructor(e){super(),this._rctx=e,this._image=new Image,this._image.src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A\",this._image.width=5,this._image.height=5,this._image.decode();const t=\"\\n    precision highp float;\\n\\n    attribute vec2 a_pos;\\n    varying vec2 v_uv;\\n\\n    void main() {\\n      v_uv = a_pos;\\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\\n    }\\n    \",r=\"\\n    precision highp float;\\n\\n    varying vec2 v_uv;\\n    uniform sampler2D u_texture;\\n\\n    void main() {\\n      gl_FragColor = texture2D(u_texture, v_uv);\\n    }\\n    \";this._program=e.programCache.acquire(t,r,new Map([[\"a_pos\",0]]))}dispose(){super.dispose(),this._image.src=\"\"}_test(h){const l=this._rctx;if(!l.gl)return h.dispose(),!0;const f=new _(l,{colorTarget:r.TEXTURE,depthStencilTarget:i.NONE},{target:s.TEXTURE_2D,wrapMode:o.CLAMP_TO_EDGE,pixelFormat:a.RGBA,dataType:n.UNSIGNED_BYTE,samplingMode:p.NEAREST,width:1,height:1}),w=t.createVertex(l,m.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),E=new c(l,new Map([[\"a_pos\",0]]),e,{geometry:w}),v=new u(l,{dataType:n.UNSIGNED_BYTE,pixelFormat:a.RGBA,preMultiplyAlpha:!1,wrapMode:o.CLAMP_TO_EDGE,samplingMode:p.LINEAR},this._image);l.useProgram(h),l.bindTexture(v,0),h.setUniform1i(\"u_texture\",0);const T=l.getBoundFramebufferObject(),{x,y:A,width:b,height:y}=l.getViewport();l.bindFramebuffer(f),l.setViewport(0,0,1,1),l.setClearColor(0,0,0,0),l.setBlendingEnabled(!1),l.clearSafe(g.COLOR_BUFFER_BIT),l.bindVAO(E),l.drawArrays(d.TRIANGLE_STRIP,0,4);const j=new Uint8Array(4);return f.readPixels(0,0,1,1,a.RGBA,n.UNSIGNED_BYTE,j),E.dispose(!1),w.dispose(),f.dispose(),v.dispose(),l.setViewport(x,A,b,y),l.bindFramebuffer(T),255!==j[0]}}export{l as SVGPremultipliedAlpha};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}