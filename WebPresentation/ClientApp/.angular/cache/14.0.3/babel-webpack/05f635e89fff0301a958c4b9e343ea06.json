{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from \"../../request.js\";\nimport e from \"../../core/Error.js\";\nimport i from \"../../core/Logger.js\";\nimport { isArrayBuffer as s, isUint8ClampedArray as r } from \"../../core/typedArrayUtil.js\";\nimport { urlToObject as a, objectToQuery as o } from \"../../core/urlUtils.js\";\nconst h = 1.15;\n\nclass n {\n  constructor(t, e) {\n    this._spriteSource = t, this._maxTextureSize = e, this.devicePixelRatio = 1, this._spriteImageFormat = \"png\", this._isRetina = !1, this._spritesData = {}, this.image = null, this.width = null, this.height = null, this.loadStatus = \"not-loaded\", \"url\" === t.type && t.spriteFormat && (this._spriteImageFormat = t.spriteFormat), t.pixelRatio && (this.devicePixelRatio = t.pixelRatio), this.baseURL = t.spriteUrl;\n  }\n\n  get spriteNames() {\n    const t = [];\n\n    for (const e in this._spritesData) t.push(e);\n\n    return t.sort(), t;\n  }\n\n  getSpriteInfo(t) {\n    return this._spritesData ? this._spritesData[t] : null;\n  }\n\n  load(t) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.baseURL) {\n        _this.loadStatus = \"loading\";\n\n        try {\n          yield _this._loadSprites(t), _this.loadStatus = \"loaded\";\n        } catch {\n          _this.loadStatus = \"failed\";\n        }\n      } else _this.loadStatus = \"failed\";\n    })();\n  }\n\n  _loadSprites(t) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2._isRetina = _this2.devicePixelRatio > h;\n      const {\n        width: s,\n        height: r,\n        data: a,\n        json: o\n      } = yield _this2._getSpriteData(_this2._spriteSource, t),\n            n = Object.keys(o);\n      if (!n || 0 === n.length || !a) return _this2._spritesData = _this2.image = null, void (_this2.width = _this2.height = 0);\n      _this2._spritesData = o, _this2.width = s, _this2.height = r;\n      const d = Math.max(_this2._maxTextureSize, 4096);\n\n      if (s > d || r > d) {\n        const t = `Sprite resource for style ${_this2.baseURL} is bigger than the maximum allowed of ${d} pixels}`;\n        throw i.getLogger(\"esri.layers.support.SpriteSource\").error(t), new e(\"SpriteSource\", t);\n      }\n\n      let p;\n\n      for (let e = 0; e < a.length; e += 4) p = a[e + 3] / 255, a[e] = a[e] * p, a[e + 1] = a[e + 1] * p, a[e + 2] = a[e + 2] * p;\n\n      _this2.image = a;\n    })();\n  }\n\n  _getSpriteData(i, n) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (\"image\" === i.type) {\n        let t, a;\n\n        if (_this3.devicePixelRatio < h) {\n          if (!i.spriteSource1x) throw new e(\"SpriteSource\", \"no image data provided for low resolution sprites!\");\n          t = i.spriteSource1x.image, a = i.spriteSource1x.json;\n        } else {\n          if (!i.spriteSource2x) throw new e(\"SpriteSource\", \"no image data provided for high resolution sprites!\");\n          t = i.spriteSource2x.image, a = i.spriteSource2x.json;\n        }\n\n        return \"width\" in t && \"height\" in t && \"data\" in t && (s(t.data) || r(t.data)) ? {\n          width: t.width,\n          height: t.height,\n          data: new Uint8Array(t.data),\n          json: a\n        } : { ...d(t),\n          json: a\n        };\n      }\n\n      const p = a(_this3.baseURL),\n            l = p.query ? \"?\" + o(p.query) : \"\",\n            g = _this3._isRetina ? \"@2x\" : \"\",\n            u = `${p.path}${g}.${_this3._spriteImageFormat}${l}`,\n            c = `${p.path}${g}.json${l}`,\n            [m, S] = yield Promise.all([t(c, n), t(u, {\n        responseType: \"image\",\n        ...n\n      })]);\n      return { ...d(S.data),\n        json: m.data\n      };\n    })();\n  }\n\n}\n\nfunction d(t) {\n  const e = document.createElement(\"canvas\"),\n        i = e.getContext(\"2d\");\n  e.width = t.width, e.height = t.height, i.drawImage(t, 0, 0, t.width, t.height);\n  const s = i.getImageData(0, 0, t.width, t.height);\n  return {\n    width: t.width,\n    height: t.height,\n    data: new Uint8Array(s.data)\n  };\n}\n\nexport { n as default };","map":{"version":3,"names":["t","e","i","isArrayBuffer","s","isUint8ClampedArray","r","urlToObject","a","objectToQuery","o","h","n","constructor","_spriteSource","_maxTextureSize","devicePixelRatio","_spriteImageFormat","_isRetina","_spritesData","image","width","height","loadStatus","type","spriteFormat","pixelRatio","baseURL","spriteUrl","spriteNames","push","sort","getSpriteInfo","load","_loadSprites","data","json","_getSpriteData","Object","keys","length","d","Math","max","getLogger","error","p","spriteSource1x","spriteSource2x","Uint8Array","l","query","g","u","path","c","m","S","Promise","all","responseType","document","createElement","getContext","drawImage","getImageData","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/support/SpriteSource.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isArrayBuffer as s,isUint8ClampedArray as r}from\"../../core/typedArrayUtil.js\";import{urlToObject as a,objectToQuery as o}from\"../../core/urlUtils.js\";const h=1.15;class n{constructor(t,e){this._spriteSource=t,this._maxTextureSize=e,this.devicePixelRatio=1,this._spriteImageFormat=\"png\",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus=\"not-loaded\",\"url\"===t.type&&t.spriteFormat&&(this._spriteImageFormat=t.spriteFormat),t.pixelRatio&&(this.devicePixelRatio=t.pixelRatio),this.baseURL=t.spriteUrl}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData?this._spritesData[t]:null}async load(t){if(this.baseURL){this.loadStatus=\"loading\";try{await this._loadSprites(t),this.loadStatus=\"loaded\"}catch{this.loadStatus=\"failed\"}}else this.loadStatus=\"failed\"}async _loadSprites(t){this._isRetina=this.devicePixelRatio>h;const{width:s,height:r,data:a,json:o}=await this._getSpriteData(this._spriteSource,t),n=Object.keys(o);if(!n||0===n.length||!a)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=o,this.width=s,this.height=r;const d=Math.max(this._maxTextureSize,4096);if(s>d||r>d){const t=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${d} pixels}`;throw i.getLogger(\"esri.layers.support.SpriteSource\").error(t),new e(\"SpriteSource\",t)}let p;for(let e=0;e<a.length;e+=4)p=a[e+3]/255,a[e]=a[e]*p,a[e+1]=a[e+1]*p,a[e+2]=a[e+2]*p;this.image=a}async _getSpriteData(i,n){if(\"image\"===i.type){let t,a;if(this.devicePixelRatio<h){if(!i.spriteSource1x)throw new e(\"SpriteSource\",\"no image data provided for low resolution sprites!\");t=i.spriteSource1x.image,a=i.spriteSource1x.json}else{if(!i.spriteSource2x)throw new e(\"SpriteSource\",\"no image data provided for high resolution sprites!\");t=i.spriteSource2x.image,a=i.spriteSource2x.json}return\"width\"in t&&\"height\"in t&&\"data\"in t&&(s(t.data)||r(t.data))?{width:t.width,height:t.height,data:new Uint8Array(t.data),json:a}:{...d(t),json:a}}const p=a(this.baseURL),l=p.query?\"?\"+o(p.query):\"\",g=this._isRetina?\"@2x\":\"\",u=`${p.path}${g}.${this._spriteImageFormat}${l}`,c=`${p.path}${g}.json${l}`,[m,S]=await Promise.all([t(c,n),t(u,{responseType:\"image\",...n})]);return{...d(S.data),json:m.data}}}function d(t){const e=document.createElement(\"canvas\"),i=e.getContext(\"2d\");e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(s.data)}}export{n as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}