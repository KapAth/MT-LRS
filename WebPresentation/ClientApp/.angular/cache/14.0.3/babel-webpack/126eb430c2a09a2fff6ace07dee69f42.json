{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { NUMBER_MAX_FLOAT32 as e } from \"../../../core/mathUtils.js\";\nimport { isNone as s } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as r } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport n from \"./BaseRasterFunction.js\";\nimport u from \"./MaskFunctionArguments.js\";\nimport { createMaskLUT as a, MAX_MAP_SIZE_GPU as i, NoDataInterpretation as l, mask as c } from \"./pixelUtils.js\";\nlet p = class extends n {\n  constructor() {\n    super(...arguments), this.functionName = \"Mask\", this.functionArguments = null, this.rasterArgumentNames = [\"raster\"];\n  }\n\n  _bindSourceRasters() {\n    const t = this.sourceRasterInfos[0].clone(),\n          {\n      pixelType: e\n    } = t;\n    this.outputPixelType = this._getOutputPixelType(e), t.pixelType = this.outputPixelType, this.rasterInfo = t;\n    const {\n      includedRanges: s,\n      normalizedNoDataValues: o\n    } = this.functionArguments;\n    if (!s?.length && !o?.length) return {\n      success: !1,\n      supportsGPU: !1,\n      error: \"missing includedRanges or noDataValues argument\"\n    };\n    let r = [];\n\n    for (let u = 0; u < t.bandCount; u++) {\n      const t = a(e, s?.slice(2 * u, 2 * u + 2), o?.[u]);\n\n      if (null == t) {\n        r = null;\n        break;\n      }\n\n      r.push(t);\n    }\n\n    this.lookups = r;\n    const n = null != o && o.every(t => t?.length === o[0]?.length);\n    return {\n      success: !0,\n      supportsGPU: (!s || s.length <= 2 * i) && (!o || n && o[0].length <= i)\n    };\n  }\n\n  _processPixels(t) {\n    const e = t.pixelBlocks?.[0];\n    if (s(e)) return null;\n    const {\n      outputPixelType: o,\n      lookups: r\n    } = this,\n          {\n      includedRanges: n,\n      noDataInterpretation: u,\n      normalizedNoDataValues: a\n    } = this.functionArguments,\n          i = u === l.matchAll;\n    return c(e, {\n      includedRanges: n,\n      noDataValues: a,\n      outputPixelType: o,\n      matchAll: i,\n      lookups: r\n    });\n  }\n\n  _getWebGLParameters() {\n    const {\n      includedRanges: t,\n      normalizedNoDataValues: s\n    } = this.functionArguments,\n          o = new Float32Array(i);\n    o.fill(e), s?.[0]?.length && o.set(s[0]);\n    const r = new Float32Array(i);\n\n    for (let n = 0; n < r.length; n += 2) r[n] = t?.[n] ?? -e, r[n + 1] = t?.[n + 1] ?? e;\n\n    return t && t.length && r.set(t), {\n      bandCount: this.sourceRasterInfos[0].bandCount,\n      noDataValues: o,\n      includedRanges: r\n    };\n  }\n\n};\nt([o({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], p.prototype, \"functionName\", void 0), t([o({\n  type: u,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], p.prototype, \"functionArguments\", void 0), t([o()], p.prototype, \"rasterArgumentNames\", void 0), t([o({\n  json: {\n    write: !0\n  }\n})], p.prototype, \"lookups\", void 0), p = t([r(\"esri.layers.support.rasterFunctions.MaskFunction\")], p);\nconst m = p;\nexport { m as default };","map":{"version":3,"names":["_","t","NUMBER_MAX_FLOAT32","e","isNone","s","property","o","subclass","r","n","u","createMaskLUT","a","MAX_MAP_SIZE_GPU","i","NoDataInterpretation","l","mask","c","p","constructor","arguments","functionName","functionArguments","rasterArgumentNames","_bindSourceRasters","sourceRasterInfos","clone","pixelType","outputPixelType","_getOutputPixelType","rasterInfo","includedRanges","normalizedNoDataValues","length","success","supportsGPU","error","bandCount","slice","push","lookups","every","_processPixels","pixelBlocks","noDataInterpretation","matchAll","noDataValues","_getWebGLParameters","Float32Array","fill","set","json","write","name","prototype","type","m","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/support/rasterFunctions/MaskFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{NUMBER_MAX_FLOAT32 as e}from\"../../../core/mathUtils.js\";import{isNone as s}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"./BaseRasterFunction.js\";import u from\"./MaskFunctionArguments.js\";import{createMaskLUT as a,MAX_MAP_SIZE_GPU as i,NoDataInterpretation as l,mask as c}from\"./pixelUtils.js\";let p=class extends n{constructor(){super(...arguments),this.functionName=\"Mask\",this.functionArguments=null,this.rasterArgumentNames=[\"raster\"]}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:e}=t;this.outputPixelType=this._getOutputPixelType(e),t.pixelType=this.outputPixelType,this.rasterInfo=t;const{includedRanges:s,normalizedNoDataValues:o}=this.functionArguments;if(!s?.length&&!o?.length)return{success:!1,supportsGPU:!1,error:\"missing includedRanges or noDataValues argument\"};let r=[];for(let u=0;u<t.bandCount;u++){const t=a(e,s?.slice(2*u,2*u+2),o?.[u]);if(null==t){r=null;break}r.push(t)}this.lookups=r;const n=null!=o&&o.every((t=>t?.length===o[0]?.length));return{success:!0,supportsGPU:(!s||s.length<=2*i)&&(!o||n&&o[0].length<=i)}}_processPixels(t){const e=t.pixelBlocks?.[0];if(s(e))return null;const{outputPixelType:o,lookups:r}=this,{includedRanges:n,noDataInterpretation:u,normalizedNoDataValues:a}=this.functionArguments,i=u===l.matchAll;return c(e,{includedRanges:n,noDataValues:a,outputPixelType:o,matchAll:i,lookups:r})}_getWebGLParameters(){const{includedRanges:t,normalizedNoDataValues:s}=this.functionArguments,o=new Float32Array(i);o.fill(e),s?.[0]?.length&&o.set(s[0]);const r=new Float32Array(i);for(let n=0;n<r.length;n+=2)r[n]=t?.[n]??-e,r[n+1]=t?.[n+1]??e;return t&&t.length&&r.set(t),{bandCount:this.sourceRasterInfos[0].bandCount,noDataValues:o,includedRanges:r}}};t([o({json:{write:!0,name:\"rasterFunction\"}})],p.prototype,\"functionName\",void 0),t([o({type:u,json:{write:!0,name:\"rasterFunctionArguments\"}})],p.prototype,\"functionArguments\",void 0),t([o()],p.prototype,\"rasterArgumentNames\",void 0),t([o({json:{write:!0}})],p.prototype,\"lookups\",void 0),p=t([r(\"esri.layers.support.rasterFunctions.MaskFunction\")],p);const m=p;export{m as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}