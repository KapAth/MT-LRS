{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport t from \"../../../../core/Accessor.js\";\nimport { bidiText as s } from \"../../../../core/BidiText.js\";\nimport { HandleOwnerMixin as i } from \"../../../../core/HandleOwner.js\";\nimport has from \"../../../../core/has.js\";\nimport { isSome as r, isNone as o, assertIsSome as a } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as n, isAbortError as h, throwIfAbortError as l } from \"../../../../core/promiseUtils.js\";\nimport { watch as d } from \"../../../../core/reactiveUtils.js\";\nimport { property as p } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport { subclass as c } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport g from \"../../../../geometry/SpatialReference.js\";\nimport { width as m, height as u, create as _ } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { closeRingsAndFixWinding as f } from \"../../../../geometry/support/coordsUtils.js\";\nimport { getJsonType as y, isPolygon as b, isPolyline as S, isExtent as w, isPoint as T, isMultipoint as v } from \"../../../../geometry/support/jsonUtils.js\";\nimport { normalizeCentralMeridianForDisplay as I } from \"../../../../geometry/support/normalizeUtilsSync.js\";\nimport { getInfo as U } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport { checkProjectionSupport as G, project as M } from \"../../../../layers/graphics/data/projectionSupport.js\";\nimport { symbolToCIM as j } from \"../../../../symbols/cim/CIMSymbolHelper.js\";\nimport { errorPolylineSymbol2D as C, errorPolygonSymbol2D as P, errorPointSymbol2D as x } from \"../../../../symbols/support/defaults.js\";\nimport { FILTER_FLAG_0 as R } from \"../../engine/webgl/definitions.js\";\nimport { WGLSymbologyType as A } from \"../../engine/webgl/enums.js\";\nimport { GraphicTile as q } from \"../../engine/webgl/GraphicTile.js\";\nimport { TileData as D } from \"../../engine/webgl/TileData.js\";\nimport F from \"../../engine/webgl/WGLDisplayObject.js\";\nimport { MeshData as z } from \"../../engine/webgl/mesh/MeshData.js\";\nimport { WGLMeshFactory as O } from \"../../engine/webgl/mesh/factories/WGLMeshFactory.js\";\nimport { WGLTemplateStore as E } from \"../../engine/webgl/mesh/templates/WGLTemplateStore.js\";\nimport { createMatcher as H } from \"../../engine/webgl/util/Matcher.js\";\nimport { createSymbolSchemaOptions as k, createMatcherSchema as N } from \"../features/schemaUtils.js\";\nimport B from \"../features/support/AttributeStore.js\";\nimport { ComputedAttributeStorage as L } from \"../features/support/ComputedAttributeStorage.js\";\nimport { GraphicsReader as V } from \"../features/support/GraphicsReader.js\";\nimport W from \"./GraphicStore.js\";\nimport { intersectingInternationalDateline as J, isMarkerSymbol as Z, isTextSymbol as K, polygonFromExtent as Q, TILE_SIZE as X, PIXEL_BUFFER as Y } from \"./graphicsUtils.js\";\nimport { expandSymbol as $ } from \"../support/cimSymbolUtils.js\";\nimport { GraphicsView as ee } from \"../../../layers/GraphicsView.js\";\nimport { getWebGLCapabilities as te } from \"../../../webgl/capabilities.js\";\nimport { createSymbolSchema as se } from \"../features/createSymbolSchema.js\";\nconst ie = has(\"esri-2d-graphic-debug\");\n\nfunction re(e, t, s) {\n  let i = s.get(e);\n  return i || (i = {\n    tile: t,\n    addedOrModified: [],\n    removed: []\n  }, s.set(e, i)), i;\n}\n\nlet oe = class extends ee(i(t)) {\n  constructor(e) {\n    super(e), this._storage = new L(), this._displayIds = new Map(), this._controller = new AbortController(), this._tiles = new Map(), this._graphicStoreUpdate = !1, this._graphicsSet = new Set(), this._matcher = Promise.resolve(null), this._tileUpdateSet = new Set(), this._tilesToUpdate = new Map(), this._graphicIdToAbortController = new Map(), this._attached = !1, this._updatingGraphicsTimer = null, this._hashToExpandedSymbol = new Map(), this._hashToExpandedSymbolPromise = new Map(), this._hashToCIMSymbolPromise = new Map(), this._hashToCIM = new Map(), this._processing = !1, this._needsProcessing = !1, this._pendingUpdate = {\n      added: new Set(),\n      updated: new Set(),\n      removed: new Set()\n    }, this.lastUpdateId = -1, this.updateRequested = !1, this.defaultPointSymbolEnabled = !0, this.graphicUpdateHandler = this.graphicUpdateHandler.bind(this);\n  }\n\n  destroy() {\n    this._updatingGraphicsTimer && (clearTimeout(this._updatingGraphicsTimer), this._updatingGraphicsTimer = null, this.notifyChange(\"updating\")), this._controller.abort(), this.container.destroy(), this._set(\"graphics\", null), this._graphicStore.clear(), this._attributeStore = null, this._hashToExpandedSymbol.clear(), this.view = null, this.renderer = null, this._hashToCIM.clear(), this._hashToCIMSymbolPromise.clear(), this._hashToExpandedSymbolPromise.clear();\n  }\n\n  _createMatcher(e, t, s) {\n    if (e) {\n      const i = k(e),\n            r = N({\n        indexCount: 0,\n        fields: {}\n      }, \"feature\", e, i);\n      this._matcher = H(r, t, null, s);\n    }\n  }\n\n  _createDisplayId(e) {\n    let t = this._displayIds.get(e);\n\n    return t || (t = this._storage.createDisplayId(), this._displayIds.set(e, t)), t;\n  }\n\n  initialize() {\n    this._attributeStore = new B({\n      type: \"local\",\n      initialize: e => Promise.resolve(this.container.attributeView.initialize(e)),\n      update: e => this.container.attributeView.requestUpdate(e),\n      render: () => this.container.requestRender()\n    }, te(\"2d\"), () => this.notifyChange(\"updating\")), this.container.hasHighlight = () => this._attributeStore.hasHighlight;\n\n    const e = e => {\n      this._createDisplayId(e.uid), this._setFilterState(e.uid, e.visible);\n    },\n          t = e => {\n      const t = this._displayIds.get(e.uid);\n\n      this._displayIds.delete(e.uid), this._storage.releaseDisplayId(t);\n    },\n          s = new E(this.container.getMaterialItems.bind(this.container), this.view.featuresTilingScheme.tileInfo);\n\n    this._graphicStore = new W(this.view.featuresTilingScheme, this.view.state.scale, this.uid, this.graphics, e, t, this._hashToCIM), this._meshFactory = new O(null, this.uid, s), this._templateStore = s, this.handles.add([d(() => this.renderer, e => {\n      this._createMatcher(e, s, this.container.stage.resourceManager);\n\n      for (const t of this.graphics) this._pendingUpdate.updated.add(t);\n\n      this.requestUpdate();\n    }), this.view.graphicsTileStore.on(\"update\", this._onTileUpdate.bind(this)), this.container.on(\"attach\", () => {\n      ie && this.container.enableRenderingBounds(() => this._graphicStore.getAllBounds()), this.graphics.items.length > 0 && this._graphicsChangeHandler({\n        target: this.graphics,\n        added: this.graphics.items,\n        removed: [],\n        moved: []\n      }), this.handles.add(this.graphics.on(\"change\", e => this._graphicsChangeHandler(e)), \"graphics\");\n      const e = this.container.stage.resourceManager;\n      this._createMatcher(this.renderer, s, e), this._graphicStore.setResourceManager(e), this._attached = !0, this.notifyChange(\"updating\");\n    })]);\n    const i = this.view.graphicsTileStore.tiles;\n\n    this._onTileUpdate({\n      added: i,\n      removed: []\n    });\n  }\n\n  get updating() {\n    return !this._attached || null !== this._updatingGraphicsTimer || this._tileUpdateSet.size > 0 || this._tilesToUpdate.size > 0 || this._attributeStore.isUpdating();\n  }\n\n  hitTest(e) {\n    if (!this.view || !this.view.position) return [];\n    const {\n      resolution: t,\n      rotation: s\n    } = this.view.state;\n    return this._graphicStore.hitTest(e.x, e.y, 2, t, s);\n  }\n\n  update(e) {\n    n(this._controller.signal);\n    const t = e.state,\n          {\n      resolution: s\n    } = t;\n\n    if (this._graphicStore.updateLevel(s), this._graphicStoreUpdate = !0, this.updateRequested = !1, this._pendingUpdate.updated.size > 0) {\n      if (!this._processing) return void this._updateGraphics();\n      this._needsProcessing = !0;\n    }\n  }\n\n  viewChange() {\n    this.requestUpdate();\n  }\n\n  requestUpdate() {\n    this.updateRequested || (this.updateRequested = !0, this.requestUpdateCallback());\n  }\n\n  processUpdate(e) {\n    this.updateRequested && (this.updateRequested = !1, this.update(e));\n  }\n\n  graphicUpdateHandler(e) {\n    const {\n      graphic: t,\n      property: s\n    } = e;\n\n    switch (s) {\n      case \"attributes\":\n      case \"geometry\":\n      case \"symbol\":\n        this._pendingUpdate.updated.add(t), this.requestUpdate();\n        break;\n\n      case \"visible\":\n        this._setFilterState(t.uid, t.visible), this._attributeStore.sendUpdates();\n    }\n  }\n\n  setHighlight(e) {\n    const t = e.map(e => this._displayIds.get(e)).filter(r);\n\n    this._attributeStore.setHighlight(e, t);\n  }\n\n  _getIntersectingTiles(e) {\n    const t = this._graphicStore.getBounds(e);\n\n    if (!t || 0 === m(t) || 0 === u(t)) return [];\n    const s = J(t, this.view.spatialReference);\n    return r(s) ? [...new Set([...this.view.graphicsTileStore.boundsIntersections(s[0]), ...this.view.graphicsTileStore.boundsIntersections(s[1])])] : this.view.graphicsTileStore.boundsIntersections(t);\n  }\n\n  _updateTile(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      n(_this._controller.signal);\n\n      const t = e.tile,\n            s = _this._getGraphicsData(_this._templateStore, t, e.addedOrModified),\n            i = yield _this._processGraphics(t, s);\n\n      return n(_this._controller.signal), _this._patchTile(t.key, {\n        type: \"update\",\n        addOrUpdate: i,\n        remove: e.removed,\n        end: !0,\n        clear: !1,\n        sort: !1\n      }), i;\n    })();\n  }\n\n  _patchTile(e, t) {\n    const s = this._tiles.get(e);\n\n    s && (this.container.onTileData(s, t), this.container.requestRender());\n  }\n\n  _graphicsChangeHandler(e) {\n    const t = this._pendingUpdate;\n\n    for (const s of e.added) t.added.add(s);\n\n    for (const s of e.moved) t.updated.add(s);\n\n    for (const s of e.removed) this._pendingUpdate.added.has(s) ? t.added.delete(s) : t.removed.add(s);\n\n    this._processing ? this._needsProcessing = !0 : this._updateGraphics();\n  }\n\n  _getGraphicsToUpdate() {\n    const e = {\n      added: [],\n      removed: [],\n      updated: []\n    };\n    if (!this.graphics) return e;\n    const t = this._pendingUpdate;\n\n    for (const s of this.graphics.items) t.added.has(s) ? e.added.push(s) : t.updated.has(s) && e.updated.push(s);\n\n    for (const s of t.removed) this._graphicStore.has(s) && e.removed.push(s);\n\n    return t.added.clear(), t.removed.clear(), t.updated.clear(), e;\n  }\n\n  _updateGraphics() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2._processing = !0;\n\n      const {\n        added: e,\n        removed: t,\n        updated: s\n      } = _this2._getGraphicsToUpdate(),\n            i = _this2._tilesToUpdate;\n\n      let r;\n\n      try {\n        if (!_this2._graphicStoreUpdate) {\n          const e = _this2.view.state,\n                {\n            resolution: t\n          } = e;\n\n          _this2._graphicStore.updateLevel(t);\n        }\n\n        const o = [],\n              a = new Array(e.length + t.length);\n\n        for (let e = 0; e < s.length; e++) {\n          const t = s[e],\n                n = _this2._getIntersectingTiles(t);\n\n          for (const e of n) {\n            r = e.id;\n            re(r, e, i).removed.push(_this2._displayIds.get(t.uid));\n          }\n\n          o.push(_this2._updateGraphic(t, null)), a[e] = t;\n        }\n\n        const n = s.length;\n\n        for (let t = 0; t < e.length; t++) {\n          const s = e[t];\n          a[n + t] = s, _this2._graphicsSet.add(s), o.push(_this2._addGraphic(s));\n        }\n\n        for (const e of t) {\n          _this2._abortProcessingGraphic(e.uid);\n\n          const t = _this2._getIntersectingTiles(e);\n\n          for (const s of t) {\n            r = s.id;\n            re(r, s, i).removed.push(_this2._displayIds.get(e.uid));\n          }\n\n          _this2._graphicsSet.delete(e), _this2._graphicStore.remove(e);\n        }\n\n        let h;\n        _this2._flipUpdatingGraphics(), yield Promise.all(o);\n\n        for (let e = 0; e < a.length; e++) {\n          h = a[e];\n\n          const t = _this2._getIntersectingTiles(h);\n\n          for (const e of t) {\n            r = e.id;\n            re(r, e, i).addedOrModified.push(h);\n          }\n        }\n\n        _this2._graphicStore.updateZ();\n\n        const l = [];\n\n        for (const [e, t] of i) l.push(_this2._updateTile(t));\n\n        yield Promise.all(l);\n      } catch (o) {\n        h(o), 0;\n      }\n\n      for (const a of t) try {\n        const e = yield _this2._getSymbolForGraphic(a, null);\n\n        if (e) {\n          const t = e.hash();\n\n          _this2._hashToExpandedSymbol.delete(t);\n        }\n      } catch (o) {\n        h(o), 0;\n      }\n\n      i.clear(), _this2.notifyChange(\"updating\"), _this2._processing = !1, _this2._needsProcessing && (_this2._needsProcessing = !1, _this2._updateGraphics());\n    })();\n  }\n\n  _getArcadeInfo(e) {\n    const t = (e.attributes ? Object.keys(e.attributes) : []).map(t => ({\n      name: t,\n      alias: t,\n      type: \"string\" == typeof e.attributes[t] ? \"esriFieldTypeString\" : \"esriFieldTypeDouble\"\n    }));\n    return o(e.geometry) ? null : {\n      geometryType: y(e.geometry),\n      spatialReference: g.fromJSON(e.geometry.spatialReference),\n      fields: t\n    };\n  }\n\n  _getSymbolForGraphic(e, t) {\n    return n(this._controller.signal), r(e.symbol) ? Promise.resolve(e.symbol) : r(this.renderer) ? this.renderer.getSymbolAsync(e, {\n      scale: this.view.scale,\n      signal: r(t) ? t.signal : null\n    }) : Promise.resolve(this._getNullSymbol(e));\n  }\n\n  _getCIMSymbol(e, t, s) {\n    let i = this._hashToCIM.get(t);\n\n    if (i) return Promise.resolve(i);\n    const o = j(e);\n\n    if (r(o)) {\n      if (\"CIMSymbolReference\" === o.type) return i = o, this._hashToCIM.set(t, i), Promise.resolve(i);\n\n      let e = this._hashToCIMSymbolPromise.get(t);\n\n      return e || (e = o.fetchCIMSymbol(s).then(e => (this._hashToCIM.set(t, e.data), this._hashToCIMSymbolPromise.delete(t), e)).catch(e => (this._hashToCIMSymbolPromise.delete(t), l(e), null)), this._hashToCIMSymbolPromise.set(t, e), e);\n    }\n\n    return Promise.resolve(null);\n  }\n\n  _expandCIMSymbol(e, t, s, i) {\n    const r = this._hashToExpandedSymbol.get(s);\n\n    if (r) return Promise.resolve(r);\n\n    let o = this._hashToExpandedSymbolPromise.get(s);\n\n    if (o) return o;\n\n    const a = this.container.stage,\n          n = this._getArcadeInfo(t),\n          h = k(null),\n          l = se(e, h);\n\n    return o = $(l, n, a.resourceManager, i), this._hashToExpandedSymbolPromise.set(s, o), o.then(e => (this._hashToExpandedSymbol.set(s, e), this._hashToExpandedSymbolPromise.delete(s), e)), o;\n  }\n\n  _getSymbolResources(e, t) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      n(_this3._controller.signal);\n      return _this3.container.stage ? _this3._getSymbolForGraphic(e, t).then(i => {\n        if (!i) return null;\n        const r = i.hash();\n        return _this3._getCIMSymbol(i, r, t).then(i => o(i) ? null : _this3._expandCIMSymbol(i, e, r, t).then(e => {\n          const t = e.layers.filter(e => \"text\" === e.type && \"string\" == typeof e.text);\n\n          if (t && t.length > 0) {\n            const i = new Array(t.length);\n\n            for (let e = 0; e < t.length; e++) {\n              const r = t[e],\n                    o = [],\n                    [a] = s(r.text);\n              r.text = a;\n\n              for (let e = 0; e < a.length; e++) o.push(a.charCodeAt(e));\n\n              i[e] = {\n                symbol: r,\n                id: e,\n                glyphIds: o\n              };\n            }\n\n            const o = new Map();\n            return _this3.container.getMaterialItems(i).then(s => {\n              a(s);\n\n              for (let e = 0; e < t.length; e++) {\n                const i = t[e];\n                o.set(i.cim, {\n                  text: i.text,\n                  mosaicItem: s[e].mosaicItem\n                });\n              }\n\n              return {\n                symbol: e,\n                textInfo: o,\n                hash: r\n              };\n            });\n          }\n\n          return {\n            symbol: e,\n            hash: r\n          };\n        }));\n      }).catch(e => (l(e), null)) : null;\n    })();\n  }\n\n  _projectAndNormalizeGeometry(e, t) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      if (n(_this4._controller.signal), o(e.geometry) || \"mesh\" === e.geometry.type) return null;\n      let s = e.geometry;\n\n      if (b(s)) {\n        const e = s.rings;\n        s.rings = e;\n      } else if (S(s)) {\n        const e = s.paths;\n        s.paths = e;\n      } else if (w(s)) {\n        const i = yield _this4._getSymbolForGraphic(e, t);\n\n        if (n(_this4._controller.signal), i && (Z(i.type) || K(i.type))) {\n          s = s.center;\n        } else s = Q(s);\n      }\n\n      yield G(s.spatialReference, _this4.view.spatialReference);\n      const i = I(s),\n            r = M(i, s.spatialReference, _this4.view.spatialReference);\n      return r && f(r), r;\n    })();\n  }\n\n  _onTileUpdate(e) {\n    const t = U(this.view.spatialReference);\n    if (e.added && e.added.length > 0) for (const s of e.added) this._addNewTile(s, t);\n    if (e.removed && e.removed.length > 0) for (const s of e.removed) this._removeTile(s.key);\n  }\n\n  _addGraphic(e) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      _this5._abortProcessingGraphic(e.uid), n(_this5._controller.signal);\n      const t = new AbortController();\n\n      _this5._graphicIdToAbortController.set(e.uid, t);\n\n      const s = {\n        signal: t.signal\n      };\n\n      try {\n        yield _this5._addOrUpdateGraphic(e, s), n(_this5._controller.signal), _this5._graphicIdToAbortController.delete(e.uid);\n      } catch (i) {\n        if (_this5._graphicIdToAbortController.delete(e.uid), !h(i)) throw i;\n      }\n    })();\n  }\n\n  _updateGraphic(e, t) {\n    n(this._controller.signal);\n\n    const s = this._projectAndNormalizeGeometry(e, t),\n          i = this._getSymbolResources(e, t);\n\n    return Promise.all([s, i]).then(([t, s]) => {\n      n(this._controller.signal), this._graphicStore.addOrModify(e, s, t);\n    });\n  }\n\n  _addOrUpdateGraphic(e, t) {\n    n(this._controller.signal);\n\n    const s = this._projectAndNormalizeGeometry(e, t),\n          i = this._getSymbolResources(e, t);\n\n    return Promise.all([s, i]).then(([t, s]) => {\n      n(this._controller.signal), this._graphicsSet.has(e) && this._graphicStore.addOrModify(e, s, t);\n    });\n  }\n\n  _addTile(e) {\n    const t = this.view.featuresTilingScheme.getTileBounds(_(), e),\n          s = this.view.featuresTilingScheme.getTileResolution(e.level),\n          i = new q(e, s, t[0], t[3]);\n    return this._tiles.set(e, i), this.container.addChild(i), i;\n  }\n\n  _addNewTile(e, t) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      const s = _this6._addTile(e.key),\n            i = _this6._graphicStore.queryTileData(_this6._templateStore, e);\n\n      if (0 === i.length) return;\n\n      if (t) {\n        const s = Math.round((t.valid[1] - t.valid[0]) / e.resolution);\n\n        for (const e of i) e.geometry && (T(e.geometry) || v(e.geometry)) && _this6._wrapPoints(e, s);\n      }\n\n      const r = e.key;\n      _this6._tileUpdateSet.add(e.key), _this6.notifyChange(\"updating\");\n\n      try {\n        const t = {\n          type: \"update\",\n          clear: !1,\n          addOrUpdate: yield _this6._processGraphics(e, i),\n          remove: [],\n          end: !0,\n          sort: !1\n        };\n        s.patch(t), _this6._tileUpdateSet.delete(r), _this6.notifyChange(\"updating\");\n      } catch (o) {\n        if (_this6._tileUpdateSet.delete(r), _this6.notifyChange(\"updating\"), !h(o)) throw o;\n      }\n    })();\n  }\n\n  _removeTile(e) {\n    if (!this._tiles.has(e)) return;\n\n    const t = this._tiles.get(e);\n\n    this.container.removeChild(t), t.destroy(), this._tiles.delete(e);\n  }\n\n  _setFilterState(e, t) {\n    const s = this._displayIds.get(e),\n          i = this._attributeStore.getHighlightFlag(e);\n\n    this._attributeStore.setData(s, 0, 0, i | (t ? R : 0));\n  }\n\n  _getGraphicsData(e, t, s) {\n    const i = this.view,\n          r = U(i.spatialReference),\n          o = this._graphicStore.getGraphicsData(e, t, s);\n\n    if (r) {\n      const e = Math.round((r.valid[1] - r.valid[0]) / t.resolution);\n\n      for (const t of o) t.geometry && (T(t.geometry) || v(t.geometry)) && this._wrapPoints(t, e);\n    }\n\n    return o;\n  }\n\n  _wrapPoints(e, t) {\n    const s = e.geometry;\n    v(s) ? this._wrapMultipoint(s, t) : this._wrapPoint(e, t);\n  }\n\n  _wrapMultipoint(e, t) {\n    const s = e.points,\n          i = [];\n    let r = 0,\n        o = 0;\n\n    for (const [a, n] of s) {\n      if (i.push([a + r, n]), r = 0, t === X) {\n        const e = 5 * Y;\n        a + o < e ? (i.push([t, 0]), r = -t) : a + o > X - e && (i.push([-t, 0]), r = t);\n      } else a + o < -Y ? (i.push([t, 0]), r = -t) : a + o > X + Y && (i.push([-t, 0]), r = t);\n\n      o += a;\n    }\n\n    e.points = i;\n  }\n\n  _wrapPoint(e, t) {\n    const s = e.geometry;\n\n    if (t === X) {\n      const i = 5 * Y;\n      s.x < i ? e.geometry = {\n        points: [[s.x, s.y], [t, 0]]\n      } : s.x > X - i && (e.geometry = {\n        points: [[s.x, s.y], [-t, 0]]\n      });\n    } else s.x < -Y ? e.geometry = {\n      points: [[s.x, s.y], [t, 0]]\n    } : s.x > X + Y && (e.geometry = {\n      points: [[s.x, s.y], [-t, 0]]\n    });\n  }\n\n  _processGraphics(e, t, s) {\n    if (!(t && t.length) || !this._meshFactory) return Promise.resolve(null);\n    const i = V.from(t, this.uid, e.transform),\n          r = this._meshFactory;\n    return this._matcher.then(t => r.analyzeGraphics(i, this.container.stage.resourceManager, t, null, null, s).then(() => (this._attributeStore.sendUpdates(), this._processAnalyzedGraphics(e, i))));\n  }\n\n  _processAnalyzedGraphics(e, t) {\n    const s = this._meshFactory,\n          i = t.getSize(),\n          r = t.getCursor(),\n          o = {\n      features: i,\n      records: i,\n      metrics: 0\n    },\n          a = new z(e.key.id, o, A.DEFAULT, !1, !1),\n          n = [];\n\n    for (; r.next();) {\n      const t = r.readGraphic();\n      t.insertAfter = -1 === t.insertAfter ? -1 : this._displayIds.get(t.insertAfter), t.displayId = this._displayIds.get(t.attributes[this.uid]);\n      const i = new F(t.displayId);\n      i.insertAfter = t.insertAfter, n.push(i), s.writeGraphic(a, r, e.level, this.container.stage.resourceManager);\n    }\n\n    const h = e.tileInfoView.tileInfo.isWrappable,\n          l = a.serialize(h);\n    if (1 !== l.length) return new D();\n    const d = l[0].message;\n    return D.fromVertexData(d, n);\n  }\n\n  _abortProcessingGraphic(e) {\n    this._graphicIdToAbortController.get(e)?.abort();\n  }\n\n  _getNullSymbol(e) {\n    const t = e.geometry;\n    return S(t) ? C : b(t) || w(t) ? P : this.defaultPointSymbolEnabled ? x : null;\n  }\n\n  _flipUpdatingGraphics() {\n    this._updatingGraphicsTimer && clearTimeout(this._updatingGraphicsTimer), this._updatingGraphicsTimer = setTimeout(() => {\n      this._updatingGraphicsTimer = null, this.notifyChange(\"updating\");\n    }, 160), this.notifyChange(\"updating\");\n  }\n\n};\ne([p({\n  constructOnly: !0\n})], oe.prototype, \"requestUpdateCallback\", void 0), e([p()], oe.prototype, \"container\", void 0), e([p({\n  constructOnly: !0\n})], oe.prototype, \"graphics\", void 0), e([p()], oe.prototype, \"updating\", null), e([p()], oe.prototype, \"view\", void 0), e([p()], oe.prototype, \"updateRequested\", void 0), e([p()], oe.prototype, \"defaultPointSymbolEnabled\", void 0), oe = e([c(\"esri.views.2d.layers.support.GraphicsView2D\")], oe);\nconst ae = oe;\nexport { ae as default };","map":{"version":3,"names":["_","e","t","bidiText","s","HandleOwnerMixin","i","has","isSome","r","isNone","o","assertIsSome","a","throwIfAborted","n","isAbortError","h","throwIfAbortError","l","watch","d","property","p","subclass","c","g","width","m","height","u","create","closeRingsAndFixWinding","f","getJsonType","y","isPolygon","b","isPolyline","S","isExtent","w","isPoint","T","isMultipoint","v","normalizeCentralMeridianForDisplay","I","getInfo","U","checkProjectionSupport","G","project","M","symbolToCIM","j","errorPolylineSymbol2D","C","errorPolygonSymbol2D","P","errorPointSymbol2D","x","FILTER_FLAG_0","R","WGLSymbologyType","A","GraphicTile","q","TileData","D","F","MeshData","z","WGLMeshFactory","O","WGLTemplateStore","E","createMatcher","H","createSymbolSchemaOptions","k","createMatcherSchema","N","B","ComputedAttributeStorage","L","GraphicsReader","V","W","intersectingInternationalDateline","J","isMarkerSymbol","Z","isTextSymbol","K","polygonFromExtent","Q","TILE_SIZE","X","PIXEL_BUFFER","Y","expandSymbol","$","GraphicsView","ee","getWebGLCapabilities","te","createSymbolSchema","se","ie","re","get","tile","addedOrModified","removed","set","oe","constructor","_storage","_displayIds","Map","_controller","AbortController","_tiles","_graphicStoreUpdate","_graphicsSet","Set","_matcher","Promise","resolve","_tileUpdateSet","_tilesToUpdate","_graphicIdToAbortController","_attached","_updatingGraphicsTimer","_hashToExpandedSymbol","_hashToExpandedSymbolPromise","_hashToCIMSymbolPromise","_hashToCIM","_processing","_needsProcessing","_pendingUpdate","added","updated","lastUpdateId","updateRequested","defaultPointSymbolEnabled","graphicUpdateHandler","bind","destroy","clearTimeout","notifyChange","abort","container","_set","_graphicStore","clear","_attributeStore","view","renderer","_createMatcher","indexCount","fields","_createDisplayId","createDisplayId","initialize","type","attributeView","update","requestUpdate","render","requestRender","hasHighlight","uid","_setFilterState","visible","delete","releaseDisplayId","getMaterialItems","featuresTilingScheme","tileInfo","state","scale","graphics","_meshFactory","_templateStore","handles","add","stage","resourceManager","graphicsTileStore","on","_onTileUpdate","enableRenderingBounds","getAllBounds","items","length","_graphicsChangeHandler","target","moved","setResourceManager","tiles","updating","size","isUpdating","hitTest","position","resolution","rotation","signal","updateLevel","_updateGraphics","viewChange","requestUpdateCallback","processUpdate","graphic","sendUpdates","setHighlight","map","filter","_getIntersectingTiles","getBounds","spatialReference","boundsIntersections","_updateTile","_getGraphicsData","_processGraphics","_patchTile","key","addOrUpdate","remove","end","sort","onTileData","_getGraphicsToUpdate","push","Array","id","_updateGraphic","_addGraphic","_abortProcessingGraphic","_flipUpdatingGraphics","all","updateZ","_getSymbolForGraphic","hash","_getArcadeInfo","attributes","Object","keys","name","alias","geometry","geometryType","fromJSON","symbol","getSymbolAsync","_getNullSymbol","_getCIMSymbol","fetchCIMSymbol","then","data","catch","_expandCIMSymbol","_getSymbolResources","layers","text","charCodeAt","glyphIds","cim","mosaicItem","textInfo","_projectAndNormalizeGeometry","rings","paths","center","_addNewTile","_removeTile","_addOrUpdateGraphic","addOrModify","_addTile","getTileBounds","getTileResolution","level","addChild","queryTileData","Math","round","valid","_wrapPoints","patch","removeChild","getHighlightFlag","setData","getGraphicsData","_wrapMultipoint","_wrapPoint","points","from","transform","analyzeGraphics","_processAnalyzedGraphics","getSize","getCursor","features","records","metrics","DEFAULT","next","readGraphic","insertAfter","displayId","writeGraphic","tileInfoView","isWrappable","serialize","message","fromVertexData","setTimeout","constructOnly","prototype","ae","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{bidiText as s}from\"../../../../core/BidiText.js\";import{HandleOwnerMixin as i}from\"../../../../core/HandleOwner.js\";import has from\"../../../../core/has.js\";import{isSome as r,isNone as o,assertIsSome as a}from\"../../../../core/maybe.js\";import{throwIfAborted as n,isAbortError as h,throwIfAbortError as l}from\"../../../../core/promiseUtils.js\";import{watch as d}from\"../../../../core/reactiveUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import g from\"../../../../geometry/SpatialReference.js\";import{width as m,height as u,create as _}from\"../../../../geometry/support/aaBoundingRect.js\";import{closeRingsAndFixWinding as f}from\"../../../../geometry/support/coordsUtils.js\";import{getJsonType as y,isPolygon as b,isPolyline as S,isExtent as w,isPoint as T,isMultipoint as v}from\"../../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridianForDisplay as I}from\"../../../../geometry/support/normalizeUtilsSync.js\";import{getInfo as U}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{checkProjectionSupport as G,project as M}from\"../../../../layers/graphics/data/projectionSupport.js\";import{symbolToCIM as j}from\"../../../../symbols/cim/CIMSymbolHelper.js\";import{errorPolylineSymbol2D as C,errorPolygonSymbol2D as P,errorPointSymbol2D as x}from\"../../../../symbols/support/defaults.js\";import{FILTER_FLAG_0 as R}from\"../../engine/webgl/definitions.js\";import{WGLSymbologyType as A}from\"../../engine/webgl/enums.js\";import{GraphicTile as q}from\"../../engine/webgl/GraphicTile.js\";import{TileData as D}from\"../../engine/webgl/TileData.js\";import F from\"../../engine/webgl/WGLDisplayObject.js\";import{MeshData as z}from\"../../engine/webgl/mesh/MeshData.js\";import{WGLMeshFactory as O}from\"../../engine/webgl/mesh/factories/WGLMeshFactory.js\";import{WGLTemplateStore as E}from\"../../engine/webgl/mesh/templates/WGLTemplateStore.js\";import{createMatcher as H}from\"../../engine/webgl/util/Matcher.js\";import{createSymbolSchemaOptions as k,createMatcherSchema as N}from\"../features/schemaUtils.js\";import B from\"../features/support/AttributeStore.js\";import{ComputedAttributeStorage as L}from\"../features/support/ComputedAttributeStorage.js\";import{GraphicsReader as V}from\"../features/support/GraphicsReader.js\";import W from\"./GraphicStore.js\";import{intersectingInternationalDateline as J,isMarkerSymbol as Z,isTextSymbol as K,polygonFromExtent as Q,TILE_SIZE as X,PIXEL_BUFFER as Y}from\"./graphicsUtils.js\";import{expandSymbol as $}from\"../support/cimSymbolUtils.js\";import{GraphicsView as ee}from\"../../../layers/GraphicsView.js\";import{getWebGLCapabilities as te}from\"../../../webgl/capabilities.js\";import{createSymbolSchema as se}from\"../features/createSymbolSchema.js\";const ie=has(\"esri-2d-graphic-debug\");function re(e,t,s){let i=s.get(e);return i||(i={tile:t,addedOrModified:[],removed:[]},s.set(e,i)),i}let oe=class extends(ee(i(t))){constructor(e){super(e),this._storage=new L,this._displayIds=new Map,this._controller=new AbortController,this._tiles=new Map,this._graphicStoreUpdate=!1,this._graphicsSet=new Set,this._matcher=Promise.resolve(null),this._tileUpdateSet=new Set,this._tilesToUpdate=new Map,this._graphicIdToAbortController=new Map,this._attached=!1,this._updatingGraphicsTimer=null,this._hashToExpandedSymbol=new Map,this._hashToExpandedSymbolPromise=new Map,this._hashToCIMSymbolPromise=new Map,this._hashToCIM=new Map,this._processing=!1,this._needsProcessing=!1,this._pendingUpdate={added:new Set,updated:new Set,removed:new Set},this.lastUpdateId=-1,this.updateRequested=!1,this.defaultPointSymbolEnabled=!0,this.graphicUpdateHandler=this.graphicUpdateHandler.bind(this)}destroy(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange(\"updating\")),this._controller.abort(),this.container.destroy(),this._set(\"graphics\",null),this._graphicStore.clear(),this._attributeStore=null,this._hashToExpandedSymbol.clear(),this.view=null,this.renderer=null,this._hashToCIM.clear(),this._hashToCIMSymbolPromise.clear(),this._hashToExpandedSymbolPromise.clear()}_createMatcher(e,t,s){if(e){const i=k(e),r=N({indexCount:0,fields:{}},\"feature\",e,i);this._matcher=H(r,t,null,s)}}_createDisplayId(e){let t=this._displayIds.get(e);return t||(t=this._storage.createDisplayId(),this._displayIds.set(e,t)),t}initialize(){this._attributeStore=new B({type:\"local\",initialize:e=>Promise.resolve(this.container.attributeView.initialize(e)),update:e=>this.container.attributeView.requestUpdate(e),render:()=>this.container.requestRender()},te(\"2d\"),(()=>this.notifyChange(\"updating\"))),this.container.hasHighlight=()=>this._attributeStore.hasHighlight;const e=e=>{this._createDisplayId(e.uid),this._setFilterState(e.uid,e.visible)},t=e=>{const t=this._displayIds.get(e.uid);this._displayIds.delete(e.uid),this._storage.releaseDisplayId(t)},s=new E(this.container.getMaterialItems.bind(this.container),this.view.featuresTilingScheme.tileInfo);this._graphicStore=new W(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,e,t,this._hashToCIM),this._meshFactory=new O(null,this.uid,s),this._templateStore=s,this.handles.add([d((()=>this.renderer),(e=>{this._createMatcher(e,s,this.container.stage.resourceManager);for(const t of this.graphics)this._pendingUpdate.updated.add(t);this.requestUpdate()})),this.view.graphicsTileStore.on(\"update\",this._onTileUpdate.bind(this)),this.container.on(\"attach\",(()=>{ie&&this.container.enableRenderingBounds((()=>this._graphicStore.getAllBounds())),this.graphics.items.length>0&&this._graphicsChangeHandler({target:this.graphics,added:this.graphics.items,removed:[],moved:[]}),this.handles.add(this.graphics.on(\"change\",(e=>this._graphicsChangeHandler(e))),\"graphics\");const e=this.container.stage.resourceManager;this._createMatcher(this.renderer,s,e),this._graphicStore.setResourceManager(e),this._attached=!0,this.notifyChange(\"updating\")}))]);const i=this.view.graphicsTileStore.tiles;this._onTileUpdate({added:i,removed:[]})}get updating(){return!this._attached||null!==this._updatingGraphicsTimer||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0||this._attributeStore.isUpdating()}hitTest(e){if(!this.view||!this.view.position)return[];const{resolution:t,rotation:s}=this.view.state;return this._graphicStore.hitTest(e.x,e.y,2,t,s)}update(e){n(this._controller.signal);const t=e.state,{resolution:s}=t;if(this._graphicStore.updateLevel(s),this._graphicStoreUpdate=!0,this.updateRequested=!1,this._pendingUpdate.updated.size>0){if(!this._processing)return void this._updateGraphics();this._needsProcessing=!0}}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.requestUpdateCallback())}processUpdate(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))}graphicUpdateHandler(e){const{graphic:t,property:s}=e;switch(s){case\"attributes\":case\"geometry\":case\"symbol\":this._pendingUpdate.updated.add(t),this.requestUpdate();break;case\"visible\":this._setFilterState(t.uid,t.visible),this._attributeStore.sendUpdates()}}setHighlight(e){const t=e.map((e=>this._displayIds.get(e))).filter(r);this._attributeStore.setHighlight(e,t)}_getIntersectingTiles(e){const t=this._graphicStore.getBounds(e);if(!t||0===m(t)||0===u(t))return[];const s=J(t,this.view.spatialReference);return r(s)?[...new Set([...this.view.graphicsTileStore.boundsIntersections(s[0]),...this.view.graphicsTileStore.boundsIntersections(s[1])])]:this.view.graphicsTileStore.boundsIntersections(t)}async _updateTile(e){n(this._controller.signal);const t=e.tile,s=this._getGraphicsData(this._templateStore,t,e.addedOrModified),i=await this._processGraphics(t,s);return n(this._controller.signal),this._patchTile(t.key,{type:\"update\",addOrUpdate:i,remove:e.removed,end:!0,clear:!1,sort:!1}),i}_patchTile(e,t){const s=this._tiles.get(e);s&&(this.container.onTileData(s,t),this.container.requestRender())}_graphicsChangeHandler(e){const t=this._pendingUpdate;for(const s of e.added)t.added.add(s);for(const s of e.moved)t.updated.add(s);for(const s of e.removed)this._pendingUpdate.added.has(s)?t.added.delete(s):t.removed.add(s);this._processing?this._needsProcessing=!0:this._updateGraphics()}_getGraphicsToUpdate(){const e={added:[],removed:[],updated:[]};if(!this.graphics)return e;const t=this._pendingUpdate;for(const s of this.graphics.items)t.added.has(s)?e.added.push(s):t.updated.has(s)&&e.updated.push(s);for(const s of t.removed)this._graphicStore.has(s)&&e.removed.push(s);return t.added.clear(),t.removed.clear(),t.updated.clear(),e}async _updateGraphics(){this._processing=!0;const{added:e,removed:t,updated:s}=this._getGraphicsToUpdate(),i=this._tilesToUpdate;let r;try{if(!this._graphicStoreUpdate){const e=this.view.state,{resolution:t}=e;this._graphicStore.updateLevel(t)}const o=[],a=new Array(e.length+t.length);for(let e=0;e<s.length;e++){const t=s[e],n=this._getIntersectingTiles(t);for(const e of n){r=e.id;re(r,e,i).removed.push(this._displayIds.get(t.uid))}o.push(this._updateGraphic(t,null)),a[e]=t}const n=s.length;for(let t=0;t<e.length;t++){const s=e[t];a[n+t]=s,this._graphicsSet.add(s),o.push(this._addGraphic(s))}for(const e of t){this._abortProcessingGraphic(e.uid);const t=this._getIntersectingTiles(e);for(const s of t){r=s.id;re(r,s,i).removed.push(this._displayIds.get(e.uid))}this._graphicsSet.delete(e),this._graphicStore.remove(e)}let h;this._flipUpdatingGraphics(),await Promise.all(o);for(let e=0;e<a.length;e++){h=a[e];const t=this._getIntersectingTiles(h);for(const e of t){r=e.id;re(r,e,i).addedOrModified.push(h)}}this._graphicStore.updateZ();const l=[];for(const[e,t]of i)l.push(this._updateTile(t));await Promise.all(l)}catch(o){h(o),0}for(const a of t)try{const e=await this._getSymbolForGraphic(a,null);if(e){const t=e.hash();this._hashToExpandedSymbol.delete(t)}}catch(o){h(o),0}i.clear(),this.notifyChange(\"updating\"),this._processing=!1,this._needsProcessing&&(this._needsProcessing=!1,this._updateGraphics())}_getArcadeInfo(e){const t=(e.attributes?Object.keys(e.attributes):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e.attributes[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})));return o(e.geometry)?null:{geometryType:y(e.geometry),spatialReference:g.fromJSON(e.geometry.spatialReference),fields:t}}_getSymbolForGraphic(e,t){return n(this._controller.signal),r(e.symbol)?Promise.resolve(e.symbol):r(this.renderer)?this.renderer.getSymbolAsync(e,{scale:this.view.scale,signal:r(t)?t.signal:null}):Promise.resolve(this._getNullSymbol(e))}_getCIMSymbol(e,t,s){let i=this._hashToCIM.get(t);if(i)return Promise.resolve(i);const o=j(e);if(r(o)){if(\"CIMSymbolReference\"===o.type)return i=o,this._hashToCIM.set(t,i),Promise.resolve(i);let e=this._hashToCIMSymbolPromise.get(t);return e||(e=o.fetchCIMSymbol(s).then((e=>(this._hashToCIM.set(t,e.data),this._hashToCIMSymbolPromise.delete(t),e))).catch((e=>(this._hashToCIMSymbolPromise.delete(t),l(e),null))),this._hashToCIMSymbolPromise.set(t,e),e)}return Promise.resolve(null)}_expandCIMSymbol(e,t,s,i){const r=this._hashToExpandedSymbol.get(s);if(r)return Promise.resolve(r);let o=this._hashToExpandedSymbolPromise.get(s);if(o)return o;const a=this.container.stage,n=this._getArcadeInfo(t),h=k(null),l=se(e,h);return o=$(l,n,a.resourceManager,i),this._hashToExpandedSymbolPromise.set(s,o),o.then((e=>(this._hashToExpandedSymbol.set(s,e),this._hashToExpandedSymbolPromise.delete(s),e))),o}async _getSymbolResources(e,t){n(this._controller.signal);return this.container.stage?this._getSymbolForGraphic(e,t).then((i=>{if(!i)return null;const r=i.hash();return this._getCIMSymbol(i,r,t).then((i=>o(i)?null:this._expandCIMSymbol(i,e,r,t).then((e=>{const t=e.layers.filter((e=>\"text\"===e.type&&\"string\"==typeof e.text));if(t&&t.length>0){const i=new Array(t.length);for(let e=0;e<t.length;e++){const r=t[e],o=[],[a]=s(r.text);r.text=a;for(let e=0;e<a.length;e++)o.push(a.charCodeAt(e));i[e]={symbol:r,id:e,glyphIds:o}}const o=new Map;return this.container.getMaterialItems(i).then((s=>{a(s);for(let e=0;e<t.length;e++){const i=t[e];o.set(i.cim,{text:i.text,mosaicItem:s[e].mosaicItem})}return{symbol:e,textInfo:o,hash:r}}))}return{symbol:e,hash:r}}))))})).catch((e=>(l(e),null))):null}async _projectAndNormalizeGeometry(e,t){if(n(this._controller.signal),o(e.geometry)||\"mesh\"===e.geometry.type)return null;let s=e.geometry;if(b(s)){const e=s.rings;s.rings=e}else if(S(s)){const e=s.paths;s.paths=e}else if(w(s)){const i=await this._getSymbolForGraphic(e,t);if(n(this._controller.signal),i&&(Z(i.type)||K(i.type))){s=s.center}else s=Q(s)}await G(s.spatialReference,this.view.spatialReference);const i=I(s),r=M(i,s.spatialReference,this.view.spatialReference);return r&&f(r),r}_onTileUpdate(e){const t=U(this.view.spatialReference);if(e.added&&e.added.length>0)for(const s of e.added)this._addNewTile(s,t);if(e.removed&&e.removed.length>0)for(const s of e.removed)this._removeTile(s.key)}async _addGraphic(e){this._abortProcessingGraphic(e.uid),n(this._controller.signal);const t=new AbortController;this._graphicIdToAbortController.set(e.uid,t);const s={signal:t.signal};try{await this._addOrUpdateGraphic(e,s),n(this._controller.signal),this._graphicIdToAbortController.delete(e.uid)}catch(i){if(this._graphicIdToAbortController.delete(e.uid),!h(i))throw i}}_updateGraphic(e,t){n(this._controller.signal);const s=this._projectAndNormalizeGeometry(e,t),i=this._getSymbolResources(e,t);return Promise.all([s,i]).then((([t,s])=>{n(this._controller.signal),this._graphicStore.addOrModify(e,s,t)}))}_addOrUpdateGraphic(e,t){n(this._controller.signal);const s=this._projectAndNormalizeGeometry(e,t),i=this._getSymbolResources(e,t);return Promise.all([s,i]).then((([t,s])=>{n(this._controller.signal),this._graphicsSet.has(e)&&this._graphicStore.addOrModify(e,s,t)}))}_addTile(e){const t=this.view.featuresTilingScheme.getTileBounds(_(),e),s=this.view.featuresTilingScheme.getTileResolution(e.level),i=new q(e,s,t[0],t[3]);return this._tiles.set(e,i),this.container.addChild(i),i}async _addNewTile(e,t){const s=this._addTile(e.key),i=this._graphicStore.queryTileData(this._templateStore,e);if(0===i.length)return;if(t){const s=Math.round((t.valid[1]-t.valid[0])/e.resolution);for(const e of i)e.geometry&&(T(e.geometry)||v(e.geometry))&&this._wrapPoints(e,s)}const r=e.key;this._tileUpdateSet.add(e.key),this.notifyChange(\"updating\");try{const t={type:\"update\",clear:!1,addOrUpdate:await this._processGraphics(e,i),remove:[],end:!0,sort:!1};s.patch(t),this._tileUpdateSet.delete(r),this.notifyChange(\"updating\")}catch(o){if(this._tileUpdateSet.delete(r),this.notifyChange(\"updating\"),!h(o))throw o}}_removeTile(e){if(!this._tiles.has(e))return;const t=this._tiles.get(e);this.container.removeChild(t),t.destroy(),this._tiles.delete(e)}_setFilterState(e,t){const s=this._displayIds.get(e),i=this._attributeStore.getHighlightFlag(e);this._attributeStore.setData(s,0,0,i|(t?R:0))}_getGraphicsData(e,t,s){const i=this.view,r=U(i.spatialReference),o=this._graphicStore.getGraphicsData(e,t,s);if(r){const e=Math.round((r.valid[1]-r.valid[0])/t.resolution);for(const t of o)t.geometry&&(T(t.geometry)||v(t.geometry))&&this._wrapPoints(t,e)}return o}_wrapPoints(e,t){const s=e.geometry;v(s)?this._wrapMultipoint(s,t):this._wrapPoint(e,t)}_wrapMultipoint(e,t){const s=e.points,i=[];let r=0,o=0;for(const[a,n]of s){if(i.push([a+r,n]),r=0,t===X){const e=5*Y;a+o<e?(i.push([t,0]),r=-t):a+o>X-e&&(i.push([-t,0]),r=t)}else a+o<-Y?(i.push([t,0]),r=-t):a+o>X+Y&&(i.push([-t,0]),r=t);o+=a}e.points=i}_wrapPoint(e,t){const s=e.geometry;if(t===X){const i=5*Y;s.x<i?e.geometry={points:[[s.x,s.y],[t,0]]}:s.x>X-i&&(e.geometry={points:[[s.x,s.y],[-t,0]]})}else s.x<-Y?e.geometry={points:[[s.x,s.y],[t,0]]}:s.x>X+Y&&(e.geometry={points:[[s.x,s.y],[-t,0]]})}_processGraphics(e,t,s){if(!(t&&t.length)||!this._meshFactory)return Promise.resolve(null);const i=V.from(t,this.uid,e.transform),r=this._meshFactory;return this._matcher.then((t=>r.analyzeGraphics(i,this.container.stage.resourceManager,t,null,null,s).then((()=>(this._attributeStore.sendUpdates(),this._processAnalyzedGraphics(e,i))))))}_processAnalyzedGraphics(e,t){const s=this._meshFactory,i=t.getSize(),r=t.getCursor(),o={features:i,records:i,metrics:0},a=new z(e.key.id,o,A.DEFAULT,!1,!1),n=[];for(;r.next();){const t=r.readGraphic();t.insertAfter=-1===t.insertAfter?-1:this._displayIds.get(t.insertAfter),t.displayId=this._displayIds.get(t.attributes[this.uid]);const i=new F(t.displayId);i.insertAfter=t.insertAfter,n.push(i),s.writeGraphic(a,r,e.level,this.container.stage.resourceManager)}const h=e.tileInfoView.tileInfo.isWrappable,l=a.serialize(h);if(1!==l.length)return new D;const d=l[0].message;return D.fromVertexData(d,n)}_abortProcessingGraphic(e){this._graphicIdToAbortController.get(e)?.abort()}_getNullSymbol(e){const t=e.geometry;return S(t)?C:b(t)||w(t)?P:this.defaultPointSymbolEnabled?x:null}_flipUpdatingGraphics(){this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=setTimeout((()=>{this._updatingGraphicsTimer=null,this.notifyChange(\"updating\")}),160),this.notifyChange(\"updating\")}};e([p({constructOnly:!0})],oe.prototype,\"requestUpdateCallback\",void 0),e([p()],oe.prototype,\"container\",void 0),e([p({constructOnly:!0})],oe.prototype,\"graphics\",void 0),e([p()],oe.prototype,\"updating\",null),e([p()],oe.prototype,\"view\",void 0),e([p()],oe.prototype,\"updateRequested\",void 0),e([p()],oe.prototype,\"defaultPointSymbolEnabled\",void 0),oe=e([c(\"esri.views.2d.layers.support.GraphicsView2D\")],oe);const ae=oe;export{ae as default};\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,iCAAlB;AAAoD,OAAOC,CAAP,MAAa,8BAAb;AAA4C,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,8BAAzB;AAAwD,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,iCAAjC;AAAmE,OAAOC,GAAP,MAAe,yBAAf;AAAyC,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,EAA+BC,YAAY,IAAIC,CAA/C,QAAqD,2BAArD;AAAiF,SAAOC,cAAc,IAAIC,CAAzB,EAA2BC,YAAY,IAAIC,CAA3C,EAA6CC,iBAAiB,IAAIC,CAAlE,QAAwE,kCAAxE;AAA2G,SAAOC,KAAK,IAAIC,CAAhB,QAAsB,mCAAtB;AAA0D,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,yDAAzB;AAAmF,OAAM,gDAAN;AAAuD,OAAM,gCAAN;AAAuC,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,yDAAzB;AAAmF,OAAOC,CAAP,MAAa,0CAAb;AAAwD,SAAOC,KAAK,IAAIC,CAAhB,EAAkBC,MAAM,IAAIC,CAA5B,EAA8BC,MAAM,IAAI/B,CAAxC,QAA8C,gDAA9C;AAA+F,SAAOgC,uBAAuB,IAAIC,CAAlC,QAAwC,6CAAxC;AAAsF,SAAOC,WAAW,IAAIC,CAAtB,EAAwBC,SAAS,IAAIC,CAArC,EAAuCC,UAAU,IAAIC,CAArD,EAAuDC,QAAQ,IAAIC,CAAnE,EAAqEC,OAAO,IAAIC,CAAhF,EAAkFC,YAAY,IAAIC,CAAlG,QAAwG,2CAAxG;AAAoJ,SAAOC,kCAAkC,IAAIC,CAA7C,QAAmD,oDAAnD;AAAwG,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,uDAAxB;AAAgF,SAAOC,sBAAsB,IAAIC,CAAjC,EAAmCC,OAAO,IAAIC,CAA9C,QAAoD,uDAApD;AAA4G,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,4CAA5B;AAAyE,SAAOC,qBAAqB,IAAIC,CAAhC,EAAkCC,oBAAoB,IAAIC,CAA1D,EAA4DC,kBAAkB,IAAIC,CAAlF,QAAwF,yCAAxF;AAAkI,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,mCAA9B;AAAkE,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,6BAAjC;AAA+D,SAAOC,WAAW,IAAIC,CAAtB,QAA4B,mCAA5B;AAAgE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,gCAAzB;AAA0D,OAAOC,CAAP,MAAa,wCAAb;AAAsD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,qCAAzB;AAA+D,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,qDAA/B;AAAqF,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,uDAAjC;AAAyF,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,oCAA9B;AAAmE,SAAOC,yBAAyB,IAAIC,CAApC,EAAsCC,mBAAmB,IAAIC,CAA7D,QAAmE,4BAAnE;AAAgG,OAAOC,CAAP,MAAa,uCAAb;AAAqD,SAAOC,wBAAwB,IAAIC,CAAnC,QAAyC,iDAAzC;AAA2F,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,uCAA/B;AAAuE,OAAOC,CAAP,MAAa,mBAAb;AAAiC,SAAOC,iCAAiC,IAAIC,CAA5C,EAA8CC,cAAc,IAAIC,CAAhE,EAAkEC,YAAY,IAAIC,CAAlF,EAAoFC,iBAAiB,IAAIC,CAAzG,EAA2GC,SAAS,IAAIC,CAAxH,EAA0HC,YAAY,IAAIC,CAA1I,QAAgJ,oBAAhJ;AAAqK,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,8BAA7B;AAA4D,SAAOC,YAAY,IAAIC,EAAvB,QAA8B,iCAA9B;AAAgE,SAAOC,oBAAoB,IAAIC,EAA/B,QAAsC,gCAAtC;AAAuE,SAAOC,kBAAkB,IAAIC,EAA7B,QAAoC,mCAApC;AAAwE,MAAMC,EAAE,GAACtG,GAAG,CAAC,uBAAD,CAAZ;;AAAsC,SAASuG,EAAT,CAAY7G,CAAZ,EAAcC,CAAd,EAAgBE,CAAhB,EAAkB;EAAC,IAAIE,CAAC,GAACF,CAAC,CAAC2G,GAAF,CAAM9G,CAAN,CAAN;EAAe,OAAOK,CAAC,KAAGA,CAAC,GAAC;IAAC0G,IAAI,EAAC9G,CAAN;IAAQ+G,eAAe,EAAC,EAAxB;IAA2BC,OAAO,EAAC;EAAnC,CAAF,EAAyC9G,CAAC,CAAC+G,GAAF,CAAMlH,CAAN,EAAQK,CAAR,CAA5C,CAAD,EAAyDA,CAAhE;AAAkE;;AAAA,IAAI8G,EAAE,GAAC,cAAcZ,EAAE,CAAClG,CAAC,CAACJ,CAAD,CAAF,CAAhB,CAAuB;EAACmH,WAAW,CAACpH,CAAD,EAAG;IAAC,MAAMA,CAAN,GAAS,KAAKqH,QAAL,GAAc,IAAIjC,CAAJ,EAAvB,EAA6B,KAAKkC,WAAL,GAAiB,IAAIC,GAAJ,EAA9C,EAAsD,KAAKC,WAAL,GAAiB,IAAIC,eAAJ,EAAvE,EAA2F,KAAKC,MAAL,GAAY,IAAIH,GAAJ,EAAvG,EAA+G,KAAKI,mBAAL,GAAyB,CAAC,CAAzI,EAA2I,KAAKC,YAAL,GAAkB,IAAIC,GAAJ,EAA7J,EAAqK,KAAKC,QAAL,GAAcC,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAnL,EAAyM,KAAKC,cAAL,GAAoB,IAAIJ,GAAJ,EAA7N,EAAqO,KAAKK,cAAL,GAAoB,IAAIX,GAAJ,EAAzP,EAAiQ,KAAKY,2BAAL,GAAiC,IAAIZ,GAAJ,EAAlS,EAA0S,KAAKa,SAAL,GAAe,CAAC,CAA1T,EAA4T,KAAKC,sBAAL,GAA4B,IAAxV,EAA6V,KAAKC,qBAAL,GAA2B,IAAIf,GAAJ,EAAxX,EAAgY,KAAKgB,4BAAL,GAAkC,IAAIhB,GAAJ,EAAla,EAA0a,KAAKiB,uBAAL,GAA6B,IAAIjB,GAAJ,EAAvc,EAA+c,KAAKkB,UAAL,GAAgB,IAAIlB,GAAJ,EAA/d,EAAue,KAAKmB,WAAL,GAAiB,CAAC,CAAzf,EAA2f,KAAKC,gBAAL,GAAsB,CAAC,CAAlhB,EAAohB,KAAKC,cAAL,GAAoB;MAACC,KAAK,EAAC,IAAIhB,GAAJ,EAAP;MAAeiB,OAAO,EAAC,IAAIjB,GAAJ,EAAvB;MAA+BZ,OAAO,EAAC,IAAIY,GAAJ;IAAvC,CAAxiB,EAAwlB,KAAKkB,YAAL,GAAkB,CAAC,CAA3mB,EAA6mB,KAAKC,eAAL,GAAqB,CAAC,CAAnoB,EAAqoB,KAAKC,yBAAL,GAA+B,CAAC,CAArqB,EAAuqB,KAAKC,oBAAL,GAA0B,KAAKA,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAAjsB;EAAsuB;;EAAAC,OAAO,GAAE;IAAC,KAAKf,sBAAL,KAA8BgB,YAAY,CAAC,KAAKhB,sBAAN,CAAZ,EAA0C,KAAKA,sBAAL,GAA4B,IAAtE,EAA2E,KAAKiB,YAAL,CAAkB,UAAlB,CAAzG,GAAwI,KAAK9B,WAAL,CAAiB+B,KAAjB,EAAxI,EAAiK,KAAKC,SAAL,CAAeJ,OAAf,EAAjK,EAA0L,KAAKK,IAAL,CAAU,UAAV,EAAqB,IAArB,CAA1L,EAAqN,KAAKC,aAAL,CAAmBC,KAAnB,EAArN,EAAgP,KAAKC,eAAL,GAAqB,IAArQ,EAA0Q,KAAKtB,qBAAL,CAA2BqB,KAA3B,EAA1Q,EAA6S,KAAKE,IAAL,GAAU,IAAvT,EAA4T,KAAKC,QAAL,GAAc,IAA1U,EAA+U,KAAKrB,UAAL,CAAgBkB,KAAhB,EAA/U,EAAuW,KAAKnB,uBAAL,CAA6BmB,KAA7B,EAAvW,EAA4Y,KAAKpB,4BAAL,CAAkCoB,KAAlC,EAA5Y;EAAsb;;EAAAI,cAAc,CAAC/J,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,IAAGH,CAAH,EAAK;MAAC,MAAMK,CAAC,GAAC0E,CAAC,CAAC/E,CAAD,CAAT;MAAA,MAAaQ,CAAC,GAACyE,CAAC,CAAC;QAAC+E,UAAU,EAAC,CAAZ;QAAcC,MAAM,EAAC;MAArB,CAAD,EAA0B,SAA1B,EAAoCjK,CAApC,EAAsCK,CAAtC,CAAhB;MAAyD,KAAKyH,QAAL,GAAcjD,CAAC,CAACrE,CAAD,EAAGP,CAAH,EAAK,IAAL,EAAUE,CAAV,CAAf;IAA4B;EAAC;;EAAA+J,gBAAgB,CAAClK,CAAD,EAAG;IAAC,IAAIC,CAAC,GAAC,KAAKqH,WAAL,CAAiBR,GAAjB,CAAqB9G,CAArB,CAAN;;IAA8B,OAAOC,CAAC,KAAGA,CAAC,GAAC,KAAKoH,QAAL,CAAc8C,eAAd,EAAF,EAAkC,KAAK7C,WAAL,CAAiBJ,GAAjB,CAAqBlH,CAArB,EAAuBC,CAAvB,CAArC,CAAD,EAAiEA,CAAxE;EAA0E;;EAAAmK,UAAU,GAAE;IAAC,KAAKR,eAAL,GAAqB,IAAI1E,CAAJ,CAAM;MAACmF,IAAI,EAAC,OAAN;MAAcD,UAAU,EAACpK,CAAC,IAAE+H,OAAO,CAACC,OAAR,CAAgB,KAAKwB,SAAL,CAAec,aAAf,CAA6BF,UAA7B,CAAwCpK,CAAxC,CAAhB,CAA5B;MAAwFuK,MAAM,EAACvK,CAAC,IAAE,KAAKwJ,SAAL,CAAec,aAAf,CAA6BE,aAA7B,CAA2CxK,CAA3C,CAAlG;MAAgJyK,MAAM,EAAC,MAAI,KAAKjB,SAAL,CAAekB,aAAf;IAA3J,CAAN,EAAiMjE,EAAE,CAAC,IAAD,CAAnM,EAA2M,MAAI,KAAK6C,YAAL,CAAkB,UAAlB,CAA/M,CAArB,EAAoQ,KAAKE,SAAL,CAAemB,YAAf,GAA4B,MAAI,KAAKf,eAAL,CAAqBe,YAAzT;;IAAsU,MAAM3K,CAAC,GAACA,CAAC,IAAE;MAAC,KAAKkK,gBAAL,CAAsBlK,CAAC,CAAC4K,GAAxB,GAA6B,KAAKC,eAAL,CAAqB7K,CAAC,CAAC4K,GAAvB,EAA2B5K,CAAC,CAAC8K,OAA7B,CAA7B;IAAmE,CAA/E;IAAA,MAAgF7K,CAAC,GAACD,CAAC,IAAE;MAAC,MAAMC,CAAC,GAAC,KAAKqH,WAAL,CAAiBR,GAAjB,CAAqB9G,CAAC,CAAC4K,GAAvB,CAAR;;MAAoC,KAAKtD,WAAL,CAAiByD,MAAjB,CAAwB/K,CAAC,CAAC4K,GAA1B,GAA+B,KAAKvD,QAAL,CAAc2D,gBAAd,CAA+B/K,CAA/B,CAA/B;IAAiE,CAA3L;IAAA,MAA4LE,CAAC,GAAC,IAAIwE,CAAJ,CAAM,KAAK6E,SAAL,CAAeyB,gBAAf,CAAgC9B,IAAhC,CAAqC,KAAKK,SAA1C,CAAN,EAA2D,KAAKK,IAAL,CAAUqB,oBAAV,CAA+BC,QAA1F,CAA9L;;IAAkS,KAAKzB,aAAL,GAAmB,IAAInE,CAAJ,CAAM,KAAKsE,IAAL,CAAUqB,oBAAhB,EAAqC,KAAKrB,IAAL,CAAUuB,KAAV,CAAgBC,KAArD,EAA2D,KAAKT,GAAhE,EAAoE,KAAKU,QAAzE,EAAkFtL,CAAlF,EAAoFC,CAApF,EAAsF,KAAKwI,UAA3F,CAAnB,EAA0H,KAAK8C,YAAL,GAAkB,IAAI9G,CAAJ,CAAM,IAAN,EAAW,KAAKmG,GAAhB,EAAoBzK,CAApB,CAA5I,EAAmK,KAAKqL,cAAL,GAAoBrL,CAAvL,EAAyL,KAAKsL,OAAL,CAAaC,GAAb,CAAiB,CAACtK,CAAC,CAAE,MAAI,KAAK0I,QAAX,EAAsB9J,CAAC,IAAE;MAAC,KAAK+J,cAAL,CAAoB/J,CAApB,EAAsBG,CAAtB,EAAwB,KAAKqJ,SAAL,CAAemC,KAAf,CAAqBC,eAA7C;;MAA8D,KAAI,MAAM3L,CAAV,IAAe,KAAKqL,QAApB,EAA6B,KAAK1C,cAAL,CAAoBE,OAApB,CAA4B4C,GAA5B,CAAgCzL,CAAhC;;MAAmC,KAAKuK,aAAL;IAAqB,CAA7K,CAAF,EAAkL,KAAKX,IAAL,CAAUgC,iBAAV,CAA4BC,EAA5B,CAA+B,QAA/B,EAAwC,KAAKC,aAAL,CAAmB5C,IAAnB,CAAwB,IAAxB,CAAxC,CAAlL,EAAyP,KAAKK,SAAL,CAAesC,EAAf,CAAkB,QAAlB,EAA4B,MAAI;MAAClF,EAAE,IAAE,KAAK4C,SAAL,CAAewC,qBAAf,CAAsC,MAAI,KAAKtC,aAAL,CAAmBuC,YAAnB,EAA1C,CAAJ,EAAkF,KAAKX,QAAL,CAAcY,KAAd,CAAoBC,MAApB,GAA2B,CAA3B,IAA8B,KAAKC,sBAAL,CAA4B;QAACC,MAAM,EAAC,KAAKf,QAAb;QAAsBzC,KAAK,EAAC,KAAKyC,QAAL,CAAcY,KAA1C;QAAgDjF,OAAO,EAAC,EAAxD;QAA2DqF,KAAK,EAAC;MAAjE,CAA5B,CAAhH,EAAkN,KAAKb,OAAL,CAAaC,GAAb,CAAiB,KAAKJ,QAAL,CAAcQ,EAAd,CAAiB,QAAjB,EAA2B9L,CAAC,IAAE,KAAKoM,sBAAL,CAA4BpM,CAA5B,CAA9B,CAAjB,EAAgF,UAAhF,CAAlN;MAA8S,MAAMA,CAAC,GAAC,KAAKwJ,SAAL,CAAemC,KAAf,CAAqBC,eAA7B;MAA6C,KAAK7B,cAAL,CAAoB,KAAKD,QAAzB,EAAkC3J,CAAlC,EAAoCH,CAApC,GAAuC,KAAK0J,aAAL,CAAmB6C,kBAAnB,CAAsCvM,CAAtC,CAAvC,EAAgF,KAAKoI,SAAL,GAAe,CAAC,CAAhG,EAAkG,KAAKkB,YAAL,CAAkB,UAAlB,CAAlG;IAAgI,CAA5f,CAAzP,CAAjB,CAAzL;IAAo8B,MAAMjJ,CAAC,GAAC,KAAKwJ,IAAL,CAAUgC,iBAAV,CAA4BW,KAApC;;IAA0C,KAAKT,aAAL,CAAmB;MAAClD,KAAK,EAACxI,CAAP;MAAS4G,OAAO,EAAC;IAAjB,CAAnB;EAAyC;;EAAY,IAARwF,QAAQ,GAAE;IAAC,OAAM,CAAC,KAAKrE,SAAN,IAAiB,SAAO,KAAKC,sBAA7B,IAAqD,KAAKJ,cAAL,CAAoByE,IAApB,GAAyB,CAA9E,IAAiF,KAAKxE,cAAL,CAAoBwE,IAApB,GAAyB,CAA1G,IAA6G,KAAK9C,eAAL,CAAqB+C,UAArB,EAAnH;EAAqJ;;EAAAC,OAAO,CAAC5M,CAAD,EAAG;IAAC,IAAG,CAAC,KAAK6J,IAAN,IAAY,CAAC,KAAKA,IAAL,CAAUgD,QAA1B,EAAmC,OAAM,EAAN;IAAS,MAAK;MAACC,UAAU,EAAC7M,CAAZ;MAAc8M,QAAQ,EAAC5M;IAAvB,IAA0B,KAAK0J,IAAL,CAAUuB,KAAzC;IAA+C,OAAO,KAAK1B,aAAL,CAAmBkD,OAAnB,CAA2B5M,CAAC,CAAC4D,CAA7B,EAA+B5D,CAAC,CAACkC,CAAjC,EAAmC,CAAnC,EAAqCjC,CAArC,EAAuCE,CAAvC,CAAP;EAAiD;;EAAAoK,MAAM,CAACvK,CAAD,EAAG;IAACc,CAAC,CAAC,KAAK0G,WAAL,CAAiBwF,MAAlB,CAAD;IAA2B,MAAM/M,CAAC,GAACD,CAAC,CAACoL,KAAV;IAAA,MAAgB;MAAC0B,UAAU,EAAC3M;IAAZ,IAAeF,CAA/B;;IAAiC,IAAG,KAAKyJ,aAAL,CAAmBuD,WAAnB,CAA+B9M,CAA/B,GAAkC,KAAKwH,mBAAL,GAAyB,CAAC,CAA5D,EAA8D,KAAKqB,eAAL,GAAqB,CAAC,CAApF,EAAsF,KAAKJ,cAAL,CAAoBE,OAApB,CAA4B4D,IAA5B,GAAiC,CAA1H,EAA4H;MAAC,IAAG,CAAC,KAAKhE,WAAT,EAAqB,OAAO,KAAK,KAAKwE,eAAL,EAAZ;MAAmC,KAAKvE,gBAAL,GAAsB,CAAC,CAAvB;IAAyB;EAAC;;EAAAwE,UAAU,GAAE;IAAC,KAAK3C,aAAL;EAAqB;;EAAAA,aAAa,GAAE;IAAC,KAAKxB,eAAL,KAAuB,KAAKA,eAAL,GAAqB,CAAC,CAAtB,EAAwB,KAAKoE,qBAAL,EAA/C;EAA6E;;EAAAC,aAAa,CAACrN,CAAD,EAAG;IAAC,KAAKgJ,eAAL,KAAuB,KAAKA,eAAL,GAAqB,CAAC,CAAtB,EAAwB,KAAKuB,MAAL,CAAYvK,CAAZ,CAA/C;EAA+D;;EAAAkJ,oBAAoB,CAAClJ,CAAD,EAAG;IAAC,MAAK;MAACsN,OAAO,EAACrN,CAAT;MAAWoB,QAAQ,EAAClB;IAApB,IAAuBH,CAA5B;;IAA8B,QAAOG,CAAP;MAAU,KAAI,YAAJ;MAAiB,KAAI,UAAJ;MAAe,KAAI,QAAJ;QAAa,KAAKyI,cAAL,CAAoBE,OAApB,CAA4B4C,GAA5B,CAAgCzL,CAAhC,GAAmC,KAAKuK,aAAL,EAAnC;QAAwD;;MAAM,KAAI,SAAJ;QAAc,KAAKK,eAAL,CAAqB5K,CAAC,CAAC2K,GAAvB,EAA2B3K,CAAC,CAAC6K,OAA7B,GAAsC,KAAKlB,eAAL,CAAqB2D,WAArB,EAAtC;IAAnI;EAA6M;;EAAAC,YAAY,CAACxN,CAAD,EAAG;IAAC,MAAMC,CAAC,GAACD,CAAC,CAACyN,GAAF,CAAOzN,CAAC,IAAE,KAAKsH,WAAL,CAAiBR,GAAjB,CAAqB9G,CAArB,CAAV,EAAoC0N,MAApC,CAA2ClN,CAA3C,CAAR;;IAAsD,KAAKoJ,eAAL,CAAqB4D,YAArB,CAAkCxN,CAAlC,EAAoCC,CAApC;EAAuC;;EAAA0N,qBAAqB,CAAC3N,CAAD,EAAG;IAAC,MAAMC,CAAC,GAAC,KAAKyJ,aAAL,CAAmBkE,SAAnB,CAA6B5N,CAA7B,CAAR;;IAAwC,IAAG,CAACC,CAAD,IAAI,MAAI0B,CAAC,CAAC1B,CAAD,CAAT,IAAc,MAAI4B,CAAC,CAAC5B,CAAD,CAAtB,EAA0B,OAAM,EAAN;IAAS,MAAME,CAAC,GAACsF,CAAC,CAACxF,CAAD,EAAG,KAAK4J,IAAL,CAAUgE,gBAAb,CAAT;IAAwC,OAAOrN,CAAC,CAACL,CAAD,CAAD,GAAK,CAAC,GAAG,IAAI0H,GAAJ,CAAQ,CAAC,GAAG,KAAKgC,IAAL,CAAUgC,iBAAV,CAA4BiC,mBAA5B,CAAgD3N,CAAC,CAAC,CAAD,CAAjD,CAAJ,EAA0D,GAAG,KAAK0J,IAAL,CAAUgC,iBAAV,CAA4BiC,mBAA5B,CAAgD3N,CAAC,CAAC,CAAD,CAAjD,CAA7D,CAAR,CAAJ,CAAL,GAAuI,KAAK0J,IAAL,CAAUgC,iBAAV,CAA4BiC,mBAA5B,CAAgD7N,CAAhD,CAA9I;EAAiM;;EAAM8N,WAAW,CAAC/N,CAAD,EAAG;IAAA;;IAAA;MAACc,CAAC,CAAC,KAAI,CAAC0G,WAAL,CAAiBwF,MAAlB,CAAD;;MAA2B,MAAM/M,CAAC,GAACD,CAAC,CAAC+G,IAAV;MAAA,MAAe5G,CAAC,GAAC,KAAI,CAAC6N,gBAAL,CAAsB,KAAI,CAACxC,cAA3B,EAA0CvL,CAA1C,EAA4CD,CAAC,CAACgH,eAA9C,CAAjB;MAAA,MAAgF3G,CAAC,SAAO,KAAI,CAAC4N,gBAAL,CAAsBhO,CAAtB,EAAwBE,CAAxB,CAAxF;;MAAmH,OAAOW,CAAC,CAAC,KAAI,CAAC0G,WAAL,CAAiBwF,MAAlB,CAAD,EAA2B,KAAI,CAACkB,UAAL,CAAgBjO,CAAC,CAACkO,GAAlB,EAAsB;QAAC9D,IAAI,EAAC,QAAN;QAAe+D,WAAW,EAAC/N,CAA3B;QAA6BgO,MAAM,EAACrO,CAAC,CAACiH,OAAtC;QAA8CqH,GAAG,EAAC,CAAC,CAAnD;QAAqD3E,KAAK,EAAC,CAAC,CAA5D;QAA8D4E,IAAI,EAAC,CAAC;MAApE,CAAtB,CAA3B,EAAyHlO,CAAhI;IAA/I;EAAiR;;EAAA6N,UAAU,CAAClO,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAME,CAAC,GAAC,KAAKuH,MAAL,CAAYZ,GAAZ,CAAgB9G,CAAhB,CAAR;;IAA2BG,CAAC,KAAG,KAAKqJ,SAAL,CAAegF,UAAf,CAA0BrO,CAA1B,EAA4BF,CAA5B,GAA+B,KAAKuJ,SAAL,CAAekB,aAAf,EAAlC,CAAD;EAAmE;;EAAA0B,sBAAsB,CAACpM,CAAD,EAAG;IAAC,MAAMC,CAAC,GAAC,KAAK2I,cAAb;;IAA4B,KAAI,MAAMzI,CAAV,IAAeH,CAAC,CAAC6I,KAAjB,EAAuB5I,CAAC,CAAC4I,KAAF,CAAQ6C,GAAR,CAAYvL,CAAZ;;IAAe,KAAI,MAAMA,CAAV,IAAeH,CAAC,CAACsM,KAAjB,EAAuBrM,CAAC,CAAC6I,OAAF,CAAU4C,GAAV,CAAcvL,CAAd;;IAAiB,KAAI,MAAMA,CAAV,IAAeH,CAAC,CAACiH,OAAjB,EAAyB,KAAK2B,cAAL,CAAoBC,KAApB,CAA0BvI,GAA1B,CAA8BH,CAA9B,IAAiCF,CAAC,CAAC4I,KAAF,CAAQkC,MAAR,CAAe5K,CAAf,CAAjC,GAAmDF,CAAC,CAACgH,OAAF,CAAUyE,GAAV,CAAcvL,CAAd,CAAnD;;IAAoE,KAAKuI,WAAL,GAAiB,KAAKC,gBAAL,GAAsB,CAAC,CAAxC,GAA0C,KAAKuE,eAAL,EAA1C;EAAiE;;EAAAuB,oBAAoB,GAAE;IAAC,MAAMzO,CAAC,GAAC;MAAC6I,KAAK,EAAC,EAAP;MAAU5B,OAAO,EAAC,EAAlB;MAAqB6B,OAAO,EAAC;IAA7B,CAAR;IAAyC,IAAG,CAAC,KAAKwC,QAAT,EAAkB,OAAOtL,CAAP;IAAS,MAAMC,CAAC,GAAC,KAAK2I,cAAb;;IAA4B,KAAI,MAAMzI,CAAV,IAAe,KAAKmL,QAAL,CAAcY,KAA7B,EAAmCjM,CAAC,CAAC4I,KAAF,CAAQvI,GAAR,CAAYH,CAAZ,IAAeH,CAAC,CAAC6I,KAAF,CAAQ6F,IAAR,CAAavO,CAAb,CAAf,GAA+BF,CAAC,CAAC6I,OAAF,CAAUxI,GAAV,CAAcH,CAAd,KAAkBH,CAAC,CAAC8I,OAAF,CAAU4F,IAAV,CAAevO,CAAf,CAAjD;;IAAmE,KAAI,MAAMA,CAAV,IAAeF,CAAC,CAACgH,OAAjB,EAAyB,KAAKyC,aAAL,CAAmBpJ,GAAnB,CAAuBH,CAAvB,KAA2BH,CAAC,CAACiH,OAAF,CAAUyH,IAAV,CAAevO,CAAf,CAA3B;;IAA6C,OAAOF,CAAC,CAAC4I,KAAF,CAAQc,KAAR,IAAgB1J,CAAC,CAACgH,OAAF,CAAU0C,KAAV,EAAhB,EAAkC1J,CAAC,CAAC6I,OAAF,CAAUa,KAAV,EAAlC,EAAoD3J,CAA3D;EAA6D;;EAAMkN,eAAe,GAAE;IAAA;;IAAA;MAAC,MAAI,CAACxE,WAAL,GAAiB,CAAC,CAAlB;;MAAoB,MAAK;QAACG,KAAK,EAAC7I,CAAP;QAASiH,OAAO,EAAChH,CAAjB;QAAmB6I,OAAO,EAAC3I;MAA3B,IAA8B,MAAI,CAACsO,oBAAL,EAAnC;MAAA,MAA+DpO,CAAC,GAAC,MAAI,CAAC6H,cAAtE;;MAAqF,IAAI1H,CAAJ;;MAAM,IAAG;QAAC,IAAG,CAAC,MAAI,CAACmH,mBAAT,EAA6B;UAAC,MAAM3H,CAAC,GAAC,MAAI,CAAC6J,IAAL,CAAUuB,KAAlB;UAAA,MAAwB;YAAC0B,UAAU,EAAC7M;UAAZ,IAAeD,CAAvC;;UAAyC,MAAI,CAAC0J,aAAL,CAAmBuD,WAAnB,CAA+BhN,CAA/B;QAAkC;;QAAA,MAAMS,CAAC,GAAC,EAAR;QAAA,MAAWE,CAAC,GAAC,IAAI+N,KAAJ,CAAU3O,CAAC,CAACmM,MAAF,GAASlM,CAAC,CAACkM,MAArB,CAAb;;QAA0C,KAAI,IAAInM,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACG,CAAC,CAACgM,MAAhB,EAAuBnM,CAAC,EAAxB,EAA2B;UAAC,MAAMC,CAAC,GAACE,CAAC,CAACH,CAAD,CAAT;UAAA,MAAac,CAAC,GAAC,MAAI,CAAC6M,qBAAL,CAA2B1N,CAA3B,CAAf;;UAA6C,KAAI,MAAMD,CAAV,IAAec,CAAf,EAAiB;YAACN,CAAC,GAACR,CAAC,CAAC4O,EAAJ;YAAO/H,EAAE,CAACrG,CAAD,EAAGR,CAAH,EAAKK,CAAL,CAAF,CAAU4G,OAAV,CAAkByH,IAAlB,CAAuB,MAAI,CAACpH,WAAL,CAAiBR,GAAjB,CAAqB7G,CAAC,CAAC2K,GAAvB,CAAvB;UAAoD;;UAAAlK,CAAC,CAACgO,IAAF,CAAO,MAAI,CAACG,cAAL,CAAoB5O,CAApB,EAAsB,IAAtB,CAAP,GAAoCW,CAAC,CAACZ,CAAD,CAAD,GAAKC,CAAzC;QAA2C;;QAAA,MAAMa,CAAC,GAACX,CAAC,CAACgM,MAAV;;QAAiB,KAAI,IAAIlM,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,CAAC,CAACmM,MAAhB,EAAuBlM,CAAC,EAAxB,EAA2B;UAAC,MAAME,CAAC,GAACH,CAAC,CAACC,CAAD,CAAT;UAAaW,CAAC,CAACE,CAAC,GAACb,CAAH,CAAD,GAAOE,CAAP,EAAS,MAAI,CAACyH,YAAL,CAAkB8D,GAAlB,CAAsBvL,CAAtB,CAAT,EAAkCO,CAAC,CAACgO,IAAF,CAAO,MAAI,CAACI,WAAL,CAAiB3O,CAAjB,CAAP,CAAlC;QAA8D;;QAAA,KAAI,MAAMH,CAAV,IAAeC,CAAf,EAAiB;UAAC,MAAI,CAAC8O,uBAAL,CAA6B/O,CAAC,CAAC4K,GAA/B;;UAAoC,MAAM3K,CAAC,GAAC,MAAI,CAAC0N,qBAAL,CAA2B3N,CAA3B,CAAR;;UAAsC,KAAI,MAAMG,CAAV,IAAeF,CAAf,EAAiB;YAACO,CAAC,GAACL,CAAC,CAACyO,EAAJ;YAAO/H,EAAE,CAACrG,CAAD,EAAGL,CAAH,EAAKE,CAAL,CAAF,CAAU4G,OAAV,CAAkByH,IAAlB,CAAuB,MAAI,CAACpH,WAAL,CAAiBR,GAAjB,CAAqB9G,CAAC,CAAC4K,GAAvB,CAAvB;UAAoD;;UAAA,MAAI,CAAChD,YAAL,CAAkBmD,MAAlB,CAAyB/K,CAAzB,GAA4B,MAAI,CAAC0J,aAAL,CAAmB2E,MAAnB,CAA0BrO,CAA1B,CAA5B;QAAyD;;QAAA,IAAIgB,CAAJ;QAAM,MAAI,CAACgO,qBAAL,UAAmCjH,OAAO,CAACkH,GAAR,CAAYvO,CAAZ,CAAnC;;QAAkD,KAAI,IAAIV,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACY,CAAC,CAACuL,MAAhB,EAAuBnM,CAAC,EAAxB,EAA2B;UAACgB,CAAC,GAACJ,CAAC,CAACZ,CAAD,CAAH;;UAAO,MAAMC,CAAC,GAAC,MAAI,CAAC0N,qBAAL,CAA2B3M,CAA3B,CAAR;;UAAsC,KAAI,MAAMhB,CAAV,IAAeC,CAAf,EAAiB;YAACO,CAAC,GAACR,CAAC,CAAC4O,EAAJ;YAAO/H,EAAE,CAACrG,CAAD,EAAGR,CAAH,EAAKK,CAAL,CAAF,CAAU2G,eAAV,CAA0B0H,IAA1B,CAA+B1N,CAA/B;UAAkC;QAAC;;QAAA,MAAI,CAAC0I,aAAL,CAAmBwF,OAAnB;;QAA6B,MAAMhO,CAAC,GAAC,EAAR;;QAAW,KAAI,MAAK,CAAClB,CAAD,EAAGC,CAAH,CAAT,IAAiBI,CAAjB,EAAmBa,CAAC,CAACwN,IAAF,CAAO,MAAI,CAACX,WAAL,CAAiB9N,CAAjB,CAAP;;QAA4B,MAAM8H,OAAO,CAACkH,GAAR,CAAY/N,CAAZ,CAAN;MAAqB,CAA39B,CAA29B,OAAMR,CAAN,EAAQ;QAACM,CAAC,CAACN,CAAD,CAAD,EAAK,CAAL;MAAO;;MAAA,KAAI,MAAME,CAAV,IAAeX,CAAf,EAAiB,IAAG;QAAC,MAAMD,CAAC,SAAO,MAAI,CAACmP,oBAAL,CAA0BvO,CAA1B,EAA4B,IAA5B,CAAd;;QAAgD,IAAGZ,CAAH,EAAK;UAAC,MAAMC,CAAC,GAACD,CAAC,CAACoP,IAAF,EAAR;;UAAiB,MAAI,CAAC9G,qBAAL,CAA2ByC,MAA3B,CAAkC9K,CAAlC;QAAqC;MAAC,CAAjH,CAAiH,OAAMS,CAAN,EAAQ;QAACM,CAAC,CAACN,CAAD,CAAD,EAAK,CAAL;MAAO;;MAAAL,CAAC,CAACsJ,KAAF,IAAU,MAAI,CAACL,YAAL,CAAkB,UAAlB,CAAV,EAAwC,MAAI,CAACZ,WAAL,GAAiB,CAAC,CAA1D,EAA4D,MAAI,CAACC,gBAAL,KAAwB,MAAI,CAACA,gBAAL,GAAsB,CAAC,CAAvB,EAAyB,MAAI,CAACuE,eAAL,EAAjD,CAA5D;IAA7uC;EAAk3C;;EAAAmC,cAAc,CAACrP,CAAD,EAAG;IAAC,MAAMC,CAAC,GAAC,CAACD,CAAC,CAACsP,UAAF,GAAaC,MAAM,CAACC,IAAP,CAAYxP,CAAC,CAACsP,UAAd,CAAb,GAAuC,EAAxC,EAA4C7B,GAA5C,CAAiDxN,CAAC,KAAG;MAACwP,IAAI,EAACxP,CAAN;MAAQyP,KAAK,EAACzP,CAAd;MAAgBoK,IAAI,EAAC,YAAU,OAAOrK,CAAC,CAACsP,UAAF,CAAarP,CAAb,CAAjB,GAAiC,qBAAjC,GAAuD;IAA5E,CAAH,CAAlD,CAAR;IAAmK,OAAOS,CAAC,CAACV,CAAC,CAAC2P,QAAH,CAAD,GAAc,IAAd,GAAmB;MAACC,YAAY,EAAC1N,CAAC,CAAClC,CAAC,CAAC2P,QAAH,CAAf;MAA4B9B,gBAAgB,EAACpM,CAAC,CAACoO,QAAF,CAAW7P,CAAC,CAAC2P,QAAF,CAAW9B,gBAAtB,CAA7C;MAAqF5D,MAAM,EAAChK;IAA5F,CAA1B;EAAyH;;EAAAkP,oBAAoB,CAACnP,CAAD,EAAGC,CAAH,EAAK;IAAC,OAAOa,CAAC,CAAC,KAAK0G,WAAL,CAAiBwF,MAAlB,CAAD,EAA2BxM,CAAC,CAACR,CAAC,CAAC8P,MAAH,CAAD,GAAY/H,OAAO,CAACC,OAAR,CAAgBhI,CAAC,CAAC8P,MAAlB,CAAZ,GAAsCtP,CAAC,CAAC,KAAKsJ,QAAN,CAAD,GAAiB,KAAKA,QAAL,CAAciG,cAAd,CAA6B/P,CAA7B,EAA+B;MAACqL,KAAK,EAAC,KAAKxB,IAAL,CAAUwB,KAAjB;MAAuB2B,MAAM,EAACxM,CAAC,CAACP,CAAD,CAAD,GAAKA,CAAC,CAAC+M,MAAP,GAAc;IAA5C,CAA/B,CAAjB,GAAmGjF,OAAO,CAACC,OAAR,CAAgB,KAAKgI,cAAL,CAAoBhQ,CAApB,CAAhB,CAA3K;EAAmN;;EAAAiQ,aAAa,CAACjQ,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,IAAIE,CAAC,GAAC,KAAKoI,UAAL,CAAgB3B,GAAhB,CAAoB7G,CAApB,CAAN;;IAA6B,IAAGI,CAAH,EAAK,OAAO0H,OAAO,CAACC,OAAR,CAAgB3H,CAAhB,CAAP;IAA0B,MAAMK,CAAC,GAAC4C,CAAC,CAACtD,CAAD,CAAT;;IAAa,IAAGQ,CAAC,CAACE,CAAD,CAAJ,EAAQ;MAAC,IAAG,yBAAuBA,CAAC,CAAC2J,IAA5B,EAAiC,OAAOhK,CAAC,GAACK,CAAF,EAAI,KAAK+H,UAAL,CAAgBvB,GAAhB,CAAoBjH,CAApB,EAAsBI,CAAtB,CAAJ,EAA6B0H,OAAO,CAACC,OAAR,CAAgB3H,CAAhB,CAApC;;MAAuD,IAAIL,CAAC,GAAC,KAAKwI,uBAAL,CAA6B1B,GAA7B,CAAiC7G,CAAjC,CAAN;;MAA0C,OAAOD,CAAC,KAAGA,CAAC,GAACU,CAAC,CAACwP,cAAF,CAAiB/P,CAAjB,EAAoBgQ,IAApB,CAA0BnQ,CAAC,KAAG,KAAKyI,UAAL,CAAgBvB,GAAhB,CAAoBjH,CAApB,EAAsBD,CAAC,CAACoQ,IAAxB,GAA8B,KAAK5H,uBAAL,CAA6BuC,MAA7B,CAAoC9K,CAApC,CAA9B,EAAqED,CAAxE,CAA3B,EAAwGqQ,KAAxG,CAA+GrQ,CAAC,KAAG,KAAKwI,uBAAL,CAA6BuC,MAA7B,CAAoC9K,CAApC,GAAuCiB,CAAC,CAAClB,CAAD,CAAxC,EAA4C,IAA/C,CAAhH,CAAF,EAAyK,KAAKwI,uBAAL,CAA6BtB,GAA7B,CAAiCjH,CAAjC,EAAmCD,CAAnC,CAAzK,EAA+MA,CAAlN,CAAR;IAA6N;;IAAA,OAAO+H,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;EAA6B;;EAAAsI,gBAAgB,CAACtQ,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;IAAC,MAAMG,CAAC,GAAC,KAAK8H,qBAAL,CAA2BxB,GAA3B,CAA+B3G,CAA/B,CAAR;;IAA0C,IAAGK,CAAH,EAAK,OAAOuH,OAAO,CAACC,OAAR,CAAgBxH,CAAhB,CAAP;;IAA0B,IAAIE,CAAC,GAAC,KAAK6H,4BAAL,CAAkCzB,GAAlC,CAAsC3G,CAAtC,CAAN;;IAA+C,IAAGO,CAAH,EAAK,OAAOA,CAAP;;IAAS,MAAME,CAAC,GAAC,KAAK4I,SAAL,CAAemC,KAAvB;IAAA,MAA6B7K,CAAC,GAAC,KAAKuO,cAAL,CAAoBpP,CAApB,CAA/B;IAAA,MAAsDe,CAAC,GAAC+D,CAAC,CAAC,IAAD,CAAzD;IAAA,MAAgE7D,CAAC,GAACyF,EAAE,CAAC3G,CAAD,EAAGgB,CAAH,CAApE;;IAA0E,OAAON,CAAC,GAAC2F,CAAC,CAACnF,CAAD,EAAGJ,CAAH,EAAKF,CAAC,CAACgL,eAAP,EAAuBvL,CAAvB,CAAH,EAA6B,KAAKkI,4BAAL,CAAkCrB,GAAlC,CAAsC/G,CAAtC,EAAwCO,CAAxC,CAA7B,EAAwEA,CAAC,CAACyP,IAAF,CAAQnQ,CAAC,KAAG,KAAKsI,qBAAL,CAA2BpB,GAA3B,CAA+B/G,CAA/B,EAAiCH,CAAjC,GAAoC,KAAKuI,4BAAL,CAAkCwC,MAAlC,CAAyC5K,CAAzC,CAApC,EAAgFH,CAAnF,CAAT,CAAxE,EAAyKU,CAAhL;EAAkL;;EAAM6P,mBAAmB,CAACvQ,CAAD,EAAGC,CAAH,EAAK;IAAA;;IAAA;MAACa,CAAC,CAAC,MAAI,CAAC0G,WAAL,CAAiBwF,MAAlB,CAAD;MAA2B,OAAO,MAAI,CAACxD,SAAL,CAAemC,KAAf,GAAqB,MAAI,CAACwD,oBAAL,CAA0BnP,CAA1B,EAA4BC,CAA5B,EAA+BkQ,IAA/B,CAAqC9P,CAAC,IAAE;QAAC,IAAG,CAACA,CAAJ,EAAM,OAAO,IAAP;QAAY,MAAMG,CAAC,GAACH,CAAC,CAAC+O,IAAF,EAAR;QAAiB,OAAO,MAAI,CAACa,aAAL,CAAmB5P,CAAnB,EAAqBG,CAArB,EAAuBP,CAAvB,EAA0BkQ,IAA1B,CAAgC9P,CAAC,IAAEK,CAAC,CAACL,CAAD,CAAD,GAAK,IAAL,GAAU,MAAI,CAACiQ,gBAAL,CAAsBjQ,CAAtB,EAAwBL,CAAxB,EAA0BQ,CAA1B,EAA4BP,CAA5B,EAA+BkQ,IAA/B,CAAqCnQ,CAAC,IAAE;UAAC,MAAMC,CAAC,GAACD,CAAC,CAACwQ,MAAF,CAAS9C,MAAT,CAAiB1N,CAAC,IAAE,WAASA,CAAC,CAACqK,IAAX,IAAiB,YAAU,OAAOrK,CAAC,CAACyQ,IAAxD,CAAR;;UAAuE,IAAGxQ,CAAC,IAAEA,CAAC,CAACkM,MAAF,GAAS,CAAf,EAAiB;YAAC,MAAM9L,CAAC,GAAC,IAAIsO,KAAJ,CAAU1O,CAAC,CAACkM,MAAZ,CAAR;;YAA4B,KAAI,IAAInM,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACC,CAAC,CAACkM,MAAhB,EAAuBnM,CAAC,EAAxB,EAA2B;cAAC,MAAMQ,CAAC,GAACP,CAAC,CAACD,CAAD,CAAT;cAAA,MAAaU,CAAC,GAAC,EAAf;cAAA,MAAkB,CAACE,CAAD,IAAIT,CAAC,CAACK,CAAC,CAACiQ,IAAH,CAAvB;cAAgCjQ,CAAC,CAACiQ,IAAF,GAAO7P,CAAP;;cAAS,KAAI,IAAIZ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACY,CAAC,CAACuL,MAAhB,EAAuBnM,CAAC,EAAxB,EAA2BU,CAAC,CAACgO,IAAF,CAAO9N,CAAC,CAAC8P,UAAF,CAAa1Q,CAAb,CAAP;;cAAwBK,CAAC,CAACL,CAAD,CAAD,GAAK;gBAAC8P,MAAM,EAACtP,CAAR;gBAAUoO,EAAE,EAAC5O,CAAb;gBAAe2Q,QAAQ,EAACjQ;cAAxB,CAAL;YAAgC;;YAAA,MAAMA,CAAC,GAAC,IAAI6G,GAAJ,EAAR;YAAgB,OAAO,MAAI,CAACiC,SAAL,CAAeyB,gBAAf,CAAgC5K,CAAhC,EAAmC8P,IAAnC,CAAyChQ,CAAC,IAAE;cAACS,CAAC,CAACT,CAAD,CAAD;;cAAK,KAAI,IAAIH,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACC,CAAC,CAACkM,MAAhB,EAAuBnM,CAAC,EAAxB,EAA2B;gBAAC,MAAMK,CAAC,GAACJ,CAAC,CAACD,CAAD,CAAT;gBAAaU,CAAC,CAACwG,GAAF,CAAM7G,CAAC,CAACuQ,GAAR,EAAY;kBAACH,IAAI,EAACpQ,CAAC,CAACoQ,IAAR;kBAAaI,UAAU,EAAC1Q,CAAC,CAACH,CAAD,CAAD,CAAK6Q;gBAA7B,CAAZ;cAAsD;;cAAA,OAAM;gBAACf,MAAM,EAAC9P,CAAR;gBAAU8Q,QAAQ,EAACpQ,CAAnB;gBAAqB0O,IAAI,EAAC5O;cAA1B,CAAN;YAAmC,CAApL,CAAP;UAA8L;;UAAA,OAAM;YAACsP,MAAM,EAAC9P,CAAR;YAAUoP,IAAI,EAAC5O;UAAf,CAAN;QAAwB,CAA5hB,CAA7C,CAAP;MAAqlB,CAAjqB,EAAoqB6P,KAApqB,CAA2qBrQ,CAAC,KAAGkB,CAAC,CAAClB,CAAD,CAAD,EAAK,IAAR,CAA5qB,CAArB,GAAitB,IAAxtB;IAA5B;EAAyvB;;EAAM+Q,4BAA4B,CAAC/Q,CAAD,EAAGC,CAAH,EAAK;IAAA;;IAAA;MAAC,IAAGa,CAAC,CAAC,MAAI,CAAC0G,WAAL,CAAiBwF,MAAlB,CAAD,EAA2BtM,CAAC,CAACV,CAAC,CAAC2P,QAAH,CAAD,IAAe,WAAS3P,CAAC,CAAC2P,QAAF,CAAWtF,IAAjE,EAAsE,OAAO,IAAP;MAAY,IAAIlK,CAAC,GAACH,CAAC,CAAC2P,QAAR;;MAAiB,IAAGvN,CAAC,CAACjC,CAAD,CAAJ,EAAQ;QAAC,MAAMH,CAAC,GAACG,CAAC,CAAC6Q,KAAV;QAAgB7Q,CAAC,CAAC6Q,KAAF,GAAQhR,CAAR;MAAU,CAAnC,MAAwC,IAAGsC,CAAC,CAACnC,CAAD,CAAJ,EAAQ;QAAC,MAAMH,CAAC,GAACG,CAAC,CAAC8Q,KAAV;QAAgB9Q,CAAC,CAAC8Q,KAAF,GAAQjR,CAAR;MAAU,CAAnC,MAAwC,IAAGwC,CAAC,CAACrC,CAAD,CAAJ,EAAQ;QAAC,MAAME,CAAC,SAAO,MAAI,CAAC8O,oBAAL,CAA0BnP,CAA1B,EAA4BC,CAA5B,CAAd;;QAA6C,IAAGa,CAAC,CAAC,MAAI,CAAC0G,WAAL,CAAiBwF,MAAlB,CAAD,EAA2B3M,CAAC,KAAGsF,CAAC,CAACtF,CAAC,CAACgK,IAAH,CAAD,IAAWxE,CAAC,CAACxF,CAAC,CAACgK,IAAH,CAAf,CAA/B,EAAwD;UAAClK,CAAC,GAACA,CAAC,CAAC+Q,MAAJ;QAAW,CAApE,MAAyE/Q,CAAC,GAAC4F,CAAC,CAAC5F,CAAD,CAAH;MAAO;;MAAA,MAAM+C,CAAC,CAAC/C,CAAC,CAAC0N,gBAAH,EAAoB,MAAI,CAAChE,IAAL,CAAUgE,gBAA9B,CAAP;MAAuD,MAAMxN,CAAC,GAACyC,CAAC,CAAC3C,CAAD,CAAT;MAAA,MAAaK,CAAC,GAAC4C,CAAC,CAAC/C,CAAD,EAAGF,CAAC,CAAC0N,gBAAL,EAAsB,MAAI,CAAChE,IAAL,CAAUgE,gBAAhC,CAAhB;MAAkE,OAAOrN,CAAC,IAAEwB,CAAC,CAACxB,CAAD,CAAJ,EAAQA,CAAf;IAAnb;EAAoc;;EAAAuL,aAAa,CAAC/L,CAAD,EAAG;IAAC,MAAMC,CAAC,GAAC+C,CAAC,CAAC,KAAK6G,IAAL,CAAUgE,gBAAX,CAAT;IAAsC,IAAG7N,CAAC,CAAC6I,KAAF,IAAS7I,CAAC,CAAC6I,KAAF,CAAQsD,MAAR,GAAe,CAA3B,EAA6B,KAAI,MAAMhM,CAAV,IAAeH,CAAC,CAAC6I,KAAjB,EAAuB,KAAKsI,WAAL,CAAiBhR,CAAjB,EAAmBF,CAAnB;IAAsB,IAAGD,CAAC,CAACiH,OAAF,IAAWjH,CAAC,CAACiH,OAAF,CAAUkF,MAAV,GAAiB,CAA/B,EAAiC,KAAI,MAAMhM,CAAV,IAAeH,CAAC,CAACiH,OAAjB,EAAyB,KAAKmK,WAAL,CAAiBjR,CAAC,CAACgO,GAAnB;EAAwB;;EAAMW,WAAW,CAAC9O,CAAD,EAAG;IAAA;;IAAA;MAAC,MAAI,CAAC+O,uBAAL,CAA6B/O,CAAC,CAAC4K,GAA/B,GAAoC9J,CAAC,CAAC,MAAI,CAAC0G,WAAL,CAAiBwF,MAAlB,CAArC;MAA+D,MAAM/M,CAAC,GAAC,IAAIwH,eAAJ,EAAR;;MAA4B,MAAI,CAACU,2BAAL,CAAiCjB,GAAjC,CAAqClH,CAAC,CAAC4K,GAAvC,EAA2C3K,CAA3C;;MAA8C,MAAME,CAAC,GAAC;QAAC6M,MAAM,EAAC/M,CAAC,CAAC+M;MAAV,CAAR;;MAA0B,IAAG;QAAC,MAAM,MAAI,CAACqE,mBAAL,CAAyBrR,CAAzB,EAA2BG,CAA3B,CAAN,EAAoCW,CAAC,CAAC,MAAI,CAAC0G,WAAL,CAAiBwF,MAAlB,CAArC,EAA+D,MAAI,CAAC7E,2BAAL,CAAiC4C,MAAjC,CAAwC/K,CAAC,CAAC4K,GAA1C,CAA/D;MAA8G,CAAlH,CAAkH,OAAMvK,CAAN,EAAQ;QAAC,IAAG,MAAI,CAAC8H,2BAAL,CAAiC4C,MAAjC,CAAwC/K,CAAC,CAAC4K,GAA1C,GAA+C,CAAC5J,CAAC,CAACX,CAAD,CAApD,EAAwD,MAAMA,CAAN;MAAQ;IAA/V;EAAgW;;EAAAwO,cAAc,CAAC7O,CAAD,EAAGC,CAAH,EAAK;IAACa,CAAC,CAAC,KAAK0G,WAAL,CAAiBwF,MAAlB,CAAD;;IAA2B,MAAM7M,CAAC,GAAC,KAAK4Q,4BAAL,CAAkC/Q,CAAlC,EAAoCC,CAApC,CAAR;IAAA,MAA+CI,CAAC,GAAC,KAAKkQ,mBAAL,CAAyBvQ,CAAzB,EAA2BC,CAA3B,CAAjD;;IAA+E,OAAO8H,OAAO,CAACkH,GAAR,CAAY,CAAC9O,CAAD,EAAGE,CAAH,CAAZ,EAAmB8P,IAAnB,CAAyB,CAAC,CAAClQ,CAAD,EAAGE,CAAH,CAAD,KAAS;MAACW,CAAC,CAAC,KAAK0G,WAAL,CAAiBwF,MAAlB,CAAD,EAA2B,KAAKtD,aAAL,CAAmB4H,WAAnB,CAA+BtR,CAA/B,EAAiCG,CAAjC,EAAmCF,CAAnC,CAA3B;IAAiE,CAApG,CAAP;EAA8G;;EAAAoR,mBAAmB,CAACrR,CAAD,EAAGC,CAAH,EAAK;IAACa,CAAC,CAAC,KAAK0G,WAAL,CAAiBwF,MAAlB,CAAD;;IAA2B,MAAM7M,CAAC,GAAC,KAAK4Q,4BAAL,CAAkC/Q,CAAlC,EAAoCC,CAApC,CAAR;IAAA,MAA+CI,CAAC,GAAC,KAAKkQ,mBAAL,CAAyBvQ,CAAzB,EAA2BC,CAA3B,CAAjD;;IAA+E,OAAO8H,OAAO,CAACkH,GAAR,CAAY,CAAC9O,CAAD,EAAGE,CAAH,CAAZ,EAAmB8P,IAAnB,CAAyB,CAAC,CAAClQ,CAAD,EAAGE,CAAH,CAAD,KAAS;MAACW,CAAC,CAAC,KAAK0G,WAAL,CAAiBwF,MAAlB,CAAD,EAA2B,KAAKpF,YAAL,CAAkBtH,GAAlB,CAAsBN,CAAtB,KAA0B,KAAK0J,aAAL,CAAmB4H,WAAnB,CAA+BtR,CAA/B,EAAiCG,CAAjC,EAAmCF,CAAnC,CAArD;IAA2F,CAA9H,CAAP;EAAwI;;EAAAsR,QAAQ,CAACvR,CAAD,EAAG;IAAC,MAAMC,CAAC,GAAC,KAAK4J,IAAL,CAAUqB,oBAAV,CAA+BsG,aAA/B,CAA6CzR,CAAC,EAA9C,EAAiDC,CAAjD,CAAR;IAAA,MAA4DG,CAAC,GAAC,KAAK0J,IAAL,CAAUqB,oBAAV,CAA+BuG,iBAA/B,CAAiDzR,CAAC,CAAC0R,KAAnD,CAA9D;IAAA,MAAwHrR,CAAC,GAAC,IAAI6D,CAAJ,CAAMlE,CAAN,EAAQG,CAAR,EAAUF,CAAC,CAAC,CAAD,CAAX,EAAeA,CAAC,CAAC,CAAD,CAAhB,CAA1H;IAA+I,OAAO,KAAKyH,MAAL,CAAYR,GAAZ,CAAgBlH,CAAhB,EAAkBK,CAAlB,GAAqB,KAAKmJ,SAAL,CAAemI,QAAf,CAAwBtR,CAAxB,CAArB,EAAgDA,CAAvD;EAAyD;;EAAM8Q,WAAW,CAACnR,CAAD,EAAGC,CAAH,EAAK;IAAA;;IAAA;MAAC,MAAME,CAAC,GAAC,MAAI,CAACoR,QAAL,CAAcvR,CAAC,CAACmO,GAAhB,CAAR;MAAA,MAA6B9N,CAAC,GAAC,MAAI,CAACqJ,aAAL,CAAmBkI,aAAnB,CAAiC,MAAI,CAACpG,cAAtC,EAAqDxL,CAArD,CAA/B;;MAAuF,IAAG,MAAIK,CAAC,CAAC8L,MAAT,EAAgB;;MAAO,IAAGlM,CAAH,EAAK;QAAC,MAAME,CAAC,GAAC0R,IAAI,CAACC,KAAL,CAAW,CAAC7R,CAAC,CAAC8R,KAAF,CAAQ,CAAR,IAAW9R,CAAC,CAAC8R,KAAF,CAAQ,CAAR,CAAZ,IAAwB/R,CAAC,CAAC8M,UAArC,CAAR;;QAAyD,KAAI,MAAM9M,CAAV,IAAeK,CAAf,EAAiBL,CAAC,CAAC2P,QAAF,KAAajN,CAAC,CAAC1C,CAAC,CAAC2P,QAAH,CAAD,IAAe/M,CAAC,CAAC5C,CAAC,CAAC2P,QAAH,CAA7B,KAA4C,MAAI,CAACqC,WAAL,CAAiBhS,CAAjB,EAAmBG,CAAnB,CAA5C;MAAkE;;MAAA,MAAMK,CAAC,GAACR,CAAC,CAACmO,GAAV;MAAc,MAAI,CAAClG,cAAL,CAAoByD,GAApB,CAAwB1L,CAAC,CAACmO,GAA1B,GAA+B,MAAI,CAAC7E,YAAL,CAAkB,UAAlB,CAA/B;;MAA6D,IAAG;QAAC,MAAMrJ,CAAC,GAAC;UAACoK,IAAI,EAAC,QAAN;UAAeV,KAAK,EAAC,CAAC,CAAtB;UAAwByE,WAAW,QAAO,MAAI,CAACH,gBAAL,CAAsBjO,CAAtB,EAAwBK,CAAxB,CAA1C;UAAqEgO,MAAM,EAAC,EAA5E;UAA+EC,GAAG,EAAC,CAAC,CAApF;UAAsFC,IAAI,EAAC,CAAC;QAA5F,CAAR;QAAuGpO,CAAC,CAAC8R,KAAF,CAAQhS,CAAR,GAAW,MAAI,CAACgI,cAAL,CAAoB8C,MAApB,CAA2BvK,CAA3B,CAAX,EAAyC,MAAI,CAAC8I,YAAL,CAAkB,UAAlB,CAAzC;MAAuE,CAAlL,CAAkL,OAAM5I,CAAN,EAAQ;QAAC,IAAG,MAAI,CAACuH,cAAL,CAAoB8C,MAApB,CAA2BvK,CAA3B,GAA8B,MAAI,CAAC8I,YAAL,CAAkB,UAAlB,CAA9B,EAA4D,CAACtI,CAAC,CAACN,CAAD,CAAjE,EAAqE,MAAMA,CAAN;MAAQ;IAAplB;EAAqlB;;EAAA0Q,WAAW,CAACpR,CAAD,EAAG;IAAC,IAAG,CAAC,KAAK0H,MAAL,CAAYpH,GAAZ,CAAgBN,CAAhB,CAAJ,EAAuB;;IAAO,MAAMC,CAAC,GAAC,KAAKyH,MAAL,CAAYZ,GAAZ,CAAgB9G,CAAhB,CAAR;;IAA2B,KAAKwJ,SAAL,CAAe0I,WAAf,CAA2BjS,CAA3B,GAA8BA,CAAC,CAACmJ,OAAF,EAA9B,EAA0C,KAAK1B,MAAL,CAAYqD,MAAZ,CAAmB/K,CAAnB,CAA1C;EAAgE;;EAAA6K,eAAe,CAAC7K,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAME,CAAC,GAAC,KAAKmH,WAAL,CAAiBR,GAAjB,CAAqB9G,CAArB,CAAR;IAAA,MAAgCK,CAAC,GAAC,KAAKuJ,eAAL,CAAqBuI,gBAArB,CAAsCnS,CAAtC,CAAlC;;IAA2E,KAAK4J,eAAL,CAAqBwI,OAArB,CAA6BjS,CAA7B,EAA+B,CAA/B,EAAiC,CAAjC,EAAmCE,CAAC,IAAEJ,CAAC,GAAC6D,CAAD,GAAG,CAAN,CAApC;EAA8C;;EAAAkK,gBAAgB,CAAChO,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,MAAME,CAAC,GAAC,KAAKwJ,IAAb;IAAA,MAAkBrJ,CAAC,GAACwC,CAAC,CAAC3C,CAAC,CAACwN,gBAAH,CAArB;IAAA,MAA0CnN,CAAC,GAAC,KAAKgJ,aAAL,CAAmB2I,eAAnB,CAAmCrS,CAAnC,EAAqCC,CAArC,EAAuCE,CAAvC,CAA5C;;IAAsF,IAAGK,CAAH,EAAK;MAAC,MAAMR,CAAC,GAAC6R,IAAI,CAACC,KAAL,CAAW,CAACtR,CAAC,CAACuR,KAAF,CAAQ,CAAR,IAAWvR,CAAC,CAACuR,KAAF,CAAQ,CAAR,CAAZ,IAAwB9R,CAAC,CAAC6M,UAArC,CAAR;;MAAyD,KAAI,MAAM7M,CAAV,IAAeS,CAAf,EAAiBT,CAAC,CAAC0P,QAAF,KAAajN,CAAC,CAACzC,CAAC,CAAC0P,QAAH,CAAD,IAAe/M,CAAC,CAAC3C,CAAC,CAAC0P,QAAH,CAA7B,KAA4C,KAAKqC,WAAL,CAAiB/R,CAAjB,EAAmBD,CAAnB,CAA5C;IAAkE;;IAAA,OAAOU,CAAP;EAAS;;EAAAsR,WAAW,CAAChS,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAME,CAAC,GAACH,CAAC,CAAC2P,QAAV;IAAmB/M,CAAC,CAACzC,CAAD,CAAD,GAAK,KAAKmS,eAAL,CAAqBnS,CAArB,EAAuBF,CAAvB,CAAL,GAA+B,KAAKsS,UAAL,CAAgBvS,CAAhB,EAAkBC,CAAlB,CAA/B;EAAoD;;EAAAqS,eAAe,CAACtS,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAME,CAAC,GAACH,CAAC,CAACwS,MAAV;IAAA,MAAiBnS,CAAC,GAAC,EAAnB;IAAsB,IAAIG,CAAC,GAAC,CAAN;IAAA,IAAQE,CAAC,GAAC,CAAV;;IAAY,KAAI,MAAK,CAACE,CAAD,EAAGE,CAAH,CAAT,IAAiBX,CAAjB,EAAmB;MAAC,IAAGE,CAAC,CAACqO,IAAF,CAAO,CAAC9N,CAAC,GAACJ,CAAH,EAAKM,CAAL,CAAP,GAAgBN,CAAC,GAAC,CAAlB,EAAoBP,CAAC,KAAGgG,CAA3B,EAA6B;QAAC,MAAMjG,CAAC,GAAC,IAAEmG,CAAV;QAAYvF,CAAC,GAACF,CAAF,GAAIV,CAAJ,IAAOK,CAAC,CAACqO,IAAF,CAAO,CAACzO,CAAD,EAAG,CAAH,CAAP,GAAcO,CAAC,GAAC,CAACP,CAAxB,IAA2BW,CAAC,GAACF,CAAF,GAAIuF,CAAC,GAACjG,CAAN,KAAUK,CAAC,CAACqO,IAAF,CAAO,CAAC,CAACzO,CAAF,EAAI,CAAJ,CAAP,GAAeO,CAAC,GAACP,CAA3B,CAA3B;MAAyD,CAAnG,MAAwGW,CAAC,GAACF,CAAF,GAAI,CAACyF,CAAL,IAAQ9F,CAAC,CAACqO,IAAF,CAAO,CAACzO,CAAD,EAAG,CAAH,CAAP,GAAcO,CAAC,GAAC,CAACP,CAAzB,IAA4BW,CAAC,GAACF,CAAF,GAAIuF,CAAC,GAACE,CAAN,KAAU9F,CAAC,CAACqO,IAAF,CAAO,CAAC,CAACzO,CAAF,EAAI,CAAJ,CAAP,GAAeO,CAAC,GAACP,CAA3B,CAA5B;;MAA0DS,CAAC,IAAEE,CAAH;IAAK;;IAAAZ,CAAC,CAACwS,MAAF,GAASnS,CAAT;EAAW;;EAAAkS,UAAU,CAACvS,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAME,CAAC,GAACH,CAAC,CAAC2P,QAAV;;IAAmB,IAAG1P,CAAC,KAAGgG,CAAP,EAAS;MAAC,MAAM5F,CAAC,GAAC,IAAE8F,CAAV;MAAYhG,CAAC,CAACyD,CAAF,GAAIvD,CAAJ,GAAML,CAAC,CAAC2P,QAAF,GAAW;QAAC6C,MAAM,EAAC,CAAC,CAACrS,CAAC,CAACyD,CAAH,EAAKzD,CAAC,CAAC+B,CAAP,CAAD,EAAW,CAACjC,CAAD,EAAG,CAAH,CAAX;MAAR,CAAjB,GAA4CE,CAAC,CAACyD,CAAF,GAAIqC,CAAC,GAAC5F,CAAN,KAAUL,CAAC,CAAC2P,QAAF,GAAW;QAAC6C,MAAM,EAAC,CAAC,CAACrS,CAAC,CAACyD,CAAH,EAAKzD,CAAC,CAAC+B,CAAP,CAAD,EAAW,CAAC,CAACjC,CAAF,EAAI,CAAJ,CAAX;MAAR,CAArB,CAA5C;IAA8F,CAApH,MAAyHE,CAAC,CAACyD,CAAF,GAAI,CAACuC,CAAL,GAAOnG,CAAC,CAAC2P,QAAF,GAAW;MAAC6C,MAAM,EAAC,CAAC,CAACrS,CAAC,CAACyD,CAAH,EAAKzD,CAAC,CAAC+B,CAAP,CAAD,EAAW,CAACjC,CAAD,EAAG,CAAH,CAAX;IAAR,CAAlB,GAA6CE,CAAC,CAACyD,CAAF,GAAIqC,CAAC,GAACE,CAAN,KAAUnG,CAAC,CAAC2P,QAAF,GAAW;MAAC6C,MAAM,EAAC,CAAC,CAACrS,CAAC,CAACyD,CAAH,EAAKzD,CAAC,CAAC+B,CAAP,CAAD,EAAW,CAAC,CAACjC,CAAF,EAAI,CAAJ,CAAX;IAAR,CAArB,CAA7C;EAA+F;;EAAAgO,gBAAgB,CAACjO,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;IAAC,IAAG,EAAEF,CAAC,IAAEA,CAAC,CAACkM,MAAP,KAAgB,CAAC,KAAKZ,YAAzB,EAAsC,OAAOxD,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;IAA6B,MAAM3H,CAAC,GAACiF,CAAC,CAACmN,IAAF,CAAOxS,CAAP,EAAS,KAAK2K,GAAd,EAAkB5K,CAAC,CAAC0S,SAApB,CAAR;IAAA,MAAuClS,CAAC,GAAC,KAAK+K,YAA9C;IAA2D,OAAO,KAAKzD,QAAL,CAAcqI,IAAd,CAAoBlQ,CAAC,IAAEO,CAAC,CAACmS,eAAF,CAAkBtS,CAAlB,EAAoB,KAAKmJ,SAAL,CAAemC,KAAf,CAAqBC,eAAzC,EAAyD3L,CAAzD,EAA2D,IAA3D,EAAgE,IAAhE,EAAqEE,CAArE,EAAwEgQ,IAAxE,CAA8E,OAAK,KAAKvG,eAAL,CAAqB2D,WAArB,IAAmC,KAAKqF,wBAAL,CAA8B5S,CAA9B,EAAgCK,CAAhC,CAAxC,CAA9E,CAAvB,CAAP;EAA4L;;EAAAuS,wBAAwB,CAAC5S,CAAD,EAAGC,CAAH,EAAK;IAAC,MAAME,CAAC,GAAC,KAAKoL,YAAb;IAAA,MAA0BlL,CAAC,GAACJ,CAAC,CAAC4S,OAAF,EAA5B;IAAA,MAAwCrS,CAAC,GAACP,CAAC,CAAC6S,SAAF,EAA1C;IAAA,MAAwDpS,CAAC,GAAC;MAACqS,QAAQ,EAAC1S,CAAV;MAAY2S,OAAO,EAAC3S,CAApB;MAAsB4S,OAAO,EAAC;IAA9B,CAA1D;IAAA,MAA2FrS,CAAC,GAAC,IAAI2D,CAAJ,CAAMvE,CAAC,CAACmO,GAAF,CAAMS,EAAZ,EAAelO,CAAf,EAAiBsD,CAAC,CAACkP,OAAnB,EAA2B,CAAC,CAA5B,EAA8B,CAAC,CAA/B,CAA7F;IAAA,MAA+HpS,CAAC,GAAC,EAAjI;;IAAoI,OAAKN,CAAC,CAAC2S,IAAF,EAAL,GAAe;MAAC,MAAMlT,CAAC,GAACO,CAAC,CAAC4S,WAAF,EAAR;MAAwBnT,CAAC,CAACoT,WAAF,GAAc,CAAC,CAAD,KAAKpT,CAAC,CAACoT,WAAP,GAAmB,CAAC,CAApB,GAAsB,KAAK/L,WAAL,CAAiBR,GAAjB,CAAqB7G,CAAC,CAACoT,WAAvB,CAApC,EAAwEpT,CAAC,CAACqT,SAAF,GAAY,KAAKhM,WAAL,CAAiBR,GAAjB,CAAqB7G,CAAC,CAACqP,UAAF,CAAa,KAAK1E,GAAlB,CAArB,CAApF;MAAiI,MAAMvK,CAAC,GAAC,IAAIgE,CAAJ,CAAMpE,CAAC,CAACqT,SAAR,CAAR;MAA2BjT,CAAC,CAACgT,WAAF,GAAcpT,CAAC,CAACoT,WAAhB,EAA4BvS,CAAC,CAAC4N,IAAF,CAAOrO,CAAP,CAA5B,EAAsCF,CAAC,CAACoT,YAAF,CAAe3S,CAAf,EAAiBJ,CAAjB,EAAmBR,CAAC,CAAC0R,KAArB,EAA2B,KAAKlI,SAAL,CAAemC,KAAf,CAAqBC,eAAhD,CAAtC;IAAuG;;IAAA,MAAM5K,CAAC,GAAChB,CAAC,CAACwT,YAAF,CAAerI,QAAf,CAAwBsI,WAAhC;IAAA,MAA4CvS,CAAC,GAACN,CAAC,CAAC8S,SAAF,CAAY1S,CAAZ,CAA9C;IAA6D,IAAG,MAAIE,CAAC,CAACiL,MAAT,EAAgB,OAAO,IAAI/H,CAAJ,EAAP;IAAa,MAAMhD,CAAC,GAACF,CAAC,CAAC,CAAD,CAAD,CAAKyS,OAAb;IAAqB,OAAOvP,CAAC,CAACwP,cAAF,CAAiBxS,CAAjB,EAAmBN,CAAnB,CAAP;EAA6B;;EAAAiO,uBAAuB,CAAC/O,CAAD,EAAG;IAAC,KAAKmI,2BAAL,CAAiCrB,GAAjC,CAAqC9G,CAArC,GAAyCuJ,KAAzC;EAAiD;;EAAAyG,cAAc,CAAChQ,CAAD,EAAG;IAAC,MAAMC,CAAC,GAACD,CAAC,CAAC2P,QAAV;IAAmB,OAAOrN,CAAC,CAACrC,CAAD,CAAD,GAAKuD,CAAL,GAAOpB,CAAC,CAACnC,CAAD,CAAD,IAAMuC,CAAC,CAACvC,CAAD,CAAP,GAAWyD,CAAX,GAAa,KAAKuF,yBAAL,GAA+BrF,CAA/B,GAAiC,IAA5D;EAAiE;;EAAAoL,qBAAqB,GAAE;IAAC,KAAK3G,sBAAL,IAA6BgB,YAAY,CAAC,KAAKhB,sBAAN,CAAzC,EAAuE,KAAKA,sBAAL,GAA4BwL,UAAU,CAAE,MAAI;MAAC,KAAKxL,sBAAL,GAA4B,IAA5B,EAAiC,KAAKiB,YAAL,CAAkB,UAAlB,CAAjC;IAA+D,CAAtE,EAAwE,GAAxE,CAA7G,EAA0L,KAAKA,YAAL,CAAkB,UAAlB,CAA1L;EAAwN;;AAA/3b,CAA9B;AAA+5btJ,CAAC,CAAC,CAACsB,CAAC,CAAC;EAACwS,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyB3M,EAAE,CAAC4M,SAA5B,EAAsC,uBAAtC,EAA8D,KAAK,CAAnE,CAAD,EAAuE/T,CAAC,CAAC,CAACsB,CAAC,EAAF,CAAD,EAAO6F,EAAE,CAAC4M,SAAV,EAAoB,WAApB,EAAgC,KAAK,CAArC,CAAxE,EAAgH/T,CAAC,CAAC,CAACsB,CAAC,CAAC;EAACwS,aAAa,EAAC,CAAC;AAAhB,CAAD,CAAF,CAAD,EAAyB3M,EAAE,CAAC4M,SAA5B,EAAsC,UAAtC,EAAiD,KAAK,CAAtD,CAAjH,EAA0K/T,CAAC,CAAC,CAACsB,CAAC,EAAF,CAAD,EAAO6F,EAAE,CAAC4M,SAAV,EAAoB,UAApB,EAA+B,IAA/B,CAA3K,EAAgN/T,CAAC,CAAC,CAACsB,CAAC,EAAF,CAAD,EAAO6F,EAAE,CAAC4M,SAAV,EAAoB,MAApB,EAA2B,KAAK,CAAhC,CAAjN,EAAoP/T,CAAC,CAAC,CAACsB,CAAC,EAAF,CAAD,EAAO6F,EAAE,CAAC4M,SAAV,EAAoB,iBAApB,EAAsC,KAAK,CAA3C,CAArP,EAAmS/T,CAAC,CAAC,CAACsB,CAAC,EAAF,CAAD,EAAO6F,EAAE,CAAC4M,SAAV,EAAoB,2BAApB,EAAgD,KAAK,CAArD,CAApS,EAA4V5M,EAAE,GAACnH,CAAC,CAAC,CAACwB,CAAC,CAAC,6CAAD,CAAF,CAAD,EAAoD2F,EAApD,CAAhW;AAAwZ,MAAM6M,EAAE,GAAC7M,EAAT;AAAY,SAAO6M,EAAE,IAAIC,OAAb"},"metadata":{},"sourceType":"module"}