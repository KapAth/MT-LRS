{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport \"../../../geometry.js\";\nimport t from \"../../../core/Error.js\";\nimport { unwrap as r, isSome as i, isNone as s } from \"../../../core/maybe.js\";\nimport { property as a } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as n } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport o from \"../RasterInfo.js\";\nimport f from \"../RasterStorageInfo.js\";\nimport l from \"./BaseRaster.js\";\nimport u from \"./DBFParser.js\";\nimport { parseSpatialReference as c, parsePAMInfo as p } from \"./pamParser.js\";\nimport { parseSignature as m, getPyramidIFDs as h, getMaskIFDs as d, getImageInfo as y, parseIFD as g, parseFieldValues as T, isBSQConfig as x } from \"../rasterFormats/TiffDecoder.js\";\nimport I from \"../rasterFormats/TiffTags.js\";\nimport { estimateStatisticsFromHistograms as w } from \"../rasterFunctions/stretchUtils.js\";\nimport _ from \"../rasterTransforms/PolynomialTransform.js\";\nimport b from \"../../../rest/support/FeatureSet.js\";\nimport F from \"../../../geometry/SpatialReference.js\";\nimport S from \"../../../geometry/Extent.js\";\nimport R from \"../../../geometry/Point.js\";\n\nconst E = (e, t) => e.get(t)?.values,\n      k = (e, t) => e.get(t)?.values?.[0];\n\nlet D = class extends l {\n  constructor() {\n    super(...arguments), this._files = null, this._headerInfo = null, this._bufferSize = 1048576, this.datasetFormat = \"TIFF\";\n  }\n\n  open(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.init();\n      const s = e ? r(e.signal) : null,\n            {\n        data: a\n      } = yield _this.request(_this.url, {\n        range: {\n          from: 0,\n          to: _this._bufferSize\n        },\n        responseType: \"array-buffer\",\n        signal: s\n      });\n      if (!a) throw new t(\"tiffraster:open\", \"failed to open url \" + _this.url);\n      _this.datasetName = _this.url.slice(_this.url.lastIndexOf(\"/\") + 1, _this.url.lastIndexOf(\".\"));\n      const {\n        littleEndian: n,\n        firstIFDPos: o,\n        isBigTiff: f\n      } = m(a),\n            l = [];\n      yield _this._readIFDs(l, a, n, o, 0, f ? 8 : 4, s);\n\n      const {\n        imageInfo: u,\n        rasterInfo: c\n      } = _this._parseIFDs(l),\n            p = h(l),\n            y = d(l);\n\n      if (_this._headerInfo = {\n        littleEndian: n,\n        isBigTiff: f,\n        ifds: l,\n        pyramidIFDs: p,\n        maskIFDs: y,\n        ...u\n      }, _this._set(\"rasterInfo\", c), !u.isSupported) throw new t(\"tiffraster:open\", \"this tiff is not supported: \" + u.message);\n      if (!u.tileWidth) throw new t(\"tiffraster:open\", \"none-tiled tiff is not optimized for access, convert to COG and retry.\");\n      const {\n        skipExtensions: g = []\n      } = _this.ioConfig;\n\n      if (!g.includes(\"aux.xml\")) {\n        const t = yield _this._fetchAuxiliaryMetaData(e);\n        null != t && _this._processPAMInfo(t, c);\n      }\n\n      g.includes(\"vat.dbf\") || 1 !== c.bandCount || \"u8\" !== c.pixelType || (c.attributeTable = yield _this._fetchAuxiliaryTable(e), i(c.attributeTable) && (c.keyProperties.DataType = \"thematic\")), _this.updateTileInfo();\n    })();\n  }\n\n  fetchRawTile(e, t, r, s = {}) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      if (!_this2._headerInfo?.isSupported || _this2.isBlockOutside(e, t, r)) return null;\n      const a = yield _this2._fetchRawTiffTile(e, t, r, !1, s);\n\n      if (i(a) && _this2._headerInfo.hasMaskBand) {\n        const n = yield _this2._fetchRawTiffTile(e, t, r, !0, s);\n        i(n) && n.pixels[0] instanceof Uint8Array && (a.mask = n.pixels[0]);\n      }\n\n      return a;\n    })();\n  }\n\n  _parseIFDs(e) {\n    const t = y(e),\n          {\n      width: r,\n      height: i,\n      tileWidth: s,\n      tileHeight: a,\n      planes: n,\n      pixelType: l,\n      compression: u,\n      firstPyramidLevel: p,\n      maximumPyramidLevel: m,\n      pyramidBlockWidth: h,\n      pyramidBlockHeight: d,\n      tileBoundary: g,\n      affine: T,\n      metadata: x\n    } = t,\n          I = t.extent.spatialReference?.wkt || t.extent.spatialReference?.wkid;\n    let w = c(I),\n        b = !!t.isPseudoGeographic;\n    null == w && (b = !0, w = new F({\n      wkid: 3857\n    }));\n    const D = new S({ ...t.extent,\n      spatialReference: w\n    }),\n          v = new R(D ? {\n      x: D.xmin,\n      y: D.ymax,\n      spatialReference: w\n    } : {\n      x: 0,\n      y: 0\n    }),\n          P = new f({\n      blockWidth: s,\n      blockHeight: a,\n      pyramidBlockWidth: h,\n      pyramidBlockHeight: d,\n      compression: u,\n      origin: v,\n      firstPyramidLevel: p,\n      maximumPyramidLevel: m,\n      blockBoundary: g\n    }),\n          O = new R({\n      x: (D.xmax - D.xmin) / r,\n      y: (D.ymax - D.ymin) / i,\n      spatialReference: w\n    }),\n          j = x ? {\n      BandProperties: x.bandProperties,\n      DataType: x.dataType\n    } : {};\n    let B = null;\n    const L = k(e[0], \"PHOTOMETRICINTERPRETATION\"),\n          A = E(e[0], \"COLORMAP\");\n\n    if (L <= 3 && A?.length > 3 && A.length % 3 == 0) {\n      B = [];\n      const e = A.length / 3;\n\n      for (let t = 0; t < e; t++) B.push([t, A[t] >>> 8, A[t + e] >>> 8, A[t + 2 * e] >>> 8]);\n    }\n\n    const z = new o({\n      width: r,\n      height: i,\n      bandCount: n,\n      pixelType: l,\n      pixelSize: O,\n      storageInfo: P,\n      spatialReference: w,\n      isPseudoSpatialReference: b,\n      keyProperties: j,\n      extent: D,\n      colormap: B,\n      statistics: x ? x.statistics : null\n    });\n    return T?.length && (z.nativeExtent = new S({\n      xmin: -.5,\n      ymin: .5 - i,\n      xmax: r - .5,\n      ymax: .5,\n      spatialReference: w\n    }), z.transform = new _({\n      polynomialOrder: 1,\n      forwardCoefficients: [T[2] + T[0] / 2, T[5] - T[3] / 2, T[0], T[3], -T[1], -T[4]]\n    }), z.extent = z.transform.forwardTransform(z.nativeExtent), z.pixelSize = new R({\n      x: (D.xmax - D.xmin) / r,\n      y: (D.ymax - D.ymin) / i,\n      spatialReference: w\n    }), P.origin.x = -.5, P.origin.y = .5), {\n      imageInfo: t,\n      rasterInfo: z\n    };\n  }\n\n  _processPAMInfo(e, t) {\n    if (t.statistics = e.statistics ?? t.statistics, t.histograms = e.histograms, e.histograms && s(t.statistics) && (t.statistics = w(e.histograms)), e.transform && s(t.transform)) {\n      t.transform = e.transform, t.nativeExtent = t.extent;\n      const r = t.transform.forwardTransform(t.nativeExtent);\n      t.pixelSize = new R({\n        x: (r.xmax - r.xmin) / t.width,\n        y: (r.ymax - r.ymin) / t.height,\n        spatialReference: t.spatialReference\n      }), t.extent = r;\n    }\n\n    t.isPseudoSpatialReference && e.spatialReference && (t.spatialReference = e.spatialReference);\n  }\n\n  _readIFDs(e, t, r, i, s, a = 4, n) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (!i) return null;\n\n      if (i >= t.byteLength || i < 0) {\n        t = (yield _this3.request(_this3.url, {\n          range: {\n            from: i + s,\n            to: i + s + _this3._bufferSize\n          },\n          responseType: \"array-buffer\",\n          signal: n\n        })).data, s = i + s, i = 0;\n      }\n\n      const o = yield _this3._readIFD(t, r, i, s, I.TIFF_TAGS, a, n);\n      if (e.push(o.ifd), !o.nextIFD) return null;\n      yield _this3._readIFDs(e, t, r, o.nextIFD - s, s, a, n);\n    })();\n  }\n\n  _readIFD(e, t, r, s, a = I.TIFF_TAGS, n = 4, o) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      if (!e) return null;\n      const f = g(e, t, r, s, a, n);\n\n      if (f.success) {\n        const r = [];\n\n        if (f.ifd?.forEach(e => {\n          e.values || r.push(e);\n        }), r.length > 0) {\n          const a = r.map(e => e.offlineOffsetSize).filter(i),\n                n = Math.min.apply(null, a.map(e => e[0]));\n\n          if (Math.min.apply(null, a.map(e => e[0] + e[1])) - n <= _this4._bufferSize) {\n            const {\n              data: i\n            } = yield _this4.request(_this4.url, {\n              range: {\n                from: n,\n                to: n + _this4._bufferSize\n              },\n              responseType: \"array-buffer\",\n              signal: o\n            });\n            e = i, s = n, r.forEach(r => T(e, t, r, s));\n          }\n        }\n\n        if (f.ifd?.has(\"GEOKEYDIRECTORY\")) {\n          const r = f.ifd.get(\"GEOKEYDIRECTORY\"),\n                i = r?.values;\n\n          if (i && i.length > 4) {\n            const a = i[0] + \".\" + i[1] + \".\" + i[2],\n                  n = yield _this4._readIFD(e, t, r.valueOffset + 6 - s, s, I.GEO_KEYS, 2, o);\n            r.data = n.ifd, r.data && r.data.set(\"GEOTIFFVersion\", {\n              id: 0,\n              type: 2,\n              valueCount: 1,\n              valueOffset: null,\n              values: [a]\n            });\n          }\n        }\n\n        return f;\n      }\n\n      if (f.requiredBufferSize && f.requiredBufferSize !== e.byteLength) {\n        const r = yield _this4.request(_this4.url, {\n          range: {\n            from: s,\n            to: s + f.requiredBufferSize + 4\n          },\n          responseType: \"array-buffer\",\n          signal: o\n        });\n        return (e = r.data).byteLength < f.requiredBufferSize ? null : _this4._readIFD(e, t, 0, s, I.TIFF_TAGS, 4, o);\n      }\n    })();\n  }\n\n  _fetchRawTiffTile(e, t, r, i, s = {}) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const a = _this5._getTileLocation(e, t, r, i);\n\n      if (!a) return null;\n      const {\n        ranges: n,\n        actualTileWidth: o,\n        actualTileHeight: f,\n        ifd: l\n      } = a,\n            u = n.map(e => _this5.request(_this5.url, {\n        range: e,\n        responseType: \"array-buffer\",\n        signal: s.signal\n      })),\n            c = yield Promise.all(u),\n            p = c.map(e => e.data.byteLength).reduce((e, t) => e + t),\n            m = 1 === c.length ? c[0].data : new ArrayBuffer(p),\n            h = [0],\n            d = [0];\n\n      if (c.length > 1) {\n        const e = new Uint8Array(m);\n\n        for (let t = 0, r = 0; t < c.length; t++) {\n          const i = c[t].data;\n          e.set(new Uint8Array(i), r), h[t] = r, r += i.byteLength, d[t] = i.byteLength;\n        }\n      }\n\n      const {\n        blockWidth: y,\n        blockHeight: g\n      } = _this5.getBlockWidthHeight(e),\n            T = yield _this5.decodePixelBlock(m, {\n        format: \"tiff\",\n        customOptions: {\n          headerInfo: _this5._headerInfo,\n          ifd: l,\n          offsets: h,\n          sizes: d\n        },\n        width: y,\n        height: g,\n        planes: null,\n        pixelType: null\n      });\n\n      if (null == T) return null;\n      let x, I, w;\n\n      if (o !== y || f !== g) {\n        let e = T.mask;\n        if (e) {\n          for (x = 0; x < g; x++) if (w = x * y, x < f) for (I = o; I < y; I++) e[w + I] = 0;else for (I = 0; I < y; I++) e[w + I] = 0;\n        } else for (e = new Uint8Array(y * g), T.mask = e, x = 0; x < f; x++) for (w = x * y, I = 0; I < o; I++) e[w + I] = 1;\n      }\n\n      return T;\n    })();\n  }\n\n  _getTileLocation(e, t, r, i = !1) {\n    const {\n      firstPyramidLevel: s,\n      blockBoundary: a\n    } = this.rasterInfo.storageInfo,\n          n = 0 === e ? 0 : e - (s - 1),\n          {\n      _headerInfo: o\n    } = this;\n    if (!o) return null;\n    const f = i ? o.maskIFDs[n] : 0 === n ? o?.ifds[0] : o?.pyramidIFDs[n - 1];\n    if (!f) return null;\n    const l = x(f, o),\n          u = E(f, \"TILEOFFSETS\");\n    if (void 0 === u) return null;\n    const c = E(f, \"TILEBYTECOUNTS\"),\n          {\n      minRow: p,\n      minCol: m,\n      maxRow: h,\n      maxCol: d\n    } = a[n];\n    if (t > h || r > d || t < p || r < m) return null;\n\n    const y = k(f, \"IMAGEWIDTH\"),\n          g = k(f, \"IMAGELENGTH\"),\n          T = k(f, \"TILEWIDTH\"),\n          I = k(f, \"TILELENGTH\"),\n          w = l ? this.rasterInfo.bandCount : 1,\n          _ = w * t * (d + 1) + r,\n          b = [{\n      from: u[_],\n      to: u[_ + w - 1] + c[_ + w - 1] - 1\n    }];\n\n    if (l) {\n      let e = !0;\n\n      for (let t = 0; t < w; t++) if (u[_ + t] + c[_ + t] !== u[_ + t + 1]) {\n        e = !1;\n        break;\n      }\n\n      if (!e) for (let t = 0; t < w; t++) b[t] = {\n        from: u[_ + t],\n        to: u[_ + t] + c[_ + t] - 1\n      };\n    }\n\n    const F = u[_],\n          S = c[_];\n    if (null == F || null == S) return null;\n    return {\n      ranges: b,\n      ifd: f,\n      actualTileWidth: r === d && y % T || T,\n      actualTileHeight: t === h && g % I || I\n    };\n  }\n\n  _fetchAuxiliaryMetaData(e) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const {\n          data: t\n        } = yield _this6.request(_this6.url + \".aux.xml\", {\n          responseType: \"xml\",\n          signal: e?.signal\n        });\n        return p(t);\n      } catch {\n        return null;\n      }\n    })();\n  }\n\n  _fetchAuxiliaryTable(e) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const {\n          data: t\n        } = yield _this7.request(_this7.url + \".vat.dbf\", {\n          responseType: \"array-buffer\",\n          signal: e?.signal\n        }),\n              r = u.parse(t);\n        return r?.recordSet ? b.fromJSON(r.recordSet) : null;\n      } catch {\n        return null;\n      }\n    })();\n  }\n\n};\ne([a()], D.prototype, \"_files\", void 0), e([a()], D.prototype, \"_headerInfo\", void 0), e([a()], D.prototype, \"_bufferSize\", void 0), e([a({\n  type: String,\n  json: {\n    write: !0\n  }\n})], D.prototype, \"datasetFormat\", void 0), D = e([n(\"esri.layers.support.rasterDatasets.TIFFRaster\")], D);\nconst v = D;\nexport { v as default };","map":{"version":3,"names":["_","e","t","unwrap","r","isSome","i","isNone","s","property","a","subclass","n","o","f","l","u","parseSpatialReference","c","parsePAMInfo","p","parseSignature","m","getPyramidIFDs","h","getMaskIFDs","d","getImageInfo","y","parseIFD","g","parseFieldValues","T","isBSQConfig","x","I","estimateStatisticsFromHistograms","w","b","F","S","R","E","get","values","k","D","constructor","arguments","_files","_headerInfo","_bufferSize","datasetFormat","open","init","signal","data","request","url","range","from","to","responseType","datasetName","slice","lastIndexOf","littleEndian","firstIFDPos","isBigTiff","_readIFDs","imageInfo","rasterInfo","_parseIFDs","ifds","pyramidIFDs","maskIFDs","_set","isSupported","message","tileWidth","skipExtensions","ioConfig","includes","_fetchAuxiliaryMetaData","_processPAMInfo","bandCount","pixelType","attributeTable","_fetchAuxiliaryTable","keyProperties","DataType","updateTileInfo","fetchRawTile","isBlockOutside","_fetchRawTiffTile","hasMaskBand","pixels","Uint8Array","mask","width","height","tileHeight","planes","compression","firstPyramidLevel","maximumPyramidLevel","pyramidBlockWidth","pyramidBlockHeight","tileBoundary","affine","metadata","extent","spatialReference","wkt","wkid","isPseudoGeographic","v","xmin","ymax","P","blockWidth","blockHeight","origin","blockBoundary","O","xmax","ymin","j","BandProperties","bandProperties","dataType","B","L","A","length","push","z","pixelSize","storageInfo","isPseudoSpatialReference","colormap","statistics","nativeExtent","transform","polynomialOrder","forwardCoefficients","forwardTransform","histograms","byteLength","_readIFD","TIFF_TAGS","ifd","nextIFD","success","forEach","map","offlineOffsetSize","filter","Math","min","apply","has","valueOffset","GEO_KEYS","set","id","type","valueCount","requiredBufferSize","_getTileLocation","ranges","actualTileWidth","actualTileHeight","Promise","all","reduce","ArrayBuffer","getBlockWidthHeight","decodePixelBlock","format","customOptions","headerInfo","offsets","sizes","minRow","minCol","maxRow","maxCol","parse","recordSet","fromJSON","prototype","String","json","write","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/support/rasterDatasets/TIFFRaster.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../geometry.js\";import t from\"../../../core/Error.js\";import{unwrap as r,isSome as i,isNone as s}from\"../../../core/maybe.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as n}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"../RasterInfo.js\";import f from\"../RasterStorageInfo.js\";import l from\"./BaseRaster.js\";import u from\"./DBFParser.js\";import{parseSpatialReference as c,parsePAMInfo as p}from\"./pamParser.js\";import{parseSignature as m,getPyramidIFDs as h,getMaskIFDs as d,getImageInfo as y,parseIFD as g,parseFieldValues as T,isBSQConfig as x}from\"../rasterFormats/TiffDecoder.js\";import I from\"../rasterFormats/TiffTags.js\";import{estimateStatisticsFromHistograms as w}from\"../rasterFunctions/stretchUtils.js\";import _ from\"../rasterTransforms/PolynomialTransform.js\";import b from\"../../../rest/support/FeatureSet.js\";import F from\"../../../geometry/SpatialReference.js\";import S from\"../../../geometry/Extent.js\";import R from\"../../../geometry/Point.js\";const E=(e,t)=>e.get(t)?.values,k=(e,t)=>e.get(t)?.values?.[0];let D=class extends l{constructor(){super(...arguments),this._files=null,this._headerInfo=null,this._bufferSize=1048576,this.datasetFormat=\"TIFF\"}async open(e){await this.init();const s=e?r(e.signal):null,{data:a}=await this.request(this.url,{range:{from:0,to:this._bufferSize},responseType:\"array-buffer\",signal:s});if(!a)throw new t(\"tiffraster:open\",\"failed to open url \"+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf(\"/\")+1,this.url.lastIndexOf(\".\"));const{littleEndian:n,firstIFDPos:o,isBigTiff:f}=m(a),l=[];await this._readIFDs(l,a,n,o,0,f?8:4,s);const{imageInfo:u,rasterInfo:c}=this._parseIFDs(l),p=h(l),y=d(l);if(this._headerInfo={littleEndian:n,isBigTiff:f,ifds:l,pyramidIFDs:p,maskIFDs:y,...u},this._set(\"rasterInfo\",c),!u.isSupported)throw new t(\"tiffraster:open\",\"this tiff is not supported: \"+u.message);if(!u.tileWidth)throw new t(\"tiffraster:open\",\"none-tiled tiff is not optimized for access, convert to COG and retry.\");const{skipExtensions:g=[]}=this.ioConfig;if(!g.includes(\"aux.xml\")){const t=await this._fetchAuxiliaryMetaData(e);null!=t&&this._processPAMInfo(t,c)}g.includes(\"vat.dbf\")||1!==c.bandCount||\"u8\"!==c.pixelType||(c.attributeTable=await this._fetchAuxiliaryTable(e),i(c.attributeTable)&&(c.keyProperties.DataType=\"thematic\")),this.updateTileInfo()}async fetchRawTile(e,t,r,s={}){if(!this._headerInfo?.isSupported||this.isBlockOutside(e,t,r))return null;const a=await this._fetchRawTiffTile(e,t,r,!1,s);if(i(a)&&this._headerInfo.hasMaskBand){const n=await this._fetchRawTiffTile(e,t,r,!0,s);i(n)&&n.pixels[0]instanceof Uint8Array&&(a.mask=n.pixels[0])}return a}_parseIFDs(e){const t=y(e),{width:r,height:i,tileWidth:s,tileHeight:a,planes:n,pixelType:l,compression:u,firstPyramidLevel:p,maximumPyramidLevel:m,pyramidBlockWidth:h,pyramidBlockHeight:d,tileBoundary:g,affine:T,metadata:x}=t,I=t.extent.spatialReference?.wkt||t.extent.spatialReference?.wkid;let w=c(I),b=!!t.isPseudoGeographic;null==w&&(b=!0,w=new F({wkid:3857}));const D=new S({...t.extent,spatialReference:w}),v=new R(D?{x:D.xmin,y:D.ymax,spatialReference:w}:{x:0,y:0}),P=new f({blockWidth:s,blockHeight:a,pyramidBlockWidth:h,pyramidBlockHeight:d,compression:u,origin:v,firstPyramidLevel:p,maximumPyramidLevel:m,blockBoundary:g}),O=new R({x:(D.xmax-D.xmin)/r,y:(D.ymax-D.ymin)/i,spatialReference:w}),j=x?{BandProperties:x.bandProperties,DataType:x.dataType}:{};let B=null;const L=k(e[0],\"PHOTOMETRICINTERPRETATION\"),A=E(e[0],\"COLORMAP\");if(L<=3&&A?.length>3&&A.length%3==0){B=[];const e=A.length/3;for(let t=0;t<e;t++)B.push([t,A[t]>>>8,A[t+e]>>>8,A[t+2*e]>>>8])}const z=new o({width:r,height:i,bandCount:n,pixelType:l,pixelSize:O,storageInfo:P,spatialReference:w,isPseudoSpatialReference:b,keyProperties:j,extent:D,colormap:B,statistics:x?x.statistics:null});return T?.length&&(z.nativeExtent=new S({xmin:-.5,ymin:.5-i,xmax:r-.5,ymax:.5,spatialReference:w}),z.transform=new _({polynomialOrder:1,forwardCoefficients:[T[2]+T[0]/2,T[5]-T[3]/2,T[0],T[3],-T[1],-T[4]]}),z.extent=z.transform.forwardTransform(z.nativeExtent),z.pixelSize=new R({x:(D.xmax-D.xmin)/r,y:(D.ymax-D.ymin)/i,spatialReference:w}),P.origin.x=-.5,P.origin.y=.5),{imageInfo:t,rasterInfo:z}}_processPAMInfo(e,t){if(t.statistics=e.statistics??t.statistics,t.histograms=e.histograms,e.histograms&&s(t.statistics)&&(t.statistics=w(e.histograms)),e.transform&&s(t.transform)){t.transform=e.transform,t.nativeExtent=t.extent;const r=t.transform.forwardTransform(t.nativeExtent);t.pixelSize=new R({x:(r.xmax-r.xmin)/t.width,y:(r.ymax-r.ymin)/t.height,spatialReference:t.spatialReference}),t.extent=r}t.isPseudoSpatialReference&&e.spatialReference&&(t.spatialReference=e.spatialReference)}async _readIFDs(e,t,r,i,s,a=4,n){if(!i)return null;if(i>=t.byteLength||i<0){t=(await this.request(this.url,{range:{from:i+s,to:i+s+this._bufferSize},responseType:\"array-buffer\",signal:n})).data,s=i+s,i=0}const o=await this._readIFD(t,r,i,s,I.TIFF_TAGS,a,n);if(e.push(o.ifd),!o.nextIFD)return null;await this._readIFDs(e,t,r,o.nextIFD-s,s,a,n)}async _readIFD(e,t,r,s,a=I.TIFF_TAGS,n=4,o){if(!e)return null;const f=g(e,t,r,s,a,n);if(f.success){const r=[];if(f.ifd?.forEach((e=>{e.values||r.push(e)})),r.length>0){const a=r.map((e=>e.offlineOffsetSize)).filter(i),n=Math.min.apply(null,a.map((e=>e[0])));if(Math.min.apply(null,a.map((e=>e[0]+e[1])))-n<=this._bufferSize){const{data:i}=await this.request(this.url,{range:{from:n,to:n+this._bufferSize},responseType:\"array-buffer\",signal:o});e=i,s=n,r.forEach((r=>T(e,t,r,s)))}}if(f.ifd?.has(\"GEOKEYDIRECTORY\")){const r=f.ifd.get(\"GEOKEYDIRECTORY\"),i=r?.values;if(i&&i.length>4){const a=i[0]+\".\"+i[1]+\".\"+i[2],n=await this._readIFD(e,t,r.valueOffset+6-s,s,I.GEO_KEYS,2,o);r.data=n.ifd,r.data&&r.data.set(\"GEOTIFFVersion\",{id:0,type:2,valueCount:1,valueOffset:null,values:[a]})}}return f}if(f.requiredBufferSize&&f.requiredBufferSize!==e.byteLength){const r=await this.request(this.url,{range:{from:s,to:s+f.requiredBufferSize+4},responseType:\"array-buffer\",signal:o});return(e=r.data).byteLength<f.requiredBufferSize?null:this._readIFD(e,t,0,s,I.TIFF_TAGS,4,o)}}async _fetchRawTiffTile(e,t,r,i,s={}){const a=this._getTileLocation(e,t,r,i);if(!a)return null;const{ranges:n,actualTileWidth:o,actualTileHeight:f,ifd:l}=a,u=n.map((e=>this.request(this.url,{range:e,responseType:\"array-buffer\",signal:s.signal}))),c=await Promise.all(u),p=c.map((e=>e.data.byteLength)).reduce(((e,t)=>e+t)),m=1===c.length?c[0].data:new ArrayBuffer(p),h=[0],d=[0];if(c.length>1){const e=new Uint8Array(m);for(let t=0,r=0;t<c.length;t++){const i=c[t].data;e.set(new Uint8Array(i),r),h[t]=r,r+=i.byteLength,d[t]=i.byteLength}}const{blockWidth:y,blockHeight:g}=this.getBlockWidthHeight(e),T=await this.decodePixelBlock(m,{format:\"tiff\",customOptions:{headerInfo:this._headerInfo,ifd:l,offsets:h,sizes:d},width:y,height:g,planes:null,pixelType:null});if(null==T)return null;let x,I,w;if(o!==y||f!==g){let e=T.mask;if(e)for(x=0;x<g;x++)if(w=x*y,x<f)for(I=o;I<y;I++)e[w+I]=0;else for(I=0;I<y;I++)e[w+I]=0;else for(e=new Uint8Array(y*g),T.mask=e,x=0;x<f;x++)for(w=x*y,I=0;I<o;I++)e[w+I]=1}return T}_getTileLocation(e,t,r,i=!1){const{firstPyramidLevel:s,blockBoundary:a}=this.rasterInfo.storageInfo,n=0===e?0:e-(s-1),{_headerInfo:o}=this;if(!o)return null;const f=i?o.maskIFDs[n]:0===n?o?.ifds[0]:o?.pyramidIFDs[n-1];if(!f)return null;const l=x(f,o),u=E(f,\"TILEOFFSETS\");if(void 0===u)return null;const c=E(f,\"TILEBYTECOUNTS\"),{minRow:p,minCol:m,maxRow:h,maxCol:d}=a[n];if(t>h||r>d||t<p||r<m)return null;const y=k(f,\"IMAGEWIDTH\"),g=k(f,\"IMAGELENGTH\"),T=k(f,\"TILEWIDTH\"),I=k(f,\"TILELENGTH\"),w=l?this.rasterInfo.bandCount:1,_=w*t*(d+1)+r,b=[{from:u[_],to:u[_+w-1]+c[_+w-1]-1}];if(l){let e=!0;for(let t=0;t<w;t++)if(u[_+t]+c[_+t]!==u[_+t+1]){e=!1;break}if(!e)for(let t=0;t<w;t++)b[t]={from:u[_+t],to:u[_+t]+c[_+t]-1}}const F=u[_],S=c[_];if(null==F||null==S)return null;return{ranges:b,ifd:f,actualTileWidth:r===d&&y%T||T,actualTileHeight:t===h&&g%I||I}}async _fetchAuxiliaryMetaData(e){try{const{data:t}=await this.request(this.url+\".aux.xml\",{responseType:\"xml\",signal:e?.signal});return p(t)}catch{return null}}async _fetchAuxiliaryTable(e){try{const{data:t}=await this.request(this.url+\".vat.dbf\",{responseType:\"array-buffer\",signal:e?.signal}),r=u.parse(t);return r?.recordSet?b.fromJSON(r.recordSet):null}catch{return null}}};e([a()],D.prototype,\"_files\",void 0),e([a()],D.prototype,\"_headerInfo\",void 0),e([a()],D.prototype,\"_bufferSize\",void 0),e([a({type:String,json:{write:!0}})],D.prototype,\"datasetFormat\",void 0),D=e([n(\"esri.layers.support.rasterDatasets.TIFFRaster\")],D);const v=D;export{v as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}