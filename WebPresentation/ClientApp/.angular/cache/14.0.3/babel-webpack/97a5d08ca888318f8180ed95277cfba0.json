{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { throwIfAborted as e } from \"../../../../../core/promiseUtils.js\";\nimport { areStreamlinesCompatible as t, setUniforms as a } from \"../utils.js\";\nimport { BufferObject as s } from \"../../../../webgl/BufferObject.js\";\nimport { DataType as r, BlendFactor as i, PrimitiveType as o, Usage as n } from \"../../../../webgl/enums.js\";\nimport { VertexArrayObject as m } from \"../../../../webgl/VertexArrayObject.js\";\nimport { VertexElementDescriptor as p } from \"../../../../webgl/VertexElementDescriptor.js\";\n\nclass _ {\n  constructor(e) {\n    this._params = e;\n  }\n\n  get animated() {\n    return this._params.flowSpeed > 0;\n  }\n\n  isCompatible(e) {\n    return e instanceof _ && t(this._params, e._params);\n  }\n\n  load(t, a) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        extent: s,\n        size: r\n      } = t;\n      e(a);\n      const i = yield _this._params.loadImagery(s, r[0], r[1], _this._params.timeExtent, a),\n            {\n        vertexData: o,\n        indexData: n\n      } = yield _this._params.createFlowMesh(\"Streamlines\", _this._params.simulationSettings, i, a);\n      return new d(o, n, {\n        color: _this._params.color,\n        opacity: _this._params.opacity,\n        size: _this._params.size\n      });\n    })();\n  }\n\n  render(e, t, s) {\n    const {\n      context: n\n    } = e,\n          {\n      program: m\n    } = s;\n    n.setFaceCullingEnabled(!1), n.setBlendingEnabled(!0), n.setBlendFunction(i.ONE, i.ONE_MINUS_SRC_ALPHA), n.useProgram(m), m.setUniform1f(\"u_time\", t.time), m.setUniform1f(\"u_trailLength\", this._params.trailLength), m.setUniform1f(\"u_flowSpeed\", this._params.flowSpeed), m.setUniform1f(\"u_featheringSize\", this._params.featheringSize), m.setUniform1f(\"u_featheringOffset\", this._params.featheringOffset), m.setUniform1f(\"u_introFade\", this._params.introFade ? 1 : 0), m.setUniform1f(\"u_fadeToZero\", this._params.fadeToZero ? 1 : 0), m.setUniform1f(\"u_decayRate\", this._params.decayRate), m.setUniformMatrix3fv(\"u_dvsMat3\", t.dvsMat3), m.setUniformMatrix3fv(\"u_displayViewMat3\", t.displayViewMat3), a(m, \"color\", \"vec4\", this._params.color), a(m, \"opacity\", \"float\", this._params.opacity), a(m, \"size\", \"float\", this._params.size), n.bindVAO(s.vertexArray), n.drawElements(o.TRIANGLES, s.indexCount, r.UNSIGNED_INT, 0);\n  }\n\n}\n\nconst l = new Map();\nl.set(\"a_positionAndSide\", 0), l.set(\"a_timeInfo\", 1), l.set(\"a_extrude\", 2), l.set(\"a_speed\", 3);\nconst h = {\n  geometry: [new p(\"a_positionAndSide\", 3, r.FLOAT, 0, 36), new p(\"a_timeInfo\", 3, r.FLOAT, 12, 36), new p(\"a_extrude\", 2, r.FLOAT, 24, 36), new p(\"a_speed\", 1, r.FLOAT, 32, 36)]\n},\n      f = {\n  vsPath: \"raster/flow/streamlines\",\n  fsPath: \"raster/flow/streamlines\",\n  attributes: l\n};\n\nclass d {\n  constructor(e, t, a) {\n    this._vertexData = e, this._indexData = t, this._values = a;\n  }\n\n  attach(e) {\n    const {\n      context: t\n    } = e,\n          a = s.createVertex(t, n.STATIC_DRAW, this._vertexData),\n          r = s.createIndex(t, n.STATIC_DRAW, this._indexData),\n          i = new m(t, l, h, {\n      geometry: a\n    }, r),\n          o = [];\n    \"ramp\" === this._values.color.kind && o.push(\"vvColor\"), \"ramp\" === this._values.opacity.kind && o.push(\"vvOpacity\"), \"ramp\" === this._values.size.kind && o.push(\"vvSize\");\n    const p = e.painter.materialManager.getProgram(f, o);\n    this.vertexArray = i, this.program = p, this.indexCount = this._indexData.length, this._vertexData = null, this._indexData = null;\n  }\n\n  detach() {\n    this.vertexArray.dispose();\n  }\n\n  get ready() {\n    return this.program.compiled;\n  }\n\n}\n\nexport { _ as default };","map":{"version":3,"names":["throwIfAborted","e","areStreamlinesCompatible","t","setUniforms","a","BufferObject","s","DataType","r","BlendFactor","i","PrimitiveType","o","Usage","n","VertexArrayObject","m","VertexElementDescriptor","p","_","constructor","_params","animated","flowSpeed","isCompatible","load","extent","size","loadImagery","timeExtent","vertexData","indexData","createFlowMesh","simulationSettings","d","color","opacity","render","context","program","setFaceCullingEnabled","setBlendingEnabled","setBlendFunction","ONE","ONE_MINUS_SRC_ALPHA","useProgram","setUniform1f","time","trailLength","featheringSize","featheringOffset","introFade","fadeToZero","decayRate","setUniformMatrix3fv","dvsMat3","displayViewMat3","bindVAO","vertexArray","drawElements","TRIANGLES","indexCount","UNSIGNED_INT","l","Map","set","h","geometry","FLOAT","f","vsPath","fsPath","attributes","_vertexData","_indexData","_values","attach","createVertex","STATIC_DRAW","createIndex","kind","push","painter","materialManager","getProgram","length","detach","dispose","ready","compiled","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/flow/styles/Streamlines.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as e}from\"../../../../../core/promiseUtils.js\";import{areStreamlinesCompatible as t,setUniforms as a}from\"../utils.js\";import{BufferObject as s}from\"../../../../webgl/BufferObject.js\";import{DataType as r,BlendFactor as i,PrimitiveType as o,Usage as n}from\"../../../../webgl/enums.js\";import{VertexArrayObject as m}from\"../../../../webgl/VertexArrayObject.js\";import{VertexElementDescriptor as p}from\"../../../../webgl/VertexElementDescriptor.js\";class _{constructor(e){this._params=e}get animated(){return this._params.flowSpeed>0}isCompatible(e){return e instanceof _&&t(this._params,e._params)}async load(t,a){const{extent:s,size:r}=t;e(a);const i=await this._params.loadImagery(s,r[0],r[1],this._params.timeExtent,a),{vertexData:o,indexData:n}=await this._params.createFlowMesh(\"Streamlines\",this._params.simulationSettings,i,a);return new d(o,n,{color:this._params.color,opacity:this._params.opacity,size:this._params.size})}render(e,t,s){const{context:n}=e,{program:m}=s;n.setFaceCullingEnabled(!1),n.setBlendingEnabled(!0),n.setBlendFunction(i.ONE,i.ONE_MINUS_SRC_ALPHA),n.useProgram(m),m.setUniform1f(\"u_time\",t.time),m.setUniform1f(\"u_trailLength\",this._params.trailLength),m.setUniform1f(\"u_flowSpeed\",this._params.flowSpeed),m.setUniform1f(\"u_featheringSize\",this._params.featheringSize),m.setUniform1f(\"u_featheringOffset\",this._params.featheringOffset),m.setUniform1f(\"u_introFade\",this._params.introFade?1:0),m.setUniform1f(\"u_fadeToZero\",this._params.fadeToZero?1:0),m.setUniform1f(\"u_decayRate\",this._params.decayRate),m.setUniformMatrix3fv(\"u_dvsMat3\",t.dvsMat3),m.setUniformMatrix3fv(\"u_displayViewMat3\",t.displayViewMat3),a(m,\"color\",\"vec4\",this._params.color),a(m,\"opacity\",\"float\",this._params.opacity),a(m,\"size\",\"float\",this._params.size),n.bindVAO(s.vertexArray),n.drawElements(o.TRIANGLES,s.indexCount,r.UNSIGNED_INT,0)}}const l=new Map;l.set(\"a_positionAndSide\",0),l.set(\"a_timeInfo\",1),l.set(\"a_extrude\",2),l.set(\"a_speed\",3);const h={geometry:[new p(\"a_positionAndSide\",3,r.FLOAT,0,36),new p(\"a_timeInfo\",3,r.FLOAT,12,36),new p(\"a_extrude\",2,r.FLOAT,24,36),new p(\"a_speed\",1,r.FLOAT,32,36)]},f={vsPath:\"raster/flow/streamlines\",fsPath:\"raster/flow/streamlines\",attributes:l};class d{constructor(e,t,a){this._vertexData=e,this._indexData=t,this._values=a}attach(e){const{context:t}=e,a=s.createVertex(t,n.STATIC_DRAW,this._vertexData),r=s.createIndex(t,n.STATIC_DRAW,this._indexData),i=new m(t,l,h,{geometry:a},r),o=[];\"ramp\"===this._values.color.kind&&o.push(\"vvColor\"),\"ramp\"===this._values.opacity.kind&&o.push(\"vvOpacity\"),\"ramp\"===this._values.size.kind&&o.push(\"vvSize\");const p=e.painter.materialManager.getProgram(f,o);this.vertexArray=i,this.program=p,this.indexCount=this._indexData.length,this._vertexData=null,this._indexData=null}detach(){this.vertexArray.dispose()}get ready(){return this.program.compiled}}export{_ as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}