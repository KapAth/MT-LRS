{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as r } from \"../../../../core/maybe.js\";\nimport { WGLDrawPhase as e } from \"./enums.js\";\nimport { createProgramTemplate as t } from \"./shaders/MaterialPrograms.js\";\n\nconst a = r => r === e.HITTEST || r === e.LABEL_ALPHA,\n      s = r => (a(r) ? 1 : 0) | (r === e.HIGHLIGHT ? 2 : 0),\n      o = ({\n  rendererInfo: e,\n  drawPhase: t\n}, a, o) => `${a.getVariationHash()}-${s(t)}-${e.getVariationHash()}-${r(o) && o.join(\".\")}`,\n      i = (t, s, o, i = {}) => {\n  if (i = { ...i,\n    ...s.getVariation(),\n    ...t.rendererInfo.getVariation(),\n    highlight: t.drawPhase === e.HIGHLIGHT,\n    id: a(t.drawPhase)\n  }, r(o)) for (const r of o) i[r] = !0;\n  return i;\n};\n\nclass h {\n  constructor(r) {\n    this._rctx = r, this._programByKey = new Map();\n  }\n\n  dispose() {\n    this._programByKey.forEach(r => r.dispose()), this._programByKey.clear();\n  }\n\n  getProgram(r, e = []) {\n    const a = r.vsPath + \".\" + r.fsPath + JSON.stringify(e);\n    if (this._programByKey.has(a)) return this._programByKey.get(a);\n\n    const s = { ...e.map(r => \"string\" == typeof r ? {\n        name: r,\n        value: !0\n      } : r).reduce((r, e) => ({ ...r,\n        [e.name]: e.value\n      }), {})\n    },\n          {\n      vsPath: o,\n      fsPath: i,\n      attributes: h\n    } = r,\n          n = t(o, i, h, s),\n          g = this._rctx.programCache.acquire(n.shaders.vertexShader, n.shaders.fragmentShader, n.attributes);\n\n    if (!g) throw new Error(\"Unable to get program for key: ${key}\");\n    return this._programByKey.set(a, g), g;\n  }\n\n  getMaterialProgram(r, e, a, s, h) {\n    const n = o(r, e, h);\n    if (this._programByKey.has(n)) return this._programByKey.get(n);\n\n    const g = i(r, e, h, {\n      ignoresSamplerPrecision: r.context.driverTest.ignoresSamplerPrecision.result\n    }),\n          m = t(a, a, s, g),\n          y = this._rctx.programCache.acquire(m.shaders.vertexShader, m.shaders.fragmentShader, m.attributes);\n\n    if (!y) throw new Error(\"Unable to get program for key: ${key}\");\n    return this._programByKey.set(n, y), y;\n  }\n\n}\n\nexport { h as default };","map":{"version":3,"names":["isSome","r","WGLDrawPhase","e","createProgramTemplate","t","a","HITTEST","LABEL_ALPHA","s","HIGHLIGHT","o","rendererInfo","drawPhase","getVariationHash","join","i","getVariation","highlight","id","h","constructor","_rctx","_programByKey","Map","dispose","forEach","clear","getProgram","vsPath","fsPath","JSON","stringify","has","get","map","name","value","reduce","attributes","n","g","programCache","acquire","shaders","vertexShader","fragmentShader","Error","set","getMaterialProgram","ignoresSamplerPrecision","context","driverTest","result","m","y","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/webgl/MaterialManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../core/maybe.js\";import{WGLDrawPhase as e}from\"./enums.js\";import{createProgramTemplate as t}from\"./shaders/MaterialPrograms.js\";const a=r=>r===e.HITTEST||r===e.LABEL_ALPHA,s=r=>(a(r)?1:0)|(r===e.HIGHLIGHT?2:0),o=({rendererInfo:e,drawPhase:t},a,o)=>`${a.getVariationHash()}-${s(t)}-${e.getVariationHash()}-${r(o)&&o.join(\".\")}`,i=(t,s,o,i={})=>{if(i={...i,...s.getVariation(),...t.rendererInfo.getVariation(),highlight:t.drawPhase===e.HIGHLIGHT,id:a(t.drawPhase)},r(o))for(const r of o)i[r]=!0;return i};class h{constructor(r){this._rctx=r,this._programByKey=new Map}dispose(){this._programByKey.forEach((r=>r.dispose())),this._programByKey.clear()}getProgram(r,e=[]){const a=r.vsPath+\".\"+r.fsPath+JSON.stringify(e);if(this._programByKey.has(a))return this._programByKey.get(a);const s={...e.map((r=>\"string\"==typeof r?{name:r,value:!0}:r)).reduce(((r,e)=>({...r,[e.name]:e.value})),{})},{vsPath:o,fsPath:i,attributes:h}=r,n=t(o,i,h,s),g=this._rctx.programCache.acquire(n.shaders.vertexShader,n.shaders.fragmentShader,n.attributes);if(!g)throw new Error(\"Unable to get program for key: ${key}\");return this._programByKey.set(a,g),g}getMaterialProgram(r,e,a,s,h){const n=o(r,e,h);if(this._programByKey.has(n))return this._programByKey.get(n);const g=i(r,e,h,{ignoresSamplerPrecision:r.context.driverTest.ignoresSamplerPrecision.result}),m=t(a,a,s,g),y=this._rctx.programCache.acquire(m.shaders.vertexShader,m.shaders.fragmentShader,m.attributes);if(!y)throw new Error(\"Unable to get program for key: ${key}\");return this._programByKey.set(n,y),y}}export{h as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}