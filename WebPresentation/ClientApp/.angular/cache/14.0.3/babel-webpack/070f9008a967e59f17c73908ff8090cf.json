{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { W as e } from \"../../../chunks/languageUtils.js\";\nimport { FeatureSetError as t, FeatureSetErrorCodes as r } from \"../support/errorsupport.js\";\nimport n from \"../support/FeatureSet.js\";\nimport s from \"../support/IdSet.js\";\nimport i from \"../support/OrderbyClause.js\";\n\nclass a extends n {\n  constructor(e) {\n    super(e), this._orderbyclause = null, this.declaredClass = \"esri.arcade.featureset.actions.OrderBy\", this._maxProcessing = 100, this._orderbyclause = e.orderbyclause, this._parent = e.parentfeatureset;\n  }\n\n  _getSet(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (null === _this._wset) {\n        yield _this._ensureLoaded();\n        const t = yield _this._getFilteredSet(\"\", null, null, _this._orderbyclause, e);\n        return _this._checkCancelled(e), _this._wset = t, _this._wset;\n      }\n\n      return _this._wset;\n    })();\n  }\n\n  manualOrderSet(e, t) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const r = yield _this2.getIdColumnDictionary(e, [], -1, t);\n      _this2._orderbyclause?.order(r);\n      const n = new s([], [], !0, null);\n\n      for (let s = 0; s < r.length; s++) n._known.push(r[s].id);\n\n      return n;\n    })();\n  }\n\n  getIdColumnDictionary(t, r, n, s) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (n < t._known.length - 1) {\n        const i = _this3._maxQueryRate();\n\n        if (\"GETPAGES\" === t._known[n + 1]) return yield e(_this3._parent._expandPagedSet(t, i, 0, 0, s)), _this3.getIdColumnDictionary(t, r, n, s);\n        let a = n + 1;\n        const o = [];\n\n        for (; a < t._known.length && \"GETPAGES\" !== t._known[a];) o.push(t._known[a]), a++;\n\n        n += o.length;\n        const u = yield e(_this3._parent._getFeatureBatch(o, s));\n\n        _this3._checkCancelled(s);\n\n        for (const e of u) r.push({\n          id: e.attributes[_this3.objectIdField],\n          feature: e\n        });\n\n        return _this3.getIdColumnDictionary(t, r, n, s);\n      }\n\n      return t._candidates.length > 0 ? (yield e(_this3._refineSetBlock(t, _this3._maxProcessingRate(), s)), _this3._checkCancelled(s), _this3.getIdColumnDictionary(t, r, n, s)) : r;\n    })();\n  }\n\n  _isInFeatureSet(e) {\n    return this._parent._isInFeatureSet(e);\n  }\n\n  _getFeatures(e, t, r, n) {\n    return this._parent._getFeatures(e, t, r, n);\n  }\n\n  _featureFromCache(e) {\n    if (void 0 === this._featureCache[e]) {\n      const t = this._parent._featureFromCache(e);\n\n      if (void 0 === t) return;\n      return null === t ? null : (this._featureCache[e] = t, t);\n    }\n\n    return this._featureCache[e];\n  }\n\n  _fetchAndRefineFeatures() {\n    return _asyncToGenerator(function* () {\n      throw new t(r.NeverReach);\n    })();\n  }\n\n  _getFilteredSet(e, t, r, n, i) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this4._ensureLoaded();\n      const a = yield _this4._parent._getFilteredSet(e, t, r, null === n ? _this4._orderbyclause : n, i);\n\n      _this4._checkCancelled(i);\n\n      const o = new s(a._candidates.slice(0), a._known.slice(0), a._ordered, _this4._clonePageDefinition(a.pagesDefinition));\n      let u = !0;\n\n      if (a._candidates.length > 0 && (u = !1), !1 === o._ordered) {\n        let e = yield _this4.manualOrderSet(o, i);\n        return !1 === u && (null === t && null === r || (e = new s(e._candidates.slice(0).concat(e._known.slice(0)), [], e._ordered, _this4._clonePageDefinition(e.pagesDefinition)))), e;\n      }\n\n      return o;\n    })();\n  }\n\n  static registerAction() {\n    n._featuresetFunctions.orderBy = function (e) {\n      return \"\" === e ? this : new a({\n        parentfeatureset: this,\n        orderbyclause: new i(e)\n      });\n    };\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"names":["W","e","FeatureSetError","t","FeatureSetErrorCodes","r","n","s","i","a","constructor","_orderbyclause","declaredClass","_maxProcessing","orderbyclause","_parent","parentfeatureset","_getSet","_wset","_ensureLoaded","_getFilteredSet","_checkCancelled","manualOrderSet","getIdColumnDictionary","order","length","_known","push","id","_maxQueryRate","_expandPagedSet","o","u","_getFeatureBatch","attributes","objectIdField","feature","_candidates","_refineSetBlock","_maxProcessingRate","_isInFeatureSet","_getFeatures","_featureFromCache","_featureCache","_fetchAndRefineFeatures","NeverReach","slice","_ordered","_clonePageDefinition","pagesDefinition","concat","registerAction","_featuresetFunctions","orderBy","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{W as e}from\"../../../chunks/languageUtils.js\";import{FeatureSetError as t,FeatureSetErrorCodes as r}from\"../support/errorsupport.js\";import n from\"../support/FeatureSet.js\";import s from\"../support/IdSet.js\";import i from\"../support/OrderbyClause.js\";class a extends n{constructor(e){super(e),this._orderbyclause=null,this.declaredClass=\"esri.arcade.featureset.actions.OrderBy\",this._maxProcessing=100,this._orderbyclause=e.orderbyclause,this._parent=e.parentfeatureset}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,this._orderbyclause,e);return this._checkCancelled(e),this._wset=t,this._wset}return this._wset}async manualOrderSet(e,t){const r=await this.getIdColumnDictionary(e,[],-1,t);this._orderbyclause?.order(r);const n=new s([],[],!0,null);for(let s=0;s<r.length;s++)n._known.push(r[s].id);return n}async getIdColumnDictionary(t,r,n,s){if(n<t._known.length-1){const i=this._maxQueryRate();if(\"GETPAGES\"===t._known[n+1])return await e(this._parent._expandPagedSet(t,i,0,0,s)),this.getIdColumnDictionary(t,r,n,s);let a=n+1;const o=[];for(;a<t._known.length&&\"GETPAGES\"!==t._known[a];)o.push(t._known[a]),a++;n+=o.length;const u=await e(this._parent._getFeatureBatch(o,s));this._checkCancelled(s);for(const e of u)r.push({id:e.attributes[this.objectIdField],feature:e});return this.getIdColumnDictionary(t,r,n,s)}return t._candidates.length>0?(await e(this._refineSetBlock(t,this._maxProcessingRate(),s)),this._checkCancelled(s),this.getIdColumnDictionary(t,r,n,s)):r}_isInFeatureSet(e){return this._parent._isInFeatureSet(e)}_getFeatures(e,t,r,n){return this._parent._getFeatures(e,t,r,n)}_featureFromCache(e){if(void 0===this._featureCache[e]){const t=this._parent._featureFromCache(e);if(void 0===t)return;return null===t?null:(this._featureCache[e]=t,t)}return this._featureCache[e]}async _fetchAndRefineFeatures(){throw new t(r.NeverReach)}async _getFilteredSet(e,t,r,n,i){await this._ensureLoaded();const a=await this._parent._getFilteredSet(e,t,r,null===n?this._orderbyclause:n,i);this._checkCancelled(i);const o=new s(a._candidates.slice(0),a._known.slice(0),a._ordered,this._clonePageDefinition(a.pagesDefinition));let u=!0;if(a._candidates.length>0&&(u=!1),!1===o._ordered){let e=await this.manualOrderSet(o,i);return!1===u&&(null===t&&null===r||(e=new s(e._candidates.slice(0).concat(e._known.slice(0)),[],e._ordered,this._clonePageDefinition(e.pagesDefinition)))),e}return o}static registerAction(){n._featuresetFunctions.orderBy=function(e){return\"\"===e?this:new a({parentfeatureset:this,orderbyclause:new i(e)})}}}export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}