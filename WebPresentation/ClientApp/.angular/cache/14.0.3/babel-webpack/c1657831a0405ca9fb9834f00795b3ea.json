{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../Graphic.js\";\nimport { ArcadeDate as t } from \"../../ArcadeDate.js\";\nimport { cloneGeometry as r } from \"../../kernel.js\";\nimport { SqlError as s, SqlErrorCodes as a, FeatureSetError as i, FeatureSetErrorCodes as l } from \"../support/errorsupport.js\";\nimport n from \"../support/FeatureSet.js\";\nimport o from \"../support/IdSet.js\";\nimport { cloneField as h, FeatureServiceDatabaseType as u, layerGeometryEsriConstants as c } from \"../support/shared.js\";\nimport { reformulateWithoutField as d, toWhereClause as p, translateFunctionToDatabaseSpecific as f, makeToday as g, makeDateString as N, arcadeDateToSqlString as _, convertIntervalToSql as S, combine as w, scanForField as m } from \"../support/sqlUtils.js\";\nimport { unwrapOrThrow as v, assertIsSome as C } from \"../../../core/maybe.js\";\nimport { WhereClause as T } from \"../../../core/sql/WhereClause.js\";\nimport F from \"../../../geometry/SpatialReference.js\";\n\nclass W {\n  constructor(e) {\n    this.field = e, this.sqlRewritable = !1;\n  }\n\n  postInitialization(e, t) {}\n\n}\n\nclass E extends W {\n  constructor(e) {\n    super(e), this.sqlRewritable = !0;\n  }\n\n  extractValue(e) {\n    return e.attributes[this.field.name];\n  }\n\n  rewriteSql(e) {\n    return {\n      rewritten: this.sqlRewritable,\n      where: e\n    };\n  }\n\n}\n\nclass x extends W {\n  constructor(e, t, r) {\n    super(h(e)), this.originalField = e, this.sqlRewritable = !0, this.field.name = t, this.field.alias = r;\n  }\n\n  rewriteSql(e, t) {\n    return {\n      rewritten: this.sqlRewritable,\n      where: d(e, this.field.name, this.originalField.name, t.getFieldsIndex())\n    };\n  }\n\n  extractValue(e) {\n    return e.attributes[this.originalField.name];\n  }\n\n}\n\nclass A extends W {\n  constructor(e, t, r) {\n    super(e), this.codefield = t, this.lkp = r, this.reverseLkp = {};\n\n    for (const s in r) this.reverseLkp[r[s]] = s;\n\n    this.sqlRewritable = !0;\n  }\n\n  rewriteSql(e, t) {\n    const r = this.evaluateNodeToWhereClause(e.parseTree, u.Standardised, this.field.name, this.codefield instanceof T ? p(this.codefield, u.Standardised) : this.codefield, e.parameters);\n    return r.includes(A.BADNESS) ? {\n      rewritten: !1,\n      where: e\n    } : {\n      rewritten: this.sqlRewritable,\n      where: T.create(r, v(t._parent).getFieldsIndex())\n    };\n  }\n\n  evaluateNodeToWhereClause(e, r, i = null, l = null, n) {\n    let o, h, u, c;\n\n    switch (e.type) {\n      case \"interval\":\n        return S(this.evaluateNodeToWhereClause(e.value, r, i, l, n), e.qualifier, e.op);\n\n      case \"case-expression\":\n        {\n          let t = \" CASE \";\n          \"simple\" === e.format && (t += this.evaluateNodeToWhereClause(e.operand, r, i, A.BADNESS, n));\n\n          for (let s = 0; s < e.clauses.length; s++) t += \" WHEN \" + this.evaluateNodeToWhereClause(e.clauses[s].operand, r, i, A.BADNESS, n) + \" THEN \" + this.evaluateNodeToWhereClause(e.clauses[s].value, r, i, A.BADNESS, n);\n\n          return null !== e.else && (t += \" ELSE \" + this.evaluateNodeToWhereClause(e.else, r, i, A.BADNESS, n)), t += \" END \", t;\n        }\n\n      case \"parameter\":\n        {\n          const s = n[e.value.toLowerCase()];\n          if (\"string\" == typeof s) return \"'\" + s.toString().replace(/'/g, \"''\") + \"'\";\n          if (s instanceof Date) return N(s, r, null);\n          if (s instanceof t) return _(s, r, null);\n\n          if (s instanceof Array) {\n            const e = [];\n\n            for (let a = 0; a < s.length; a++) \"string\" == typeof s[a] ? e.push(\"'\" + s[a].toString().replace(/'/g, \"''\") + \"'\") : s[a] instanceof Date ? e.push(N(s[a], r, null)) : s[a] instanceof t ? e.push(_(s[a], r, null)) : e.push(s[a].toString());\n\n            return e;\n          }\n\n          return s.toString();\n        }\n\n      case \"expression-list\":\n        h = [];\n\n        for (const t of e.value) h.push(this.evaluateNodeToWhereClause(t, r, i, l, n));\n\n        return h;\n\n      case \"unary-expression\":\n        return \" ( NOT \" + this.evaluateNodeToWhereClause(e.expr, r, i, A.BADNESS, n) + \" ) \";\n\n      case \"binary-expression\":\n        switch (e.operator) {\n          case \"AND\":\n            return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" AND \" + this.evaluateNodeToWhereClause(e.right, r, i, l, n) + \") \";\n\n          case \"OR\":\n            return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" OR \" + this.evaluateNodeToWhereClause(e.right, r, i, l, n) + \") \";\n\n          case \"IS\":\n            if (\"null\" !== e.right.type) throw new s(a.UnsupportedIsRhs);\n            return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" IS NULL )\";\n\n          case \"ISNOT\":\n            if (\"null\" !== e.right.type) throw new s(a.UnsupportedIsRhs);\n            return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" IS NOT NULL )\";\n\n          case \"IN\":\n            if (o = [], \"expression-list\" === e.right.type) {\n              if (\"column-reference\" === e.left.type && e.left.column.toUpperCase() === this.field.name.toUpperCase()) {\n                const t = [];\n                let s = !0;\n\n                for (const r of e.right.value) {\n                  if (\"string\" !== r.type) {\n                    s = !1;\n                    break;\n                  }\n\n                  if (void 0 === this.lkp[r.value]) {\n                    s = !1;\n                    break;\n                  }\n\n                  t.push(this.lkp[r.value].toString());\n                }\n\n                if (s) return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" IN (\" + t.join(\",\") + \")) \";\n              }\n\n              return o = this.evaluateNodeToWhereClause(e.right, r, i, l, n), \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" IN (\" + o.join(\",\") + \")) \";\n            }\n\n            return c = this.evaluateNodeToWhereClause(e.right, r, i, l, n), c instanceof Array ? \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" IN (\" + c.join(\",\") + \")) \" : \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" IN (\" + c + \")) \";\n\n          case \"NOT IN\":\n            if (o = [], \"expression-list\" === e.right.type) {\n              if (\"column-reference\" === e.left.type && e.left.column.toUpperCase() === this.field.name.toUpperCase()) {\n                const t = [];\n                let s = !0;\n\n                for (const r of e.right.value) {\n                  if (\"string\" !== r.type) {\n                    s = !1;\n                    break;\n                  }\n\n                  if (void 0 === this.lkp[r.value]) {\n                    s = !1;\n                    break;\n                  }\n\n                  t.push(this.lkp[r.value].toString());\n                }\n\n                if (s) return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" NOT IN (\" + t.join(\",\") + \")) \";\n              }\n\n              return o = this.evaluateNodeToWhereClause(e.right, r, i, l, n), \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" NOT IN (\" + o.join(\",\") + \")) \";\n            }\n\n            return c = this.evaluateNodeToWhereClause(e.right, r, i, l, n), c instanceof Array ? \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" NOT IN (\" + c.join(\",\") + \")) \" : \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, l, n) + \" NOT IN (\" + c + \")) \";\n\n          case \"BETWEEN\":\n            return u = this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n), \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" BETWEEN \" + u[0] + \" AND \" + u[1] + \" ) \";\n\n          case \"NOTBETWEEN\":\n            return u = this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n), \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" NOT BETWEEN \" + u[0] + \" AND \" + u[1] + \" ) \";\n\n          case \"LIKE\":\n            return \"\" !== e.escape ? \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" LIKE \" + this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n) + \" ESCAPE '\" + e.escape + \"') \" : \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" LIKE \" + this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n) + \") \";\n\n          case \"NOT LIKE\":\n            return \"\" !== e.escape ? \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" NOT LIKE \" + this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n) + \" ESCAPE '\" + e.escape + \"') \" : \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" NOT LIKE \" + this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n) + \") \";\n\n          case \"<>\":\n          case \"=\":\n            if (\"column-reference\" === e.left.type && \"string\" === e.right.type) {\n              if (e.left.column.toUpperCase() === this.field.name.toUpperCase() && void 0 !== this.lkp[e.right.value.toString()]) return \" (\" + l + \" \" + e.operator + \" \" + this.lkp[e.right.value.toString()].toString() + \") \";\n            } else if (\"column-reference\" === e.right.type && \"string\" === e.left.type && e.right.column.toUpperCase() === this.field.name.toUpperCase()) return \" (\" + this.lkp[e.right.value.toString()].toString() + \" \" + e.operator + \" \" + l + \") \";\n\n            return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" \" + e.operator + \" \" + this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n) + \") \";\n\n          case \"<\":\n          case \">\":\n          case \">=\":\n          case \"<=\":\n          case \"*\":\n          case \"-\":\n          case \"+\":\n          case \"/\":\n          case \"||\":\n            return \" (\" + this.evaluateNodeToWhereClause(e.left, r, i, A.BADNESS, n) + \" \" + e.operator + \" \" + this.evaluateNodeToWhereClause(e.right, r, i, A.BADNESS, n) + \") \";\n        }\n\n      case \"null\":\n        return \"null\";\n\n      case \"boolean\":\n        return !0 === e.value ? \"1\" : \"0\";\n\n      case \"string\":\n        return \"'\" + e.value.toString().replace(/'/g, \"''\") + \"'\";\n\n      case \"timestamp\":\n      case \"date\":\n        return N(e.value, r, null);\n\n      case \"number\":\n        return e.value.toString();\n\n      case \"current-time\":\n        return g(\"date\" === e.mode, r);\n\n      case \"column-reference\":\n        return i && i.toLowerCase() === e.column.toLowerCase() ? \"(\" + l + \")\" : e.column;\n\n      case \"data-type\":\n        return e.value;\n\n      case \"function\":\n        {\n          const t = this.evaluateNodeToWhereClause(e.args, r, i, A.BADNESS, n);\n          return f(e.name, t, r);\n        }\n    }\n\n    throw new s(a.UnsupportedSyntax, {\n      node: e.type\n    });\n  }\n\n  extractValue(e) {\n    return this.codefield instanceof T ? this.reverseLkp[this.codefield.calculateValueCompiled(e)] : this.reverseLkp[e.attributes[this.codefield]];\n  }\n\n}\n\nA.BADNESS = \"_!!!_BAD_LKP_!!!!\";\n\nclass y extends W {\n  constructor(e, t) {\n    super(e), this._sql = t;\n  }\n\n  rewriteSql(e, t) {\n    return {\n      rewritten: !0,\n      where: d(e, this.field.name, p(this._sql, u.Standardised), t.getFieldsIndex())\n    };\n  }\n\n  extractValue(e) {\n    return this._sql.calculateValueCompiled(e);\n  }\n\n}\n\nclass D extends n {\n  static findField(e, t) {\n    for (const r of e) if (r.name.toLowerCase() === t.toString().toLowerCase()) return r;\n\n    return null;\n  }\n\n  constructor(e) {\n    super(e), this._calcFunc = null, this.declaredClass = \"esri.arcade.featureset.actions.Adapted\", this.adaptedFields = [], this._extraFilter = null, this._extraFilter = e.extraFilter, this._parent = e.parentfeatureset, this._maxProcessing = 30, this.adaptedFields = e.adaptedFields;\n  }\n\n  _initialiseFeatureSet() {\n    null !== this._parent ? (this.geometryType = this._parent.geometryType, this.objectIdField = this._parent.objectIdField, this.globalIdField = this._parent.globalIdField, this.spatialReference = this._parent.spatialReference, this.hasM = this._parent.hasM, this.hasZ = this._parent.hasZ, this.typeIdField = this._parent.typeIdField, this.types = this._parent.types) : (this.spatialReference = new F({\n      wkid: 4326\n    }), this.objectIdField = \"\", this.globalIdField = \"\", this.geometryType = c.point, this.typeIdField = \"\", this.types = null), this.fields = [];\n\n    for (const e of this.adaptedFields) e.postInitialization(this, this._parent), this.fields.push(e.field);\n  }\n\n  _getSet(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (null === _this._wset) {\n        yield _this._ensureLoaded();\n        let t = null;\n        return t = _this._extraFilter ? yield _this._getFilteredSet(\"\", null, null, null, e) : yield _this._parent?._getSet(e), _this._checkCancelled(e), C(t), _this._wset = new o(t._candidates.slice(0), t._known.slice(0), t._ordered, _this._clonePageDefinition(t.pagesDefinition)), _this._wset;\n      }\n\n      return _this._wset;\n    })();\n  }\n\n  _isInFeatureSet(e) {\n    return v(this._parent)._isInFeatureSet(e);\n  }\n\n  _getFeatures(t, s, a, i) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const l = [];\n      -1 !== s && void 0 === _this2._featureCache[s] && l.push(s);\n\n      const n = _this2._maxQueryRate();\n\n      if (!0 === _this2._checkIfNeedToExpandKnownPage(t, n)) return yield _this2._expandPagedSet(t, n, 0, 0, i), _this2._getFeatures(t, s, a, i);\n      let h = 0;\n\n      for (let e = t._lastFetchedIndex; e < t._known.length && (h++, h <= a && (t._lastFetchedIndex += 1), !(void 0 === _this2._featureCache[t._known[e]] && (t._known[e] !== s && l.push(t._known[e]), l.length >= n))); e++);\n\n      if (0 === l.length) return \"success\";\n      t = new o([], l, t._ordered, null);\n      const u = Math.min(l.length, a);\n      yield _this2._parent?._getFeatures(t, -1, u, i), _this2._checkCancelled(i);\n      const c = [];\n\n      for (let e = 0; e < u; e++) {\n        const t = _this2._parent?._featureFromCache(l[e]);\n        void 0 !== t && c.push({\n          geometry: t.geometry,\n          attributes: t.attributes,\n          id: l[e]\n        });\n      }\n\n      for (const o of c) {\n        const t = [];\n\n        for (const e of _this2.adaptedFields) t[e.field.name] = e.extractValue(o);\n\n        _this2._featureCache[o.id] = new e({\n          attributes: t,\n          geometry: r(o.geometry)\n        });\n      }\n\n      return \"success\";\n    })();\n  }\n\n  _fetchAndRefineFeatures() {\n    return _asyncToGenerator(function* () {\n      throw new i(l.NeverReach);\n    })();\n  }\n\n  _getFilteredSet(e, t, r, s, a) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      let i = !1;\n\n      const l = _this3._reformulateWithoutAdaptions(r);\n\n      i = l.cannot, r = l.where;\n      let n = !1;\n\n      if (null !== s) {\n        n = !0;\n        const e = [];\n\n        for (const t of _this3.adaptedFields) if (!(t instanceof E) && !0 === s.scanForField(t.field.name)) {\n          if (!(t instanceof x)) {\n            s = null, n = !1;\n            break;\n          }\n\n          e.push({\n            field: t.field.name,\n            newfield: t.originalField.name\n          });\n        }\n\n        s && e.length > 0 && (s = s.replaceFields(e));\n      }\n\n      null !== r ? null !== _this3._extraFilter && (r = w(_this3._extraFilter, r)) : r = _this3._extraFilter, yield _this3._ensureLoaded();\n      const h = yield v(_this3._parent)._getFilteredSet(e, t, r, s, a);\n      let u;\n      return _this3._checkCancelled(a), u = !0 === i ? new o(h._candidates.slice(0).concat(h._known.slice(0)), [], !0 === n && h._ordered, _this3._clonePageDefinition(h.pagesDefinition)) : new o(h._candidates.slice(0), h._known.slice(0), !0 === n && h._ordered, _this3._clonePageDefinition(h.pagesDefinition)), u;\n    })();\n  }\n\n  _reformulateWithoutAdaptions(e) {\n    const t = {\n      cannot: !1,\n      where: e\n    };\n    if (null !== e) for (const r of this.adaptedFields) if (!0 === m(e, r.field.name)) {\n      const s = r.rewriteSql(e, this);\n\n      if (!0 !== s.rewritten) {\n        t.cannot = !0, t.where = null;\n        break;\n      }\n\n      t.where = s.where;\n    }\n    return t;\n  }\n\n  _stat(e, t, r, s, a, i, l) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      let n = !1,\n          o = _this4._reformulateWithoutAdaptions(t);\n\n      if (n = o.cannot, t = o.where, o = _this4._reformulateWithoutAdaptions(a), n = n || o.cannot, null !== (a = o.where) ? null !== _this4._extraFilter && (a = w(_this4._extraFilter, a)) : a = _this4._extraFilter, !0 === n) return null === a && \"\" === r && null === s ? _this4._manualStat(e, t, i, l) : {\n        calculated: !1\n      };\n      const h = yield v(_this4._parent)._stat(e, t, r, s, a, i, l);\n      return !1 === h.calculated ? null === a && \"\" === r && null === s ? _this4._manualStat(e, t, i, l) : {\n        calculated: !1\n      } : h;\n    })();\n  }\n\n  _canDoAggregates(e, t, r, s, a) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      if (null === _this5._parent) return !1;\n\n      for (let n = 0; n < e.length; n++) for (const t of _this5.adaptedFields) if (e[n].toLowerCase() === t.field.name.toLowerCase() && !(t instanceof E)) return !1;\n\n      const i = [];\n\n      for (let n = 0; n < t.length; n++) {\n        const e = t[n];\n\n        if (null !== e.workingexpr) {\n          const t = _this5._reformulateWithoutAdaptions(e.workingexpr);\n\n          if (t.cannot) return !1;\n          const r = e.clone();\n          r.workingexpr = t.where, i.push(r);\n        } else i.push(e);\n      }\n\n      const l = _this5._reformulateWithoutAdaptions(a);\n\n      return !l.cannot && (null !== (a = l.where) ? null !== _this5._extraFilter && (a = w(_this5._extraFilter, a)) : a = _this5._extraFilter, _this5._parent._canDoAggregates(e, i, r, s, a));\n    })();\n  }\n\n  _getAggregatePagesDataSourceDefinition(e, t, r, s, a, n, o) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      if (null === _this6._parent) throw new i(l.NeverReach);\n      const h = [];\n\n      for (let c = 0; c < t.length; c++) {\n        const e = t[c];\n\n        if (null !== e.workingexpr) {\n          const t = _this6._reformulateWithoutAdaptions(e.workingexpr);\n\n          if (t.cannot) throw new i(l.NeverReach);\n          const r = e.clone();\n          r.workingexpr = t.where, h.push(r);\n        } else h.push(e);\n      }\n\n      const u = _this6._reformulateWithoutAdaptions(a);\n\n      if (u.cannot) throw new i(l.NeverReach);\n      return null !== (a = u.where) ? null !== _this6._extraFilter && (a = w(_this6._extraFilter, a)) : a = _this6._extraFilter, _this6._parent._getAggregatePagesDataSourceDefinition(e, h, r, s, a, n, o);\n    })();\n  }\n\n}\n\nexport { D as AdaptedFeatureSet, W as AdaptedField, x as FieldRename, E as OriginalField, y as SqlExpressionAdapted, A as StringToCodeAdapted };","map":{"version":3,"names":["e","ArcadeDate","t","cloneGeometry","r","SqlError","s","SqlErrorCodes","a","FeatureSetError","i","FeatureSetErrorCodes","l","n","o","cloneField","h","FeatureServiceDatabaseType","u","layerGeometryEsriConstants","c","reformulateWithoutField","d","toWhereClause","p","translateFunctionToDatabaseSpecific","f","makeToday","g","makeDateString","N","arcadeDateToSqlString","_","convertIntervalToSql","S","combine","w","scanForField","m","unwrapOrThrow","v","assertIsSome","C","WhereClause","T","F","W","constructor","field","sqlRewritable","postInitialization","E","extractValue","attributes","name","rewriteSql","rewritten","where","x","originalField","alias","getFieldsIndex","A","codefield","lkp","reverseLkp","evaluateNodeToWhereClause","parseTree","Standardised","parameters","includes","BADNESS","create","_parent","type","value","qualifier","op","format","operand","clauses","length","else","toLowerCase","toString","replace","Date","Array","push","expr","operator","left","right","UnsupportedIsRhs","column","toUpperCase","join","escape","mode","args","UnsupportedSyntax","node","calculateValueCompiled","y","_sql","D","findField","_calcFunc","declaredClass","adaptedFields","_extraFilter","extraFilter","parentfeatureset","_maxProcessing","_initialiseFeatureSet","geometryType","objectIdField","globalIdField","spatialReference","hasM","hasZ","typeIdField","types","wkid","point","fields","_getSet","_wset","_ensureLoaded","_getFilteredSet","_checkCancelled","_candidates","slice","_known","_ordered","_clonePageDefinition","pagesDefinition","_isInFeatureSet","_getFeatures","_featureCache","_maxQueryRate","_checkIfNeedToExpandKnownPage","_expandPagedSet","_lastFetchedIndex","Math","min","_featureFromCache","geometry","id","_fetchAndRefineFeatures","NeverReach","_reformulateWithoutAdaptions","cannot","newfield","replaceFields","concat","_stat","_manualStat","calculated","_canDoAggregates","workingexpr","clone","_getAggregatePagesDataSourceDefinition","AdaptedFeatureSet","AdaptedField","FieldRename","OriginalField","SqlExpressionAdapted","StringToCodeAdapted"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import{ArcadeDate as t}from\"../../ArcadeDate.js\";import{cloneGeometry as r}from\"../../kernel.js\";import{SqlError as s,SqlErrorCodes as a,FeatureSetError as i,FeatureSetErrorCodes as l}from\"../support/errorsupport.js\";import n from\"../support/FeatureSet.js\";import o from\"../support/IdSet.js\";import{cloneField as h,FeatureServiceDatabaseType as u,layerGeometryEsriConstants as c}from\"../support/shared.js\";import{reformulateWithoutField as d,toWhereClause as p,translateFunctionToDatabaseSpecific as f,makeToday as g,makeDateString as N,arcadeDateToSqlString as _,convertIntervalToSql as S,combine as w,scanForField as m}from\"../support/sqlUtils.js\";import{unwrapOrThrow as v,assertIsSome as C}from\"../../../core/maybe.js\";import{WhereClause as T}from\"../../../core/sql/WhereClause.js\";import F from\"../../../geometry/SpatialReference.js\";class W{constructor(e){this.field=e,this.sqlRewritable=!1}postInitialization(e,t){}}class E extends W{constructor(e){super(e),this.sqlRewritable=!0}extractValue(e){return e.attributes[this.field.name]}rewriteSql(e){return{rewritten:this.sqlRewritable,where:e}}}class x extends W{constructor(e,t,r){super(h(e)),this.originalField=e,this.sqlRewritable=!0,this.field.name=t,this.field.alias=r}rewriteSql(e,t){return{rewritten:this.sqlRewritable,where:d(e,this.field.name,this.originalField.name,t.getFieldsIndex())}}extractValue(e){return e.attributes[this.originalField.name]}}class A extends W{constructor(e,t,r){super(e),this.codefield=t,this.lkp=r,this.reverseLkp={};for(const s in r)this.reverseLkp[r[s]]=s;this.sqlRewritable=!0}rewriteSql(e,t){const r=this.evaluateNodeToWhereClause(e.parseTree,u.Standardised,this.field.name,this.codefield instanceof T?p(this.codefield,u.Standardised):this.codefield,e.parameters);return r.includes(A.BADNESS)?{rewritten:!1,where:e}:{rewritten:this.sqlRewritable,where:T.create(r,v(t._parent).getFieldsIndex())}}evaluateNodeToWhereClause(e,r,i=null,l=null,n){let o,h,u,c;switch(e.type){case\"interval\":return S(this.evaluateNodeToWhereClause(e.value,r,i,l,n),e.qualifier,e.op);case\"case-expression\":{let t=\" CASE \";\"simple\"===e.format&&(t+=this.evaluateNodeToWhereClause(e.operand,r,i,A.BADNESS,n));for(let s=0;s<e.clauses.length;s++)t+=\" WHEN \"+this.evaluateNodeToWhereClause(e.clauses[s].operand,r,i,A.BADNESS,n)+\" THEN \"+this.evaluateNodeToWhereClause(e.clauses[s].value,r,i,A.BADNESS,n);return null!==e.else&&(t+=\" ELSE \"+this.evaluateNodeToWhereClause(e.else,r,i,A.BADNESS,n)),t+=\" END \",t}case\"parameter\":{const s=n[e.value.toLowerCase()];if(\"string\"==typeof s)return\"'\"+s.toString().replace(/'/g,\"''\")+\"'\";if(s instanceof Date)return N(s,r,null);if(s instanceof t)return _(s,r,null);if(s instanceof Array){const e=[];for(let a=0;a<s.length;a++)\"string\"==typeof s[a]?e.push(\"'\"+s[a].toString().replace(/'/g,\"''\")+\"'\"):s[a]instanceof Date?e.push(N(s[a],r,null)):s[a]instanceof t?e.push(_(s[a],r,null)):e.push(s[a].toString());return e}return s.toString()}case\"expression-list\":h=[];for(const t of e.value)h.push(this.evaluateNodeToWhereClause(t,r,i,l,n));return h;case\"unary-expression\":return\" ( NOT \"+this.evaluateNodeToWhereClause(e.expr,r,i,A.BADNESS,n)+\" ) \";case\"binary-expression\":switch(e.operator){case\"AND\":return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" AND \"+this.evaluateNodeToWhereClause(e.right,r,i,l,n)+\") \";case\"OR\":return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" OR \"+this.evaluateNodeToWhereClause(e.right,r,i,l,n)+\") \";case\"IS\":if(\"null\"!==e.right.type)throw new s(a.UnsupportedIsRhs);return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IS NULL )\";case\"ISNOT\":if(\"null\"!==e.right.type)throw new s(a.UnsupportedIsRhs);return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IS NOT NULL )\";case\"IN\":if(o=[],\"expression-list\"===e.right.type){if(\"column-reference\"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){const t=[];let s=!0;for(const r of e.right.value){if(\"string\"!==r.type){s=!1;break}if(void 0===this.lkp[r.value]){s=!1;break}t.push(this.lkp[r.value].toString())}if(s)return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+t.join(\",\")+\")) \"}return o=this.evaluateNodeToWhereClause(e.right,r,i,l,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+o.join(\",\")+\")) \"}return c=this.evaluateNodeToWhereClause(e.right,r,i,l,n),c instanceof Array?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+c.join(\",\")+\")) \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" IN (\"+c+\")) \";case\"NOT IN\":if(o=[],\"expression-list\"===e.right.type){if(\"column-reference\"===e.left.type&&e.left.column.toUpperCase()===this.field.name.toUpperCase()){const t=[];let s=!0;for(const r of e.right.value){if(\"string\"!==r.type){s=!1;break}if(void 0===this.lkp[r.value]){s=!1;break}t.push(this.lkp[r.value].toString())}if(s)return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+t.join(\",\")+\")) \"}return o=this.evaluateNodeToWhereClause(e.right,r,i,l,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+o.join(\",\")+\")) \"}return c=this.evaluateNodeToWhereClause(e.right,r,i,l,n),c instanceof Array?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+c.join(\",\")+\")) \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,l,n)+\" NOT IN (\"+c+\")) \";case\"BETWEEN\":return u=this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" BETWEEN \"+u[0]+\" AND \"+u[1]+\" ) \";case\"NOTBETWEEN\":return u=this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n),\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" NOT BETWEEN \"+u[0]+\" AND \"+u[1]+\" ) \";case\"LIKE\":return\"\"!==e.escape?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \";case\"NOT LIKE\":return\"\"!==e.escape?\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" NOT LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\" ESCAPE '\"+e.escape+\"') \":\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" NOT LIKE \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \";case\"<>\":case\"=\":if(\"column-reference\"===e.left.type&&\"string\"===e.right.type){if(e.left.column.toUpperCase()===this.field.name.toUpperCase()&&void 0!==this.lkp[e.right.value.toString()])return\" (\"+l+\" \"+e.operator+\" \"+this.lkp[e.right.value.toString()].toString()+\") \"}else if(\"column-reference\"===e.right.type&&\"string\"===e.left.type&&e.right.column.toUpperCase()===this.field.name.toUpperCase())return\" (\"+this.lkp[e.right.value.toString()].toString()+\" \"+e.operator+\" \"+l+\") \";return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" \"+e.operator+\" \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \";case\"<\":case\">\":case\">=\":case\"<=\":case\"*\":case\"-\":case\"+\":case\"/\":case\"||\":return\" (\"+this.evaluateNodeToWhereClause(e.left,r,i,A.BADNESS,n)+\" \"+e.operator+\" \"+this.evaluateNodeToWhereClause(e.right,r,i,A.BADNESS,n)+\") \"}case\"null\":return\"null\";case\"boolean\":return!0===e.value?\"1\":\"0\";case\"string\":return\"'\"+e.value.toString().replace(/'/g,\"''\")+\"'\";case\"timestamp\":case\"date\":return N(e.value,r,null);case\"number\":return e.value.toString();case\"current-time\":return g(\"date\"===e.mode,r);case\"column-reference\":return i&&i.toLowerCase()===e.column.toLowerCase()?\"(\"+l+\")\":e.column;case\"data-type\":return e.value;case\"function\":{const t=this.evaluateNodeToWhereClause(e.args,r,i,A.BADNESS,n);return f(e.name,t,r)}}throw new s(a.UnsupportedSyntax,{node:e.type})}extractValue(e){return this.codefield instanceof T?this.reverseLkp[this.codefield.calculateValueCompiled(e)]:this.reverseLkp[e.attributes[this.codefield]]}}A.BADNESS=\"_!!!_BAD_LKP_!!!!\";class y extends W{constructor(e,t){super(e),this._sql=t}rewriteSql(e,t){return{rewritten:!0,where:d(e,this.field.name,p(this._sql,u.Standardised),t.getFieldsIndex())}}extractValue(e){return this._sql.calculateValueCompiled(e)}}class D extends n{static findField(e,t){for(const r of e)if(r.name.toLowerCase()===t.toString().toLowerCase())return r;return null}constructor(e){super(e),this._calcFunc=null,this.declaredClass=\"esri.arcade.featureset.actions.Adapted\",this.adaptedFields=[],this._extraFilter=null,this._extraFilter=e.extraFilter,this._parent=e.parentfeatureset,this._maxProcessing=30,this.adaptedFields=e.adaptedFields}_initialiseFeatureSet(){null!==this._parent?(this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.spatialReference=new F({wkid:4326}),this.objectIdField=\"\",this.globalIdField=\"\",this.geometryType=c.point,this.typeIdField=\"\",this.types=null),this.fields=[];for(const e of this.adaptedFields)e.postInitialization(this,this._parent),this.fields.push(e.field)}async _getSet(e){if(null===this._wset){await this._ensureLoaded();let t=null;return t=this._extraFilter?await this._getFilteredSet(\"\",null,null,null,e):await(this._parent?._getSet(e)),this._checkCancelled(e),C(t),this._wset=new o(t._candidates.slice(0),t._known.slice(0),t._ordered,this._clonePageDefinition(t.pagesDefinition)),this._wset}return this._wset}_isInFeatureSet(e){return v(this._parent)._isInFeatureSet(e)}async _getFeatures(t,s,a,i){const l=[];-1!==s&&void 0===this._featureCache[s]&&l.push(s);const n=this._maxQueryRate();if(!0===this._checkIfNeedToExpandKnownPage(t,n))return await this._expandPagedSet(t,n,0,0,i),this._getFeatures(t,s,a,i);let h=0;for(let e=t._lastFetchedIndex;e<t._known.length&&(h++,h<=a&&(t._lastFetchedIndex+=1),!(void 0===this._featureCache[t._known[e]]&&(t._known[e]!==s&&l.push(t._known[e]),l.length>=n)));e++);if(0===l.length)return\"success\";t=new o([],l,t._ordered,null);const u=Math.min(l.length,a);await(this._parent?._getFeatures(t,-1,u,i)),this._checkCancelled(i);const c=[];for(let e=0;e<u;e++){const t=this._parent?._featureFromCache(l[e]);void 0!==t&&c.push({geometry:t.geometry,attributes:t.attributes,id:l[e]})}for(const o of c){const t=[];for(const e of this.adaptedFields)t[e.field.name]=e.extractValue(o);this._featureCache[o.id]=new e({attributes:t,geometry:r(o.geometry)})}return\"success\"}async _fetchAndRefineFeatures(){throw new i(l.NeverReach)}async _getFilteredSet(e,t,r,s,a){let i=!1;const l=this._reformulateWithoutAdaptions(r);i=l.cannot,r=l.where;let n=!1;if(null!==s){n=!0;const e=[];for(const t of this.adaptedFields)if(!(t instanceof E)&&!0===s.scanForField(t.field.name)){if(!(t instanceof x)){s=null,n=!1;break}e.push({field:t.field.name,newfield:t.originalField.name})}s&&e.length>0&&(s=s.replaceFields(e))}null!==r?null!==this._extraFilter&&(r=w(this._extraFilter,r)):r=this._extraFilter,await this._ensureLoaded();const h=await v(this._parent)._getFilteredSet(e,t,r,s,a);let u;return this._checkCancelled(a),u=!0===i?new o(h._candidates.slice(0).concat(h._known.slice(0)),[],!0===n&&h._ordered,this._clonePageDefinition(h.pagesDefinition)):new o(h._candidates.slice(0),h._known.slice(0),!0===n&&h._ordered,this._clonePageDefinition(h.pagesDefinition)),u}_reformulateWithoutAdaptions(e){const t={cannot:!1,where:e};if(null!==e)for(const r of this.adaptedFields)if(!0===m(e,r.field.name)){const s=r.rewriteSql(e,this);if(!0!==s.rewritten){t.cannot=!0,t.where=null;break}t.where=s.where}return t}async _stat(e,t,r,s,a,i,l){let n=!1,o=this._reformulateWithoutAdaptions(t);if(n=o.cannot,t=o.where,o=this._reformulateWithoutAdaptions(a),n=n||o.cannot,null!==(a=o.where)?null!==this._extraFilter&&(a=w(this._extraFilter,a)):a=this._extraFilter,!0===n)return null===a&&\"\"===r&&null===s?this._manualStat(e,t,i,l):{calculated:!1};const h=await v(this._parent)._stat(e,t,r,s,a,i,l);return!1===h.calculated?null===a&&\"\"===r&&null===s?this._manualStat(e,t,i,l):{calculated:!1}:h}async _canDoAggregates(e,t,r,s,a){if(null===this._parent)return!1;for(let n=0;n<e.length;n++)for(const t of this.adaptedFields)if(e[n].toLowerCase()===t.field.name.toLowerCase()&&!(t instanceof E))return!1;const i=[];for(let n=0;n<t.length;n++){const e=t[n];if(null!==e.workingexpr){const t=this._reformulateWithoutAdaptions(e.workingexpr);if(t.cannot)return!1;const r=e.clone();r.workingexpr=t.where,i.push(r)}else i.push(e)}const l=this._reformulateWithoutAdaptions(a);return!l.cannot&&(null!==(a=l.where)?null!==this._extraFilter&&(a=w(this._extraFilter,a)):a=this._extraFilter,this._parent._canDoAggregates(e,i,r,s,a))}async _getAggregatePagesDataSourceDefinition(e,t,r,s,a,n,o){if(null===this._parent)throw new i(l.NeverReach);const h=[];for(let c=0;c<t.length;c++){const e=t[c];if(null!==e.workingexpr){const t=this._reformulateWithoutAdaptions(e.workingexpr);if(t.cannot)throw new i(l.NeverReach);const r=e.clone();r.workingexpr=t.where,h.push(r)}else h.push(e)}const u=this._reformulateWithoutAdaptions(a);if(u.cannot)throw new i(l.NeverReach);return null!==(a=u.where)?null!==this._extraFilter&&(a=w(this._extraFilter,a)):a=this._extraFilter,this._parent._getAggregatePagesDataSourceDefinition(e,h,r,s,a,n,o)}}export{D as AdaptedFeatureSet,W as AdaptedField,x as FieldRename,E as OriginalField,y as SqlExpressionAdapted,A as StringToCodeAdapted};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}