{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Error.js\";\nimport has from \"../../../../core/has.js\";\nimport t from \"../../../../core/Logger.js\";\nimport { isSome as r, unwrap as i, isNone as n, unwrapOr as s } from \"../../../../core/maybe.js\";\nimport { pt2px as l } from \"../../../../core/screenUtils.js\";\nimport { sqlAnd as o } from \"../../../../core/sql.js\";\nimport { diff as a } from \"../../../../core/accessorSupport/diffUtils.js\";\nimport { validateLabelingInfo as u } from \"../../../../layers/support/labelingInfo.js\";\nimport { WGLSymbologyType as d } from \"../../engine/webgl/enums.js\";\nimport { getVVType as f } from \"../../engine/webgl/Utils.js\";\nimport { getTechniqueFromRenderer as p } from \"../../engine/webgl/techniques/utils.js\";\nimport { getVVFlags as c } from \"../../engine/webgl/util/vvFlagUtils.js\";\nimport { createSymbolSchema as y } from \"./createSymbolSchema.js\";\nimport { getPtMaxVVSize as m } from \"./support/pixelBuffering.js\";\nimport { getSupportedHeatmapRenderer as g, simplifyVisualVariables as b } from \"./support/rendererUtils.js\";\nimport { injectDynamicLevelDependentSizeVisualVariable as x, createClusterRenderer as v } from \"../support/clusterUtils.js\";\nimport { toJSONGeometryType as h } from \"../support/util.js\";\nconst T = t.getLogger(\"esri.views.2d.layers.features.schemaUtils\"),\n      S = \"ValidationError\";\n\nfunction E(e) {\n  return e;\n}\n\nfunction w(e, t) {\n  let i = 0,\n      n = 0,\n      s = d.DEFAULT;\n\n  if (r(e)) {\n    if (n = m(e, t), \"visualVariables\" in e && (i = c(e.visualVariables || []), \"dot-density\" === e.type && (s = d.DOT_DENSITY)), \"heatmap\" === e.type && (s = d.HEATMAP), \"dictionary\" === e.type) return {\n      maxVVSize: n,\n      vvFlags: i,\n      symbologyType: d.DEFAULT\n    };\n    if (\"pie-chart\" === e.type) return {\n      maxVVSize: n,\n      vvFlags: i,\n      symbologyType: d.PIE_CHART\n    };\n\n    if (s !== d.DOT_DENSITY && s !== d.HEATMAP) {\n      const t = e.getSymbols();\n      \"backgroundFillSymbol\" in e && e.backgroundFillSymbol && t.push(e.backgroundFillSymbol);\n      let r = !0,\n          i = !0;\n\n      for (const e of t) if (\"cim\" === e.type && (i = !1), \"simple-fill\" === e.type || \"picture-fill\" === e.type) {\n        const t = e.outline,\n              n = t && \"none\" !== t.style && \"solid\" !== t.style,\n              s = \"simple-fill\" === e.type && \"none\" !== e.style && \"solid\" !== e.style;\n        n && (r = !1), (\"picture-fill\" === e.type || s || n) && (i = !1);\n      }\n\n      r ? s = i ? d.OUTLINE_FILL_SIMPLE : d.OUTLINE_FILL : i && (s = d.SIMPLE);\n    }\n  }\n\n  return {\n    vvFlags: i,\n    maxVVSize: n,\n    symbologyType: s\n  };\n}\n\nlet F = null;\n\nfunction I(e) {\n  if (has(\"esri-2d-update-debug\")) {\n    const t = V(e, !0);\n    console.debug(\"Created new schema\", t), console.debug(\"Schema diff\", a(F, t)), F = t;\n  }\n\n  return V(e);\n}\n\nfunction V(e, t = !1) {\n  try {\n    const n = A(e, t),\n          s = C(e),\n          l = {};\n    n.map(t => O(l, e, t));\n    const a = r(e.subtypeCode) ? `${e.subtypeField} = ${e.subtypeCode}` : null,\n          u = i(o(e.definitionExpression, a));\n    return {\n      source: {\n        definitionExpression: u,\n        fields: e.fields.map(e => e.toJSON()),\n        gdbVersion: e.gdbVersion,\n        historicMoment: e.historicMoment?.getTime(),\n        outFields: e.availableFields,\n        pixelBuffer: e.pixelBuffer,\n        spatialReference: e.spatialReference.toJSON(),\n        timeExtent: e.timeExtent?.toJSON(),\n        customParameters: e.customParameters\n      },\n      attributes: {\n        fields: {},\n        indexCount: 0\n      },\n      processors: n,\n      tileRenderer: s,\n      targets: l\n    };\n  } catch (n) {\n    if (n.fieldName === S) return T.error(n), null;\n    throw n;\n  }\n}\n\nfunction O(t, r, i) {\n  switch (i.target) {\n    case \"feature\":\n      return void L(t, N(r), i);\n\n    case \"aggregate\":\n      {\n        if (!(\"featureReduction\" in r)) return;\n        const n = r.featureReduction;\n\n        switch (n?.type) {\n          case \"selection\":\n            throw new e(S, \"Mapview does not support `selection` reduction type\", n);\n\n          case \"binning\":\n            return L(t, N(r), i), void j(t, n, r.fields.map(e => e.toJSON()), i);\n\n          case \"cluster\":\n            return L(t, N(r), i), void R(t, n, r.fields.map(e => e.toJSON()), i);\n        }\n      }\n  }\n}\n\nfunction z(e, t) {\n  for (const r in t) {\n    const i = t[r];\n    if (i.target !== e.name) continue;\n    const n = e.attributes[r];\n\n    if (n?.context) {\n      const e = n.context;\n      e.mesh = e.mesh || i.context?.mesh, e.storage = e.storage || i.context?.storage;\n    } else e.attributes[r] = i;\n  }\n\n  return e;\n}\n\nfunction N(e) {\n  return [i(e.filter)?.toJSON() ?? null, i(i(e.featureEffect)?.filter)?.toJSON() ?? null];\n}\n\nfunction L(e, t, r) {\n  return e.feature || (e.feature = {\n    name: \"feature\",\n    input: \"source\",\n    filters: t,\n    attributes: {}\n  }), z(e.feature, r.attributes.fields), e;\n}\n\nfunction M(t, r) {\n  const {\n    onStatisticExpression: i,\n    onStatisticField: n,\n    statisticType: s\n  } = t;\n\n  switch (s) {\n    case \"min\":\n    case \"max\":\n    case \"avg\":\n    case \"avg_angle\":\n    case \"sum\":\n    case \"count\":\n      return \"esriFieldTypeDouble\";\n\n    case \"mode\":\n      {\n        if (i) {\n          const {\n            returnType: r\n          } = i;\n          return r ? \"string\" === r ? \"esriFieldTypeString\" : \"esriFieldTypeDouble\" : (T.error(new e(S, \"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined\", t)), \"esriFieldTypeString\");\n        }\n\n        const s = r.find(e => e.name === n);\n        return s ? s.type : (T.error(new e(S, \"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined\", t)), \"esriFieldTypeString\");\n      }\n  }\n}\n\nfunction j(e, t, r, i) {\n  return e.aggregate || (e.aggregate = {\n    name: \"aggregate\",\n    type: \"bin\",\n    filters: null,\n    input: \"feature\",\n    params: {\n      fixedBinLevel: t.fixedBinLevel,\n      fields: (t.fields ?? []).map(e => ({ ...e.toJSON(),\n        type: M(e, r)\n      }))\n    },\n    attributes: {}\n  }), z(e.aggregate, i.attributes.fields), e;\n}\n\nfunction R(e, t, r, i) {\n  return e.aggregate || (e.aggregate = {\n    name: \"aggregate\",\n    type: \"cluster\",\n    input: \"feature\",\n    filters: null,\n    attributes: {},\n    params: {\n      clusterRadius: l(t.clusterRadius / 2),\n      clusterPixelBuffer: 64 * Math.ceil(l(t.clusterMaxSize) / 64),\n      fields: (t.fields ?? [])?.map(e => ({ ...e.toJSON(),\n        type: M(e, r)\n      }))\n    }\n  }), z(e.aggregate, i.attributes.fields), e;\n}\n\nfunction U(e, t) {\n  return t.field ? B(e, { ...t,\n    type: \"field\",\n    field: t.field\n  }) : t.valueExpression ? B(e, { ...t,\n    type: \"expression\",\n    valueExpression: t.valueExpression\n  }) : {\n    field: void 0,\n    fieldIndex: void 0\n  };\n}\n\nfunction B(e, t) {\n  switch (t.type) {\n    case \"expression\":\n      {\n        const r = E(t.valueExpression);\n\n        if (!e.fields[r]) {\n          const i = e.indexCount++;\n          e.fields[r] = { ...t,\n            name: r,\n            fieldIndex: i\n          };\n        }\n\n        return {\n          fieldIndex: e.fields[r].fieldIndex\n        };\n      }\n\n    case \"label-expression\":\n      {\n        const r = E(JSON.stringify(t.label));\n\n        if (!e.fields[r]) {\n          const i = e.indexCount++;\n          e.fields[r] = { ...t,\n            name: r,\n            fieldIndex: i\n          };\n        }\n\n        return {\n          fieldIndex: e.fields[r].fieldIndex\n        };\n      }\n\n    case \"field\":\n      {\n        const r = t.field;\n        return \"aggregate\" === t.target && e.fields[r] || (e.fields[r] = { ...t,\n          name: r\n        }), {\n          field: r\n        };\n      }\n\n    case \"statistic\":\n      return e.fields[t.name] = { ...t\n      }, {\n        field: t.name\n      };\n  }\n}\n\nfunction A(e, t = !1) {\n  const r = new Array();\n  let i = 0;\n  return r.push(k(e, i++, t)), r;\n}\n\nfunction D(e, t, r, i, n, s = !1) {\n  const l = B(e, {\n    type: \"label-expression\",\n    target: r,\n    context: {\n      mesh: !0\n    },\n    resultType: \"string\",\n    label: {\n      labelExpression: t.labelExpression,\n      labelExpressionInfo: t.labelExpressionInfo ? {\n        expression: t.labelExpressionInfo.expression\n      } : null,\n      symbol: !!t.symbol,\n      where: t.where\n    }\n  }),\n        {\n    fieldIndex: o\n  } = l;\n  return { ...y(t, n, s),\n    fieldIndex: o,\n    target: r,\n    index: i\n  };\n}\n\nfunction P(t, r, i) {\n  const n = \"featureReduction\" in r && r.featureReduction;\n  if (!n) return {\n    fields: [],\n    labels: [],\n    matcher: void 0,\n    rendererOverride: void 0\n  };\n  const s = \"aggregate\",\n        l = [];\n  let o = null,\n      a = h(r.geometryType),\n      d = [],\n      f = null;\n  if (n) switch (n.type) {\n    case \"selection\":\n      return T.error(new e(S, \"Mapview does not support `selection` reduction type\", n)), {\n        fields: [],\n        labels: [],\n        matcher: void 0,\n        rendererOverride: void 0\n      };\n\n    case \"cluster\":\n    case \"binning\":\n      if (l.push(...(n.fields ?? [])), \"cluster\" === n.type ? a = \"esriGeometryPoint\" : \"binning\" === n.type && (a = \"esriGeometryPolygon\"), n.renderer && !n.renderer.authoringInfo?.isAutoGenerated) {\n        if (\"cluster\" === n.type) {\n          const {\n            renderer: e\n          } = x(n.renderer, n, null);\n          f = e;\n        } else f = n.renderer;\n\n        const e = w(n.renderer, n);\n        o = $(t, s, n.renderer, e, i), d = n && n.labelsVisible && n.labelingInfo || [];\n      } else if (\"cluster\" === n.type) {\n        if (f = v(l, r.renderer, n, null, !0), n.symbol) {\n          const e = w(f, n);\n          o = {\n            type: \"simple\",\n            symbol: y(n.symbol, e, i),\n            symbologyType: e.symbologyType\n          };\n        }\n\n        d = n && n.labelsVisible && n.labelingInfo || [];\n      }\n\n  }\n  q(t, l);\n  return {\n    labels: u(d, \"binning\" === n.type ? \"esriGeometryPolygon\" : a),\n    matcher: o,\n    fields: l,\n    rendererOverride: f\n  };\n}\n\nfunction k(t, i, n = !1) {\n  const s = {\n    indexCount: 0,\n    fields: {}\n  },\n        l = \"featureReduction\" in t ? t.featureReduction ?? void 0 : void 0,\n        o = l ? \"aggregate\" : \"feature\";\n\n  if (\"sublayers\" in t) {\n    const i = {\n      type: \"subtype\",\n      subtypeField: t.subtypeField,\n      renderers: {},\n      symbologyType: d.DEFAULT\n    },\n          l = {\n      type: \"subtype\",\n      mapping: {},\n      target: \"feature\",\n      subtypeField: t.subtypeField\n    },\n          a = {\n      type: \"subtype\",\n      classes: {}\n    },\n          u = {\n      type: \"symbol\",\n      target: \"feature\",\n      aggregateFields: [],\n      attributes: s,\n      storage: l,\n      mesh: {\n        matcher: i,\n        aggregateMatcher: null,\n        labels: a,\n        sortKey: null\n      }\n    },\n          f = new Set();\n    let p = 0;\n\n    for (const {\n      renderer: y,\n      subtypeCode: m,\n      labelingInfo: g,\n      labelsVisible: b\n    } of t.sublayers) {\n      let t = 0;\n      \"visualVariables\" in y && y.visualVariables && (y.visualVariables.some(e => \"rotation\" !== e.type) && T.warnOnce(\"SubtypeGroupLayer currently only supports rotation visualVariables. All other visualVariable types will be ignored.\"), t = c(y.visualVariables.filter(e => \"size\" !== e.type)));\n\n      const u = {\n        symbologyType: d.DEFAULT,\n        vvFlags: t,\n        maxVVSize: 0\n      },\n            x = $(s, o, y, u, n),\n            v = _(s, o, y),\n            h = b && g;\n\n      if (\"dictionary\" === x.type) throw new e(S, \"Dictionary renderer is not supported in subtype layers\");\n      if (\"subtype\" === x.type) throw new e(S, \"Nested subtype renderers is not supported\");\n      if (r(v) && \"subtype\" === v.type) throw new e(S, \"Nested subtype storage is not supported\");\n      if (r(v) && r(v.attributeMapping)) throw new e(S, \"Non-visual-variable attributes are not supported in subtype layers\");\n      if (\"heatmap\" === x.type) throw new e(S, \"Heatmaps are not supported in subtype layers\");\n      if (\"pie-chart\" === x.type) throw new e(S, \"Pie-charts are not supported in subtype layers\");\n      if (f.has(m)) throw new e(S, \"Subtype codes for sublayers must be unique\");\n      f.add(m), i.renderers[m] = x, l.mapping[m] = v, h && (a.classes[m] = h.map(e => D(s, e, \"feature\", p++, u, n)));\n    }\n\n    return u;\n  }\n\n  if (\"heatmap\" === t.renderer?.type && \"raster\" === g()) {\n    const {\n      radius: e,\n      fieldOffset: r,\n      field: i\n    } = t.renderer;\n    return {\n      type: \"heatmap\",\n      aggregateFields: [],\n      attributes: s,\n      target: o,\n      storage: null,\n      mesh: {\n        radius: e,\n        fieldOffset: r,\n        field: U(s, {\n          target: o,\n          field: i,\n          resultType: \"numeric\"\n        }).field\n      }\n    };\n  }\n\n  const a = P(s, t, n),\n        f = h(t.geometryType),\n        p = a.rendererOverride ?? t.renderer,\n        y = w(p, l),\n        m = $(s, o, p, y, n),\n        b = _(s, o, p),\n        x = J(s, t.orderBy, t.renderer, l),\n        v = t.labelsVisible && t.labelingInfo || [],\n        E = u(v, f);\n\n  let F = 0;\n  const I = [...E.map(e => D(s, e, \"feature\", F++, y, n)), ...a.labels.map(e => D(s, e, \"aggregate\", F++, y, n))];\n  return {\n    type: \"symbol\",\n    target: o,\n    attributes: s,\n    aggregateFields: a.fields,\n    storage: b,\n    mesh: {\n      matcher: m,\n      labels: {\n        type: \"simple\",\n        classes: I\n      },\n      aggregateMatcher: a.matcher,\n      sortKey: x\n    }\n  };\n}\n\nfunction C(e) {\n  return \"heatmap\" === e.renderer?.type && \"raster\" === g() ? {\n    type: \"heatmap\"\n  } : {\n    type: \"symbol\"\n  };\n}\n\nfunction J(t, i, n, s) {\n  if (r(s)) return null;\n\n  if (r(i) && i.length) {\n    i.length > 1 && T.warn(`Layer rendering currently only supports ordering by 1 orderByInfo, but found ${i.length}. All but the first will be discarded`);\n    const r = i[0],\n          n = \"ascending\" === r.order ? \"asc\" : \"desc\";\n    if (r.field) return {\n      field: r.field,\n      order: n\n    };\n\n    if (r.valueExpression) {\n      return {\n        fieldIndex: B(t, {\n          type: \"expression\",\n          target: \"feature\",\n          valueExpression: r.valueExpression,\n          resultType: \"numeric\"\n        }).fieldIndex,\n        order: n\n      };\n    }\n\n    return T.error(new e(S, \"Expected to find a field or valueExpression for OrderByInfo\", r)), null;\n  }\n\n  if (r(n) && \"unique-value\" === n.type && n.orderByClassesEnabled) {\n    return {\n      byRenderer: !0,\n      order: \"asc\"\n    };\n  }\n\n  return null;\n}\n\nfunction q(e, t) {\n  const r = {\n    mesh: !0,\n    storage: !0\n  };\n\n  for (const i of t) {\n    const {\n      name: t,\n      onStatisticField: n,\n      onStatisticExpression: s,\n      statisticType: l\n    } = i;\n    let o, a;\n    const u = \"numeric\",\n          d = \"feature\";\n\n    if (s) {\n      a = B(e, {\n        type: \"expression\",\n        target: d,\n        valueExpression: s.expression,\n        resultType: u\n      }).fieldIndex;\n    } else {\n      o = B(e, {\n        type: \"field\",\n        target: d,\n        field: n,\n        resultType: u\n      }).field;\n    }\n\n    B(e, {\n      type: \"statistic\",\n      target: \"aggregate\",\n      name: t,\n      context: r,\n      inField: o,\n      inFieldIndex: a,\n      statisticType: l\n    });\n  }\n}\n\nfunction _(e, t, r) {\n  let i;\n\n  switch (r.type) {\n    case \"simple\":\n    case \"class-breaks\":\n    case \"unique-value\":\n    case \"dictionary\":\n      i = {\n        visualVariables: !0,\n        attributes: null\n      };\n      break;\n\n    default:\n      i = p(r).getStorageSpec(r);\n  }\n\n  return G(e, t, i, r);\n}\n\nfunction G(e, t, i, s) {\n  if (n(i)) return null;\n  const {\n    visualVariables: l,\n    attributes: o\n  } = i;\n  let a = null;\n  l && \"visualVariables\" in s && (a = H(e, t, s.visualVariables));\n  const u = r(a) ? 4 : 0;\n  let d = null;\n  return r(o) && (d = o.map((r, i) => {\n    const {\n      field: n,\n      fieldIndex: s\n    } = U(e, {\n      valueExpression: r.valueExpression,\n      field: r.field,\n      resultType: \"numeric\",\n      target: t\n    });\n    return {\n      binding: i + u,\n      field: n,\n      fieldIndex: s\n    };\n  })), {\n    type: \"simple\",\n    target: t,\n    attributeMapping: d,\n    vvMapping: a\n  };\n}\n\nfunction H(e, t, i) {\n  if (!i || !i.length) return [];\n  const n = {\n    storage: !0\n  },\n        s = \"numeric\";\n  return b(i).map(r => {\n    const i = f(r.type),\n          {\n      field: l,\n      fieldIndex: o\n    } = U(e, {\n      target: t,\n      valueExpression: r.valueExpression,\n      field: r.field,\n      context: n,\n      resultType: s\n    });\n\n    switch (r.type) {\n      case \"size\":\n        return \"$view.scale\" === r.valueExpression ? null : {\n          type: \"size\",\n          binding: i,\n          field: l,\n          fieldIndex: o,\n          normalizationField: U(e, {\n            target: t,\n            field: r.normalizationField,\n            context: n,\n            resultType: s\n          }).field,\n          valueRepresentation: r.valueRepresentation ?? null\n        };\n\n      case \"color\":\n        return {\n          type: \"color\",\n          binding: i,\n          field: l,\n          fieldIndex: o,\n          normalizationField: U(e, {\n            target: t,\n            field: r.normalizationField,\n            context: n,\n            resultType: s\n          }).field\n        };\n\n      case \"opacity\":\n        return {\n          type: \"opacity\",\n          binding: i,\n          field: l,\n          fieldIndex: o,\n          normalizationField: U(e, {\n            target: t,\n            field: r.normalizationField,\n            context: n,\n            resultType: s\n          }).field\n        };\n\n      case \"rotation\":\n        return {\n          type: \"rotation\",\n          binding: i,\n          field: l,\n          fieldIndex: o\n        };\n    }\n  }).filter(r);\n}\n\nfunction $(e, t, r, i, n = !1) {\n  const l = s(e, {\n    indexCount: 0,\n    fields: {}\n  });\n\n  switch (r.type) {\n    case \"simple\":\n    case \"dot-density\":\n      return K(l, r, i, n);\n\n    case \"class-breaks\":\n      return Q(l, t, r, i, n);\n\n    case \"unique-value\":\n      return W(l, t, r, i, n);\n\n    case \"dictionary\":\n      return X(l, r, i, n);\n\n    case \"heatmap\":\n      return Z(l, r, i, n);\n\n    case \"pie-chart\":\n      return Y(l, r, i, n);\n  }\n}\n\nfunction K(e, t, r, i = !1) {\n  const n = t.getSymbols(),\n        s = n.length ? n[0] : null;\n  return {\n    type: \"simple\",\n    symbol: y(s, r, i),\n    symbologyType: r.symbologyType\n  };\n}\n\nfunction Y(e, t, r, i = !1) {\n  const n = t.getSymbols(),\n        s = n[0],\n        l = n.length > 1 ? n[1] : null;\n  return {\n    type: \"pie-chart\",\n    markerSymbol: y(s, r, i),\n    fillSymbol: y(l, r, i),\n    symbologyType: r.symbologyType\n  };\n}\n\nfunction Q(e, t, r, i, n = !1) {\n  const s = {\n    mesh: !0,\n    use: \"renderer.field\"\n  },\n        l = r.backgroundFillSymbol,\n        {\n    field: o,\n    fieldIndex: a\n  } = U(e, {\n    target: t,\n    field: r.field,\n    valueExpression: r.valueExpression,\n    resultType: \"numeric\",\n    context: s\n  }),\n        u = r.normalizationType,\n        d = \"log\" === u ? \"esriNormalizeByLog\" : \"percent-of-total\" === u ? \"esriNormalizeByPercentOfTotal\" : \"field\" === u ? \"esriNormalizeByField\" : null,\n        f = r.classBreakInfos.map(e => ({\n    symbol: y(e.symbol, i, n),\n    min: e.minValue,\n    max: e.maxValue\n  })).sort((e, t) => e.min - t.min);\n  return {\n    type: \"interval\",\n    attributes: e.fields,\n    field: o,\n    fieldIndex: a,\n    backgroundFillSymbol: y(l, i, n),\n    defaultSymbol: y(r.defaultSymbol, i, n),\n    intervals: f,\n    normalizationField: r.normalizationField,\n    normalizationTotal: r.normalizationTotal,\n    normalizationType: d,\n    isMaxInclusive: r.isMaxInclusive,\n    symbologyType: i.symbologyType\n  };\n}\n\nfunction W(t, r, i, n, s = !1) {\n  const l = [],\n        o = i.backgroundFillSymbol,\n        a = {\n    target: r,\n    context: {\n      mesh: !0\n    },\n    resultType: \"string\"\n  };\n  if (i.field && \"string\" != typeof i.field) throw new e(S, \"Expected renderer.field to be a string\", i);\n  const {\n    field: u,\n    fieldIndex: d\n  } = U(t, { ...a,\n    field: i.field,\n    valueExpression: i.valueExpression\n  });\n\n  for (const e of i.uniqueValueInfos ?? []) l.push({\n    value: \"\" + e.value,\n    symbol: y(e.symbol, n, s)\n  });\n\n  return {\n    type: \"map\",\n    attributes: t.fields,\n    field: u,\n    fieldIndex: d,\n    field2: U(t, { ...a,\n      field: i.field2\n    }).field,\n    field3: U(t, { ...a,\n      field: i.field3\n    }).field,\n    fieldDelimiter: i.fieldDelimiter ?? void 0,\n    backgroundFillSymbol: y(o, n),\n    defaultSymbol: y(i.defaultSymbol, n),\n    map: l,\n    symbologyType: n.symbologyType\n  };\n}\n\nfunction X(e, t, r, i = !1) {\n  return {\n    type: \"dictionary\",\n    config: t.config,\n    fieldMap: t.fieldMap,\n    scaleExpression: t.scaleExpression,\n    url: t.url,\n    symbolOptions: r,\n    symbologyType: r.symbologyType\n  };\n}\n\nfunction Z(e, t, r, i = !1) {\n  const n = t.getSymbols(),\n        s = n.length ? n[0] : null;\n  return {\n    type: \"heatmap\",\n    symbol: y(s, r, i),\n    symbologyType: r.symbologyType\n  };\n}\n\nexport { q as addAggregateFields, $ as createMatcherSchema, U as createRendererAttributeSchema, I as createSchema, y as createSymbolSchema, w as createSymbolSchemaOptions };","map":{"version":3,"names":["e","has","t","isSome","r","unwrap","i","isNone","n","unwrapOr","s","pt2px","l","sqlAnd","o","diff","a","validateLabelingInfo","u","WGLSymbologyType","d","getVVType","f","getTechniqueFromRenderer","p","getVVFlags","c","createSymbolSchema","y","getPtMaxVVSize","m","getSupportedHeatmapRenderer","g","simplifyVisualVariables","b","injectDynamicLevelDependentSizeVisualVariable","x","createClusterRenderer","v","toJSONGeometryType","h","T","getLogger","S","E","w","DEFAULT","visualVariables","type","DOT_DENSITY","HEATMAP","maxVVSize","vvFlags","symbologyType","PIE_CHART","getSymbols","backgroundFillSymbol","push","outline","style","OUTLINE_FILL_SIMPLE","OUTLINE_FILL","SIMPLE","F","I","V","console","debug","A","C","map","O","subtypeCode","subtypeField","definitionExpression","source","fields","toJSON","gdbVersion","historicMoment","getTime","outFields","availableFields","pixelBuffer","spatialReference","timeExtent","customParameters","attributes","indexCount","processors","tileRenderer","targets","fieldName","error","target","L","N","featureReduction","j","R","z","name","context","mesh","storage","filter","featureEffect","feature","input","filters","M","onStatisticExpression","onStatisticField","statisticType","returnType","find","aggregate","params","fixedBinLevel","clusterRadius","clusterPixelBuffer","Math","ceil","clusterMaxSize","U","field","B","valueExpression","fieldIndex","JSON","stringify","label","Array","k","D","resultType","labelExpression","labelExpressionInfo","expression","symbol","where","index","P","labels","matcher","rendererOverride","geometryType","renderer","authoringInfo","isAutoGenerated","$","labelsVisible","labelingInfo","q","renderers","mapping","classes","aggregateFields","aggregateMatcher","sortKey","Set","sublayers","some","warnOnce","_","attributeMapping","add","radius","fieldOffset","J","orderBy","length","warn","order","orderByClassesEnabled","byRenderer","inField","inFieldIndex","getStorageSpec","G","H","binding","vvMapping","normalizationField","valueRepresentation","K","Q","W","X","Z","Y","markerSymbol","fillSymbol","use","normalizationType","classBreakInfos","min","minValue","max","maxValue","sort","defaultSymbol","intervals","normalizationTotal","isMaxInclusive","uniqueValueInfos","value","field2","field3","fieldDelimiter","config","fieldMap","scaleExpression","url","symbolOptions","addAggregateFields","createMatcherSchema","createRendererAttributeSchema","createSchema","createSymbolSchemaOptions"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/layers/features/schemaUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import has from\"../../../../core/has.js\";import t from\"../../../../core/Logger.js\";import{isSome as r,unwrap as i,isNone as n,unwrapOr as s}from\"../../../../core/maybe.js\";import{pt2px as l}from\"../../../../core/screenUtils.js\";import{sqlAnd as o}from\"../../../../core/sql.js\";import{diff as a}from\"../../../../core/accessorSupport/diffUtils.js\";import{validateLabelingInfo as u}from\"../../../../layers/support/labelingInfo.js\";import{WGLSymbologyType as d}from\"../../engine/webgl/enums.js\";import{getVVType as f}from\"../../engine/webgl/Utils.js\";import{getTechniqueFromRenderer as p}from\"../../engine/webgl/techniques/utils.js\";import{getVVFlags as c}from\"../../engine/webgl/util/vvFlagUtils.js\";import{createSymbolSchema as y}from\"./createSymbolSchema.js\";import{getPtMaxVVSize as m}from\"./support/pixelBuffering.js\";import{getSupportedHeatmapRenderer as g,simplifyVisualVariables as b}from\"./support/rendererUtils.js\";import{injectDynamicLevelDependentSizeVisualVariable as x,createClusterRenderer as v}from\"../support/clusterUtils.js\";import{toJSONGeometryType as h}from\"../support/util.js\";const T=t.getLogger(\"esri.views.2d.layers.features.schemaUtils\"),S=\"ValidationError\";function E(e){return e}function w(e,t){let i=0,n=0,s=d.DEFAULT;if(r(e)){if(n=m(e,t),\"visualVariables\"in e&&(i=c(e.visualVariables||[]),\"dot-density\"===e.type&&(s=d.DOT_DENSITY)),\"heatmap\"===e.type&&(s=d.HEATMAP),\"dictionary\"===e.type)return{maxVVSize:n,vvFlags:i,symbologyType:d.DEFAULT};if(\"pie-chart\"===e.type)return{maxVVSize:n,vvFlags:i,symbologyType:d.PIE_CHART};if(s!==d.DOT_DENSITY&&s!==d.HEATMAP){const t=e.getSymbols();\"backgroundFillSymbol\"in e&&e.backgroundFillSymbol&&t.push(e.backgroundFillSymbol);let r=!0,i=!0;for(const e of t)if(\"cim\"===e.type&&(i=!1),\"simple-fill\"===e.type||\"picture-fill\"===e.type){const t=e.outline,n=t&&\"none\"!==t.style&&\"solid\"!==t.style,s=\"simple-fill\"===e.type&&\"none\"!==e.style&&\"solid\"!==e.style;n&&(r=!1),(\"picture-fill\"===e.type||s||n)&&(i=!1)}r?s=i?d.OUTLINE_FILL_SIMPLE:d.OUTLINE_FILL:i&&(s=d.SIMPLE)}}return{vvFlags:i,maxVVSize:n,symbologyType:s}}let F=null;function I(e){if(has(\"esri-2d-update-debug\")){const t=V(e,!0);console.debug(\"Created new schema\",t),console.debug(\"Schema diff\",a(F,t)),F=t}return V(e)}function V(e,t=!1){try{const n=A(e,t),s=C(e),l={};n.map((t=>O(l,e,t)));const a=r(e.subtypeCode)?`${e.subtypeField} = ${e.subtypeCode}`:null,u=i(o(e.definitionExpression,a));return{source:{definitionExpression:u,fields:e.fields.map((e=>e.toJSON())),gdbVersion:e.gdbVersion,historicMoment:e.historicMoment?.getTime(),outFields:e.availableFields,pixelBuffer:e.pixelBuffer,spatialReference:e.spatialReference.toJSON(),timeExtent:e.timeExtent?.toJSON(),customParameters:e.customParameters},attributes:{fields:{},indexCount:0},processors:n,tileRenderer:s,targets:l}}catch(n){if(n.fieldName===S)return T.error(n),null;throw n}}function O(t,r,i){switch(i.target){case\"feature\":return void L(t,N(r),i);case\"aggregate\":{if(!(\"featureReduction\"in r))return;const n=r.featureReduction;switch(n?.type){case\"selection\":throw new e(S,\"Mapview does not support `selection` reduction type\",n);case\"binning\":return L(t,N(r),i),void j(t,n,r.fields.map((e=>e.toJSON())),i);case\"cluster\":return L(t,N(r),i),void R(t,n,r.fields.map((e=>e.toJSON())),i)}}}}function z(e,t){for(const r in t){const i=t[r];if(i.target!==e.name)continue;const n=e.attributes[r];if(n?.context){const e=n.context;e.mesh=e.mesh||i.context?.mesh,e.storage=e.storage||i.context?.storage}else e.attributes[r]=i}return e}function N(e){return[i(e.filter)?.toJSON()??null,i(i(e.featureEffect)?.filter)?.toJSON()??null]}function L(e,t,r){return e.feature||(e.feature={name:\"feature\",input:\"source\",filters:t,attributes:{}}),z(e.feature,r.attributes.fields),e}function M(t,r){const{onStatisticExpression:i,onStatisticField:n,statisticType:s}=t;switch(s){case\"min\":case\"max\":case\"avg\":case\"avg_angle\":case\"sum\":case\"count\":return\"esriFieldTypeDouble\";case\"mode\":{if(i){const{returnType:r}=i;return r?\"string\"===r?\"esriFieldTypeString\":\"esriFieldTypeDouble\":(T.error(new e(S,\"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined\",t)),\"esriFieldTypeString\")}const s=r.find((e=>e.name===n));return s?s.type:(T.error(new e(S,\"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined\",t)),\"esriFieldTypeString\")}}}function j(e,t,r,i){return e.aggregate||(e.aggregate={name:\"aggregate\",type:\"bin\",filters:null,input:\"feature\",params:{fixedBinLevel:t.fixedBinLevel,fields:(t.fields??[]).map((e=>({...e.toJSON(),type:M(e,r)})))},attributes:{}}),z(e.aggregate,i.attributes.fields),e}function R(e,t,r,i){return e.aggregate||(e.aggregate={name:\"aggregate\",type:\"cluster\",input:\"feature\",filters:null,attributes:{},params:{clusterRadius:l(t.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(l(t.clusterMaxSize)/64),fields:(t.fields??[])?.map((e=>({...e.toJSON(),type:M(e,r)})))}}),z(e.aggregate,i.attributes.fields),e}function U(e,t){return t.field?B(e,{...t,type:\"field\",field:t.field}):t.valueExpression?B(e,{...t,type:\"expression\",valueExpression:t.valueExpression}):{field:void 0,fieldIndex:void 0}}function B(e,t){switch(t.type){case\"expression\":{const r=E(t.valueExpression);if(!e.fields[r]){const i=e.indexCount++;e.fields[r]={...t,name:r,fieldIndex:i}}return{fieldIndex:e.fields[r].fieldIndex}}case\"label-expression\":{const r=E(JSON.stringify(t.label));if(!e.fields[r]){const i=e.indexCount++;e.fields[r]={...t,name:r,fieldIndex:i}}return{fieldIndex:e.fields[r].fieldIndex}}case\"field\":{const r=t.field;return\"aggregate\"===t.target&&e.fields[r]||(e.fields[r]={...t,name:r}),{field:r}}case\"statistic\":return e.fields[t.name]={...t},{field:t.name}}}function A(e,t=!1){const r=new Array;let i=0;return r.push(k(e,i++,t)),r}function D(e,t,r,i,n,s=!1){const l=B(e,{type:\"label-expression\",target:r,context:{mesh:!0},resultType:\"string\",label:{labelExpression:t.labelExpression,labelExpressionInfo:t.labelExpressionInfo?{expression:t.labelExpressionInfo.expression}:null,symbol:!!t.symbol,where:t.where}}),{fieldIndex:o}=l;return{...y(t,n,s),fieldIndex:o,target:r,index:i}}function P(t,r,i){const n=\"featureReduction\"in r&&r.featureReduction;if(!n)return{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};const s=\"aggregate\",l=[];let o=null,a=h(r.geometryType),d=[],f=null;if(n)switch(n.type){case\"selection\":return T.error(new e(S,\"Mapview does not support `selection` reduction type\",n)),{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};case\"cluster\":case\"binning\":if(l.push(...n.fields??[]),\"cluster\"===n.type?a=\"esriGeometryPoint\":\"binning\"===n.type&&(a=\"esriGeometryPolygon\"),n.renderer&&!n.renderer.authoringInfo?.isAutoGenerated){if(\"cluster\"===n.type){const{renderer:e}=x(n.renderer,n,null);f=e}else f=n.renderer;const e=w(n.renderer,n);o=$(t,s,n.renderer,e,i),d=n&&n.labelsVisible&&n.labelingInfo||[]}else if(\"cluster\"===n.type){if(f=v(l,r.renderer,n,null,!0),n.symbol){const e=w(f,n);o={type:\"simple\",symbol:y(n.symbol,e,i),symbologyType:e.symbologyType}}d=n&&n.labelsVisible&&n.labelingInfo||[]}}q(t,l);return{labels:u(d,\"binning\"===n.type?\"esriGeometryPolygon\":a),matcher:o,fields:l,rendererOverride:f}}function k(t,i,n=!1){const s={indexCount:0,fields:{}},l=\"featureReduction\"in t?t.featureReduction??void 0:void 0,o=l?\"aggregate\":\"feature\";if(\"sublayers\"in t){const i={type:\"subtype\",subtypeField:t.subtypeField,renderers:{},symbologyType:d.DEFAULT},l={type:\"subtype\",mapping:{},target:\"feature\",subtypeField:t.subtypeField},a={type:\"subtype\",classes:{}},u={type:\"symbol\",target:\"feature\",aggregateFields:[],attributes:s,storage:l,mesh:{matcher:i,aggregateMatcher:null,labels:a,sortKey:null}},f=new Set;let p=0;for(const{renderer:y,subtypeCode:m,labelingInfo:g,labelsVisible:b}of t.sublayers){let t=0;\"visualVariables\"in y&&y.visualVariables&&(y.visualVariables.some((e=>\"rotation\"!==e.type))&&T.warnOnce(\"SubtypeGroupLayer currently only supports rotation visualVariables. All other visualVariable types will be ignored.\"),t=c(y.visualVariables.filter((e=>\"size\"!==e.type))));const u={symbologyType:d.DEFAULT,vvFlags:t,maxVVSize:0},x=$(s,o,y,u,n),v=_(s,o,y),h=b&&g;if(\"dictionary\"===x.type)throw new e(S,\"Dictionary renderer is not supported in subtype layers\");if(\"subtype\"===x.type)throw new e(S,\"Nested subtype renderers is not supported\");if(r(v)&&\"subtype\"===v.type)throw new e(S,\"Nested subtype storage is not supported\");if(r(v)&&r(v.attributeMapping))throw new e(S,\"Non-visual-variable attributes are not supported in subtype layers\");if(\"heatmap\"===x.type)throw new e(S,\"Heatmaps are not supported in subtype layers\");if(\"pie-chart\"===x.type)throw new e(S,\"Pie-charts are not supported in subtype layers\");if(f.has(m))throw new e(S,\"Subtype codes for sublayers must be unique\");f.add(m),i.renderers[m]=x,l.mapping[m]=v,h&&(a.classes[m]=h.map((e=>D(s,e,\"feature\",p++,u,n))))}return u}if(\"heatmap\"===t.renderer?.type&&\"raster\"===g()){const{radius:e,fieldOffset:r,field:i}=t.renderer;return{type:\"heatmap\",aggregateFields:[],attributes:s,target:o,storage:null,mesh:{radius:e,fieldOffset:r,field:U(s,{target:o,field:i,resultType:\"numeric\"}).field}}}const a=P(s,t,n),f=h(t.geometryType),p=a.rendererOverride??t.renderer,y=w(p,l),m=$(s,o,p,y,n),b=_(s,o,p),x=J(s,t.orderBy,t.renderer,l),v=t.labelsVisible&&t.labelingInfo||[],E=u(v,f);let F=0;const I=[...E.map((e=>D(s,e,\"feature\",F++,y,n))),...a.labels.map((e=>D(s,e,\"aggregate\",F++,y,n)))];return{type:\"symbol\",target:o,attributes:s,aggregateFields:a.fields,storage:b,mesh:{matcher:m,labels:{type:\"simple\",classes:I},aggregateMatcher:a.matcher,sortKey:x}}}function C(e){return\"heatmap\"===e.renderer?.type&&\"raster\"===g()?{type:\"heatmap\"}:{type:\"symbol\"}}function J(t,i,n,s){if(r(s))return null;if(r(i)&&i.length){i.length>1&&T.warn(`Layer rendering currently only supports ordering by 1 orderByInfo, but found ${i.length}. All but the first will be discarded`);const r=i[0],n=\"ascending\"===r.order?\"asc\":\"desc\";if(r.field)return{field:r.field,order:n};if(r.valueExpression){return{fieldIndex:B(t,{type:\"expression\",target:\"feature\",valueExpression:r.valueExpression,resultType:\"numeric\"}).fieldIndex,order:n}}return T.error(new e(S,\"Expected to find a field or valueExpression for OrderByInfo\",r)),null}if(r(n)&&\"unique-value\"===n.type&&n.orderByClassesEnabled){return{byRenderer:!0,order:\"asc\"}}return null}function q(e,t){const r={mesh:!0,storage:!0};for(const i of t){const{name:t,onStatisticField:n,onStatisticExpression:s,statisticType:l}=i;let o,a;const u=\"numeric\",d=\"feature\";if(s){a=B(e,{type:\"expression\",target:d,valueExpression:s.expression,resultType:u}).fieldIndex}else{o=B(e,{type:\"field\",target:d,field:n,resultType:u}).field}B(e,{type:\"statistic\",target:\"aggregate\",name:t,context:r,inField:o,inFieldIndex:a,statisticType:l})}}function _(e,t,r){let i;switch(r.type){case\"simple\":case\"class-breaks\":case\"unique-value\":case\"dictionary\":i={visualVariables:!0,attributes:null};break;default:i=p(r).getStorageSpec(r)}return G(e,t,i,r)}function G(e,t,i,s){if(n(i))return null;const{visualVariables:l,attributes:o}=i;let a=null;l&&\"visualVariables\"in s&&(a=H(e,t,s.visualVariables));const u=r(a)?4:0;let d=null;return r(o)&&(d=o.map(((r,i)=>{const{field:n,fieldIndex:s}=U(e,{valueExpression:r.valueExpression,field:r.field,resultType:\"numeric\",target:t});return{binding:i+u,field:n,fieldIndex:s}}))),{type:\"simple\",target:t,attributeMapping:d,vvMapping:a}}function H(e,t,i){if(!i||!i.length)return[];const n={storage:!0},s=\"numeric\";return b(i).map((r=>{const i=f(r.type),{field:l,fieldIndex:o}=U(e,{target:t,valueExpression:r.valueExpression,field:r.field,context:n,resultType:s});switch(r.type){case\"size\":return\"$view.scale\"===r.valueExpression?null:{type:\"size\",binding:i,field:l,fieldIndex:o,normalizationField:U(e,{target:t,field:r.normalizationField,context:n,resultType:s}).field,valueRepresentation:r.valueRepresentation??null};case\"color\":return{type:\"color\",binding:i,field:l,fieldIndex:o,normalizationField:U(e,{target:t,field:r.normalizationField,context:n,resultType:s}).field};case\"opacity\":return{type:\"opacity\",binding:i,field:l,fieldIndex:o,normalizationField:U(e,{target:t,field:r.normalizationField,context:n,resultType:s}).field};case\"rotation\":return{type:\"rotation\",binding:i,field:l,fieldIndex:o}}})).filter(r)}function $(e,t,r,i,n=!1){const l=s(e,{indexCount:0,fields:{}});switch(r.type){case\"simple\":case\"dot-density\":return K(l,r,i,n);case\"class-breaks\":return Q(l,t,r,i,n);case\"unique-value\":return W(l,t,r,i,n);case\"dictionary\":return X(l,r,i,n);case\"heatmap\":return Z(l,r,i,n);case\"pie-chart\":return Y(l,r,i,n)}}function K(e,t,r,i=!1){const n=t.getSymbols(),s=n.length?n[0]:null;return{type:\"simple\",symbol:y(s,r,i),symbologyType:r.symbologyType}}function Y(e,t,r,i=!1){const n=t.getSymbols(),s=n[0],l=n.length>1?n[1]:null;return{type:\"pie-chart\",markerSymbol:y(s,r,i),fillSymbol:y(l,r,i),symbologyType:r.symbologyType}}function Q(e,t,r,i,n=!1){const s={mesh:!0,use:\"renderer.field\"},l=r.backgroundFillSymbol,{field:o,fieldIndex:a}=U(e,{target:t,field:r.field,valueExpression:r.valueExpression,resultType:\"numeric\",context:s}),u=r.normalizationType,d=\"log\"===u?\"esriNormalizeByLog\":\"percent-of-total\"===u?\"esriNormalizeByPercentOfTotal\":\"field\"===u?\"esriNormalizeByField\":null,f=r.classBreakInfos.map((e=>({symbol:y(e.symbol,i,n),min:e.minValue,max:e.maxValue}))).sort(((e,t)=>e.min-t.min));return{type:\"interval\",attributes:e.fields,field:o,fieldIndex:a,backgroundFillSymbol:y(l,i,n),defaultSymbol:y(r.defaultSymbol,i,n),intervals:f,normalizationField:r.normalizationField,normalizationTotal:r.normalizationTotal,normalizationType:d,isMaxInclusive:r.isMaxInclusive,symbologyType:i.symbologyType}}function W(t,r,i,n,s=!1){const l=[],o=i.backgroundFillSymbol,a={target:r,context:{mesh:!0},resultType:\"string\"};if(i.field&&\"string\"!=typeof i.field)throw new e(S,\"Expected renderer.field to be a string\",i);const{field:u,fieldIndex:d}=U(t,{...a,field:i.field,valueExpression:i.valueExpression});for(const e of i.uniqueValueInfos??[])l.push({value:\"\"+e.value,symbol:y(e.symbol,n,s)});return{type:\"map\",attributes:t.fields,field:u,fieldIndex:d,field2:U(t,{...a,field:i.field2}).field,field3:U(t,{...a,field:i.field3}).field,fieldDelimiter:i.fieldDelimiter??void 0,backgroundFillSymbol:y(o,n),defaultSymbol:y(i.defaultSymbol,n),map:l,symbologyType:n.symbologyType}}function X(e,t,r,i=!1){return{type:\"dictionary\",config:t.config,fieldMap:t.fieldMap,scaleExpression:t.scaleExpression,url:t.url,symbolOptions:r,symbologyType:r.symbologyType}}function Z(e,t,r,i=!1){const n=t.getSymbols(),s=n.length?n[0]:null;return{type:\"heatmap\",symbol:y(s,r,i),symbologyType:r.symbologyType}}export{q as addAggregateFields,$ as createMatcherSchema,U as createRendererAttributeSchema,I as createSchema,y as createSymbolSchema,w as createSymbolSchemaOptions};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}