{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../../config.js\";\nimport t from \"../../../../request.js\";\nimport { bidiText as i } from \"../../../../core/BidiText.js\";\nimport s from \"../../../../core/Error.js\";\nimport { getFullyQualifiedFontName as r } from \"../../../../core/fontUtils.js\";\nimport o from \"../../../../core/Logger.js\";\nimport { nextPowerOfTwo as n } from \"../../../../core/mathUtils.js\";\nimport { isNone as a, isSome as h } from \"../../../../core/maybe.js\";\nimport { throwIfAborted as c, isAbortError as u } from \"../../../../core/promiseUtils.js\";\nimport { pt2px as d } from \"../../../../core/screenUtils.js\";\nimport { s as m } from \"../../../../chunks/vec2.js\";\nimport { c as l } from \"../../../../chunks/vec2f32.js\";\nimport g from \"../../../../symbols/cim/Rasterizer.js\";\nimport { TEXTURE_BINDING_GLYPH_ATLAS as p, TEXTURE_BINDING_SPRITE_ATLAS as f, SPRITE_PADDING as _, PATTERN_FILL_RASTERIZATION_SCALE as w } from \"./definitions.js\";\nimport { MosaicType as y } from \"./enums.js\";\nimport M from \"./GlyphMosaic.js\";\nimport I from \"./GlyphSource.js\";\nimport z from \"./SDFConverter.js\";\nimport T from \"./SpriteMosaic.js\";\nimport { is3D as R, charCodes as v, isSimple as j, isSVGResource as x, isImageResource as S, isMarkerPlacementInsidePolygon as b, shouldRepeat as P, getUrl as U, getPMSResourceSize as B, isGIF as G, isPNG as q, isSVGImage as A } from \"./Utils.js\";\nimport { AnimatableTextureResource as C } from \"./animatedFormats/AnimatableTextureResource.js\";\nimport { resize as E } from \"./animatedFormats/utils.js\";\nimport { ok as F } from \"./util/Result.js\";\nimport { keyFromSymbol as L } from \"./util/symbolUtils.js\";\nimport { QueueProcessor as N } from \"../../../support/QueueProcessor.js\";\nimport { TextureSamplingMode as $ } from \"../../../webgl/enums.js\";\nconst k = l(),\n      H = \"arial-unicode-ms-regular\",\n      O = 126,\n      Q = o.getLogger(\"esri.views.2d.engine.webgl.TextureManager\");\n\nfunction V(e, t) {\n  const i = Math.round(d(t) * window.devicePixelRatio),\n        s = i >= 128 ? 2 : 4;\n  return Math.min(e, i * s);\n}\n\nconst Y = (e, t, i) => Q.error(new s(e, t, i));\n\nclass D {\n  static fromMosaic(e, t) {\n    return new D(e, t.page, t.sdf);\n  }\n\n  constructor(e, t, i) {\n    this.mosaicType = e, this.page = t, this.sdf = i;\n  }\n\n}\n\nclass J {\n  constructor(i, r, o) {\n    this._requestRender = i, this.resourceManager = r, this._allowNonPowerOfTwo = o, this._invalidFontsMap = new Map(), this._sdfConverter = new z(O), this._bindingInfos = new Array(), this._hashToBindingIndex = new Map(), this._ongoingRasterizations = new Map(), this._imageRequestQueue = new N({\n      concurrency: 10,\n      process: function () {\n        var _ref = _asyncToGenerator(function* (e, i) {\n          c(i);\n\n          try {\n            return yield t(e, {\n              responseType: \"image\",\n              signal: i\n            });\n          } catch (r) {\n            if (!u(r)) throw new s(\"mapview-invalid-resource\", `Could not fetch requested resource at ${e}`, r);\n            throw r;\n          }\n        });\n\n        return function process(_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    }), this._spriteMosaic = new T(2048, 2048, 500), this._glyphSource = new I(`${e.fontsUrl}/{fontstack}/{range}.pbf`), this._glyphMosaic = new M(1024, 1024, this._glyphSource), this._rasterizer = new g(r);\n  }\n\n  dispose() {\n    this._spriteMosaic.dispose(), this._glyphMosaic.dispose(), this._rasterizer.dispose(), this._sdfConverter.dispose(), this._spriteMosaic = null, this._glyphMosaic = null, this._sdfConverter = null, this._hashToBindingIndex.clear(), this._hashToBindingIndex = null, this._bindingInfos = null, this._ongoingRasterizations.clear(), this._ongoingRasterizations = null, this._imageRequestQueue.clear(), this._imageRequestQueue = null;\n  }\n\n  get sprites() {\n    return this._spriteMosaic;\n  }\n\n  get glyphs() {\n    return this._glyphMosaic;\n  }\n\n  rasterizeItem(e, t, i, s) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (a(e)) return Y(\"mapview-null-resource\", \"Unable to rasterize null resource\"), null;\n\n      switch (e.type) {\n        case \"text\":\n        case \"esriTS\":\n          {\n            const t = yield _this._rasterizeText(e, i, s);\n            return t.forEach(e => _this._setTextureBinding(y.GLYPH, e)), {\n              glyphMosaicItems: t\n            };\n          }\n\n        default:\n          {\n            if (R(e)) return Y(\"mapview-invalid-type\", `MapView does not support symbol type: ${e.type}`, e), null;\n            const i = yield _this._rasterizeSpriteSymbol(e, t, s);\n            return F(i) && i && _this._setTextureBinding(y.SPRITE, i), {\n              spriteMosaicItem: i\n            };\n          }\n      }\n    })();\n  }\n\n  bindTextures(e, t, i, s = !1) {\n    if (0 === i.textureBinding) return;\n    const r = this._bindingInfos[i.textureBinding - 1],\n          o = r.page,\n          n = s ? $.LINEAR_MIPMAP_LINEAR : $.LINEAR;\n\n    switch (r.mosaicType) {\n      case y.SPRITE:\n        {\n          const i = this.sprites.getWidth(o),\n                s = this.sprites.getHeight(o),\n                r = m(k, i, s);\n          return this._spriteMosaic.bind(e, n, o, f), t.setUniform1i(\"u_texture\", f), void t.setUniform2fv(\"u_mosaicSize\", r);\n        }\n\n      case y.GLYPH:\n        {\n          const i = this.glyphs.width,\n                s = this.glyphs.height,\n                r = m(k, i, s);\n          return this._glyphMosaic.bind(e, n, o, p), t.setUniform1i(\"u_texture\", p), void t.setUniform2fv(\"u_mosaicSize\", r);\n        }\n\n      default:\n        Q.error(\"mapview-texture-manager\", `Cannot handle unknown type ${r.mosaicType}`);\n    }\n  }\n\n  _hashMosaic(e, t) {\n    return 1 | e << 1 | (t.sdf ? 1 : 0) << 2 | t.page << 3;\n  }\n\n  _setTextureBinding(e, t) {\n    const i = this._hashMosaic(e, t);\n\n    if (!this._hashToBindingIndex.has(i)) {\n      const s = D.fromMosaic(e, t),\n            r = this._bindingInfos.length + 1;\n      this._hashToBindingIndex.set(i, r), this._bindingInfos.push(s);\n    }\n\n    t.textureBinding = this._hashToBindingIndex.get(i);\n  }\n\n  _rasterizeText(e, t, s) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      let o, n;\n\n      if (\"cim\" in e) {\n        const t = e;\n        o = t.fontName, n = t.text;\n      } else {\n        const t = e;\n        o = r(t.font), n = t.text;\n      }\n\n      const a = _this2._invalidFontsMap.has(o),\n            h = t || v(i(n)[0]);\n\n      try {\n        return yield _this2._glyphMosaic.getGlyphItems(a ? H : o, h, s);\n      } catch (c) {\n        return Y(\"mapview-invalid-resource\", `Couldn't find font ${o}. Falling back to Arial Unicode MS Regular`), _this2._invalidFontsMap.set(o, !0), _this2._glyphMosaic.getGlyphItems(H, h, s);\n      }\n    })();\n  }\n\n  _rasterizeSpriteSymbol(e, t, i) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      if (j(e)) return;\n      const r = L(e);\n      if (_this3._spriteMosaic.has(r)) return _this3._spriteMosaic.getSpriteItem(r);\n      if (x(e) || S(e) && !b(e)) return _this3._handleAsyncResource(r, e, i);\n\n      const o = w,\n            n = _this3._rasterizer.rasterizeJSONResource(e, o);\n\n      if (n) {\n        const {\n          size: t,\n          image: i,\n          sdf: s,\n          simplePattern: o,\n          rasterizationScale: a\n        } = n;\n        return _this3._addItemToMosaic(r, t, {\n          type: \"static\",\n          data: i\n        }, P(e), s, o, a);\n      }\n\n      return new s(\"TextureManager\", \"unrecognized or null rasterized image\");\n    })();\n  }\n\n  _handleAsyncResource(e, t, i) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this4._ongoingRasterizations.has(e)) return _this4._ongoingRasterizations.get(e);\n      let s;\n      s = x(t) ? _this4._handleSVG(t, e, i) : _this4._handleImage(t, e, i), _this4._ongoingRasterizations.set(e, s);\n\n      try {\n        yield s, _this4._ongoingRasterizations.delete(e);\n      } catch {\n        _this4._ongoingRasterizations.delete(e);\n      }\n\n      return s;\n    })();\n  }\n\n  _handleSVG(e, t, i) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const s = [O, O],\n            r = yield _this5._sdfConverter.draw(e.path, i);\n      return _this5._addItemToMosaic(t, s, {\n        type: \"static\",\n        data: new Uint32Array(r.buffer)\n      }, !1, !0, !0);\n    })();\n  }\n\n  _handleGIFOrPNG(e, t, i) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      const r = U(e);\n      yield _this6.resourceManager.fetchResource(r, i);\n\n      let o = _this6.resourceManager.getResource(r);\n\n      if (a(o)) return new s(\"mapview-invalid-resource\", `Could not fetch requested resource at ${r}.`);\n      let h = o.width,\n          c = o.height;\n\n      if (o instanceof HTMLImageElement) {\n        \"esriPMS\" === e.type && (h = Math.round(V(o.width, B(e))), c = Math.round(o.height * (h / o.width)));\n\n        const i = \"cim\" in e ? e.cim.colorSubstitutions : void 0,\n              {\n          size: s,\n          sdf: r,\n          image: n\n        } = _this6._rasterizer.rasterizeImageResource(h, c, o, i);\n\n        return _this6._addItemToMosaic(t, s, {\n          type: \"static\",\n          data: n\n        }, P(e), r, !1);\n      }\n\n      _this6._allowNonPowerOfTwo || (h = n(o.width + 2 * _) - 2 * _, c = n(o.height + 2 * _) - 2 * _), h === o.width && c === o.height || (o = E(o, h, c));\n      const u = e.animatedSymbolProperties || {},\n            d = e.objectId,\n            m = new C(o, _this6._requestRender, u, d);\n      return _this6._addItemToMosaic(t, [m.width, m.height], {\n        type: \"animated\",\n        data: m\n      }, P(e), !1, !1);\n    })();\n  }\n\n  _handleImage(e, t, i) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      if (G(e) || q(e)) return _this7._handleGIFOrPNG(e, t, i);\n      const r = U(e);\n\n      try {\n        let s;\n\n        const o = _this7.resourceManager.getResource(r);\n\n        if (h(o) && o instanceof HTMLImageElement) s = o;else {\n          const {\n            data: e\n          } = yield _this7._imageRequestQueue.push(r, { ...i\n          });\n          s = e;\n        }\n        if (A(r)) if (\"width\" in e && \"height\" in e) s.width = d(e.width), s.height = d(e.height);else if (\"cim\" in e) {\n          const t = e.cim;\n          s.width = d(t.width ?? t.scaleX * t.size), s.height = d(t.size);\n        }\n        if (!s.width || !s.height) return null;\n        let n = s.width,\n            a = s.height;\n        \"esriPMS\" === e.type && (n = Math.round(V(s.width, B(e))), a = Math.round(s.height * (n / s.width)));\n\n        const c = \"cim\" in e ? e.cim.colorSubstitutions : void 0,\n              {\n          size: u,\n          sdf: m,\n          image: l\n        } = _this7._rasterizer.rasterizeImageResource(n, a, s, c);\n\n        return _this7._addItemToMosaic(t, u, {\n          type: \"static\",\n          data: l\n        }, P(e), m, !1);\n      } catch (o) {\n        if (!u(o)) return new s(\"mapview-invalid-resource\", `Could not fetch requested resource at ${r}. ${o.message}`);\n      }\n    })();\n  }\n\n  _addItemToMosaic(e, t, i, s, r, o, n) {\n    return this._spriteMosaic.addSpriteItem(e, t, i, s, r, o, n);\n  }\n\n}\n\nexport { J as default };","map":{"version":3,"names":["e","t","bidiText","i","s","getFullyQualifiedFontName","r","o","nextPowerOfTwo","n","isNone","a","isSome","h","throwIfAborted","c","isAbortError","u","pt2px","d","m","l","g","TEXTURE_BINDING_GLYPH_ATLAS","p","TEXTURE_BINDING_SPRITE_ATLAS","f","SPRITE_PADDING","_","PATTERN_FILL_RASTERIZATION_SCALE","w","MosaicType","y","M","I","z","T","is3D","R","charCodes","v","isSimple","j","isSVGResource","x","isImageResource","S","isMarkerPlacementInsidePolygon","b","shouldRepeat","P","getUrl","U","getPMSResourceSize","B","isGIF","G","isPNG","q","isSVGImage","A","AnimatableTextureResource","C","resize","E","ok","F","keyFromSymbol","L","QueueProcessor","N","TextureSamplingMode","$","k","H","O","Q","getLogger","V","Math","round","window","devicePixelRatio","min","Y","error","D","fromMosaic","page","sdf","constructor","mosaicType","J","_requestRender","resourceManager","_allowNonPowerOfTwo","_invalidFontsMap","Map","_sdfConverter","_bindingInfos","Array","_hashToBindingIndex","_ongoingRasterizations","_imageRequestQueue","concurrency","process","responseType","signal","_spriteMosaic","_glyphSource","fontsUrl","_glyphMosaic","_rasterizer","dispose","clear","sprites","glyphs","rasterizeItem","type","_rasterizeText","forEach","_setTextureBinding","GLYPH","glyphMosaicItems","_rasterizeSpriteSymbol","SPRITE","spriteMosaicItem","bindTextures","textureBinding","LINEAR_MIPMAP_LINEAR","LINEAR","getWidth","getHeight","bind","setUniform1i","setUniform2fv","width","height","_hashMosaic","has","length","set","push","get","fontName","text","font","getGlyphItems","getSpriteItem","_handleAsyncResource","rasterizeJSONResource","size","image","simplePattern","rasterizationScale","_addItemToMosaic","data","_handleSVG","_handleImage","delete","draw","path","Uint32Array","buffer","_handleGIFOrPNG","fetchResource","getResource","HTMLImageElement","cim","colorSubstitutions","rasterizeImageResource","animatedSymbolProperties","objectId","scaleX","message","addSpriteItem","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/webgl/TextureManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../config.js\";import t from\"../../../../request.js\";import{bidiText as i}from\"../../../../core/BidiText.js\";import s from\"../../../../core/Error.js\";import{getFullyQualifiedFontName as r}from\"../../../../core/fontUtils.js\";import o from\"../../../../core/Logger.js\";import{nextPowerOfTwo as n}from\"../../../../core/mathUtils.js\";import{isNone as a,isSome as h}from\"../../../../core/maybe.js\";import{throwIfAborted as c,isAbortError as u}from\"../../../../core/promiseUtils.js\";import{pt2px as d}from\"../../../../core/screenUtils.js\";import{s as m}from\"../../../../chunks/vec2.js\";import{c as l}from\"../../../../chunks/vec2f32.js\";import g from\"../../../../symbols/cim/Rasterizer.js\";import{TEXTURE_BINDING_GLYPH_ATLAS as p,TEXTURE_BINDING_SPRITE_ATLAS as f,SPRITE_PADDING as _,PATTERN_FILL_RASTERIZATION_SCALE as w}from\"./definitions.js\";import{MosaicType as y}from\"./enums.js\";import M from\"./GlyphMosaic.js\";import I from\"./GlyphSource.js\";import z from\"./SDFConverter.js\";import T from\"./SpriteMosaic.js\";import{is3D as R,charCodes as v,isSimple as j,isSVGResource as x,isImageResource as S,isMarkerPlacementInsidePolygon as b,shouldRepeat as P,getUrl as U,getPMSResourceSize as B,isGIF as G,isPNG as q,isSVGImage as A}from\"./Utils.js\";import{AnimatableTextureResource as C}from\"./animatedFormats/AnimatableTextureResource.js\";import{resize as E}from\"./animatedFormats/utils.js\";import{ok as F}from\"./util/Result.js\";import{keyFromSymbol as L}from\"./util/symbolUtils.js\";import{QueueProcessor as N}from\"../../../support/QueueProcessor.js\";import{TextureSamplingMode as $}from\"../../../webgl/enums.js\";const k=l(),H=\"arial-unicode-ms-regular\",O=126,Q=o.getLogger(\"esri.views.2d.engine.webgl.TextureManager\");function V(e,t){const i=Math.round(d(t)*window.devicePixelRatio),s=i>=128?2:4;return Math.min(e,i*s)}const Y=(e,t,i)=>Q.error(new s(e,t,i));class D{static fromMosaic(e,t){return new D(e,t.page,t.sdf)}constructor(e,t,i){this.mosaicType=e,this.page=t,this.sdf=i}}class J{constructor(i,r,o){this._requestRender=i,this.resourceManager=r,this._allowNonPowerOfTwo=o,this._invalidFontsMap=new Map,this._sdfConverter=new z(O),this._bindingInfos=new Array,this._hashToBindingIndex=new Map,this._ongoingRasterizations=new Map,this._imageRequestQueue=new N({concurrency:10,process:async(e,i)=>{c(i);try{return await t(e,{responseType:\"image\",signal:i})}catch(r){if(!u(r))throw new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${e}`,r);throw r}}}),this._spriteMosaic=new T(2048,2048,500),this._glyphSource=new I(`${e.fontsUrl}/{fontstack}/{range}.pbf`),this._glyphMosaic=new M(1024,1024,this._glyphSource),this._rasterizer=new g(r)}dispose(){this._spriteMosaic.dispose(),this._glyphMosaic.dispose(),this._rasterizer.dispose(),this._sdfConverter.dispose(),this._spriteMosaic=null,this._glyphMosaic=null,this._sdfConverter=null,this._hashToBindingIndex.clear(),this._hashToBindingIndex=null,this._bindingInfos=null,this._ongoingRasterizations.clear(),this._ongoingRasterizations=null,this._imageRequestQueue.clear(),this._imageRequestQueue=null}get sprites(){return this._spriteMosaic}get glyphs(){return this._glyphMosaic}async rasterizeItem(e,t,i,s){if(a(e))return Y(\"mapview-null-resource\",\"Unable to rasterize null resource\"),null;switch(e.type){case\"text\":case\"esriTS\":{const t=await this._rasterizeText(e,i,s);return t.forEach((e=>this._setTextureBinding(y.GLYPH,e))),{glyphMosaicItems:t}}default:{if(R(e))return Y(\"mapview-invalid-type\",`MapView does not support symbol type: ${e.type}`,e),null;const i=await this._rasterizeSpriteSymbol(e,t,s);return F(i)&&i&&this._setTextureBinding(y.SPRITE,i),{spriteMosaicItem:i}}}}bindTextures(e,t,i,s=!1){if(0===i.textureBinding)return;const r=this._bindingInfos[i.textureBinding-1],o=r.page,n=s?$.LINEAR_MIPMAP_LINEAR:$.LINEAR;switch(r.mosaicType){case y.SPRITE:{const i=this.sprites.getWidth(o),s=this.sprites.getHeight(o),r=m(k,i,s);return this._spriteMosaic.bind(e,n,o,f),t.setUniform1i(\"u_texture\",f),void t.setUniform2fv(\"u_mosaicSize\",r)}case y.GLYPH:{const i=this.glyphs.width,s=this.glyphs.height,r=m(k,i,s);return this._glyphMosaic.bind(e,n,o,p),t.setUniform1i(\"u_texture\",p),void t.setUniform2fv(\"u_mosaicSize\",r)}default:Q.error(\"mapview-texture-manager\",`Cannot handle unknown type ${r.mosaicType}`)}}_hashMosaic(e,t){return 1|e<<1|(t.sdf?1:0)<<2|t.page<<3}_setTextureBinding(e,t){const i=this._hashMosaic(e,t);if(!this._hashToBindingIndex.has(i)){const s=D.fromMosaic(e,t),r=this._bindingInfos.length+1;this._hashToBindingIndex.set(i,r),this._bindingInfos.push(s)}t.textureBinding=this._hashToBindingIndex.get(i)}async _rasterizeText(e,t,s){let o,n;if(\"cim\"in e){const t=e;o=t.fontName,n=t.text}else{const t=e;o=r(t.font),n=t.text}const a=this._invalidFontsMap.has(o),h=t||v(i(n)[0]);try{return await this._glyphMosaic.getGlyphItems(a?H:o,h,s)}catch(c){return Y(\"mapview-invalid-resource\",`Couldn't find font ${o}. Falling back to Arial Unicode MS Regular`),this._invalidFontsMap.set(o,!0),this._glyphMosaic.getGlyphItems(H,h,s)}}async _rasterizeSpriteSymbol(e,t,i){if(j(e))return;const r=L(e);if(this._spriteMosaic.has(r))return this._spriteMosaic.getSpriteItem(r);if(x(e)||S(e)&&!b(e))return this._handleAsyncResource(r,e,i);const o=w,n=this._rasterizer.rasterizeJSONResource(e,o);if(n){const{size:t,image:i,sdf:s,simplePattern:o,rasterizationScale:a}=n;return this._addItemToMosaic(r,t,{type:\"static\",data:i},P(e),s,o,a)}return new s(\"TextureManager\",\"unrecognized or null rasterized image\")}async _handleAsyncResource(e,t,i){if(this._ongoingRasterizations.has(e))return this._ongoingRasterizations.get(e);let s;s=x(t)?this._handleSVG(t,e,i):this._handleImage(t,e,i),this._ongoingRasterizations.set(e,s);try{await s,this._ongoingRasterizations.delete(e)}catch{this._ongoingRasterizations.delete(e)}return s}async _handleSVG(e,t,i){const s=[O,O],r=await this._sdfConverter.draw(e.path,i);return this._addItemToMosaic(t,s,{type:\"static\",data:new Uint32Array(r.buffer)},!1,!0,!0)}async _handleGIFOrPNG(e,t,i){const r=U(e);await this.resourceManager.fetchResource(r,i);let o=this.resourceManager.getResource(r);if(a(o))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${r}.`);let h=o.width,c=o.height;if(o instanceof HTMLImageElement){\"esriPMS\"===e.type&&(h=Math.round(V(o.width,B(e))),c=Math.round(o.height*(h/o.width)));const i=\"cim\"in e?e.cim.colorSubstitutions:void 0,{size:s,sdf:r,image:n}=this._rasterizer.rasterizeImageResource(h,c,o,i);return this._addItemToMosaic(t,s,{type:\"static\",data:n},P(e),r,!1)}this._allowNonPowerOfTwo||(h=n(o.width+2*_)-2*_,c=n(o.height+2*_)-2*_),h===o.width&&c===o.height||(o=E(o,h,c));const u=e.animatedSymbolProperties||{},d=e.objectId,m=new C(o,this._requestRender,u,d);return this._addItemToMosaic(t,[m.width,m.height],{type:\"animated\",data:m},P(e),!1,!1)}async _handleImage(e,t,i){if(G(e)||q(e))return this._handleGIFOrPNG(e,t,i);const r=U(e);try{let s;const o=this.resourceManager.getResource(r);if(h(o)&&o instanceof HTMLImageElement)s=o;else{const{data:e}=await this._imageRequestQueue.push(r,{...i});s=e}if(A(r))if(\"width\"in e&&\"height\"in e)s.width=d(e.width),s.height=d(e.height);else if(\"cim\"in e){const t=e.cim;s.width=d(t.width??t.scaleX*t.size),s.height=d(t.size)}if(!s.width||!s.height)return null;let n=s.width,a=s.height;\"esriPMS\"===e.type&&(n=Math.round(V(s.width,B(e))),a=Math.round(s.height*(n/s.width)));const c=\"cim\"in e?e.cim.colorSubstitutions:void 0,{size:u,sdf:m,image:l}=this._rasterizer.rasterizeImageResource(n,a,s,c);return this._addItemToMosaic(t,u,{type:\"static\",data:l},P(e),m,!1)}catch(o){if(!u(o))return new s(\"mapview-invalid-resource\",`Could not fetch requested resource at ${r}. ${o.message}`)}}_addItemToMosaic(e,t,i,s,r,o,n){return this._spriteMosaic.addSpriteItem(e,t,i,s,r,o,n)}}export{J as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}