{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../core/Handles.js\";\nimport \"../../core/has.js\";\nimport t from \"../../core/Logger.js\";\nimport { removeMaybe as s, isSome as r } from \"../../core/maybe.js\";\nimport i from \"../../core/PerformanceSampler.js\";\nimport a from \"../../core/PooledArray.js\";\nimport { isAborted as n, createAbortError as _, when as u } from \"../../core/promiseUtils.js\";\nimport { watch as h, initial as o, when as d } from \"../../core/reactiveUtils.js\";\nimport { Milliseconds as E } from \"../../core/time.js\";\nimport { ObservableValue as l } from \"../../core/accessorSupport/tracking/ObservableValue.js\";\nimport { PromiseQueue as T } from \"../../layers/support/PromiseQueue.js\";\nimport c from \"./debugFlags.js\";\nimport { RenderState as m } from \"./RenderState.js\";\n\nfunction g() {\n  return new U.Scheduler();\n}\n\nvar I, R;\n!function (e) {\n  e[e.YIELD = 1] = \"YIELD\";\n}(I || (I = {})), function (e) {\n  e.RESOURCE_CONTROLLER_IMMEDIATE = \"immediate\", e.RESOURCE_CONTROLLER = \"schedule\", e.SLIDE = \"slide\", e.STREAM_DATA_LOADER = \"stream loader\", e.ELEVATION_QUERY = \"elevation query\", e.TERRAIN_SURFACE = \"terrain\", e.SURFACE_GEOMETRY_UPDATES = \"surface geometry updates\", e.LOD_RENDERER = \"LoD renderer\", e.GRAPHICS_CORE = \"Graphics3D\", e.I3S_CONTROLLER = \"I3S\", e.POINT_CLOUD_LAYER = \"point cloud\", e.FEATURE_TILE_FETCHER = \"feature fetcher\", e.OVERLAY = \"overlay\", e.STAGE = \"stage\", e.GRAPHICS_DECONFLICTOR = \"graphics deconflictor\", e.FILTER_VISIBILITY = \"Graphics3D filter visibility\", e.SCALE_VISIBILITY = \"Graphics3D scale visibility\", e.FRUSTUM_VISIBILITY = \"Graphics3D frustum visibility\", e.POINT_OF_INTEREST_FREQUENT = \"POI frequent\", e.POINT_OF_INTEREST_INFREQUENT = \"POI infrequent\", e.LABELER = \"labeler\", e.FEATURE_QUERY_ENGINE = \"feature query\", e.FEATURE_TILE_TREE = \"feature tile tree\", e.FEATURE_TILE_TREE_ACTIVE = \"fast feature tile tree\", e.ELEVATION_ALIGNMENT = \"elevation alignment\", e.TEXT_TEXTURE_ATLAS = \"text texture atlas\", e.TEXTURE_UNLOAD = \"texture unload\", e.LINE_OF_SIGHT_TOOL = \"line of sight tool\", e.LINE_OF_SIGHT_TOOL_INTERACTIVE = \"interactive line of sight tool\", e.ELEVATION_PROFILE = \"elevation profile\", e.SNAPPING = \"snapping\", e.SHADOW_ACCUMULATOR = \"shadow accumulator\", e.CLOUDS_GENERATOR = \"clouds generator\", e[e.TEST_PRIO = 1] = \"TEST_PRIO\";\n}(R || (R = {}));\nconst p = 0,\n      f = new Map([[R.RESOURCE_CONTROLLER_IMMEDIATE, p], [R.RESOURCE_CONTROLLER, 4], [R.SLIDE, p], [R.STREAM_DATA_LOADER, p], [R.ELEVATION_QUERY, p], [R.TERRAIN_SURFACE, 1], [R.SURFACE_GEOMETRY_UPDATES, 1], [R.LOD_RENDERER, 2], [R.GRAPHICS_CORE, 2], [R.I3S_CONTROLLER, 2], [R.POINT_CLOUD_LAYER, 2], [R.FEATURE_TILE_FETCHER, 2], [R.OVERLAY, 4], [R.STAGE, 4], [R.GRAPHICS_DECONFLICTOR, 4], [R.FILTER_VISIBILITY, 4], [R.SCALE_VISIBILITY, 4], [R.FRUSTUM_VISIBILITY, 4], [R.CLOUDS_GENERATOR, 4], [R.POINT_OF_INTEREST_FREQUENT, 6], [R.POINT_OF_INTEREST_INFREQUENT, 30], [R.LABELER, 8], [R.FEATURE_QUERY_ENGINE, 8], [R.FEATURE_TILE_TREE, 16], [R.FEATURE_TILE_TREE_ACTIVE, p], [R.ELEVATION_ALIGNMENT, 12], [R.TEXT_TEXTURE_ATLAS, 12], [R.TEXTURE_UNLOAD, 12], [R.LINE_OF_SIGHT_TOOL, 16], [R.LINE_OF_SIGHT_TOOL_INTERACTIVE, p], [R.SNAPPING, p], [R.SHADOW_ACCUMULATOR, 30]]);\n\nfunction L(e) {\n  return f.has(e) ? f.get(e) : \"number\" == typeof e ? e : 1;\n}\n\nconst A = E(6.5),\n      b = E(1),\n      S = E(30),\n      k = E(1e3 / 30),\n      O = E(100),\n      N = .9;\nvar U, C;\n!function (n) {\n  class _ {\n    get updating() {\n      return this._updating.get();\n    }\n\n    _updatingChanged() {\n      this._updating.set(this._tasks.some(e => e.needsUpdate));\n    }\n\n    constructor() {\n      this._updating = new l(!0), this._microTaskQueued = !1, this._frameNumber = 0, this.performanceInfo = {\n        total: new i(\"total\"),\n        tasks: new Map()\n      }, this._frameTaskTimes = new Map(), this._budget = new g(), this._state = m.INTERACTING, this._tasks = new a(), this._runQueue = new a(), this._load = 0, this._idleStateCallbacks = new a(), this._idleUpdatesStartFired = !1, this._forceTask = !1, this._debug = !1, this._debugHandle = h(() => c.SCHEDULER_LOG_SLOW_TASKS, e => this._debug = e, o);\n\n      for (const t of Object.keys(R)) this.performanceInfo.tasks.set(R[t], new i(R[t]));\n\n      const e = this;\n      this._test = {\n        FRAME_SAFETY_BUDGET: A,\n        INTERACTING_BUDGET: k,\n        IDLE_BUDGET: O,\n\n        get availableBudget() {\n          return e._budget.budget;\n        },\n\n        usedBudget: 0,\n        getBudget: () => e._budget,\n        setBudget: t => e._budget = t,\n        updateTask: e => this._updateTask(e),\n        getState: e => this._getState(e),\n        getRuntime: e => this._getRuntime(e),\n        frameTaskTimes: this._frameTaskTimes,\n        resetRuntimes: () => this._resetRuntimes(),\n        getRunning: () => this._getRunning()\n      };\n    }\n\n    destroy() {\n      this._tasks.toArray().forEach(e => e.remove()), this._tasks.clear(), s(this._debugHandle), this._microTaskQueued = !1, this._updatingChanged();\n    }\n\n    taskRunningChanged(e) {\n      this._updatingChanged(), e && this._budget.remaining > 0 && !this._microTaskQueued && (this._microTaskQueued = !0, queueMicrotask(() => {\n        this._microTaskQueued && (this._microTaskQueued = !1, this._budget.remaining > 0 && this._schedule() && this.frame());\n      }));\n    }\n\n    registerTask(e, t) {\n      const s = L(e),\n            r = new u(this, e, t, s);\n      return this._tasks.push(r), this._updatingChanged(), this.performanceInfo.tasks.has(e) || this.performanceInfo.tasks.set(e, new i(e)), r;\n    }\n\n    registerIdleStateCallbacks(e, t) {\n      const s = {\n        idleBegin: e,\n        idleEnd: t\n      };\n      this._idleStateCallbacks.push(s), this.state === m.IDLE && this._idleUpdatesStartFired && s.idleBegin();\n      const r = this;\n      return {\n        remove: () => this._removeIdleStateCallbacks(s),\n\n        set idleBegin(e) {\n          r._idleUpdatesStartFired && (s.idleEnd(), r._state === m.IDLE && e()), s.idleBegin = e;\n        },\n\n        set idleEnd(e) {\n          s.idleEnd = e;\n        }\n\n      };\n    }\n\n    get load() {\n      return this._load;\n    }\n\n    set state(e) {\n      this._state !== e && (this._state = e, this.state !== m.IDLE && this._idleUpdatesStartFired && (this._idleUpdatesStartFired = !1, this._idleStateCallbacks.forAll(e => e.idleEnd())));\n    }\n\n    get state() {\n      return this._state;\n    }\n\n    updateBudget(e) {\n      this._test.usedBudget = 0, ++this._frameNumber;\n      let t = A,\n          s = e.frameDuration,\n          r = b;\n\n      switch (this.state) {\n        case m.IDLE:\n          t = E(0), s = E(Math.max(O, e.frameDuration)), r = S;\n          break;\n\n        case m.INTERACTING:\n          s = E(Math.max(k, e.frameDuration));\n\n        case m.ANIMATING:\n      }\n\n      return s = E(s - e.elapsedFrameTime - t), this.state !== m.IDLE && s < b && !this._forceTask ? (this._forceTask = !0, !1) : (s = E(Math.max(s, r)), this._budget.reset(s, this.state), this._updateLoad(), this._schedule());\n    }\n\n    frame() {\n      switch (this._forceTask = !1, this._microTaskQueued = !1, this.state) {\n        case m.IDLE:\n          this._idleUpdatesStartFired || (this._idleUpdatesStartFired = !0, this._idleStateCallbacks.forAll(e => e.idleBegin())), this._runIdle();\n          break;\n\n        case m.INTERACTING:\n          this._runInteracting();\n\n          break;\n\n        default:\n          this._runAnimating();\n\n      }\n\n      this._test.usedBudget = this._budget.elapsed;\n    }\n\n    stopFrame() {\n      this._budget.reset(E(0), this._state), this._budget.madeProgress();\n    }\n\n    _removeIdleStateCallbacks(e) {\n      this._idleUpdatesStartFired && e.idleEnd(), this._idleStateCallbacks.removeUnordered(e);\n    }\n\n    removeTask(e) {\n      this._tasks.removeUnordered(e), this._runQueue.removeUnordered(e), this._updatingChanged();\n    }\n\n    _updateTask(e) {\n      this._tasks.forAll(t => {\n        t.name === e && t.setPriority(e);\n      });\n    }\n\n    _getState(e) {\n      if (this._runQueue.some(t => t.name === e)) return C.SCHEDULED;\n      let t = C.IDLE;\n      return this._tasks.forAll(s => {\n        s.name === e && s.needsUpdate && (s.schedulePriority <= 1 ? t = C.READY : t !== C.READY && (t = C.WAITING));\n      }), t;\n    }\n\n    _getRuntime(e) {\n      let t = 0;\n      return this._tasks.forAll(s => {\n        s.name === e && (t += s.runtime);\n      }), t;\n    }\n\n    _resetRuntimes() {\n      this._tasks.forAll(e => e.runtime = 0);\n    }\n\n    _getRunning() {\n      const e = new Map();\n      if (this._tasks.forAll(t => {\n        t.needsUpdate && e.set(t.name, (e.get(t.name) || 0) + 1);\n      }), 0 === e.size) return null;\n      let t = \"\";\n      return e.forEach((e, s) => {\n        t += e > 1 ? ` ${e}x ${s}` : ` ${s}`;\n      }), t;\n    }\n\n    _runIdle() {\n      this._run();\n    }\n\n    _runInteracting() {\n      this._run();\n    }\n\n    _runAnimating() {\n      this._run();\n    }\n\n    _updateLoad() {\n      const e = this._tasks.reduce((e, t) => t.needsUpdate ? ++e : e, 0);\n\n      this._load = this._load * N + e * (1 - N);\n    }\n\n    _schedule() {\n      for (this._runQueue.filterInPlace(e => !!e.needsUpdate || (e.schedulePriority = e.basePriority, !1)), this._tasks.forAll(e => {\n        e.basePriority === p && e.needsUpdate && !this._runQueue.includes(e) && e.blockFrame !== this._frameNumber && this._runQueue.unshift(e);\n      }); 0 === this._runQueue.length;) {\n        let e = !1,\n            t = 0;\n        if (this._tasks.forAll(s => {\n          if (s.needsUpdate && 0 !== s.schedulePriority && s.basePriority !== p && s.blockFrame !== this._frameNumber) if (e = !0, t = Math.max(t, s.basePriority), 1 === s.schedulePriority) s.schedulePriority = 0, this._runQueue.push(s);else --s.schedulePriority;\n        }), !e) return this._updatingChanged(), !1;\n      }\n\n      return this._updatingChanged(), !0;\n    }\n\n    _run() {\n      const e = this._budget.now();\n\n      this._startFrameTaskTimes();\n\n      do {\n        for (; this._runQueue.length > 0;) {\n          const r = this._budget.now(),\n                i = this._runQueue.pop();\n\n          this._budget.resetProgress();\n\n          try {\n            i.task.runTask(this._budget) === I.YIELD && (i.blockFrame = this._frameNumber);\n          } catch (s) {\n            t.getLogger(\"esri.views.support.Scheduler\").error(`Exception in task \"${i.name}\"`, s);\n          }\n\n          !this._budget.hasProgressed && i.blockFrame !== this._frameNumber && i.needsUpdate && (i.name, R.I3S_CONTROLLER, i.blockFrame = this._frameNumber), i.schedulePriority = i.basePriority;\n          const a = this._budget.now() - r;\n          if (i.runtime += a, this._frameTaskTimes.set(i.priority, this._frameTaskTimes.get(i.priority) + a), this._debug && a > 2 * this._budget.budget && console.log(\"Task\", i.name, \"used\", a, \"of max\", this._budget.budget, \"ms\"), this._budget.remaining <= 0) return this._updatingChanged(), void this._recordFrameTaskTimes(this._budget.now() - e);\n        }\n      } while (this._schedule());\n\n      this._updatingChanged(), this._recordFrameTaskTimes(this._budget.now() - e);\n    }\n\n    _startFrameTaskTimes() {\n      for (const e of Object.keys(R)) this._frameTaskTimes.set(R[e], 0);\n    }\n\n    _recordFrameTaskTimes(e) {\n      this._frameTaskTimes.forEach((e, t) => this.performanceInfo.tasks.get(t).record(e)), this.performanceInfo.total.record(e);\n    }\n\n    get test() {\n      return this._test;\n    }\n\n  }\n\n  n.Scheduler = _;\n\n  class u {\n    get task() {\n      return this._task.get();\n    }\n\n    get updating() {\n      return this._queue.running;\n    }\n\n    constructor(t, s, i, a) {\n      this._scheduler = t, this.name = s, this._basePriority = a, this.blockFrame = 0, this.runtime = 0, this._queue = new T(), this._handles = new e(), this.schedulePriority = this._basePriority, this._task = new l(r(i) ? i : this._queue), this._handles.add(d(() => this.task.running, e => t.taskRunningChanged(e)));\n    }\n\n    remove() {\n      this.processQueue(P), this._scheduler.removeTask(this), this.schedule = D.schedule, this.reschedule = D.reschedule, this._handles.destroy();\n    }\n\n    get basePriority() {\n      return this._basePriority;\n    }\n\n    setPriority(e) {\n      this.name = e;\n      const t = L(e);\n      this._basePriority !== p && 0 === this.schedulePriority || (this.schedulePriority = t), this._basePriority = t;\n    }\n\n    get priority() {\n      return this.name;\n    }\n\n    set priority(e) {\n      this.setPriority(e);\n    }\n\n    get needsUpdate() {\n      return this.updating || this.task.running;\n    }\n\n    schedule(e, t, s) {\n      return this._queue.push(e, t, s);\n    }\n\n    reschedule(e, t, s) {\n      return this._queue.unshift(e, t, s);\n    }\n\n    processQueue(e) {\n      this._queue.runTask(e);\n    }\n\n  }\n\n  class g {\n    constructor() {\n      this._begin = \"undefined\" != typeof performance ? performance.now() : 0, this._budget = 0, this._state = m.IDLE, this._done = !1, this._progressed = !1, this._enabled = !0;\n    }\n\n    run(e) {\n      return !this.done && (!0 === e() && this.madeProgress(), !0);\n    }\n\n    get done() {\n      return this._done;\n    }\n\n    get budget() {\n      return this._budget;\n    }\n\n    madeProgress() {\n      return this._progressed = !0, this._done = this.elapsed >= this._budget && this._enabled, this._done;\n    }\n\n    get state() {\n      return this._state;\n    }\n\n    get enabled() {\n      return this._enabled;\n    }\n\n    set enabled(e) {\n      this._enabled = e;\n    }\n\n    reset(e, t) {\n      this._begin = this.now(), this._budget = e, this._state = t, this.resetProgress();\n    }\n\n    get remaining() {\n      return Math.max(this._budget - this.elapsed, 0);\n    }\n\n    now() {\n      return performance.now();\n    }\n\n    get elapsed() {\n      return performance.now() - this._begin;\n    }\n\n    resetProgress() {\n      this._progressed = !1, this._done = !1;\n    }\n\n    get hasProgressed() {\n      return this._progressed;\n    }\n\n  }\n\n  n.Budget = g;\n}(U || (U = {})), function (e) {\n  e.SCHEDULED = \"s\", e.READY = \"r\", e.WAITING = \"w\", e.IDLE = \"i\";\n}(C || (C = {}));\n\nconst P = (() => {\n  const e = new U.Budget();\n  return e.enabled = !1, e;\n})();\n\nclass F {\n  remove() {}\n\n  processQueue() {}\n\n  schedule(e, t, s) {\n    try {\n      if (n(t)) {\n        const e = _();\n\n        return s ? Promise.resolve(s(e)) : Promise.reject(e);\n      }\n\n      return u(e(P));\n    } catch (r) {\n      return Promise.reject(r);\n    }\n  }\n\n  reschedule(e, t, s) {\n    return this.schedule(e, t, s);\n  }\n\n}\n\nconst D = new F();\nexport { D as ImmediateTask, I as Task, R as TaskPriority, C as TaskState, L as getTaskPriority, g as newScheduler, P as noBudget, f as taskPriorities };","map":{"version":3,"names":["e","t","removeMaybe","s","isSome","r","i","a","isAborted","n","createAbortError","_","when","u","watch","h","initial","o","d","Milliseconds","E","ObservableValue","l","PromiseQueue","T","c","RenderState","m","g","U","Scheduler","I","R","YIELD","RESOURCE_CONTROLLER_IMMEDIATE","RESOURCE_CONTROLLER","SLIDE","STREAM_DATA_LOADER","ELEVATION_QUERY","TERRAIN_SURFACE","SURFACE_GEOMETRY_UPDATES","LOD_RENDERER","GRAPHICS_CORE","I3S_CONTROLLER","POINT_CLOUD_LAYER","FEATURE_TILE_FETCHER","OVERLAY","STAGE","GRAPHICS_DECONFLICTOR","FILTER_VISIBILITY","SCALE_VISIBILITY","FRUSTUM_VISIBILITY","POINT_OF_INTEREST_FREQUENT","POINT_OF_INTEREST_INFREQUENT","LABELER","FEATURE_QUERY_ENGINE","FEATURE_TILE_TREE","FEATURE_TILE_TREE_ACTIVE","ELEVATION_ALIGNMENT","TEXT_TEXTURE_ATLAS","TEXTURE_UNLOAD","LINE_OF_SIGHT_TOOL","LINE_OF_SIGHT_TOOL_INTERACTIVE","ELEVATION_PROFILE","SNAPPING","SHADOW_ACCUMULATOR","CLOUDS_GENERATOR","TEST_PRIO","p","f","Map","L","has","get","A","b","S","k","O","N","C","updating","_updating","_updatingChanged","set","_tasks","some","needsUpdate","constructor","_microTaskQueued","_frameNumber","performanceInfo","total","tasks","_frameTaskTimes","_budget","_state","INTERACTING","_runQueue","_load","_idleStateCallbacks","_idleUpdatesStartFired","_forceTask","_debug","_debugHandle","SCHEDULER_LOG_SLOW_TASKS","Object","keys","_test","FRAME_SAFETY_BUDGET","INTERACTING_BUDGET","IDLE_BUDGET","availableBudget","budget","usedBudget","getBudget","setBudget","updateTask","_updateTask","getState","_getState","getRuntime","_getRuntime","frameTaskTimes","resetRuntimes","_resetRuntimes","getRunning","_getRunning","destroy","toArray","forEach","remove","clear","taskRunningChanged","remaining","queueMicrotask","_schedule","frame","registerTask","push","registerIdleStateCallbacks","idleBegin","idleEnd","state","IDLE","_removeIdleStateCallbacks","load","forAll","updateBudget","frameDuration","Math","max","ANIMATING","elapsedFrameTime","reset","_updateLoad","_runIdle","_runInteracting","_runAnimating","elapsed","stopFrame","madeProgress","removeUnordered","removeTask","name","setPriority","SCHEDULED","schedulePriority","READY","WAITING","runtime","size","_run","reduce","filterInPlace","basePriority","includes","blockFrame","unshift","length","now","_startFrameTaskTimes","pop","resetProgress","task","runTask","getLogger","error","hasProgressed","priority","console","log","_recordFrameTaskTimes","record","test","_task","_queue","running","_scheduler","_basePriority","_handles","add","processQueue","P","schedule","D","reschedule","_begin","performance","_done","_progressed","_enabled","run","done","enabled","Budget","F","Promise","resolve","reject","ImmediateTask","Task","TaskPriority","TaskState","getTaskPriority","newScheduler","noBudget","taskPriorities"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/support/Scheduler.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Handles.js\";import\"../../core/has.js\";import t from\"../../core/Logger.js\";import{removeMaybe as s,isSome as r}from\"../../core/maybe.js\";import i from\"../../core/PerformanceSampler.js\";import a from\"../../core/PooledArray.js\";import{isAborted as n,createAbortError as _,when as u}from\"../../core/promiseUtils.js\";import{watch as h,initial as o,when as d}from\"../../core/reactiveUtils.js\";import{Milliseconds as E}from\"../../core/time.js\";import{ObservableValue as l}from\"../../core/accessorSupport/tracking/ObservableValue.js\";import{PromiseQueue as T}from\"../../layers/support/PromiseQueue.js\";import c from\"./debugFlags.js\";import{RenderState as m}from\"./RenderState.js\";function g(){return new U.Scheduler}var I,R;!function(e){e[e.YIELD=1]=\"YIELD\"}(I||(I={})),function(e){e.RESOURCE_CONTROLLER_IMMEDIATE=\"immediate\",e.RESOURCE_CONTROLLER=\"schedule\",e.SLIDE=\"slide\",e.STREAM_DATA_LOADER=\"stream loader\",e.ELEVATION_QUERY=\"elevation query\",e.TERRAIN_SURFACE=\"terrain\",e.SURFACE_GEOMETRY_UPDATES=\"surface geometry updates\",e.LOD_RENDERER=\"LoD renderer\",e.GRAPHICS_CORE=\"Graphics3D\",e.I3S_CONTROLLER=\"I3S\",e.POINT_CLOUD_LAYER=\"point cloud\",e.FEATURE_TILE_FETCHER=\"feature fetcher\",e.OVERLAY=\"overlay\",e.STAGE=\"stage\",e.GRAPHICS_DECONFLICTOR=\"graphics deconflictor\",e.FILTER_VISIBILITY=\"Graphics3D filter visibility\",e.SCALE_VISIBILITY=\"Graphics3D scale visibility\",e.FRUSTUM_VISIBILITY=\"Graphics3D frustum visibility\",e.POINT_OF_INTEREST_FREQUENT=\"POI frequent\",e.POINT_OF_INTEREST_INFREQUENT=\"POI infrequent\",e.LABELER=\"labeler\",e.FEATURE_QUERY_ENGINE=\"feature query\",e.FEATURE_TILE_TREE=\"feature tile tree\",e.FEATURE_TILE_TREE_ACTIVE=\"fast feature tile tree\",e.ELEVATION_ALIGNMENT=\"elevation alignment\",e.TEXT_TEXTURE_ATLAS=\"text texture atlas\",e.TEXTURE_UNLOAD=\"texture unload\",e.LINE_OF_SIGHT_TOOL=\"line of sight tool\",e.LINE_OF_SIGHT_TOOL_INTERACTIVE=\"interactive line of sight tool\",e.ELEVATION_PROFILE=\"elevation profile\",e.SNAPPING=\"snapping\",e.SHADOW_ACCUMULATOR=\"shadow accumulator\",e.CLOUDS_GENERATOR=\"clouds generator\",e[e.TEST_PRIO=1]=\"TEST_PRIO\"}(R||(R={}));const p=0,f=new Map([[R.RESOURCE_CONTROLLER_IMMEDIATE,p],[R.RESOURCE_CONTROLLER,4],[R.SLIDE,p],[R.STREAM_DATA_LOADER,p],[R.ELEVATION_QUERY,p],[R.TERRAIN_SURFACE,1],[R.SURFACE_GEOMETRY_UPDATES,1],[R.LOD_RENDERER,2],[R.GRAPHICS_CORE,2],[R.I3S_CONTROLLER,2],[R.POINT_CLOUD_LAYER,2],[R.FEATURE_TILE_FETCHER,2],[R.OVERLAY,4],[R.STAGE,4],[R.GRAPHICS_DECONFLICTOR,4],[R.FILTER_VISIBILITY,4],[R.SCALE_VISIBILITY,4],[R.FRUSTUM_VISIBILITY,4],[R.CLOUDS_GENERATOR,4],[R.POINT_OF_INTEREST_FREQUENT,6],[R.POINT_OF_INTEREST_INFREQUENT,30],[R.LABELER,8],[R.FEATURE_QUERY_ENGINE,8],[R.FEATURE_TILE_TREE,16],[R.FEATURE_TILE_TREE_ACTIVE,p],[R.ELEVATION_ALIGNMENT,12],[R.TEXT_TEXTURE_ATLAS,12],[R.TEXTURE_UNLOAD,12],[R.LINE_OF_SIGHT_TOOL,16],[R.LINE_OF_SIGHT_TOOL_INTERACTIVE,p],[R.SNAPPING,p],[R.SHADOW_ACCUMULATOR,30]]);function L(e){return f.has(e)?f.get(e):\"number\"==typeof e?e:1}const A=E(6.5),b=E(1),S=E(30),k=E(1e3/30),O=E(100),N=.9;var U,C;!function(n){class _{get updating(){return this._updating.get()}_updatingChanged(){this._updating.set(this._tasks.some((e=>e.needsUpdate)))}constructor(){this._updating=new l(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new i(\"total\"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new g,this._state=m.INTERACTING,this._tasks=new a,this._runQueue=new a,this._load=0,this._idleStateCallbacks=new a,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=h((()=>c.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),o);for(const t of Object.keys(R))this.performanceInfo.tasks.set(R[t],new i(R[t]));const e=this;this._test={FRAME_SAFETY_BUDGET:A,INTERACTING_BUDGET:k,IDLE_BUDGET:O,get availableBudget(){return e._budget.budget},usedBudget:0,getBudget:()=>e._budget,setBudget:t=>e._budget=t,updateTask:e=>this._updateTask(e),getState:e=>this._getState(e),getRuntime:e=>this._getRuntime(e),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),s(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())})))}registerTask(e,t){const s=L(e),r=new u(this,e,t,s);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new i(e)),r}registerIdleStateCallbacks(e,t){const s={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(s),this.state===m.IDLE&&this._idleUpdatesStartFired&&s.idleBegin();const r=this;return{remove:()=>this._removeIdleStateCallbacks(s),set idleBegin(e){r._idleUpdatesStartFired&&(s.idleEnd(),r._state===m.IDLE&&e()),s.idleBegin=e},set idleEnd(e){s.idleEnd=e}}}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==m.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return this._state}updateBudget(e){this._test.usedBudget=0,++this._frameNumber;let t=A,s=e.frameDuration,r=b;switch(this.state){case m.IDLE:t=E(0),s=E(Math.max(O,e.frameDuration)),r=S;break;case m.INTERACTING:s=E(Math.max(k,e.frameDuration));case m.ANIMATING:}return s=E(s-e.elapsedFrameTime-t),this.state!==m.IDLE&&s<b&&!this._forceTask?(this._forceTask=!0,!1):(s=E(Math.max(s,r)),this._budget.reset(s,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case m.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case m.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(E(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e),this._updatingChanged()}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return C.SCHEDULED;let t=C.IDLE;return this._tasks.forAll((s=>{s.name===e&&s.needsUpdate&&(s.schedulePriority<=1?t=C.READY:t!==C.READY&&(t=C.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((s=>{s.name===e&&(t+=s.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t=\"\";return e.forEach(((e,s)=>{t+=e>1?` ${e}x ${s}`:` ${s}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=this._load*N+e*(1-N)}_schedule(){for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{e.basePriority===p&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((s=>{if(s.needsUpdate&&0!==s.schedulePriority&&s.basePriority!==p&&s.blockFrame!==this._frameNumber)if(e=!0,t=Math.max(t,s.basePriority),1===s.schedulePriority)s.schedulePriority=0,this._runQueue.push(s);else--s.schedulePriority})),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const r=this._budget.now(),i=this._runQueue.pop();this._budget.resetProgress();try{i.task.runTask(this._budget)===I.YIELD&&(i.blockFrame=this._frameNumber)}catch(s){t.getLogger(\"esri.views.support.Scheduler\").error(`Exception in task \"${i.name}\"`,s)}!this._budget.hasProgressed&&i.blockFrame!==this._frameNumber&&i.needsUpdate&&(i.name,R.I3S_CONTROLLER,i.blockFrame=this._frameNumber),i.schedulePriority=i.basePriority;const a=this._budget.now()-r;if(i.runtime+=a,this._frameTaskTimes.set(i.priority,this._frameTaskTimes.get(i.priority)+a),this._debug&&a>2*this._budget.budget&&console.log(\"Task\",i.name,\"used\",a,\"of max\",this._budget.budget,\"ms\"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-e)}_startFrameTaskTimes(){for(const e of Object.keys(R))this._frameTaskTimes.set(R[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e)}get test(){return this._test}}n.Scheduler=_;class u{get task(){return this._task.get()}get updating(){return this._queue.running}constructor(t,s,i,a){this._scheduler=t,this.name=s,this._basePriority=a,this.blockFrame=0,this.runtime=0,this._queue=new T,this._handles=new e,this.schedulePriority=this._basePriority,this._task=new l(r(i)?i:this._queue),this._handles.add(d((()=>this.task.running),(e=>t.taskRunningChanged(e))))}remove(){this.processQueue(P),this._scheduler.removeTask(this),this.schedule=D.schedule,this.reschedule=D.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){this.name=e;const t=L(e);this._basePriority!==p&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,s){return this._queue.push(e,t,s)}reschedule(e,t,s){return this._queue.unshift(e,t,s)}processQueue(e){this._queue.runTask(e)}}class g{constructor(){this._begin=\"undefined\"!=typeof performance?performance.now():0,this._budget=0,this._state=m.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}n.Budget=g}(U||(U={})),function(e){e.SCHEDULED=\"s\",e.READY=\"r\",e.WAITING=\"w\",e.IDLE=\"i\"}(C||(C={}));const P=(()=>{const e=new U.Budget;return e.enabled=!1,e})();class F{remove(){}processQueue(){}schedule(e,t,s){try{if(n(t)){const e=_();return s?Promise.resolve(s(e)):Promise.reject(e)}return u(e(P))}catch(r){return Promise.reject(r)}}reschedule(e,t,s){return this.schedule(e,t,s)}}const D=new F;export{D as ImmediateTask,I as Task,R as TaskPriority,C as TaskState,L as getTaskPriority,g as newScheduler,P as noBudget,f as taskPriorities};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}