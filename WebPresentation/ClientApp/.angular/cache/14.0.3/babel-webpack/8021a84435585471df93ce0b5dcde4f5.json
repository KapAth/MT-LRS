{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport { eventKey as t } from \"../../core/events.js\";\nimport { watch as i, initial as r } from \"../../core/reactiveUtils.js\";\nimport { property as s } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { getColorsFromRenderer as o } from \"../../renderers/support/utils.js\";\nimport n from \"../Widget.js\";\nimport l from \"./FeatureMedia/FeatureMediaViewModel.js\";\nimport d from \"./support/FeatureElementInfo.js\";\nimport { shouldOpenInNewTab as c } from \"./support/featureUtils.js\";\nimport { loadChartsModule as u, getColorSet as m } from \"../support/chartUtils.js\";\nimport { isRTL as h } from \"../support/widgetUtils.js\";\nimport { messageBundle as p } from \"../support/decorators/messageBundle.js\";\nimport { tsx as f } from \"../support/jsxFactory.js\";\nimport { isDarkTheme as v } from \"../../support/themeUtils.js\";\nconst M = \"esri-feature-media\",\n      I = {\n  base: M,\n  mediaContainer: `${M}__container`,\n  mediaItemContainer: `${M}__item-container`,\n  mediaItem: `${M}__item`,\n  mediaItemTitle: `${M}__item-title`,\n  mediaItemCaption: `${M}__item-caption`,\n  mediaPrevious: `${M}__previous`,\n  mediaPreviousIconLTR: `${M}__previous-icon`,\n  mediaPreviousIconRTL: `${M}__previous-icon--rtl`,\n  mediaNext: `${M}__next`,\n  mediaNextIconLTR: `${M}__next-icon`,\n  mediaNextIconRTL: `${M}__next-icon--rtl`,\n  mediaChart: `${M}__chart`,\n  mediaButton: `${M}__button`,\n  mediaIcon: `${M}__icon`,\n  iconLeftTriangleArrow: \"esri-icon-left-triangle-arrow\",\n  iconRightTriangleArrow: \"esri-icon-right-triangle-arrow\"\n},\n      _ = .05,\n      g = .95,\n      w = 15,\n      y = \"color\",\n      T = \"tooltip\",\n      b = \"value\",\n      C = \"default-line-value\";\nlet x = class extends n {\n  constructor(e, t) {\n    var _this;\n\n    (super(e, t), _this = this), this._refreshTimer = null, this._refreshIntervalInfo = null, this._featureElementInfo = null, this.viewModel = new l(), this.messages = null, this._getChartDependencies = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (e) {\n        const t = yield u(),\n              {\n          destroyed: i,\n          viewModel: r\n        } = _this;\n        if (i || !r || !e) return;\n        const {\n          activeMediaInfo: s\n        } = r,\n              a = yield _this._getRendererColors(t);\n\n        _this._renderChart({\n          chartDiv: e,\n          mediaInfo: s,\n          chartsModule: t,\n          colorMap: a\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  initialize() {\n    this._featureElementInfo = new d(), this.addHandles([i(() => [this.viewModel?.activeMediaInfo, this.viewModel?.activeMediaInfoIndex], () => this._setupMediaRefreshTimer(), r), i(() => [this.viewModel?.description, this.viewModel?.title], () => this._setupFeatureElementInfo(), r)]);\n  }\n\n  destroy() {\n    this._clearMediaRefreshTimer(), this._featureElementInfo?.destroy();\n  }\n\n  get attributes() {\n    return this.viewModel.attributes;\n  }\n\n  set attributes(e) {\n    this.viewModel.attributes = e;\n  }\n\n  get activeMediaInfoIndex() {\n    return this.viewModel.activeMediaInfoIndex;\n  }\n\n  set activeMediaInfoIndex(e) {\n    this.viewModel.activeMediaInfoIndex = e;\n  }\n\n  get description() {\n    return this.viewModel.description;\n  }\n\n  set description(e) {\n    this.viewModel.description = e;\n  }\n\n  get fieldInfoMap() {\n    return this.viewModel.fieldInfoMap;\n  }\n\n  set fieldInfoMap(e) {\n    this.viewModel.fieldInfoMap = e;\n  }\n\n  get layer() {\n    return this.viewModel.layer;\n  }\n\n  set layer(e) {\n    this.viewModel.layer = e;\n  }\n\n  get mediaInfos() {\n    return this.viewModel.mediaInfos;\n  }\n\n  set mediaInfos(e) {\n    this.viewModel.mediaInfos = e;\n  }\n\n  get popupTemplate() {\n    return this.viewModel.popupTemplate;\n  }\n\n  set popupTemplate(e) {\n    this.viewModel.popupTemplate = e;\n  }\n\n  get relatedInfos() {\n    return this.viewModel.relatedInfos;\n  }\n\n  set relatedInfos(e) {\n    this.viewModel.relatedInfos = e;\n  }\n\n  get title() {\n    return this.viewModel.title;\n  }\n\n  set title(e) {\n    this.viewModel.title = e;\n  }\n\n  render() {\n    return f(\"div\", {\n      bind: this,\n      class: I.base,\n      onkeyup: this._handleMediaKeyup\n    }, this._featureElementInfo?.render(), this.renderMedia());\n  }\n\n  renderMedia() {\n    const {\n      formattedMediaInfoCount: e\n    } = this.viewModel;\n    return e ? f(\"div\", {\n      key: \"media-element-container\",\n      class: I.mediaContainer\n    }, this.renderMediaPageButton(\"previous\"), this.renderMediaInfo(), this.renderMediaPageButton(\"next\")) : null;\n  }\n\n  renderImageMediaInfo(e) {\n    const {\n      _refreshIntervalInfo: t\n    } = this,\n          {\n      activeMediaInfoIndex: i,\n      formattedMediaInfoCount: r\n    } = this.viewModel,\n          {\n      value: s,\n      refreshInterval: a,\n      altText: o,\n      title: n,\n      type: l\n    } = e,\n          {\n      sourceURL: d,\n      linkURL: u\n    } = s,\n          m = c(u ?? void 0) ? \"_blank\" : \"_self\",\n          h = \"_blank\" === m ? \"noreferrer\" : \"\",\n          p = a ? t : null,\n          v = p ? p.timestamp : 0,\n          M = p ? p.sourceURL : d,\n          I = f(\"img\", {\n      alt: o || n,\n      key: `media-${l}-${i}-${r}-${v}`,\n      src: M ?? void 0\n    }),\n          _ = u ? f(\"a\", {\n      title: n,\n      href: u,\n      rel: h,\n      target: m\n    }, I) : null;\n\n    return _ || I;\n  }\n\n  renderChartMediaInfo(e) {\n    const {\n      activeMediaInfoIndex: t,\n      formattedMediaInfoCount: i\n    } = this.viewModel;\n    return f(\"div\", {\n      key: `media-${e.type}-${t}-${i}`,\n      bind: this,\n      class: I.mediaChart,\n      afterCreate: this._getChartDependencies\n    });\n  }\n\n  renderMediaInfoType() {\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    return e ? \"image\" === e.type ? this.renderImageMediaInfo(e) : e.type.includes(\"chart\") ? this.renderChartMediaInfo(e) : null : null;\n  }\n\n  renderMediaInfo() {\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    if (!e) return null;\n    const t = e.title ? f(\"div\", {\n      key: \"media-title\",\n      class: I.mediaItemTitle,\n      innerHTML: e.title\n    }) : null,\n          i = e.caption ? f(\"div\", {\n      key: \"media-caption\",\n      class: I.mediaItemCaption,\n      innerHTML: e.caption\n    }) : null;\n    return f(\"div\", {\n      key: \"media-container\",\n      class: I.mediaItemContainer\n    }, f(\"div\", {\n      key: \"media-item-container\",\n      class: I.mediaItem\n    }, this.renderMediaInfoType()), t, i);\n  }\n\n  renderMediaPageButton(e) {\n    if (this.viewModel.formattedMediaInfoCount < 2) return null;\n    const t = \"previous\" === e,\n          i = t ? this.messages.previous : this.messages.next,\n          r = t ? this.classes(I.mediaButton, I.mediaPrevious) : this.classes(I.mediaButton, I.mediaNext),\n          s = t ? this.classes(I.mediaIcon, I.mediaPreviousIconLTR, I.iconLeftTriangleArrow) : this.classes(I.mediaIcon, I.mediaNextIconLTR, I.iconRightTriangleArrow),\n          a = t ? this.classes(I.mediaIcon, I.mediaPreviousIconRTL, I.iconRightTriangleArrow) : this.classes(I.mediaIcon, I.mediaNextIconRTL, I.iconLeftTriangleArrow),\n          o = t ? \"media-previous\" : \"media-next\",\n          n = t ? this._previous : this._next;\n    return f(\"button\", {\n      type: \"button\",\n      key: o,\n      title: i,\n      \"aria-label\": i,\n      tabIndex: 0,\n      class: r,\n      bind: this,\n      onclick: n\n    }, f(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: s\n    }), f(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: a\n    }));\n  }\n\n  _setupFeatureElementInfo() {\n    const {\n      description: e,\n      title: t\n    } = this;\n    this._featureElementInfo?.set({\n      description: e,\n      title: t\n    });\n  }\n\n  _next() {\n    this.viewModel.next();\n  }\n\n  _previous() {\n    this.viewModel.previous();\n  }\n\n  _getRenderer() {\n    const {\n      isAggregate: e,\n      layer: t\n    } = this.viewModel;\n    return e && t?.featureReduction && \"renderer\" in t.featureReduction ? t.featureReduction.renderer : t?.renderer;\n  }\n\n  _getRendererColors(e) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        am4core: t\n      } = e,\n            i = new Map(),\n            r = _this2._getRenderer(),\n            s = \"default\";\n\n      if (!r) return i;\n      const a = yield o(r);\n      a.delete(s);\n      return Array.from(a.values()).every(e => 1 === e?.length) ? (i.set(C, t.color({\n        r: 50,\n        g: 50,\n        b: 50,\n        a: 1\n      })), Array.from(a.keys()).forEach(e => {\n        e && i.set(e, t.color(a.get(e)?.[0].toCss(!0)));\n      }), i) : i;\n    })();\n  }\n\n  _handleMediaKeyup(e) {\n    const i = t(e);\n    \"ArrowLeft\" === i && (e.stopPropagation(), this.viewModel.previous()), \"ArrowRight\" === i && (e.stopPropagation(), this.viewModel.next());\n  }\n\n  _renderChart(e) {\n    const {\n      abilities: t\n    } = this.viewModel,\n          {\n      chartsModule: i,\n      chartDiv: r,\n      mediaInfo: s,\n      colorMap: a\n    } = e,\n          {\n      value: o,\n      type: n\n    } = s,\n          {\n      am4core: l\n    } = i,\n          d = m(l);\n\n    function c(e) {\n      e instanceof l.ColorSet && d && (e.list = d);\n    }\n\n    v() && l.useTheme(i.am4themes_dark);\n    const u = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    t.chartAnimation && !u.matches ? l.useTheme(i.am4themes_animated) : l.unuseTheme(i.am4themes_animated), l.useTheme(c);\n    const h = \"pie-chart\" === n ? this._createPieChart(e) : this._createXYChart(e);\n    r.setAttribute(\"aria-label\", s.altText || s.title), h.data = o.series.map(e => ({\n      [T]: e.tooltip,\n      [b]: e.value,\n      [y]: a.get(e.fieldName)\n    })).filter(e => \"pie-chart\" !== n || null != e.value && e.value > 0);\n  }\n\n  _customizeChartTooltip(e, t) {\n    e && (e.label.wrap = !0, e.label.maxWidth = 200, e.autoTextColor = !1, e.getFillFromObject = !1, e.label.fill = t.color(\"#ffffff\"), e.background.fill = t.color({\n      r: 0,\n      g: 0,\n      b: 0,\n      a: .7\n    }));\n  }\n\n  _createPieChart(e) {\n    const {\n      chartDiv: t,\n      chartsModule: i\n    } = e,\n          {\n      am4core: r,\n      am4charts: s\n    } = i,\n          a = r.create(t, s.PieChart);\n    a.rtl = h(this.container);\n    const o = a.series.push(new s.PieSeries());\n    return o.labels.template.disabled = !0, o.ticks.template.disabled = !0, o.dataFields.value = b, o.dataFields.category = T, this._customizeChartTooltip(o.tooltip, r), o.slices.template.propertyFields.fill = y, o.slices.template.propertyFields.stroke = y, a;\n  }\n\n  _getMinSeriesValue(e) {\n    let t = 0;\n    return e.forEach(e => t = Math.min(e.value, t)), t;\n  }\n\n  _createColumnChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r\n    } = t,\n          {\n      value: s\n    } = r,\n          {\n      am4core: a,\n      am4charts: o\n    } = i,\n          n = e.xAxes.push(new o.CategoryAxis());\n    n.dataFields.category = T, n.renderer.labels.template.disabled = !0;\n    const l = n.tooltip;\n    this._customizeChartTooltip(l, a), l.events.on(\"sizechanged\", () => {\n      l.dy = -l.contentHeight;\n    });\n    const d = e.yAxes.push(new o.ValueAxis()),\n          c = d.renderer.labels.template;\n    d.renderer.minLabelPosition = _, d.renderer.maxLabelPosition = g, d.min = this._getMinSeriesValue(s.series), this._customizeChartTooltip(d.tooltip, a), c.wrap = !0;\n    const u = e.series.push(new o.ColumnSeries());\n    u.dataFields.valueY = b, u.dataFields.categoryX = T, u.columns.template.propertyFields.fill = y, u.columns.template.propertyFields.stroke = y, e.cursor = new o.XYCursor(), s.series.length > w && (e.scrollbarX = new a.Scrollbar());\n  }\n\n  _createBarChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r\n    } = t,\n          {\n      value: s\n    } = r,\n          {\n      am4core: a,\n      am4charts: o\n    } = i,\n          n = e.yAxes.push(new o.CategoryAxis());\n    n.dataFields.category = T, n.renderer.inversed = !0, n.renderer.labels.template.disabled = !0;\n    const l = n.tooltip;\n    this._customizeChartTooltip(l, a), l.events.on(\"sizechanged\", () => {\n      l.dx = l.contentWidth;\n    });\n    const d = e.xAxes.push(new o.ValueAxis()),\n          c = d.renderer.labels.template;\n    d.renderer.minLabelPosition = _, d.renderer.maxLabelPosition = g, d.min = this._getMinSeriesValue(s.series), this._customizeChartTooltip(d.tooltip, a), c.wrap = !0;\n    const u = e.series.push(new o.ColumnSeries());\n    u.dataFields.valueX = b, u.dataFields.categoryY = T, u.columns.template.propertyFields.fill = y, u.columns.template.propertyFields.stroke = y, e.cursor = new o.XYCursor(), s.series.length > w && (e.scrollbarY = new a.Scrollbar());\n  }\n\n  _createLineChart(e, t) {\n    const {\n      chartsModule: i,\n      mediaInfo: r,\n      colorMap: s\n    } = t,\n          {\n      value: a\n    } = r,\n          {\n      am4core: o,\n      am4charts: n\n    } = i,\n          l = e.xAxes.push(new n.CategoryAxis());\n    l.dataFields.category = T, l.renderer.labels.template.disabled = !0;\n    const d = l.tooltip;\n    this._customizeChartTooltip(d, o), d.events.on(\"sizechanged\", () => {\n      d.dy = -d.contentHeight;\n    });\n    const c = e.yAxes.push(new n.ValueAxis()),\n          u = c.renderer.labels.template;\n    c.renderer.minLabelPosition = _, c.renderer.maxLabelPosition = g, c.min = this._getMinSeriesValue(a.series), this._customizeChartTooltip(c.tooltip, o), u.wrap = !0;\n    const m = e.series.push(new n.LineSeries());\n    m.dataFields.categoryX = T, m.dataFields.valueY = b, m.strokeWidth = 1;\n    const h = s.get(C);\n    h && (m.stroke = h);\n    const p = m.bullets.push(new n.CircleBullet());\n    p.propertyFields.fill = y, p.propertyFields.stroke = y, e.cursor = new n.XYCursor(), a.series.length > w && (e.scrollbarX = new o.Scrollbar());\n  }\n\n  _createXYChart(e) {\n    const {\n      chartDiv: t,\n      chartsModule: i,\n      mediaInfo: r\n    } = e,\n          {\n      type: s\n    } = r,\n          {\n      am4core: a,\n      am4charts: o\n    } = i,\n          n = a.create(t, o.XYChart);\n    return n.rtl = h(this.container), \"column-chart\" === s && this._createColumnChart(n, e), \"bar-chart\" === s && this._createBarChart(n, e), \"line-chart\" === s && this._createLineChart(n, e), n;\n  }\n\n  _clearMediaRefreshTimer() {\n    const {\n      _refreshTimer: e\n    } = this;\n    e && (clearTimeout(e), this._refreshTimer = null);\n  }\n\n  _updateMediaInfoTimestamp(e) {\n    const t = Date.now();\n    this._refreshIntervalInfo = {\n      timestamp: t,\n      sourceURL: e && this._getImageSource(e, t)\n    }, this.scheduleRender();\n  }\n\n  _setupMediaRefreshTimer() {\n    this._clearMediaRefreshTimer();\n\n    const {\n      activeMediaInfo: e\n    } = this.viewModel;\n    e && \"image\" === e.type && e.refreshInterval && this._setRefreshTimeout(e);\n  }\n\n  _setRefreshTimeout(e) {\n    const {\n      refreshInterval: t,\n      value: i\n    } = e;\n    if (!t) return;\n    const r = 6e4 * t;\n\n    this._updateMediaInfoTimestamp(i.sourceURL);\n\n    const s = setInterval(() => {\n      this._updateMediaInfoTimestamp(i.sourceURL);\n    }, r);\n    this._refreshTimer = s;\n  }\n\n  _getImageSource(e, t) {\n    const i = e.includes(\"?\") ? \"&\" : \"?\",\n          [r, s = \"\"] = e.split(\"#\");\n    return `${r}${i}timestamp=${t}${s ? \"#\" : \"\"}${s}`;\n  }\n\n};\ne([s()], x.prototype, \"attributes\", null), e([s()], x.prototype, \"activeMediaInfoIndex\", null), e([s()], x.prototype, \"description\", null), e([s()], x.prototype, \"fieldInfoMap\", null), e([s()], x.prototype, \"layer\", null), e([s()], x.prototype, \"mediaInfos\", null), e([s()], x.prototype, \"popupTemplate\", null), e([s()], x.prototype, \"relatedInfos\", null), e([s()], x.prototype, \"title\", null), e([s({\n  type: l\n})], x.prototype, \"viewModel\", void 0), e([s(), p(\"esri/widgets/Feature/t9n/Feature\")], x.prototype, \"messages\", void 0), x = e([a(\"esri.widgets.Feature.FeatureMedia\")], x);\nconst R = x;\nexport { R as default };","map":{"version":3,"names":["_","e","eventKey","t","watch","i","initial","r","property","s","subclass","a","getColorsFromRenderer","o","n","l","d","shouldOpenInNewTab","c","loadChartsModule","u","getColorSet","m","isRTL","h","messageBundle","p","tsx","f","isDarkTheme","v","M","I","base","mediaContainer","mediaItemContainer","mediaItem","mediaItemTitle","mediaItemCaption","mediaPrevious","mediaPreviousIconLTR","mediaPreviousIconRTL","mediaNext","mediaNextIconLTR","mediaNextIconRTL","mediaChart","mediaButton","mediaIcon","iconLeftTriangleArrow","iconRightTriangleArrow","g","w","y","T","b","C","x","constructor","_refreshTimer","_refreshIntervalInfo","_featureElementInfo","viewModel","messages","_getChartDependencies","destroyed","activeMediaInfo","_getRendererColors","_renderChart","chartDiv","mediaInfo","chartsModule","colorMap","initialize","addHandles","activeMediaInfoIndex","_setupMediaRefreshTimer","description","title","_setupFeatureElementInfo","destroy","_clearMediaRefreshTimer","attributes","fieldInfoMap","layer","mediaInfos","popupTemplate","relatedInfos","render","bind","class","onkeyup","_handleMediaKeyup","renderMedia","formattedMediaInfoCount","key","renderMediaPageButton","renderMediaInfo","renderImageMediaInfo","value","refreshInterval","altText","type","sourceURL","linkURL","timestamp","alt","src","href","rel","target","renderChartMediaInfo","afterCreate","renderMediaInfoType","includes","innerHTML","caption","previous","next","classes","_previous","_next","tabIndex","onclick","set","_getRenderer","isAggregate","featureReduction","renderer","am4core","Map","delete","Array","from","values","every","length","color","keys","forEach","get","toCss","stopPropagation","abilities","ColorSet","list","useTheme","am4themes_dark","window","matchMedia","chartAnimation","matches","am4themes_animated","unuseTheme","_createPieChart","_createXYChart","setAttribute","data","series","map","tooltip","fieldName","filter","_customizeChartTooltip","label","wrap","maxWidth","autoTextColor","getFillFromObject","fill","background","am4charts","create","PieChart","rtl","container","push","PieSeries","labels","template","disabled","ticks","dataFields","category","slices","propertyFields","stroke","_getMinSeriesValue","Math","min","_createColumnChart","xAxes","CategoryAxis","events","on","dy","contentHeight","yAxes","ValueAxis","minLabelPosition","maxLabelPosition","ColumnSeries","valueY","categoryX","columns","cursor","XYCursor","scrollbarX","Scrollbar","_createBarChart","inversed","dx","contentWidth","valueX","categoryY","scrollbarY","_createLineChart","LineSeries","strokeWidth","bullets","CircleBullet","XYChart","clearTimeout","_updateMediaInfoTimestamp","Date","now","_getImageSource","scheduleRender","_setRefreshTimeout","setInterval","split","prototype","R","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/widgets/Feature/FeatureMedia.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{eventKey as t}from\"../../core/events.js\";import{watch as i,initial as r}from\"../../core/reactiveUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{getColorsFromRenderer as o}from\"../../renderers/support/utils.js\";import n from\"../Widget.js\";import l from\"./FeatureMedia/FeatureMediaViewModel.js\";import d from\"./support/FeatureElementInfo.js\";import{shouldOpenInNewTab as c}from\"./support/featureUtils.js\";import{loadChartsModule as u,getColorSet as m}from\"../support/chartUtils.js\";import{isRTL as h}from\"../support/widgetUtils.js\";import{messageBundle as p}from\"../support/decorators/messageBundle.js\";import{tsx as f}from\"../support/jsxFactory.js\";import{isDarkTheme as v}from\"../../support/themeUtils.js\";const M=\"esri-feature-media\",I={base:M,mediaContainer:`${M}__container`,mediaItemContainer:`${M}__item-container`,mediaItem:`${M}__item`,mediaItemTitle:`${M}__item-title`,mediaItemCaption:`${M}__item-caption`,mediaPrevious:`${M}__previous`,mediaPreviousIconLTR:`${M}__previous-icon`,mediaPreviousIconRTL:`${M}__previous-icon--rtl`,mediaNext:`${M}__next`,mediaNextIconLTR:`${M}__next-icon`,mediaNextIconRTL:`${M}__next-icon--rtl`,mediaChart:`${M}__chart`,mediaButton:`${M}__button`,mediaIcon:`${M}__icon`,iconLeftTriangleArrow:\"esri-icon-left-triangle-arrow\",iconRightTriangleArrow:\"esri-icon-right-triangle-arrow\"},_=.05,g=.95,w=15,y=\"color\",T=\"tooltip\",b=\"value\",C=\"default-line-value\";let x=class extends n{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new l,this.messages=null,this._getChartDependencies=async e=>{const t=await u(),{destroyed:i,viewModel:r}=this;if(i||!r||!e)return;const{activeMediaInfo:s}=r,a=await this._getRendererColors(t);this._renderChart({chartDiv:e,mediaInfo:s,chartsModule:t,colorMap:a})}}initialize(){this._featureElementInfo=new d,this.addHandles([i((()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex]),(()=>this._setupMediaRefreshTimer()),r),i((()=>[this.viewModel?.description,this.viewModel?.title]),(()=>this._setupFeatureElementInfo()),r)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo?.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){return f(\"div\",{bind:this,class:I.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?f(\"div\",{key:\"media-element-container\",class:I.mediaContainer},this.renderMediaPageButton(\"previous\"),this.renderMediaInfo(),this.renderMediaPageButton(\"next\")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:i,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:a,altText:o,title:n,type:l}=e,{sourceURL:d,linkURL:u}=s,m=c(u??void 0)?\"_blank\":\"_self\",h=\"_blank\"===m?\"noreferrer\":\"\",p=a?t:null,v=p?p.timestamp:0,M=p?p.sourceURL:d,I=f(\"img\",{alt:o||n,key:`media-${l}-${i}-${r}-${v}`,src:M??void 0}),_=u?f(\"a\",{title:n,href:u,rel:h,target:m},I):null;return _||I}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:i}=this.viewModel;return f(\"div\",{key:`media-${e.type}-${t}-${i}`,bind:this,class:I.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?\"image\"===e.type?this.renderImageMediaInfo(e):e.type.includes(\"chart\")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?f(\"div\",{key:\"media-title\",class:I.mediaItemTitle,innerHTML:e.title}):null,i=e.caption?f(\"div\",{key:\"media-caption\",class:I.mediaItemCaption,innerHTML:e.caption}):null;return f(\"div\",{key:\"media-container\",class:I.mediaItemContainer},f(\"div\",{key:\"media-item-container\",class:I.mediaItem},this.renderMediaInfoType()),t,i)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=\"previous\"===e,i=t?this.messages.previous:this.messages.next,r=t?this.classes(I.mediaButton,I.mediaPrevious):this.classes(I.mediaButton,I.mediaNext),s=t?this.classes(I.mediaIcon,I.mediaPreviousIconLTR,I.iconLeftTriangleArrow):this.classes(I.mediaIcon,I.mediaNextIconLTR,I.iconRightTriangleArrow),a=t?this.classes(I.mediaIcon,I.mediaPreviousIconRTL,I.iconRightTriangleArrow):this.classes(I.mediaIcon,I.mediaNextIconRTL,I.iconLeftTriangleArrow),o=t?\"media-previous\":\"media-next\",n=t?this._previous:this._next;return f(\"button\",{type:\"button\",key:o,title:i,\"aria-label\":i,tabIndex:0,class:r,bind:this,onclick:n},f(\"span\",{\"aria-hidden\":\"true\",class:s}),f(\"span\",{\"aria-hidden\":\"true\",class:a}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo?.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:e,layer:t}=this.viewModel;return e&&t?.featureReduction&&\"renderer\"in t.featureReduction?t.featureReduction.renderer:t?.renderer}async _getRendererColors(e){const{am4core:t}=e,i=new Map,r=this._getRenderer(),s=\"default\";if(!r)return i;const a=await o(r);a.delete(s);return Array.from(a.values()).every((e=>1===e?.length))?(i.set(C,t.color({r:50,g:50,b:50,a:1})),Array.from(a.keys()).forEach((e=>{e&&i.set(e,t.color(a.get(e)?.[0].toCss(!0)))})),i):i}_handleMediaKeyup(e){const i=t(e);\"ArrowLeft\"===i&&(e.stopPropagation(),this.viewModel.previous()),\"ArrowRight\"===i&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:i,chartDiv:r,mediaInfo:s,colorMap:a}=e,{value:o,type:n}=s,{am4core:l}=i,d=m(l);function c(e){e instanceof l.ColorSet&&d&&(e.list=d)}v()&&l.useTheme(i.am4themes_dark);const u=window.matchMedia(\"(prefers-reduced-motion: reduce)\");t.chartAnimation&&!u.matches?l.useTheme(i.am4themes_animated):l.unuseTheme(i.am4themes_animated),l.useTheme(c);const h=\"pie-chart\"===n?this._createPieChart(e):this._createXYChart(e);r.setAttribute(\"aria-label\",s.altText||s.title),h.data=o.series.map((e=>({[T]:e.tooltip,[b]:e.value,[y]:a.get(e.fieldName)}))).filter((e=>\"pie-chart\"!==n||null!=e.value&&e.value>0))}_customizeChartTooltip(e,t){e&&(e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color(\"#ffffff\"),e.background.fill=t.color({r:0,g:0,b:0,a:.7}))}_createPieChart(e){const{chartDiv:t,chartsModule:i}=e,{am4core:r,am4charts:s}=i,a=r.create(t,s.PieChart);a.rtl=h(this.container);const o=a.series.push(new s.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value=b,o.dataFields.category=T,this._customizeChartTooltip(o.tooltip,r),o.slices.template.propertyFields.fill=y,o.slices.template.propertyFields.stroke=y,a}_getMinSeriesValue(e){let t=0;return e.forEach((e=>t=Math.min(e.value,t))),t}_createColumnChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:a,am4charts:o}=i,n=e.xAxes.push(new o.CategoryAxis);n.dataFields.category=T,n.renderer.labels.template.disabled=!0;const l=n.tooltip;this._customizeChartTooltip(l,a),l.events.on(\"sizechanged\",(()=>{l.dy=-l.contentHeight}));const d=e.yAxes.push(new o.ValueAxis),c=d.renderer.labels.template;d.renderer.minLabelPosition=_,d.renderer.maxLabelPosition=g,d.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(d.tooltip,a),c.wrap=!0;const u=e.series.push(new o.ColumnSeries);u.dataFields.valueY=b,u.dataFields.categoryX=T,u.columns.template.propertyFields.fill=y,u.columns.template.propertyFields.stroke=y,e.cursor=new o.XYCursor,s.series.length>w&&(e.scrollbarX=new a.Scrollbar)}_createBarChart(e,t){const{chartsModule:i,mediaInfo:r}=t,{value:s}=r,{am4core:a,am4charts:o}=i,n=e.yAxes.push(new o.CategoryAxis);n.dataFields.category=T,n.renderer.inversed=!0,n.renderer.labels.template.disabled=!0;const l=n.tooltip;this._customizeChartTooltip(l,a),l.events.on(\"sizechanged\",(()=>{l.dx=l.contentWidth}));const d=e.xAxes.push(new o.ValueAxis),c=d.renderer.labels.template;d.renderer.minLabelPosition=_,d.renderer.maxLabelPosition=g,d.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(d.tooltip,a),c.wrap=!0;const u=e.series.push(new o.ColumnSeries);u.dataFields.valueX=b,u.dataFields.categoryY=T,u.columns.template.propertyFields.fill=y,u.columns.template.propertyFields.stroke=y,e.cursor=new o.XYCursor,s.series.length>w&&(e.scrollbarY=new a.Scrollbar)}_createLineChart(e,t){const{chartsModule:i,mediaInfo:r,colorMap:s}=t,{value:a}=r,{am4core:o,am4charts:n}=i,l=e.xAxes.push(new n.CategoryAxis);l.dataFields.category=T,l.renderer.labels.template.disabled=!0;const d=l.tooltip;this._customizeChartTooltip(d,o),d.events.on(\"sizechanged\",(()=>{d.dy=-d.contentHeight}));const c=e.yAxes.push(new n.ValueAxis),u=c.renderer.labels.template;c.renderer.minLabelPosition=_,c.renderer.maxLabelPosition=g,c.min=this._getMinSeriesValue(a.series),this._customizeChartTooltip(c.tooltip,o),u.wrap=!0;const m=e.series.push(new n.LineSeries);m.dataFields.categoryX=T,m.dataFields.valueY=b,m.strokeWidth=1;const h=s.get(C);h&&(m.stroke=h);const p=m.bullets.push(new n.CircleBullet);p.propertyFields.fill=y,p.propertyFields.stroke=y,e.cursor=new n.XYCursor,a.series.length>w&&(e.scrollbarX=new o.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:i,mediaInfo:r}=e,{type:s}=r,{am4core:a,am4charts:o}=i,n=a.create(t,o.XYChart);return n.rtl=h(this.container),\"column-chart\"===s&&this._createColumnChart(n,e),\"bar-chart\"===s&&this._createBarChart(n,e),\"line-chart\"===s&&this._createLineChart(n,e),n}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:e&&this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&\"image\"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:i}=e;if(!t)return;const r=6e4*t;this._updateMediaInfoTimestamp(i.sourceURL);const s=setInterval((()=>{this._updateMediaInfoTimestamp(i.sourceURL)}),r);this._refreshTimer=s}_getImageSource(e,t){const i=e.includes(\"?\")?\"&\":\"?\",[r,s=\"\"]=e.split(\"#\");return`${r}${i}timestamp=${t}${s?\"#\":\"\"}${s}`}};e([s()],x.prototype,\"attributes\",null),e([s()],x.prototype,\"activeMediaInfoIndex\",null),e([s()],x.prototype,\"description\",null),e([s()],x.prototype,\"fieldInfoMap\",null),e([s()],x.prototype,\"layer\",null),e([s()],x.prototype,\"mediaInfos\",null),e([s()],x.prototype,\"popupTemplate\",null),e([s()],x.prototype,\"relatedInfos\",null),e([s()],x.prototype,\"title\",null),e([s({type:l})],x.prototype,\"viewModel\",void 0),e([s(),p(\"esri/widgets/Feature/t9n/Feature\")],x.prototype,\"messages\",void 0),x=e([a(\"esri.widgets.Feature.FeatureMedia\")],x);const R=x;export{R as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}