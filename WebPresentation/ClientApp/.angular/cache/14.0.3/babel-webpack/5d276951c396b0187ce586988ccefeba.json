{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t, disposeMaybe as s } from \"../../../../core/maybe.js\";\nimport { brushes as r } from \"../brushes.js\";\nimport i from \"../vectorTiles/shaders/VTLMaterialManager.js\";\nimport { BitBlitRenderer as n } from \"./BitBlitRenderer.js\";\nimport { WGLDrawPhase as o, WGLGeometryType as a, WGLSymbologyType as l } from \"./enums.js\";\nimport h from \"./MaterialManager.js\";\nimport f from \"./TextureManager.js\";\nimport { TextureUploadManager as c } from \"./TextureUploadManager.js\";\nimport { WorldExtentClipRenderer as _ } from \"./WorldExtentClipRenderer.js\";\nimport { AnimationEffect as d } from \"./effects/AnimationEffect.js\";\nimport { BlendEffect as u } from \"./effects/BlendEffect.js\";\nimport { FeatureEffect as E } from \"./effects/FeatureEffect.js\";\nimport p from \"./effects/HighlightEffect.js\";\nimport { HittestEffect as b } from \"./effects/HittestEffect.js\";\nimport { HittestEffectVTL as g } from \"./effects/HittestEffectVTL.js\";\nimport { EffectManager as T } from \"./effects/post-processing/EffectManager.js\";\nimport m from \"./painter/RenderPass.js\";\nimport { ContextType as C } from \"../../../webgl/context-util.js\";\nimport { TextureType as M, PixelFormat as F, PixelType as R, TextureSamplingMode as w, TextureWrapMode as B, TargetType as S, DepthStencilTargetType as O, RenderbufferFormat as x, BlendFactor as P, CompareFunction as L } from \"../../../webgl/enums.js\";\nimport { FramebufferObject as N } from \"../../../webgl/FramebufferObject.js\";\nimport { Renderbuffer as D } from \"../../../webgl/Renderbuffer.js\";\n\nfunction I(e, t) {\n  switch (e) {\n    case a.LINE:\n      return r.line;\n\n    case a.TEXT:\n      return r.text;\n\n    case a.LABEL:\n      return r.label;\n\n    case a.FILL:\n      return t === l.DOT_DENSITY ? r.dotDensity : r.fill;\n\n    case a.MARKER:\n      switch (t) {\n        case l.HEATMAP:\n          return r.heatmap;\n\n        case l.PIE_CHART:\n          return r.pieChart;\n\n        default:\n          return r.marker;\n      }\n\n  }\n}\n\nclass j {\n  constructor(e, t, s) {\n    this.context = e, this._blitRenderer = new n(), this._worldExtentClipRenderer = new _(), this._isClippedToWorldExtent = !1, this._brushCache = new Map(), this._lastWidth = null, this._lastHeight = null, this._prevFBO = null, this._vtlMaterialManager = new i(), this._blendEffect = new u(), this._stencilBuf = null, this._fbos = null, this._fboPool = [], this._renderTarget = null, this.effects = {\n      highlight: new p(),\n      hittest: new b(),\n      hittestVTL: new g(),\n      integrate: new d(),\n      insideEffect: new E(\"inside\"),\n      outsideEffect: new E(\"outside\")\n    }, this.materialManager = new h(e), this.textureManager = new f(t, s, e.type === C.WEBGL2), this.textureUploadManager = new c(e, t), this._effectsManager = new T();\n  }\n\n  get vectorTilesMaterialManager() {\n    return this._vtlMaterialManager;\n  }\n\n  getRenderTarget() {\n    return this._renderTarget;\n  }\n\n  setRenderTarget(e) {\n    this._renderTarget = e;\n  }\n\n  getFbos(e, t) {\n    if (e !== this._lastWidth || t !== this._lastHeight) {\n      if (this._lastWidth = e, this._lastHeight = t, this._fbos) {\n        for (const s in this._fbos) this._fbos[s].resize(e, t);\n\n        return this._fbos;\n      }\n\n      const s = {\n        target: M.TEXTURE_2D,\n        pixelFormat: F.RGBA,\n        dataType: R.UNSIGNED_BYTE,\n        samplingMode: w.NEAREST,\n        wrapMode: B.CLAMP_TO_EDGE,\n        width: e,\n        height: t\n      },\n            r = {\n        colorTarget: S.TEXTURE,\n        depthStencilTarget: O.DEPTH_STENCIL_RENDER_BUFFER\n      },\n            i = new D(this.context, {\n        width: e,\n        height: t,\n        internalFormat: x.DEPTH_STENCIL\n      });\n      this._stencilBuf = i, this._fbos = {\n        output: new N(this.context, r, s, i),\n        blend: new N(this.context, r, s, i),\n        effect0: new N(this.context, r, s, i)\n      };\n    }\n\n    return this._fbos;\n  }\n\n  acquireFbo(e, t) {\n    let s;\n    s = this._fboPool.length > 0 ? this._fboPool.pop() : new N(this.context, {\n      colorTarget: S.TEXTURE,\n      depthStencilTarget: O.DEPTH_STENCIL_RENDER_BUFFER\n    }, {\n      target: M.TEXTURE_2D,\n      pixelFormat: F.RGBA,\n      dataType: R.UNSIGNED_BYTE,\n      samplingMode: w.NEAREST,\n      wrapMode: B.CLAMP_TO_EDGE,\n      width: e,\n      height: t\n    }, this._stencilBuf);\n    const r = s.descriptor;\n    return r.width === e && r.height === t || s.resize(e, t), s;\n  }\n\n  releaseFbo(e) {\n    this._fboPool.push(e);\n  }\n\n  getSharedStencilBuffer() {\n    return this._stencilBuf;\n  }\n\n  beforeRenderLayers(t, s = null) {\n    const {\n      width: r,\n      height: i\n    } = t.getViewport();\n    this._prevFBO = t.getBoundFramebufferObject();\n    const n = this.getFbos(r, i);\n\n    if (t.bindFramebuffer(n?.output), t.setColorMask(!0, !0, !0, !0), e(s)) {\n      const {\n        r: e,\n        g: r,\n        b: i,\n        a: n\n      } = s.color;\n      t.setClearColor(n * e / 255, n * r / 255, n * i / 255, n);\n    } else t.setClearColor(0, 0, 0, 0);\n\n    t.setDepthWriteEnabled(!0), t.setClearDepth(1), t.clear(t.gl.COLOR_BUFFER_BIT | t.gl.DEPTH_BUFFER_BIT), t.setDepthWriteEnabled(!1);\n  }\n\n  beforeRenderLayer(e, t, s) {\n    const {\n      context: r,\n      blendMode: i,\n      effects: n,\n      requireFBO: o,\n      drawPhase: a\n    } = e;\n    if (o || A(a, i, n, s)) r.bindFramebuffer(this._fbos?.blend), r.setColorMask(!0, !0, !0, !0), r.setClearColor(0, 0, 0, 0), r.setDepthWriteEnabled(!0), r.setClearDepth(1), r.clear(r.gl.COLOR_BUFFER_BIT | r.gl.DEPTH_BUFFER_BIT), r.setDepthWriteEnabled(!1);else {\n      const e = this._getOutputFBO();\n\n      r.bindFramebuffer(e);\n    }\n    r.setDepthWriteEnabled(!1), r.setDepthTestEnabled(!1), r.setStencilTestEnabled(!0), r.setClearStencil(t), r.setStencilWriteMask(255), r.clear(r.gl.STENCIL_BUFFER_BIT);\n  }\n\n  compositeLayer(s, r) {\n    const {\n      context: i,\n      blendMode: n,\n      effects: a,\n      requireFBO: l,\n      drawPhase: h\n    } = s;\n\n    if (l || A(h, n, a, r)) {\n      e(a) && a.length > 0 && h === o.MAP && this._applyEffects(s, a);\n\n      const l = this._getOutputFBO();\n\n      i.bindFramebuffer(l), i.setStencilTestEnabled(!1), i.setStencilWriteMask(0), i.setBlendingEnabled(!0), i.setBlendFunctionSeparate(P.ONE, P.ONE_MINUS_SRC_ALPHA, P.ONE, P.ONE_MINUS_SRC_ALPHA), i.setColorMask(!0, !0, !0, !0);\n      const f = t(n) || h === o.HIGHLIGHT ? \"normal\" : n,\n            c = this._fbos;\n      c?.blend.colorTexture && this._blendEffect.draw(s, c.blend.colorTexture, w.NEAREST, f, r);\n    }\n  }\n\n  renderLayers(e) {\n    e.bindFramebuffer(this._prevFBO);\n\n    const t = this._getOutputFBO();\n\n    t && (e.setDepthTestEnabled(!1), e.setStencilWriteMask(0), this._isClippedToWorldExtent ? (e.setStencilTestEnabled(!0), e.setStencilFunction(L.EQUAL, 1, 255)) : e.setStencilTestEnabled(!1), this.blitTexture(e, t.colorTexture, w.NEAREST));\n  }\n\n  prepareDisplay(t, s, r) {\n    const {\n      context: i\n    } = t;\n\n    if (i.bindFramebuffer(this._prevFBO), i.setColorMask(!0, !0, !0, !0), e(s)) {\n      const {\n        r: e,\n        g: t,\n        b: r,\n        a: n\n      } = s.color;\n      i.setClearColor(n * e / 255, n * t / 255, n * r / 255, n);\n    } else i.setClearColor(0, 0, 0, 0);\n\n    i.setStencilWriteMask(255), i.setClearStencil(0), i.clear(i.gl.COLOR_BUFFER_BIT | i.gl.STENCIL_BUFFER_BIT), this._isClippedToWorldExtent = this._worldExtentClipRenderer.render(t, r);\n  }\n\n  dispose() {\n    if (this.materialManager.dispose(), this.textureManager.dispose(), this.textureUploadManager.destroy(), this._blitRenderer = s(this._blitRenderer), this._worldExtentClipRenderer = s(this._worldExtentClipRenderer), this._brushCache && (this._brushCache.forEach(e => e.dispose()), this._brushCache.clear(), this._brushCache = null), this._fbos) for (const e in this._fbos) this._fbos[e] && this._fbos[e].dispose();\n\n    for (const e of this._fboPool) e.dispose();\n\n    if (this._fboPool.length = 0, this.effects) for (const e in this.effects) this.effects[e] && this.effects[e].dispose();\n    this._effectsManager.dispose(), this._vtlMaterialManager = s(this._vtlMaterialManager), this._prevFBO = null;\n  }\n\n  getBrush(e, t) {\n    const s = I(e, t);\n\n    let r = this._brushCache.get(s);\n\n    return void 0 === r && (r = new s(), this._brushCache.set(s, r)), r;\n  }\n\n  renderObject(e, t, s, i) {\n    const n = r[s];\n    if (!n) return;\n\n    let o = this._brushCache.get(n);\n\n    void 0 === o && (o = new n(), this._brushCache.set(n, o)), o.prepareState(e, i), o.draw(e, t, i);\n  }\n\n  renderObjects(e, t, s, i) {\n    const n = r[s];\n    if (!n) return;\n\n    let o = this._brushCache.get(n);\n\n    void 0 === o && (o = new n(), this._brushCache.set(n, o)), o.drawMany(e, t, i);\n  }\n\n  registerRenderPass(e) {\n    const t = e.brushes.map(e => (this._brushCache.has(e) || this._brushCache.set(e, new e()), this._brushCache.get(e)));\n    return new m(t, e);\n  }\n\n  blitTexture(e, t, s, r = 1) {\n    e.setBlendingEnabled(!0), e.setBlendFunctionSeparate(P.ONE, P.ONE_MINUS_SRC_ALPHA, P.ONE, P.ONE_MINUS_SRC_ALPHA), e.setColorMask(!0, !0, !0, !0), this._blitRenderer.render(e, t, s, r);\n  }\n\n  getPostProcessingEffects(e) {\n    return this._effectsManager.getPostProcessingEffects(e);\n  }\n\n  _getOutputFBO() {\n    return null != this._renderTarget ? this._renderTarget : this._fbos?.output ?? null;\n  }\n\n  _applyEffects(e, t) {\n    const s = this._fbos?.blend;\n    if (!s) return;\n\n    const {\n      context: r\n    } = e,\n          i = this._effectsManager.getPostProcessingEffects(t);\n\n    for (const {\n      postProcessingEffect: n,\n      effect: o\n    } of i) r.bindFramebuffer(s), n.draw(e, s, o);\n  }\n\n}\n\nfunction A(t, s, r, i) {\n  return t !== o.HIGHLIGHT && (1 !== i || e(s) && \"normal\" !== s || e(r) && r.length > 0);\n}\n\nexport { j as default };","map":{"version":3,"names":["isSome","e","isNone","t","disposeMaybe","s","brushes","r","i","BitBlitRenderer","n","WGLDrawPhase","o","WGLGeometryType","a","WGLSymbologyType","l","h","f","TextureUploadManager","c","WorldExtentClipRenderer","_","AnimationEffect","d","BlendEffect","u","FeatureEffect","E","p","HittestEffect","b","HittestEffectVTL","g","EffectManager","T","m","ContextType","C","TextureType","M","PixelFormat","F","PixelType","R","TextureSamplingMode","w","TextureWrapMode","B","TargetType","S","DepthStencilTargetType","O","RenderbufferFormat","x","BlendFactor","P","CompareFunction","L","FramebufferObject","N","Renderbuffer","D","I","LINE","line","TEXT","text","LABEL","label","FILL","DOT_DENSITY","dotDensity","fill","MARKER","HEATMAP","heatmap","PIE_CHART","pieChart","marker","j","constructor","context","_blitRenderer","_worldExtentClipRenderer","_isClippedToWorldExtent","_brushCache","Map","_lastWidth","_lastHeight","_prevFBO","_vtlMaterialManager","_blendEffect","_stencilBuf","_fbos","_fboPool","_renderTarget","effects","highlight","hittest","hittestVTL","integrate","insideEffect","outsideEffect","materialManager","textureManager","type","WEBGL2","textureUploadManager","_effectsManager","vectorTilesMaterialManager","getRenderTarget","setRenderTarget","getFbos","resize","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","NEAREST","wrapMode","CLAMP_TO_EDGE","width","height","colorTarget","TEXTURE","depthStencilTarget","DEPTH_STENCIL_RENDER_BUFFER","internalFormat","DEPTH_STENCIL","output","blend","effect0","acquireFbo","length","pop","descriptor","releaseFbo","push","getSharedStencilBuffer","beforeRenderLayers","getViewport","getBoundFramebufferObject","bindFramebuffer","setColorMask","color","setClearColor","setDepthWriteEnabled","setClearDepth","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","beforeRenderLayer","blendMode","requireFBO","drawPhase","A","_getOutputFBO","setDepthTestEnabled","setStencilTestEnabled","setClearStencil","setStencilWriteMask","STENCIL_BUFFER_BIT","compositeLayer","MAP","_applyEffects","setBlendingEnabled","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","HIGHLIGHT","colorTexture","draw","renderLayers","setStencilFunction","EQUAL","blitTexture","prepareDisplay","render","dispose","destroy","forEach","getBrush","get","set","renderObject","prepareState","renderObjects","drawMany","registerRenderPass","map","has","getPostProcessingEffects","postProcessingEffect","effect","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/webgl/Painter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t,disposeMaybe as s}from\"../../../../core/maybe.js\";import{brushes as r}from\"../brushes.js\";import i from\"../vectorTiles/shaders/VTLMaterialManager.js\";import{BitBlitRenderer as n}from\"./BitBlitRenderer.js\";import{WGLDrawPhase as o,WGLGeometryType as a,WGLSymbologyType as l}from\"./enums.js\";import h from\"./MaterialManager.js\";import f from\"./TextureManager.js\";import{TextureUploadManager as c}from\"./TextureUploadManager.js\";import{WorldExtentClipRenderer as _}from\"./WorldExtentClipRenderer.js\";import{AnimationEffect as d}from\"./effects/AnimationEffect.js\";import{BlendEffect as u}from\"./effects/BlendEffect.js\";import{FeatureEffect as E}from\"./effects/FeatureEffect.js\";import p from\"./effects/HighlightEffect.js\";import{HittestEffect as b}from\"./effects/HittestEffect.js\";import{HittestEffectVTL as g}from\"./effects/HittestEffectVTL.js\";import{EffectManager as T}from\"./effects/post-processing/EffectManager.js\";import m from\"./painter/RenderPass.js\";import{ContextType as C}from\"../../../webgl/context-util.js\";import{TextureType as M,PixelFormat as F,PixelType as R,TextureSamplingMode as w,TextureWrapMode as B,TargetType as S,DepthStencilTargetType as O,RenderbufferFormat as x,BlendFactor as P,CompareFunction as L}from\"../../../webgl/enums.js\";import{FramebufferObject as N}from\"../../../webgl/FramebufferObject.js\";import{Renderbuffer as D}from\"../../../webgl/Renderbuffer.js\";function I(e,t){switch(e){case a.LINE:return r.line;case a.TEXT:return r.text;case a.LABEL:return r.label;case a.FILL:return t===l.DOT_DENSITY?r.dotDensity:r.fill;case a.MARKER:switch(t){case l.HEATMAP:return r.heatmap;case l.PIE_CHART:return r.pieChart;default:return r.marker}}}class j{constructor(e,t,s){this.context=e,this._blitRenderer=new n,this._worldExtentClipRenderer=new _,this._isClippedToWorldExtent=!1,this._brushCache=new Map,this._lastWidth=null,this._lastHeight=null,this._prevFBO=null,this._vtlMaterialManager=new i,this._blendEffect=new u,this._stencilBuf=null,this._fbos=null,this._fboPool=[],this._renderTarget=null,this.effects={highlight:new p,hittest:new b,hittestVTL:new g,integrate:new d,insideEffect:new E(\"inside\"),outsideEffect:new E(\"outside\")},this.materialManager=new h(e),this.textureManager=new f(t,s,e.type===C.WEBGL2),this.textureUploadManager=new c(e,t),this._effectsManager=new T}get vectorTilesMaterialManager(){return this._vtlMaterialManager}getRenderTarget(){return this._renderTarget}setRenderTarget(e){this._renderTarget=e}getFbos(e,t){if(e!==this._lastWidth||t!==this._lastHeight){if(this._lastWidth=e,this._lastHeight=t,this._fbos){for(const s in this._fbos)this._fbos[s].resize(e,t);return this._fbos}const s={target:M.TEXTURE_2D,pixelFormat:F.RGBA,dataType:R.UNSIGNED_BYTE,samplingMode:w.NEAREST,wrapMode:B.CLAMP_TO_EDGE,width:e,height:t},r={colorTarget:S.TEXTURE,depthStencilTarget:O.DEPTH_STENCIL_RENDER_BUFFER},i=new D(this.context,{width:e,height:t,internalFormat:x.DEPTH_STENCIL});this._stencilBuf=i,this._fbos={output:new N(this.context,r,s,i),blend:new N(this.context,r,s,i),effect0:new N(this.context,r,s,i)}}return this._fbos}acquireFbo(e,t){let s;s=this._fboPool.length>0?this._fboPool.pop():new N(this.context,{colorTarget:S.TEXTURE,depthStencilTarget:O.DEPTH_STENCIL_RENDER_BUFFER},{target:M.TEXTURE_2D,pixelFormat:F.RGBA,dataType:R.UNSIGNED_BYTE,samplingMode:w.NEAREST,wrapMode:B.CLAMP_TO_EDGE,width:e,height:t},this._stencilBuf);const r=s.descriptor;return r.width===e&&r.height===t||s.resize(e,t),s}releaseFbo(e){this._fboPool.push(e)}getSharedStencilBuffer(){return this._stencilBuf}beforeRenderLayers(t,s=null){const{width:r,height:i}=t.getViewport();this._prevFBO=t.getBoundFramebufferObject();const n=this.getFbos(r,i);if(t.bindFramebuffer(n?.output),t.setColorMask(!0,!0,!0,!0),e(s)){const{r:e,g:r,b:i,a:n}=s.color;t.setClearColor(n*e/255,n*r/255,n*i/255,n)}else t.setClearColor(0,0,0,0);t.setDepthWriteEnabled(!0),t.setClearDepth(1),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.setDepthWriteEnabled(!1)}beforeRenderLayer(e,t,s){const{context:r,blendMode:i,effects:n,requireFBO:o,drawPhase:a}=e;if(o||A(a,i,n,s))r.bindFramebuffer(this._fbos?.blend),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setDepthWriteEnabled(!0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);else{const e=this._getOutputFBO();r.bindFramebuffer(e)}r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setStencilTestEnabled(!0),r.setClearStencil(t),r.setStencilWriteMask(255),r.clear(r.gl.STENCIL_BUFFER_BIT)}compositeLayer(s,r){const{context:i,blendMode:n,effects:a,requireFBO:l,drawPhase:h}=s;if(l||A(h,n,a,r)){e(a)&&a.length>0&&h===o.MAP&&this._applyEffects(s,a);const l=this._getOutputFBO();i.bindFramebuffer(l),i.setStencilTestEnabled(!1),i.setStencilWriteMask(0),i.setBlendingEnabled(!0),i.setBlendFunctionSeparate(P.ONE,P.ONE_MINUS_SRC_ALPHA,P.ONE,P.ONE_MINUS_SRC_ALPHA),i.setColorMask(!0,!0,!0,!0);const f=t(n)||h===o.HIGHLIGHT?\"normal\":n,c=this._fbos;c?.blend.colorTexture&&this._blendEffect.draw(s,c.blend.colorTexture,w.NEAREST,f,r)}}renderLayers(e){e.bindFramebuffer(this._prevFBO);const t=this._getOutputFBO();t&&(e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),this._isClippedToWorldExtent?(e.setStencilTestEnabled(!0),e.setStencilFunction(L.EQUAL,1,255)):e.setStencilTestEnabled(!1),this.blitTexture(e,t.colorTexture,w.NEAREST))}prepareDisplay(t,s,r){const{context:i}=t;if(i.bindFramebuffer(this._prevFBO),i.setColorMask(!0,!0,!0,!0),e(s)){const{r:e,g:t,b:r,a:n}=s.color;i.setClearColor(n*e/255,n*t/255,n*r/255,n)}else i.setClearColor(0,0,0,0);i.setStencilWriteMask(255),i.setClearStencil(0),i.clear(i.gl.COLOR_BUFFER_BIT|i.gl.STENCIL_BUFFER_BIT),this._isClippedToWorldExtent=this._worldExtentClipRenderer.render(t,r)}dispose(){if(this.materialManager.dispose(),this.textureManager.dispose(),this.textureUploadManager.destroy(),this._blitRenderer=s(this._blitRenderer),this._worldExtentClipRenderer=s(this._worldExtentClipRenderer),this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache.clear(),this._brushCache=null),this._fbos)for(const e in this._fbos)this._fbos[e]&&this._fbos[e].dispose();for(const e of this._fboPool)e.dispose();if(this._fboPool.length=0,this.effects)for(const e in this.effects)this.effects[e]&&this.effects[e].dispose();this._effectsManager.dispose(),this._vtlMaterialManager=s(this._vtlMaterialManager),this._prevFBO=null}getBrush(e,t){const s=I(e,t);let r=this._brushCache.get(s);return void 0===r&&(r=new s,this._brushCache.set(s,r)),r}renderObject(e,t,s,i){const n=r[s];if(!n)return;let o=this._brushCache.get(n);void 0===o&&(o=new n,this._brushCache.set(n,o)),o.prepareState(e,i),o.draw(e,t,i)}renderObjects(e,t,s,i){const n=r[s];if(!n)return;let o=this._brushCache.get(n);void 0===o&&(o=new n,this._brushCache.set(n,o)),o.drawMany(e,t,i)}registerRenderPass(e){const t=e.brushes.map((e=>(this._brushCache.has(e)||this._brushCache.set(e,new e),this._brushCache.get(e))));return new m(t,e)}blitTexture(e,t,s,r=1){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(P.ONE,P.ONE_MINUS_SRC_ALPHA,P.ONE,P.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0),this._blitRenderer.render(e,t,s,r)}getPostProcessingEffects(e){return this._effectsManager.getPostProcessingEffects(e)}_getOutputFBO(){return null!=this._renderTarget?this._renderTarget:this._fbos?.output??null}_applyEffects(e,t){const s=this._fbos?.blend;if(!s)return;const{context:r}=e,i=this._effectsManager.getPostProcessingEffects(t);for(const{postProcessingEffect:n,effect:o}of i)r.bindFramebuffer(s),n.draw(e,s,o)}}function A(t,s,r,i){return t!==o.HIGHLIGHT&&(1!==i||e(s)&&\"normal\"!==s||e(r)&&r.length>0)}export{j as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}