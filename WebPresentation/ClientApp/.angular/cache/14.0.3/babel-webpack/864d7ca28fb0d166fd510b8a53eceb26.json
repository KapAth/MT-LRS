{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport r from \"../core/Collection.js\";\nimport t from \"../core/Error.js\";\nimport { HandleOwnerMixin as s } from \"../core/HandleOwner.js\";\nimport i from \"../core/Handles.js\";\nimport { loadAll as o } from \"../core/loadAll.js\";\nimport { destroyMaybe as a, isSome as n, unwrapOr as l } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as u } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as p, whenOrAbort as y } from \"../core/promiseUtils.js\";\nimport { watch as d, sync as c } from \"../core/reactiveUtils.js\";\nimport { sqlAnd as h } from \"../core/sql.js\";\nimport { urlToObject as m, join as f } from \"../core/urlUtils.js\";\nimport { property as b } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport \"../core/arrayUtils.js\";\nimport { reader as g } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as j } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { OriginId as w, nameToId as v } from \"../core/accessorSupport/PropertyOrigin.js\";\nimport S from \"./Layer.js\";\nimport { APIKeyMixin as L } from \"./mixins/APIKeyMixin.js\";\nimport { ArcGISService as F } from \"./mixins/ArcGISService.js\";\nimport { BlendLayer as _ } from \"./mixins/BlendLayer.js\";\nimport { CustomParametersMixin as x } from \"./mixins/CustomParametersMixin.js\";\nimport { EditBusLayer as I } from \"./mixins/EditBusLayer.js\";\nimport { FeatureLayerBase as C } from \"./mixins/FeatureLayerBase.js\";\nimport { OperationalLayer as P } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as E } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as O } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as T } from \"./mixins/ScaleRangeLayer.js\";\nimport { TemporalLayer as U } from \"./mixins/TemporalLayer.js\";\nimport { titleFromUrlAndName as G } from \"./support/arcgisLayerUrl.js\";\nimport { id as q } from \"./support/commonProperties.js\";\nimport { ensureLayerCredential as A, computeEffectiveEditingEnabled as $, addAttachment as M, updateAttachment as R, applyEdits as k, createQuery as N, deleteAttachments as Q, fetchRecomputedExtents as D, queryAttachments as H, queryObjectIds as V, queryFeatureCount as B, queryExtent as J, queryRelatedFeatures as z, queryRelatedFeaturesCount as K, hasDataChanged as Z } from \"./support/featureLayerUtils.js\";\nimport { defineFieldProperties as W } from \"./support/fieldProperties.js\";\nimport { fixTimeInfoFields as X } from \"./support/fieldUtils.js\";\nimport Y from \"./support/Subtype.js\";\nimport ee from \"./support/SubtypeSublayer.js\";\nimport re from \"./support/TimeInfo.js\";\nimport { serviceSupportsSpatialReference as te } from \"./support/versionUtils.js\";\nimport se from \"../rest/support/Query.js\";\nconst ie = \"SubtypeGroupLayer\",\n      oe = \"esri.layers.SubtypeGroupLayer\";\n\nfunction ae(e, r) {\n  return new t(\"layer:unsupported\", `Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${r}`, {\n    layer: e\n  });\n}\n\nconst ne = W();\nlet le = class extends C(I(_(U(T(O(F(P(E(u(x(L(s(S))))))))))))) {\n  constructor(...e) {\n    super(...e), this._handles = new i(), this._sublayersCollectionChanged = !1, this._sublayerLookup = new Map(), this.fields = null, this.fieldsIndex = null, this.outFields = null, this.subtypes = null, this.sublayers = new (r.ofType(ee))(), this.timeInfo = null, this.title = \"Layer\", this.type = \"subtype-group\", this.addHandles(d(() => this.sublayers, (e, r) => this._handleSublayersChange(e, r), c));\n  }\n\n  destroy() {\n    this.source?.destroy(), this._handles = a(this._handles);\n  }\n\n  normalizeCtorArgs(e, r) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...r\n    } : e;\n  }\n\n  load(e) {\n    var _this = this;\n\n    const r = n(e) ? e.signal : null,\n          s = this.loadFromPortal({\n      supportedTypes: [\"Feature Service\"]\n    }, e).catch(p).then( /*#__PURE__*/_asyncToGenerator(function* () {\n      if (!_this.url) throw new t(\"subtype-grouplayer:missing-url-or-source\", \"SubtypeGroupLayer must be created with either a url or a portal item\");\n      if (null == _this.layerId) throw new t(\"subtype-grouplayer:missing-layerid\", \"layerId is required for a SubtypeGroupLayer created with url\");\n      return _this._initLayerProperties(yield _this.createGraphicsSource(r));\n    })).then(() => this._setUserPrivileges(this.serviceItemId, e)).then(() => A(this, e));\n    return this.addResolvingPromise(s), Promise.resolve(this);\n  }\n\n  get createQueryVersion() {\n    return this.commitProperty(\"definitionExpression\"), this.commitProperty(\"timeExtent\"), this.commitProperty(\"timeOffset\"), this.commitProperty(\"geometryType\"), this.commitProperty(\"gdbVersion\"), this.commitProperty(\"historicMoment\"), this.commitProperty(\"returnZ\"), this.commitProperty(\"capabilities\"), this.commitProperty(\"returnM\"), (this._get(\"createQueryVersion\") ?? 0) + 1;\n  }\n\n  get editingEnabled() {\n    return this.loaded && null != this.capabilities && this.capabilities.operations.supportsEditing && this.userHasEditingPrivileges;\n  }\n\n  get effectiveEditingEnabled() {\n    return $(this);\n  }\n\n  get parsedUrl() {\n    const e = m(this.url);\n    return null != e && null != this.layerId && (e.path = f(e.path, this.layerId.toString())), e;\n  }\n\n  set source(e) {\n    this._get(\"source\") !== e && this._set(\"source\", e);\n  }\n\n  readTitleFromService(e, {\n    name: r\n  }) {\n    return this.url ? G(this.url, r) : r;\n  }\n\n  addAttachment(e, r) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      return M(_this2, e, r, ie);\n    })();\n  }\n\n  updateAttachment(e, r, t) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      return R(_this3, e, r, t, ie);\n    })();\n  }\n\n  applyEdits(e, r) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      return k(_this4, e, r);\n    })();\n  }\n\n  on(e, r) {\n    return super.on(e, r);\n  }\n\n  createGraphicsSource(e) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const {\n        default: r\n      } = yield y(import(\"./graphics/sources/FeatureLayerSource.js\"), e);\n      return new r({\n        layer: _this5\n      }).load({\n        signal: e\n      });\n    })();\n  }\n\n  createQuery() {\n    const e = N(this),\n          r = this.sublayers.map(e => e.subtypeCode);\n    return e.where = h(`${this.subtypeField} IN (${r.join(\",\")})`, this.definitionExpression), e;\n  }\n\n  deleteAttachments(e, r) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      return Q(_this6, e, r, ie);\n    })();\n  }\n\n  fetchRecomputedExtents(e) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      return D(_this7, e, ie);\n    })();\n  }\n\n  getFieldDomain(e, r) {\n    return this._getLayerDomain(e);\n  }\n\n  getField(e) {\n    return this.fieldsIndex.get(e);\n  }\n\n  findSublayerForFeature(e) {\n    const r = this.fieldsIndex.get(this.subtypeField),\n          t = e.attributes[r.name];\n    return this._sublayerLookup.get(t);\n  }\n\n  loadAll() {\n    return o(this, e => {\n      e(this.sublayers);\n    });\n  }\n\n  queryAttachments(e, r) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      return H(_this8, e, r, ie);\n    })();\n  }\n\n  queryFeatures(e, r) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      const t = yield _this9.load(),\n            s = se.from(e) ?? t.createQuery(),\n            i = l(s.outFields, []);\n      i.includes(_this9.subtypeField) || (i.push(_this9.subtypeField), s.outFields = i);\n      const o = yield t.source.queryFeatures(s, r);\n      if (o?.features) for (const a of o.features) a.layer = a.sourceLayer = _this9.findSublayerForFeature(a);\n      return o;\n    })();\n  }\n\n  queryObjectIds(e, r) {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      return V(_this10, e, r, ie);\n    })();\n  }\n\n  queryFeatureCount(e, r) {\n    var _this11 = this;\n\n    return _asyncToGenerator(function* () {\n      return B(_this11, e, r, ie);\n    })();\n  }\n\n  queryExtent(e, r) {\n    var _this12 = this;\n\n    return _asyncToGenerator(function* () {\n      return J(_this12, e, r, ie);\n    })();\n  }\n\n  queryRelatedFeatures(e, r) {\n    var _this13 = this;\n\n    return _asyncToGenerator(function* () {\n      return z(_this13, e, r, ie);\n    })();\n  }\n\n  queryRelatedFeaturesCount(e, r) {\n    var _this14 = this;\n\n    return _asyncToGenerator(function* () {\n      return K(_this14, e, r, ie);\n    })();\n  }\n\n  write(e, r) {\n    const {\n      origin: s,\n      layerContainerType: i,\n      messages: o\n    } = r;\n\n    if (this.isTable) {\n      if (\"web-scene\" === s || \"web-map\" === s && \"tables\" !== i) return o?.push(ae(this, \"using a table source cannot be written to web scenes and web maps\")), null;\n    } else if (this.loaded && \"web-map\" === s && \"tables\" === i) return o?.push(ae(this, \"using a non-table source cannot be written to tables in web maps\")), null;\n\n    return this.sublayers?.length ? super.write(e, r) : (o?.push(new t(\"web-document-write:invalid-property\", `Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`, {\n      layer: this\n    })), null);\n  }\n\n  serviceSupportsSpatialReference(e) {\n    return !!this.loaded && te(this, e);\n  }\n\n  _getLayerDomain(e) {\n    const r = this.fieldsIndex.get(e);\n    return r ? r.domain : null;\n  }\n\n  _initLayerProperties(e) {\n    var _this15 = this;\n\n    return _asyncToGenerator(function* () {\n      _this15._set(\"source\", e);\n\n      const {\n        sourceJSON: r\n      } = e;\n      if (r && (_this15.sourceJSON = r, _this15.read(r, {\n        origin: \"service\",\n        url: _this15.parsedUrl\n      })), _this15.isTable) throw new t(\"subtype-grouplayer:unsupported-source\", \"SubtypeGroupLayer cannot be created using a layer with table source\");\n      if (!_this15.subtypes?.length) throw new t(\"subtype-grouplayer:missing-subtypes\", \"SubtypeGroupLayer must be created using a layer with subtypes\");\n      _this15._verifyFields(), X(_this15.timeInfo, _this15.fieldsIndex);\n    })();\n  }\n\n  hasDataChanged() {\n    var _this16 = this;\n\n    return _asyncToGenerator(function* () {\n      return Z(_this16);\n    })();\n  }\n\n  _verifyFields() {\n    const e = this.parsedUrl?.path ?? \"undefined\";\n    this.objectIdField || console.log(\"SubtypeGroupLayer: 'objectIdField' property is not defined (url: \" + e + \")\"), this.isTable || -1 !== e.search(/\\/FeatureServer\\//i) || this.fields?.some(e => \"geometry\" === e.type) || console.log(\"SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: \" + e + \")\");\n  }\n\n  _handleSublayersChange(e, r) {\n    r && (r.forEach(e => {\n      e.parent = null;\n    }), this.handles.remove(\"sublayers-owner\"), this._sublayerLookup.clear()), e && (e.forEach(e => {\n      e.parent = this, this._sublayerLookup.set(e.subtypeCode, e);\n    }), this._sublayersCollectionChanged = !1, this.handles.add([e.on(\"after-add\", ({\n      item: e\n    }) => {\n      e.parent = this, this._sublayerLookup.set(e.subtypeCode, e);\n    }), e.on(\"after-remove\", ({\n      item: e\n    }) => {\n      e.parent = null, this._sublayerLookup.delete(e.subtypeCode);\n    }), e.on(\"after-changes\", () => {\n      this._sublayersCollectionChanged = !0;\n    })], \"sublayers-owner\"));\n  }\n\n};\ne([b({\n  readOnly: !0\n})], le.prototype, \"createQueryVersion\", null), e([b({\n  readOnly: !0\n})], le.prototype, \"editingEnabled\", null), e([b({\n  readOnly: !0\n})], le.prototype, \"effectiveEditingEnabled\", null), e([b({ ...ne.fields,\n  readOnly: !0,\n  json: {\n    origins: {\n      service: {\n        read: !0\n      }\n    },\n    read: !1\n  }\n})], le.prototype, \"fields\", void 0), e([b(ne.fieldsIndex)], le.prototype, \"fieldsIndex\", void 0), e([b(q)], le.prototype, \"id\", void 0), e([b({\n  type: [\"show\", \"hide\", \"hide-children\"]\n})], le.prototype, \"listMode\", void 0), e([b({\n  value: \"SubtypeGroupLayer\",\n  type: [\"SubtypeGroupLayer\"]\n})], le.prototype, \"operationalLayerType\", void 0), e([b(ne.outFields)], le.prototype, \"outFields\", void 0), e([b({\n  readOnly: !0\n})], le.prototype, \"parsedUrl\", null), e([b()], le.prototype, \"source\", null), e([b({\n  type: [Y],\n  readOnly: !0,\n  json: {\n    read: !1,\n    origins: {\n      service: {\n        read: !0\n      }\n    }\n  }\n})], le.prototype, \"subtypes\", void 0), e([b({\n  type: r.ofType(ee),\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"subtypes\",\n          reader: (e, t, s) => {\n            const i = e.map(({\n              code: e\n            }) => {\n              const r = new ee({\n                subtypeCode: e\n              });\n              return r.read(t, s), r;\n            });\n            return new (r.ofType(ee))(i);\n          }\n        }\n      }\n    },\n    name: \"layers\",\n    write: {\n      overridePolicy(e, r, t) {\n        const s = this.originOf(\"sublayers\"),\n              i = w.PORTAL_ITEM;\n        let o = !0;\n\n        if (v(s) === i && v(t.origin) > i) {\n          const r = e.some(e => e.hasUserOverrides());\n          o = this._sublayersCollectionChanged || r;\n        }\n\n        return {\n          enabled: o,\n          ignoreOrigin: !0\n        };\n      }\n\n    }\n  }\n})], le.prototype, \"sublayers\", void 0), e([b({\n  type: re\n})], le.prototype, \"timeInfo\", void 0), e([b({\n  json: {\n    origins: {\n      \"portal-item\": {\n        write: {\n          ignoreOrigin: !0,\n          writerEnsuresNonNull: !0\n        }\n      }\n    }\n  }\n})], le.prototype, \"title\", void 0), e([g(\"service\", \"title\", [\"name\"])], le.prototype, \"readTitleFromService\", null), e([b({\n  json: {\n    read: !1\n  }\n})], le.prototype, \"type\", void 0), le = e([j(oe)], le);\nconst ue = le;\nexport { ue as default };","map":{"version":3,"names":["_","e","r","t","HandleOwnerMixin","s","i","loadAll","o","destroyMaybe","a","isSome","n","unwrapOr","l","MultiOriginJSONMixin","u","throwIfAbortError","p","whenOrAbort","y","watch","d","sync","c","sqlAnd","h","urlToObject","m","join","f","property","b","reader","g","subclass","j","OriginId","w","nameToId","v","S","APIKeyMixin","L","ArcGISService","F","BlendLayer","CustomParametersMixin","x","EditBusLayer","I","FeatureLayerBase","C","OperationalLayer","P","PortalLayer","E","RefreshableLayer","O","ScaleRangeLayer","T","TemporalLayer","U","titleFromUrlAndName","G","id","q","ensureLayerCredential","A","computeEffectiveEditingEnabled","$","addAttachment","M","updateAttachment","R","applyEdits","k","createQuery","N","deleteAttachments","Q","fetchRecomputedExtents","D","queryAttachments","H","queryObjectIds","V","queryFeatureCount","B","queryExtent","J","queryRelatedFeatures","z","queryRelatedFeaturesCount","K","hasDataChanged","Z","defineFieldProperties","W","fixTimeInfoFields","X","Y","ee","re","serviceSupportsSpatialReference","te","se","ie","oe","ae","title","declaredClass","layer","ne","le","constructor","_handles","_sublayersCollectionChanged","_sublayerLookup","Map","fields","fieldsIndex","outFields","subtypes","sublayers","ofType","timeInfo","type","addHandles","_handleSublayersChange","destroy","source","normalizeCtorArgs","url","load","signal","loadFromPortal","supportedTypes","catch","then","layerId","_initLayerProperties","createGraphicsSource","_setUserPrivileges","serviceItemId","addResolvingPromise","Promise","resolve","createQueryVersion","commitProperty","_get","editingEnabled","loaded","capabilities","operations","supportsEditing","userHasEditingPrivileges","effectiveEditingEnabled","parsedUrl","path","toString","_set","readTitleFromService","name","on","default","map","subtypeCode","where","subtypeField","definitionExpression","getFieldDomain","_getLayerDomain","getField","get","findSublayerForFeature","attributes","queryFeatures","from","includes","push","features","sourceLayer","write","origin","layerContainerType","messages","isTable","length","domain","sourceJSON","read","_verifyFields","objectIdField","console","log","search","some","forEach","parent","handles","remove","clear","set","add","item","delete","readOnly","prototype","json","origins","service","value","code","overridePolicy","originOf","PORTAL_ITEM","hasUserOverrides","enabled","ignoreOrigin","writerEnsuresNonNull","ue"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/SubtypeGroupLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import i from\"../core/Handles.js\";import{loadAll as o}from\"../core/loadAll.js\";import{destroyMaybe as a,isSome as n,unwrapOr as l}from\"../core/maybe.js\";import{MultiOriginJSONMixin as u}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as p,whenOrAbort as y}from\"../core/promiseUtils.js\";import{watch as d,sync as c}from\"../core/reactiveUtils.js\";import{sqlAnd as h}from\"../core/sql.js\";import{urlToObject as m,join as f}from\"../core/urlUtils.js\";import{property as b}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import{reader as g}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as j}from\"../core/accessorSupport/decorators/subclass.js\";import{OriginId as w,nameToId as v}from\"../core/accessorSupport/PropertyOrigin.js\";import S from\"./Layer.js\";import{APIKeyMixin as L}from\"./mixins/APIKeyMixin.js\";import{ArcGISService as F}from\"./mixins/ArcGISService.js\";import{BlendLayer as _}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as x}from\"./mixins/CustomParametersMixin.js\";import{EditBusLayer as I}from\"./mixins/EditBusLayer.js\";import{FeatureLayerBase as C}from\"./mixins/FeatureLayerBase.js\";import{OperationalLayer as P}from\"./mixins/OperationalLayer.js\";import{PortalLayer as E}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as O}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as T}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as U}from\"./mixins/TemporalLayer.js\";import{titleFromUrlAndName as G}from\"./support/arcgisLayerUrl.js\";import{id as q}from\"./support/commonProperties.js\";import{ensureLayerCredential as A,computeEffectiveEditingEnabled as $,addAttachment as M,updateAttachment as R,applyEdits as k,createQuery as N,deleteAttachments as Q,fetchRecomputedExtents as D,queryAttachments as H,queryObjectIds as V,queryFeatureCount as B,queryExtent as J,queryRelatedFeatures as z,queryRelatedFeaturesCount as K,hasDataChanged as Z}from\"./support/featureLayerUtils.js\";import{defineFieldProperties as W}from\"./support/fieldProperties.js\";import{fixTimeInfoFields as X}from\"./support/fieldUtils.js\";import Y from\"./support/Subtype.js\";import ee from\"./support/SubtypeSublayer.js\";import re from\"./support/TimeInfo.js\";import{serviceSupportsSpatialReference as te}from\"./support/versionUtils.js\";import se from\"../rest/support/Query.js\";const ie=\"SubtypeGroupLayer\",oe=\"esri.layers.SubtypeGroupLayer\";function ae(e,r){return new t(\"layer:unsupported\",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${r}`,{layer:e})}const ne=W();let le=class extends(C(I(_(U(T(O(F(P(E(u(x(L(s(S)))))))))))))){constructor(...e){super(...e),this._handles=new i,this._sublayersCollectionChanged=!1,this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.subtypes=null,this.sublayers=new(r.ofType(ee)),this.timeInfo=null,this.title=\"Layer\",this.type=\"subtype-group\",this.addHandles(d((()=>this.sublayers),((e,r)=>this._handleSublayersChange(e,r)),c))}destroy(){this.source?.destroy(),this._handles=a(this._handles)}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=n(e)?e.signal:null,s=this.loadFromPortal({supportedTypes:[\"Feature Service\"]},e).catch(p).then((async()=>{if(!this.url)throw new t(\"subtype-grouplayer:missing-url-or-source\",\"SubtypeGroupLayer must be created with either a url or a portal item\");if(null==this.layerId)throw new t(\"subtype-grouplayer:missing-layerid\",\"layerId is required for a SubtypeGroupLayer created with url\");return this._initLayerProperties(await this.createGraphicsSource(r))})).then((()=>this._setUserPrivileges(this.serviceItemId,e))).then((()=>A(this,e)));return this.addResolvingPromise(s),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty(\"definitionExpression\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"timeOffset\"),this.commitProperty(\"geometryType\"),this.commitProperty(\"gdbVersion\"),this.commitProperty(\"historicMoment\"),this.commitProperty(\"returnZ\"),this.commitProperty(\"capabilities\"),this.commitProperty(\"returnM\"),(this._get(\"createQueryVersion\")??0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return $(this)}get parsedUrl(){const e=m(this.url);return null!=e&&null!=this.layerId&&(e.path=f(e.path,this.layerId.toString())),e}set source(e){this._get(\"source\")!==e&&this._set(\"source\",e)}readTitleFromService(e,{name:r}){return this.url?G(this.url,r):r}async addAttachment(e,r){return M(this,e,r,ie)}async updateAttachment(e,r,t){return R(this,e,r,t,ie)}async applyEdits(e,r){return k(this,e,r)}on(e,r){return super.on(e,r)}async createGraphicsSource(e){const{default:r}=await y(import(\"./graphics/sources/FeatureLayerSource.js\"),e);return new r({layer:this}).load({signal:e})}createQuery(){const e=N(this),r=this.sublayers.map((e=>e.subtypeCode));return e.where=h(`${this.subtypeField} IN (${r.join(\",\")})`,this.definitionExpression),e}async deleteAttachments(e,r){return Q(this,e,r,ie)}async fetchRecomputedExtents(e){return D(this,e,ie)}getFieldDomain(e,r){return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}findSublayerForFeature(e){const r=this.fieldsIndex.get(this.subtypeField),t=e.attributes[r.name];return this._sublayerLookup.get(t)}loadAll(){return o(this,(e=>{e(this.sublayers)}))}async queryAttachments(e,r){return H(this,e,r,ie)}async queryFeatures(e,r){const t=await this.load(),s=se.from(e)??t.createQuery(),i=l(s.outFields,[]);i.includes(this.subtypeField)||(i.push(this.subtypeField),s.outFields=i);const o=await t.source.queryFeatures(s,r);if(o?.features)for(const a of o.features)a.layer=a.sourceLayer=this.findSublayerForFeature(a);return o}async queryObjectIds(e,r){return V(this,e,r,ie)}async queryFeatureCount(e,r){return B(this,e,r,ie)}async queryExtent(e,r){return J(this,e,r,ie)}async queryRelatedFeatures(e,r){return z(this,e,r,ie)}async queryRelatedFeaturesCount(e,r){return K(this,e,r,ie)}write(e,r){const{origin:s,layerContainerType:i,messages:o}=r;if(this.isTable){if(\"web-scene\"===s||\"web-map\"===s&&\"tables\"!==i)return o?.push(ae(this,\"using a table source cannot be written to web scenes and web maps\")),null}else if(this.loaded&&\"web-map\"===s&&\"tables\"===i)return o?.push(ae(this,\"using a non-table source cannot be written to tables in web maps\")),null;return this.sublayers?.length?super.write(e,r):(o?.push(new t(\"web-document-write:invalid-property\",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&te(this,e)}_getLayerDomain(e){const r=this.fieldsIndex.get(e);return r?r.domain:null}async _initLayerProperties(e){this._set(\"source\",e);const{sourceJSON:r}=e;if(r&&(this.sourceJSON=r,this.read(r,{origin:\"service\",url:this.parsedUrl})),this.isTable)throw new t(\"subtype-grouplayer:unsupported-source\",\"SubtypeGroupLayer cannot be created using a layer with table source\");if(!this.subtypes?.length)throw new t(\"subtype-grouplayer:missing-subtypes\",\"SubtypeGroupLayer must be created using a layer with subtypes\");this._verifyFields(),X(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return Z(this)}_verifyFields(){const e=this.parsedUrl?.path??\"undefined\";this.objectIdField||console.log(\"SubtypeGroupLayer: 'objectIdField' property is not defined (url: \"+e+\")\"),this.isTable||-1!==e.search(/\\/FeatureServer\\//i)||this.fields?.some((e=>\"geometry\"===e.type))||console.log(\"SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: \"+e+\")\")}_handleSublayersChange(e,r){r&&(r.forEach((e=>{e.parent=null})),this.handles.remove(\"sublayers-owner\"),this._sublayerLookup.clear()),e&&(e.forEach((e=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),this._sublayersCollectionChanged=!1,this.handles.add([e.on(\"after-add\",(({item:e})=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),e.on(\"after-remove\",(({item:e})=>{e.parent=null,this._sublayerLookup.delete(e.subtypeCode)})),e.on(\"after-changes\",(()=>{this._sublayersCollectionChanged=!0}))],\"sublayers-owner\"))}};e([b({readOnly:!0})],le.prototype,\"createQueryVersion\",null),e([b({readOnly:!0})],le.prototype,\"editingEnabled\",null),e([b({readOnly:!0})],le.prototype,\"effectiveEditingEnabled\",null),e([b({...ne.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],le.prototype,\"fields\",void 0),e([b(ne.fieldsIndex)],le.prototype,\"fieldsIndex\",void 0),e([b(q)],le.prototype,\"id\",void 0),e([b({type:[\"show\",\"hide\",\"hide-children\"]})],le.prototype,\"listMode\",void 0),e([b({value:\"SubtypeGroupLayer\",type:[\"SubtypeGroupLayer\"]})],le.prototype,\"operationalLayerType\",void 0),e([b(ne.outFields)],le.prototype,\"outFields\",void 0),e([b({readOnly:!0})],le.prototype,\"parsedUrl\",null),e([b()],le.prototype,\"source\",null),e([b({type:[Y],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],le.prototype,\"subtypes\",void 0),e([b({type:r.ofType(ee),json:{origins:{service:{read:{source:\"subtypes\",reader:(e,t,s)=>{const i=e.map((({code:e})=>{const r=new ee({subtypeCode:e});return r.read(t,s),r}));return new(r.ofType(ee))(i)}}}},name:\"layers\",write:{overridePolicy(e,r,t){const s=this.originOf(\"sublayers\"),i=w.PORTAL_ITEM;let o=!0;if(v(s)===i&&v(t.origin)>i){const r=e.some((e=>e.hasUserOverrides()));o=this._sublayersCollectionChanged||r}return{enabled:o,ignoreOrigin:!0}}}}})],le.prototype,\"sublayers\",void 0),e([b({type:re})],le.prototype,\"timeInfo\",void 0),e([b({json:{origins:{\"portal-item\":{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],le.prototype,\"title\",void 0),e([g(\"service\",\"title\",[\"name\"])],le.prototype,\"readTitleFromService\",null),e([b({json:{read:!1}})],le.prototype,\"type\",void 0),le=e([j(oe)],le);const ue=le;export{ue as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}