{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport has from \"../../../../../core/has.js\";\nimport { destroyMaybe as t } from \"../../../../../core/maybe.js\";\nimport { isAbortError as i } from \"../../../../../core/promiseUtils.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/Error.js\";\nimport { subclass as s } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { create as r } from \"../../../../../geometry/support/aaBoundingRect.js\";\nimport { FeatureTile as a } from \"../../../engine/webgl/FeatureTile.js\";\nimport { simplifyVVRenderer as o } from \"../support/rendererUtils.js\";\nimport l from \"./BaseTileRenderer.js\";\nimport { convertVisualVariables as n } from \"./support/visualVariablesUtils.js\";\nimport { WGLFeatureView as u } from \"./support/WGLFeatureView.js\";\nlet p = class extends l {\n  constructor() {\n    super(...arguments), this.type = \"symbol\";\n  }\n\n  install(e) {\n    const t = () => this.notifyChange(\"updating\"),\n          i = new u(this.tileInfoView, this.layerView, this.layer, t);\n\n    this.featuresView = i, e.addChild(i);\n  }\n\n  uninstall(e) {\n    e.removeChild(this.featuresView), this.featuresView = t(this.featuresView);\n  }\n\n  fetchResource(e, t) {\n    const {\n      url: s\n    } = e,\n          r = this.featuresView.stage;\n\n    try {\n      return r.resourceManager.fetchResource(s, {\n        signal: t.signal\n      });\n    } catch (a) {\n      return i(a) ? Promise.resolve({\n        width: 0,\n        height: 0\n      }) : Promise.reject(a);\n    }\n  }\n\n  isUpdating() {\n    const e = super.isUpdating(),\n          t = !this.featuresView || this.featuresView.isUpdating(),\n          i = this.featuresView?.hasEmptyAttributeView(),\n          s = e || t || e && i;\n    return has(\"esri-2d-log-updating\") && console.log(`Updating SymbolTileRenderer ${s}\\n  -> updatingTiles ${e}\\n  -> hasFeaturesView ${!!this.featuresView}\\n  -> updatingFeaturesView ${t}`), s;\n  }\n\n  hitTest(e) {\n    return this.featuresView.hitTest(e);\n  }\n\n  supportsRenderer(e) {\n    return null != e && [\"simple\", \"class-breaks\", \"unique-value\", \"dot-density\", \"dictionary\", \"heatmap\", \"pie-chart\"].includes(e.type);\n  }\n\n  onConfigUpdate(e) {\n    let t = null;\n\n    if (e && \"visualVariables\" in e) {\n      const i = (o(e).visualVariables || []).map(e => {\n        const t = e.clone();\n        return \"normalizationField\" in e && (t.normalizationField = null), e.valueExpression && \"$view.scale\" !== e.valueExpression && (t.valueExpression = null, t.field = \"nop\"), t;\n      });\n      t = n(i);\n    }\n\n    this.featuresView.setRendererInfo(e, t, this.layerView.featureEffect);\n  }\n\n  onTileData(e) {\n    const t = this.tiles.get(e.tileKey);\n    t && e.data && this.featuresView.onTileData(t, e.data), this.layerView.view.labelManager.requestUpdate();\n  }\n\n  onTileError(e) {\n    const t = this.tiles.get(e.tileKey);\n    t && this.featuresView.onTileError(t);\n  }\n\n  forceAttributeTextureUpload() {\n    this.featuresView.attributeView.forceTextureUpload();\n  }\n\n  lockGPUUploads() {\n    this.featuresView.attributeView.lockTextureUpload(), this.tiles.forEach(e => e.lock());\n  }\n\n  unlockGPUUploads() {\n    this.featuresView.attributeView.unlockTextureUpload(), this.tiles.forEach(e => e.unlock());\n  }\n\n  getMaterialItems(e) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return _this.featuresView.getMaterialItems(e);\n    })();\n  }\n\n  invalidateLabels() {\n    this.featuresView.hasLabels && this.layerView.view.labelManager.requestUpdate();\n  }\n\n  createTile(e) {\n    const t = this.tileInfoView.getTileBounds(r(), e),\n          i = () => this.layerView.view.labelManager.requestUpdate(),\n          s = this.tileInfoView.getTileResolution(e.level),\n          o = this.featuresView.attributeView;\n\n    return new a(e, s, t[0], t[3], o, i);\n  }\n\n  disposeTile(e) {\n    this.featuresView.removeChild(e), e.destroy(), this.layerView.view.labelManager.requestUpdate();\n  }\n\n};\np = e([s(\"esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer\")], p);\nconst h = p;\nexport { h as default };","map":{"version":3,"names":["_","e","has","destroyMaybe","t","isAbortError","i","subclass","s","create","r","FeatureTile","a","simplifyVVRenderer","o","l","convertVisualVariables","n","WGLFeatureView","u","p","constructor","arguments","type","install","notifyChange","tileInfoView","layerView","layer","featuresView","addChild","uninstall","removeChild","fetchResource","url","stage","resourceManager","signal","Promise","resolve","width","height","reject","isUpdating","hasEmptyAttributeView","console","log","hitTest","supportsRenderer","includes","onConfigUpdate","visualVariables","map","clone","normalizationField","valueExpression","field","setRendererInfo","featureEffect","onTileData","tiles","get","tileKey","data","view","labelManager","requestUpdate","onTileError","forceAttributeTextureUpload","attributeView","forceTextureUpload","lockGPUUploads","lockTextureUpload","forEach","lock","unlockGPUUploads","unlockTextureUpload","unlock","getMaterialItems","invalidateLabels","hasLabels","createTile","getTileBounds","getTileResolution","level","disposeTile","destroy","h","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/SymbolTileRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import has from\"../../../../../core/has.js\";import{destroyMaybe as t}from\"../../../../../core/maybe.js\";import{isAbortError as i}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/Error.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as r}from\"../../../../../geometry/support/aaBoundingRect.js\";import{FeatureTile as a}from\"../../../engine/webgl/FeatureTile.js\";import{simplifyVVRenderer as o}from\"../support/rendererUtils.js\";import l from\"./BaseTileRenderer.js\";import{convertVisualVariables as n}from\"./support/visualVariablesUtils.js\";import{WGLFeatureView as u}from\"./support/WGLFeatureView.js\";let p=class extends l{constructor(){super(...arguments),this.type=\"symbol\"}install(e){const t=()=>this.notifyChange(\"updating\"),i=new u(this.tileInfoView,this.layerView,this.layer,t);this.featuresView=i,e.addChild(i)}uninstall(e){e.removeChild(this.featuresView),this.featuresView=t(this.featuresView)}fetchResource(e,t){const{url:s}=e,r=this.featuresView.stage;try{return r.resourceManager.fetchResource(s,{signal:t.signal})}catch(a){return i(a)?Promise.resolve({width:0,height:0}):Promise.reject(a)}}isUpdating(){const e=super.isUpdating(),t=!this.featuresView||this.featuresView.isUpdating(),i=this.featuresView?.hasEmptyAttributeView(),s=e||t||e&&i;return has(\"esri-2d-log-updating\")&&console.log(`Updating SymbolTileRenderer ${s}\\n  -> updatingTiles ${e}\\n  -> hasFeaturesView ${!!this.featuresView}\\n  -> updatingFeaturesView ${t}`),s}hitTest(e){return this.featuresView.hitTest(e)}supportsRenderer(e){return null!=e&&[\"simple\",\"class-breaks\",\"unique-value\",\"dot-density\",\"dictionary\",\"heatmap\",\"pie-chart\"].includes(e.type)}onConfigUpdate(e){let t=null;if(e&&\"visualVariables\"in e){const i=(o(e).visualVariables||[]).map((e=>{const t=e.clone();return\"normalizationField\"in e&&(t.normalizationField=null),e.valueExpression&&\"$view.scale\"!==e.valueExpression&&(t.valueExpression=null,t.field=\"nop\"),t}));t=n(i)}this.featuresView.setRendererInfo(e,t,this.layerView.featureEffect)}onTileData(e){const t=this.tiles.get(e.tileKey);t&&e.data&&this.featuresView.onTileData(t,e.data),this.layerView.view.labelManager.requestUpdate()}onTileError(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileError(t)}forceAttributeTextureUpload(){this.featuresView.attributeView.forceTextureUpload()}lockGPUUploads(){this.featuresView.attributeView.lockTextureUpload(),this.tiles.forEach((e=>e.lock()))}unlockGPUUploads(){this.featuresView.attributeView.unlockTextureUpload(),this.tiles.forEach((e=>e.unlock()))}async getMaterialItems(e){return this.featuresView.getMaterialItems(e)}invalidateLabels(){this.featuresView.hasLabels&&this.layerView.view.labelManager.requestUpdate()}createTile(e){const t=this.tileInfoView.getTileBounds(r(),e),i=()=>this.layerView.view.labelManager.requestUpdate(),s=this.tileInfoView.getTileResolution(e.level),o=this.featuresView.attributeView;return new a(e,s,t[0],t[3],o,i)}disposeTile(e){this.featuresView.removeChild(e),e.destroy(),this.layerView.view.labelManager.requestUpdate()}};p=e([s(\"esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer\")],p);const h=p;export{h as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}