{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from \"../../../../core/Error.js\";\nimport { SPRITE_PADDING as e } from \"./definitions.js\";\nimport { log2 as i } from \"./GeometryUtils.js\";\nimport s from \"./Rect.js\";\nimport a from \"./RectangleBinPack.js\";\nimport { PixelFormat as r, PixelType as o } from \"../../../webgl/enums.js\";\nimport { Texture as h } from \"../../../webgl/Texture.js\";\n\nfunction c(t) {\n  return t && \"static\" === t.type;\n}\n\nclass n {\n  constructor(t, e, i = 0) {\n    this._mosaicPages = [], this._maxItemSize = 0, this._currentPage = 0, this._pageWidth = 0, this._pageHeight = 0, this._mosaicRects = new Map(), this._spriteCopyQueue = [], this.pixelRatio = 1, (t <= 0 || e <= 0) && console.error(\"Sprites mosaic defaultWidth and defaultHeight must be greater than zero!\"), this._pageWidth = t, this._pageHeight = e, i > 0 && (this._maxItemSize = i), this.pixelRatio = window.devicePixelRatio || 1, this._binPack = new a(this._pageWidth, this._pageHeight);\n    const s = Math.floor(this._pageWidth),\n          r = Math.floor(this._pageHeight);\n\n    this._mosaicPages.push({\n      mosaicsData: {\n        type: \"static\",\n        data: new Uint32Array(s * r)\n      },\n      size: [this._pageWidth, this._pageHeight],\n      dirty: !0,\n      texture: void 0\n    });\n  }\n\n  getWidth(t) {\n    return t >= this._mosaicPages.length ? -1 : this._mosaicPages[t].size[0];\n  }\n\n  getHeight(t) {\n    return t >= this._mosaicPages.length ? -1 : this._mosaicPages[t].size[1];\n  }\n\n  getPageTexture(t) {\n    return t < this._mosaicPages.length ? this._mosaicPages[t].texture : null;\n  }\n\n  has(t) {\n    return this._mosaicRects.has(t);\n  }\n\n  get itemCount() {\n    return this._mosaicRects.size;\n  }\n\n  getSpriteItem(t) {\n    return this._mosaicRects.get(t);\n  }\n\n  addSpriteItem(t, i, a, r, o, h, n = 1) {\n    if (this._mosaicRects.has(t)) return this._mosaicRects.get(t);\n    let g, p, m;\n    if (c(a)) [g, p, m] = this._allocateImage(i[0], i[1]);else {\n      g = new s(0, 0, i[0], i[1]), p = this._mosaicPages.length;\n      const t = void 0;\n\n      this._mosaicPages.push({\n        mosaicsData: a,\n        size: [i[0] + 2 * e, i[1] + 2 * e],\n        dirty: !0,\n        texture: t\n      });\n    }\n    if (g.width <= 0 || g.height <= 0) return null;\n    const _ = {\n      rect: g,\n      width: i[0],\n      height: i[1],\n      sdf: o,\n      simplePattern: h,\n      pixelRatio: n,\n      page: p\n    };\n    return this._mosaicRects.set(t, _), c(a) && this._copy({\n      rect: g,\n      spriteSize: i,\n      spriteData: a.data,\n      page: p,\n      pageSize: m,\n      repeat: r,\n      sdf: o\n    }), _;\n  }\n\n  hasItemsToProcess() {\n    return 0 !== this._spriteCopyQueue.length;\n  }\n\n  processNextItem() {\n    const t = this._spriteCopyQueue.pop();\n\n    t && this._copy(t);\n  }\n\n  getSpriteItems(t) {\n    const e = {};\n\n    for (const i of t) e[i] = this.getSpriteItem(i);\n\n    return e;\n  }\n\n  getMosaicItemPosition(t) {\n    const i = this.getSpriteItem(t),\n          s = i && i.rect;\n    if (!s) return null;\n    s.width = i.width, s.height = i.height;\n    const a = i.width,\n          r = i.height,\n          o = e,\n          h = this._mosaicPages[i.page];\n    return {\n      size: [i.width, i.height],\n      tl: [(s.x + o) / h[0], (s.y + o) / h[1]],\n      br: [(s.x + o + a) / h[0], (s.y + o + r) / h[1]],\n      page: i.page\n    };\n  }\n\n  bind(t, e, i = 0, s = 0) {\n    const a = this._mosaicPages[i],\n          r = a.mosaicsData;\n    let o = a.texture;\n    if (o || (o = g(t, a.size), a.texture = o), o.setSamplingMode(e), c(r)) t.bindTexture(o, s), a.dirty && (o.setData(new Uint8Array(r.data.buffer)), o.generateMipmap());else {\n      r.data.bindFrame(t, o, s), o.generateMipmap();\n    }\n    a.dirty = !1;\n  }\n\n  static _copyBits(t, e, i, s, a, r, o, h, c, n, g) {\n    let p = s * e + i,\n        m = h * r + o;\n\n    if (g) {\n      m -= r;\n\n      for (let o = -1; o <= n; o++, p = ((o + n) % n + s) * e + i, m += r) for (let e = -1; e <= c; e++) a[m + e] = t[p + (e + c) % c];\n    } else for (let _ = 0; _ < n; _++) {\n      for (let e = 0; e < c; e++) a[m + e] = t[p + e];\n\n      p += e, m += r;\n    }\n  }\n\n  _copy(i) {\n    if (i.page >= this._mosaicPages.length) return;\n    const s = this._mosaicPages[i.page],\n          a = s.mosaicsData;\n    if (!c(s.mosaicsData)) throw new t(\"mapview-invalid-resource\", \"unsuitable data type!\");\n    const r = i.spriteData,\n          o = a.data;\n    o && r || console.error(\"Source or target images are uninitialized!\"), n._copyBits(r, i.spriteSize[0], 0, 0, o, i.pageSize[0], i.rect.x + e, i.rect.y + e, i.spriteSize[0], i.spriteSize[1], i.repeat), s.dirty = !0;\n  }\n\n  _allocateImage(t, r) {\n    t += 2 * e, r += 2 * e;\n    const o = Math.max(t, r);\n\n    if (this._maxItemSize && this._maxItemSize < o) {\n      const e = 2 ** Math.ceil(i(t)),\n            a = 2 ** Math.ceil(i(r)),\n            o = new s(0, 0, t, r);\n      return this._mosaicPages.push({\n        mosaicsData: {\n          type: \"static\",\n          data: new Uint32Array(e * a)\n        },\n        size: [e, a],\n        dirty: !0,\n        texture: void 0\n      }), [o, this._mosaicPages.length - 1, [e, a]];\n    }\n\n    const h = this._binPack.allocate(t, r);\n\n    if (h.width <= 0) {\n      const e = this._mosaicPages[this._currentPage];\n      return !e.dirty && c(e.mosaicsData) && (e.mosaicsData.data = null), this._currentPage = this._mosaicPages.length, this._mosaicPages.push({\n        mosaicsData: {\n          type: \"static\",\n          data: new Uint32Array(this._pageWidth * this._pageHeight)\n        },\n        size: [this._pageWidth, this._pageHeight],\n        dirty: !0,\n        texture: void 0\n      }), this._binPack = new a(this._pageWidth, this._pageHeight), this._allocateImage(t, r);\n    }\n\n    return [h, this._currentPage, [this._pageWidth, this._pageHeight]];\n  }\n\n  dispose() {\n    this._binPack = null;\n\n    for (const t of this._mosaicPages) {\n      const e = t.texture;\n      e && e.dispose();\n      const i = t.mosaicsData;\n\n      if (!c(i)) {\n        i.data.destroy();\n      }\n    }\n\n    this._mosaicPages = null, this._mosaicRects.clear();\n  }\n\n}\n\nfunction g(t, e) {\n  return new h(t, {\n    pixelFormat: r.RGBA,\n    dataType: o.UNSIGNED_BYTE,\n    width: e[0],\n    height: e[1]\n  }, null);\n}\n\nexport { n as default };","map":{"version":3,"names":["t","SPRITE_PADDING","e","log2","i","s","a","PixelFormat","r","PixelType","o","Texture","h","c","type","n","constructor","_mosaicPages","_maxItemSize","_currentPage","_pageWidth","_pageHeight","_mosaicRects","Map","_spriteCopyQueue","pixelRatio","console","error","window","devicePixelRatio","_binPack","Math","floor","push","mosaicsData","data","Uint32Array","size","dirty","texture","getWidth","length","getHeight","getPageTexture","has","itemCount","getSpriteItem","get","addSpriteItem","g","p","m","_allocateImage","width","height","_","rect","sdf","simplePattern","page","set","_copy","spriteSize","spriteData","pageSize","repeat","hasItemsToProcess","processNextItem","pop","getSpriteItems","getMosaicItemPosition","tl","x","y","br","bind","setSamplingMode","bindTexture","setData","Uint8Array","buffer","generateMipmap","bindFrame","_copyBits","max","ceil","allocate","dispose","destroy","clear","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/engine/webgl/SpriteMosaic.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";import{SPRITE_PADDING as e}from\"./definitions.js\";import{log2 as i}from\"./GeometryUtils.js\";import s from\"./Rect.js\";import a from\"./RectangleBinPack.js\";import{PixelFormat as r,PixelType as o}from\"../../../webgl/enums.js\";import{Texture as h}from\"../../../webgl/Texture.js\";function c(t){return t&&\"static\"===t.type}class n{constructor(t,e,i=0){this._mosaicPages=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects=new Map,this._spriteCopyQueue=[],this.pixelRatio=1,(t<=0||e<=0)&&console.error(\"Sprites mosaic defaultWidth and defaultHeight must be greater than zero!\"),this._pageWidth=t,this._pageHeight=e,i>0&&(this._maxItemSize=i),this.pixelRatio=window.devicePixelRatio||1,this._binPack=new a(this._pageWidth,this._pageHeight);const s=Math.floor(this._pageWidth),r=Math.floor(this._pageHeight);this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(s*r)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}getWidth(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[0]}getHeight(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[1]}getPageTexture(t){return t<this._mosaicPages.length?this._mosaicPages[t].texture:null}has(t){return this._mosaicRects.has(t)}get itemCount(){return this._mosaicRects.size}getSpriteItem(t){return this._mosaicRects.get(t)}addSpriteItem(t,i,a,r,o,h,n=1){if(this._mosaicRects.has(t))return this._mosaicRects.get(t);let g,p,m;if(c(a))[g,p,m]=this._allocateImage(i[0],i[1]);else{g=new s(0,0,i[0],i[1]),p=this._mosaicPages.length;const t=void 0;this._mosaicPages.push({mosaicsData:a,size:[i[0]+2*e,i[1]+2*e],dirty:!0,texture:t})}if(g.width<=0||g.height<=0)return null;const _={rect:g,width:i[0],height:i[1],sdf:o,simplePattern:h,pixelRatio:n,page:p};return this._mosaicRects.set(t,_),c(a)&&this._copy({rect:g,spriteSize:i,spriteData:a.data,page:p,pageSize:m,repeat:r,sdf:o}),_}hasItemsToProcess(){return 0!==this._spriteCopyQueue.length}processNextItem(){const t=this._spriteCopyQueue.pop();t&&this._copy(t)}getSpriteItems(t){const e={};for(const i of t)e[i]=this.getSpriteItem(i);return e}getMosaicItemPosition(t){const i=this.getSpriteItem(t),s=i&&i.rect;if(!s)return null;s.width=i.width,s.height=i.height;const a=i.width,r=i.height,o=e,h=this._mosaicPages[i.page];return{size:[i.width,i.height],tl:[(s.x+o)/h[0],(s.y+o)/h[1]],br:[(s.x+o+a)/h[0],(s.y+o+r)/h[1]],page:i.page}}bind(t,e,i=0,s=0){const a=this._mosaicPages[i],r=a.mosaicsData;let o=a.texture;if(o||(o=g(t,a.size),a.texture=o),o.setSamplingMode(e),c(r))t.bindTexture(o,s),a.dirty&&(o.setData(new Uint8Array(r.data.buffer)),o.generateMipmap());else{r.data.bindFrame(t,o,s),o.generateMipmap()}a.dirty=!1}static _copyBits(t,e,i,s,a,r,o,h,c,n,g){let p=s*e+i,m=h*r+o;if(g){m-=r;for(let o=-1;o<=n;o++,p=((o+n)%n+s)*e+i,m+=r)for(let e=-1;e<=c;e++)a[m+e]=t[p+(e+c)%c]}else for(let _=0;_<n;_++){for(let e=0;e<c;e++)a[m+e]=t[p+e];p+=e,m+=r}}_copy(i){if(i.page>=this._mosaicPages.length)return;const s=this._mosaicPages[i.page],a=s.mosaicsData;if(!c(s.mosaicsData))throw new t(\"mapview-invalid-resource\",\"unsuitable data type!\");const r=i.spriteData,o=a.data;o&&r||console.error(\"Source or target images are uninitialized!\"),n._copyBits(r,i.spriteSize[0],0,0,o,i.pageSize[0],i.rect.x+e,i.rect.y+e,i.spriteSize[0],i.spriteSize[1],i.repeat),s.dirty=!0}_allocateImage(t,r){t+=2*e,r+=2*e;const o=Math.max(t,r);if(this._maxItemSize&&this._maxItemSize<o){const e=2**Math.ceil(i(t)),a=2**Math.ceil(i(r)),o=new s(0,0,t,r);return this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(e*a)},size:[e,a],dirty:!0,texture:void 0}),[o,this._mosaicPages.length-1,[e,a]]}const h=this._binPack.allocate(t,r);if(h.width<=0){const e=this._mosaicPages[this._currentPage];return!e.dirty&&c(e.mosaicsData)&&(e.mosaicsData.data=null),this._currentPage=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:{type:\"static\",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new a(this._pageWidth,this._pageHeight),this._allocateImage(t,r)}return[h,this._currentPage,[this._pageWidth,this._pageHeight]]}dispose(){this._binPack=null;for(const t of this._mosaicPages){const e=t.texture;e&&e.dispose();const i=t.mosaicsData;if(!c(i)){i.data.destroy()}}this._mosaicPages=null,this._mosaicRects.clear()}}function g(t,e){return new h(t,{pixelFormat:r.RGBA,dataType:o.UNSIGNED_BYTE,width:e[0],height:e[1]},null)}export{n as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}