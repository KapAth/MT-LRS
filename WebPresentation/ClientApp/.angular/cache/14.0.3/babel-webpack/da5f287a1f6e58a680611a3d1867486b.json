{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport i from \"../../Viewpoint.js\";\nimport s from \"../../core/Accessor.js\";\nimport { removeMaybe as e } from \"../../core/maybe.js\";\nimport { addFrameTask as o } from \"../../core/scheduling.js\";\nimport { property as n } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport \"../../core/arrayUtils.js\";\nimport { subclass as a } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport r from \"../ViewAnimation.js\";\nimport { easingFunctions as h, parse as p } from \"./unitBezier.js\";\nimport { copy as c } from \"./viewpointUtils.js\";\nimport m from \"../../geometry/Point.js\";\n\nclass u {\n  constructor(t, i, s, e) {\n    const o = t.targetGeometry,\n          n = i.targetGeometry;\n    e ? \"string\" == typeof e && (e = p(e) || h.ease) : e = h.ease, this.easing = e, this.duration = s, this.sCenterX = o.x, this.sCenterY = o.y, this.sScale = t.scale, this.sRotation = t.rotation, this.tCenterX = n.x, this.tCenterY = n.y, this.tScale = i.scale, this.tRotation = i.rotation, this.dCenterX = this.tCenterX - this.sCenterX, this.dCenterY = this.tCenterY - this.sCenterY, this.dScale = this.tScale - this.sScale, this.dRotation = this.tRotation - this.sRotation, this.dRotation > 180 ? this.dRotation -= 360 : this.dRotation < -180 && (this.dRotation += 360);\n  }\n\n  applyRatio(t, i) {\n    const s = this.easing(i);\n    let e, o, n, a;\n    i >= 1 ? (e = this.tCenterX, o = this.tCenterY, n = this.tRotation, a = this.tScale) : (e = this.sCenterX + s * this.dCenterX, o = this.sCenterY + s * this.dCenterY, n = this.sRotation + s * this.dRotation, a = this.sScale + s * this.dScale), t.targetGeometry.x = e, t.targetGeometry.y = o, t.scale = a, t.rotation = n;\n  }\n\n}\n\nlet d = class extends s {\n  constructor(t) {\n    super(t), this.updateFunction = null, this.animation = null, this.duration = 200, this.transition = null, this.easing = h.ease, this.view = null, this.viewpoint = new i({\n      targetGeometry: new m(),\n      scale: 0,\n      rotation: 0\n    }), this._updateTask = o({\n      postRender: this._postRender.bind(this)\n    }), this._updateTask.pause();\n  }\n\n  destroy() {\n    this._updateTask = e(this._updateTask);\n  }\n\n  animate(t, i, s) {\n    this.stop();\n    const e = this.viewpoint;\n    c(e, i), this.transition = new u(this.viewpoint, t.target, s && s.duration || this.duration, s && s.easing || this.easing);\n\n    const o = () => {\n      this.animation === t && this._updateTask && (\"finished\" === t.state && (this.transition?.applyRatio(this.viewpoint, 1), this.view?.state && (this.view.state.viewpoint = this.viewpoint.clone())), this.animation = null, this.updateFunction = null);\n    };\n\n    return t.when(o, o), this._startTime = performance.now(), this._updateTask.resume(), this.animation = t, t;\n  }\n\n  animateContinous(t, i) {\n    this.stop(), this.updateFunction = i, this.viewpoint = t;\n\n    const s = new r({\n      target: t.clone()\n    }),\n          e = () => {\n      this.animation === s && this._updateTask && (this.animation = null, this.updateFunction = null);\n    };\n\n    return s.when(e, e), this._startTime = performance.now(), this._updateTask.resume(), this.animation = s, s;\n  }\n\n  stop() {\n    this.animation && (this.animation.stop(), this.animation = null, this.updateFunction = null);\n  }\n\n  _postRender(t) {\n    const i = this.animation;\n\n    if (i && i.state !== r.State.STOPPED) {\n      if (this.updateFunction) this.updateFunction(this.viewpoint, t.deltaTime);else {\n        const t = this.transition,\n              i = (performance.now() - this._startTime) / t.duration,\n              s = i >= 1;\n        t.applyRatio(this.viewpoint, i), s && this.animation?.finish();\n      }\n      this.view?.state && (this.view.state.viewpoint = this.viewpoint.clone());\n    } else this._updateTask.pause();\n  }\n\n};\nt([n()], d.prototype, \"animation\", void 0), t([n()], d.prototype, \"duration\", void 0), t([n()], d.prototype, \"transition\", void 0), t([n()], d.prototype, \"easing\", void 0), t([n()], d.prototype, \"view\", void 0), t([n()], d.prototype, \"viewpoint\", void 0), d = t([a(\"esri.views.2d.AnimationManager\")], d);\nconst l = d;\nexport { l as default };","map":{"version":3,"names":["_","t","i","s","removeMaybe","e","addFrameTask","o","property","n","subclass","a","r","easingFunctions","h","parse","p","copy","c","m","u","constructor","targetGeometry","ease","easing","duration","sCenterX","x","sCenterY","y","sScale","scale","sRotation","rotation","tCenterX","tCenterY","tScale","tRotation","dCenterX","dCenterY","dScale","dRotation","applyRatio","d","updateFunction","animation","transition","view","viewpoint","_updateTask","postRender","_postRender","bind","pause","destroy","animate","stop","target","state","clone","when","_startTime","performance","now","resume","animateContinous","State","STOPPED","deltaTime","finish","prototype","l","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/views/2d/AnimationManager.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import i from\"../../Viewpoint.js\";import s from\"../../core/Accessor.js\";import{removeMaybe as e}from\"../../core/maybe.js\";import{addFrameTask as o}from\"../../core/scheduling.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"../ViewAnimation.js\";import{easingFunctions as h,parse as p}from\"./unitBezier.js\";import{copy as c}from\"./viewpointUtils.js\";import m from\"../../geometry/Point.js\";class u{constructor(t,i,s,e){const o=t.targetGeometry,n=i.targetGeometry;e?\"string\"==typeof e&&(e=p(e)||h.ease):e=h.ease,this.easing=e,this.duration=s,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=n.x,this.tCenterY=n.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const s=this.easing(i);let e,o,n,a;i>=1?(e=this.tCenterX,o=this.tCenterY,n=this.tRotation,a=this.tScale):(e=this.sCenterX+s*this.dCenterX,o=this.sCenterY+s*this.dCenterY,n=this.sRotation+s*this.dRotation,a=this.sScale+s*this.dScale),t.targetGeometry.x=e,t.targetGeometry.y=o,t.scale=a,t.rotation=n}}let d=class extends s{constructor(t){super(t),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=h.ease,this.view=null,this.viewpoint=new i({targetGeometry:new m,scale:0,rotation:0}),this._updateTask=o({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=e(this._updateTask)}animate(t,i,s){this.stop();const e=this.viewpoint;c(e,i),this.transition=new u(this.viewpoint,t.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const o=()=>{this.animation===t&&this._updateTask&&(\"finished\"===t.state&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new r({target:t.clone()}),e=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(e,e),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const i=this.animation;if(i&&i.state!==r.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const t=this.transition,i=(performance.now()-this._startTime)/t.duration,s=i>=1;t.applyRatio(this.viewpoint,i),s&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};t([n()],d.prototype,\"animation\",void 0),t([n()],d.prototype,\"duration\",void 0),t([n()],d.prototype,\"transition\",void 0),t([n()],d.prototype,\"easing\",void 0),t([n()],d.prototype,\"view\",void 0),t([n()],d.prototype,\"viewpoint\",void 0),d=t([a(\"esri.views.2d.AnimationManager\")],d);const l=d;export{l as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}