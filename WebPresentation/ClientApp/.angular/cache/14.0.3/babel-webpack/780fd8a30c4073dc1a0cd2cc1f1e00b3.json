{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/router\";\n\nconst _c0 = function () {\n  return [\"/user-details\"];\n};\n\nfunction HomeComponent_ng_container_20_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\", 3)(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_container_20_ng_container_1_Template_button_click_16_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const user_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.detailsUser(user_r2));\n    });\n    i0.ɵɵtext(17, \"details&edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_container_20_ng_container_1_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const user_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.deleteUser(user_r2));\n    });\n    i0.ɵɵtext(19, \"delete\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const user_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r2.surname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 7, user_r2.birthDate, \"dd-MMM-yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(user_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(user_r2.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", user_r2.emailAddress, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0));\n  }\n}\n\nfunction HomeComponent_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, HomeComponent_ng_container_20_ng_container_1_Template, 20, 11, \"ng-container\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const user_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r2.isActive);\n  }\n}\n\nfunction HomeComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 9);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"form\", 10);\n    i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_div_23_Template_form_ngSubmit_3_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.createUser());\n    });\n    i0.ɵɵelementStart(4, \"div\", 11)(5, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_div_23_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12._newUser.name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 11)(7, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_div_23_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13._newUser.surname = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 11)(9, \"input\", 14);\n    i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_div_23_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14._newUser.birthDate = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 11)(11, \"input\", 15);\n    i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_div_23_Template_input_ngModelChange_11_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15._newUser.emailAddress = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\")(13, \"button\", 16);\n    i0.ɵɵtext(14, \"Add\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(15, \"br\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.sucessMessage, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1._newUser.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1._newUser.surname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1._newUser.birthDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1._newUser.emailAddress);\n  }\n}\n\nexport class HomeComponent {\n  constructor(http, userService) {\n    this.http = http;\n    this.userService = userService;\n    this.searchQuery = '';\n    this.showForm = false;\n    this.usersArray = [];\n    this.sucessMessage = '';\n    this._newUser = {\n      name: '',\n      surname: '',\n      birthDate: new Date(),\n      emailAddress: '',\n      userTitleId: 1,\n      userTypeId: 4,\n      isActive: true\n    };\n  }\n\n  filterUsers() {\n    if (this.searchQuery) {\n      this.usersArray = this.usersArray.filter(user => {\n        return user.name.toLowerCase().includes(this.searchQuery.toLowerCase()) || user.surname.toLowerCase().includes(this.searchQuery.toLowerCase());\n      });\n    } else {\n      this.getUsers().subscribe(users => {\n        this.usersArray = users;\n      });\n    }\n  }\n\n  ngOnInit() {\n    this.getUsers().subscribe(users => {\n      this.usersArray = users;\n    });\n  }\n\n  getUsers() {\n    return this.http.get('https://localhost:7210/api/users');\n  }\n\n  detailsUser(selectedUser) {\n    this._selectedUser = selectedUser;\n    this.userService._selectedUser = this._selectedUser;\n  }\n\n  deleteUser(selectedUser) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      console.log('https://localhost:7210/api/users/' + selectedUser.id);\n      yield _this.http.delete('https://localhost:7210/api/users/' + selectedUser.id).toPromise();\n\n      _this.ngOnInit();\n    })();\n  }\n\n  addUser(newUser) {\n    return this.http.post('https://localhost:7210/api/users', newUser);\n  }\n\n  createUser() {\n    this.addUser(this._newUser).subscribe(data => {\n      this.sucessMessage = \"User Added Successfully\";\n      /* Refresh the user list after successful addition*/\n\n      this.getUsers().subscribe(users => {\n        this.usersArray = users;\n      });\n    }, error => {\n      this.sucessMessage = error;\n    });\n  }\n\n  openUserForm() {\n    this.showForm = !this.showForm;\n\n    if (this.showForm) {\n      const userForm = document.getElementById('userForm');\n      userForm === null || userForm === void 0 ? void 0 : userForm.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start'\n      });\n    }\n  }\n\n}\n\nHomeComponent.ɵfac = function HomeComponent_Factory(t) {\n  return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.UserService));\n};\n\nHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HomeComponent,\n  selectors: [[\"app-home\"]],\n  decls: 24,\n  vars: 3,\n  consts: [[\"type\", \"text\", \"placeholder\", \"search\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [2, \"background-color\", \"aliceblue\"], [2, \"border-collapse\", \"collapse\", \"width\", \"100%\"], [2, \"border\", \"1px solid black\", \"padding\", \"8px\", \"text-align\", \"left\", \"font-weight\", \"bold\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [4, \"ngIf\"], [1, \"btn\", 3, \"routerLink\", \"click\"], [1, \"btn\", 3, \"click\"], [1, \"alert\", \"alert-success\"], [\"id\", \"userForm\", 3, \"ngSubmit\"], [1, \"form-group\"], [\"required\", \"\", \"maxlength\", \"20\", \"type\", \"text\", \"name\", \"AddNewUser\", \"placeholder\", \"Name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"required\", \"\", \"maxlength\", \"20\", \"type\", \"text\", \"name\", \"AddNewUser\", \"placeholder\", \"Surname\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"required\", \"\", \"type\", \"date\", \"name\", \"AddNewUser\", \"placeholder\", \"BirthDate\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"required\", \"\", \"maxlength\", \"50\", \"type\", \"text\", \"name\", \"AddNewUser\", \"placeholder\", \"Email\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn-primary\"]],\n  template: function HomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"input\", 0);\n      i0.ɵɵlistener(\"ngModelChange\", function HomeComponent_Template_input_ngModelChange_0_listener($event) {\n        return ctx.searchQuery = $event;\n      })(\"input\", function HomeComponent_Template_input_input_0_listener() {\n        return ctx.filterUsers();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"table\", 2)(3, \"thead\")(4, \"tr\", 3)(5, \"th\");\n      i0.ɵɵtext(6, \"Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"th\");\n      i0.ɵɵtext(8, \"Surname\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"th\");\n      i0.ɵɵtext(10, \"Birth Date\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"th\");\n      i0.ɵɵtext(12, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"th\");\n      i0.ɵɵtext(14, \"Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"th\");\n      i0.ɵɵtext(16, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"th\");\n      i0.ɵɵtext(18, \"Action\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"tbody\");\n      i0.ɵɵtemplate(20, HomeComponent_ng_container_20_Template, 2, 1, \"ng-container\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(21, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function HomeComponent_Template_button_click_21_listener() {\n        return ctx.openUserForm();\n      });\n      i0.ɵɵtext(22, \"Create New User\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(23, HomeComponent_div_23_Template, 16, 5, \"div\", 6);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngModel\", ctx.searchQuery);\n      i0.ɵɵadvance(20);\n      i0.ɵɵproperty(\"ngForOf\", ctx.usersArray);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.showForm);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MaxLengthValidator, i4.NgModel, i4.NgForm, i5.RouterLink, i3.DatePipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;IAkBUA;IACEA,8BAAoF,CAApF,EAAoF,IAApF;IACMA;IAAeA;IACnBA;IAAIA;IAAkBA;IACtBA;IAAIA;;IAAyCA;IAC7CA;IAAIA;IAAgBA;IACpBA;IAAIA;IAAeA;IACnBA;IAAIA;IAAwBA;IAC5BA,4BAAI,EAAJ,EAAI,QAAJ,EAAI,CAAJ;IACsBA;MAAAA;MAAA;MAAA;MAAA,OAASA,2CAAT;IAA0B,CAA1B;IAA6DA;IAAYA;IAE7FA;IAAoBA;MAAAA;MAAA;MAAA;MAAA,OAASA,0CAAT;IAAyB,CAAzB;IAA2BA;IAAMA;IAG3DA;;;;;IAZQA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;IACAA;IAAAA;IAE8CA;IAAAA;;;;;;IAVxDA;IACEA;IAeFA;;;;;IAfiBA;IAAAA;;;;;;;;IAsBvBA,4BAAsB,CAAtB,EAAsB,KAAtB,EAAsB,CAAtB;IAGIA;IACFA;IAEAA;IAAoBA;MAAAA;MAAA;MAAA,OAAYA,oCAAZ;IAAwB,CAAxB;IAClBA,gCAAwB,CAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACoFA;MAAAA;MAAA;MAAA,OAAaA,8CAAb;IAAkC,CAAlC;IAAlFA;IAGFA,gCAAwB,CAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACoFA;MAAAA;MAAA;MAAA,OAAaA,iDAAb;IAAqC,CAArC;IAAlFA;IAGFA,gCAAwB,CAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACqEA;MAAAA;MAAA;MAAA,OAAaA,mDAAb;IAAuC,CAAvC;IAAnEA;IAGFA,iCAAwB,EAAxB,EAAwB,OAAxB,EAAwB,EAAxB;IACoFA;MAAAA;MAAA;MAAA,OAAaA,sDAAb;IAA0C,CAA1C;IAAlFA;IAGFA,6BAAK,EAAL,EAAK,QAAL,EAAK,EAAL;IAC4CA;IAAGA;IAE/CA;IACFA;;;;;IAxBEA;IAAAA;IAKoFA;IAAAA;IAIAA;IAAAA;IAIfA;IAAAA;IAIeA;IAAAA;;;;AC/C1F,OAAM,MAAOC,aAAP,CAAoB;EAqBxBC,YAAoBC,IAApB,EAA8CC,WAA9C,EAAsE;IAAlD;IAA0B;IApB9C,mBAAc,EAAd;IAEA,gBAAW,KAAX;IAEA,kBAAqB,EAArB;IAEA,qBAAgB,EAAhB;IAIA,gBAAoB;MAClBC,IAAI,EAAE,EADY;MAElBC,OAAO,EAAE,EAFS;MAGlBC,SAAS,EAAE,IAAIC,IAAJ,EAHO;MAIlBC,YAAY,EAAE,EAJI;MAKlBC,WAAW,EAAE,CALK;MAMlBC,UAAU,EAAE,CANM;MAOlBC,QAAQ,EAAC;IAPS,CAApB;EAYC;;EAEDC,WAAW;IACT,IAAI,KAAKC,WAAT,EAAsB;MAEpB,KAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,MAAhB,CAAuBC,IAAI,IAAG;QAC9C,OAAOA,IAAI,CAACZ,IAAL,CAAUa,WAAV,GAAwBC,QAAxB,CAAiC,KAAKL,WAAL,CAAiBI,WAAjB,EAAjC,KACLD,IAAI,CAACX,OAAL,CAAaY,WAAb,GAA2BC,QAA3B,CAAoC,KAAKL,WAAL,CAAiBI,WAAjB,EAApC,CADF;MAED,CAHiB,CAAlB;IAID,CAND,MAMO;MACL,KAAKE,QAAL,GAAgBC,SAAhB,CAA0BC,KAAK,IAAG;QAChC,KAAKP,UAAL,GAAkBO,KAAlB;MACD,CAFD;IAGD;EAGF;;EAEDC,QAAQ;IAEN,KAAKH,QAAL,GAAgBC,SAAhB,CAA0BC,KAAK,IAAG;MAChC,KAAKP,UAAL,GAAkBO,KAAlB;IACD,CAFD;EAKD;;EAEDF,QAAQ;IAEN,OAAO,KAAKjB,IAAL,CAAUqB,GAAV,CAAsB,kCAAtB,CAAP;EACD;;EAEDC,WAAW,CAACC,YAAD,EAAmB;IAC5B,KAAKC,aAAL,GAAqBD,YAArB;IACA,KAAKtB,WAAL,CAAiBuB,aAAjB,GAAiC,KAAKA,aAAtC;EAED;;EAEKC,UAAU,CAACF,YAAD,EAAmB;IAAA;;IAAA;MACjCG,OAAO,CAACC,GAAR,CAAY,sCAAsCJ,YAAY,CAACK,EAA/D;MACA,MAAM,KAAI,CAAC5B,IAAL,CAAU6B,MAAV,CAAiB,sCAAsCN,YAAY,CAACK,EAApE,EAAwEE,SAAxE,EAAN;;MACA,KAAI,CAACV,QAAL;IAHiC;EAIlC;;EAEDW,OAAO,CAACC,OAAD,EAAiB;IACvB,OAAO,KAAKhC,IAAL,CAAUiC,IAAV,CAAe,kCAAf,EAAmDD,OAAnD,CAAP;EACA;;EAEDE,UAAU;IACR,KAAKH,OAAL,CAAa,KAAKI,QAAlB,EAA4BjB,SAA5B,CAAuCkB,IAAD,IAAS;MAC7C,KAAKC,aAAL,GAAqB,yBAArB;MACA;;MACA,KAAKpB,QAAL,GAAgBC,SAAhB,CAA0BC,KAAK,IAAG;QAChC,KAAKP,UAAL,GAAkBO,KAAlB;MACD,CAFD;IAGD,CAND,EAMGmB,KAAK,IAAG;MACT,KAAKD,aAAL,GAAqBC,KAArB;IACD,CARD;EASD;;EAEDC,YAAY;IACV,KAAKC,QAAL,GAAgB,CAAC,KAAKA,QAAtB;;IACA,IAAI,KAAKA,QAAT,EAAmB;MACjB,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAjB;MACAF,QAAQ,SAAR,YAAQ,WAAR,GAAQ,MAAR,WAAQ,CAAEG,cAAV,CAAyB;QAAEC,QAAQ,EAAE,QAAZ;QAAsBC,KAAK,EAAE;MAA7B,CAAzB;IACD;EAEA;;AA1FqB;;;mBAAbhD,eAAaD;AAAA;;;QAAbC;EAAaiD;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDZxBtD;MAAwCA;QAAA;MAAA,GAAyB,OAAzB,EAAyB;QAAA,OAAUuD,iBAAV;MAAuB,CAAhD;MAAxCvD;MACAA,+BAAwC,CAAxC,EAAwC,OAAxC,EAAwC,CAAxC,EAAwC,CAAxC,EAAwC,OAAxC,EAAwC,CAAxC,EAAwC,IAAxC,EAAwC,CAAxC,EAAwC,CAAxC,EAAwC,IAAxC;MAIYA;MAAIA;MACRA;MAAIA;MAAOA;MACXA;MAAIA;MAAUA;MACdA;MAAIA;MAAKA;MACTA;MAAIA;MAAIA;MACRA;MAAIA;MAAKA;MACTA;MAAIA;MAAMA;MAGdA;MAEEA;MAiBFA;MAKJA;MAAgCA;QAAA,OAASuD,kBAAT;MAAuB,CAAvB;MAAyBvD;MAAeA;MACxEA;;;;MAvCwCA;MAgBHA;MAAAA;MAuB/BA;MAAAA","names":["i0","HomeComponent","constructor","http","userService","name","surname","birthDate","Date","emailAddress","userTitleId","userTypeId","isActive","filterUsers","searchQuery","usersArray","filter","user","toLowerCase","includes","getUsers","subscribe","users","ngOnInit","get","detailsUser","selectedUser","_selectedUser","deleteUser","console","log","id","delete","toPromise","addUser","newUser","post","createUser","_newUser","data","sucessMessage","error","openUserForm","showForm","userForm","document","getElementById","scrollIntoView","behavior","block","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\akaps\\Documents\\Visual Studio 2022\\Projects\\MT_LRS\\WebPresentation\\ClientApp\\src\\app\\home\\home.component.html","C:\\Users\\akaps\\Documents\\Visual Studio 2022\\Projects\\MT_LRS\\WebPresentation\\ClientApp\\src\\app\\home\\home.component.ts"],"sourcesContent":["\r\n  <input type=\"text\" placeholder=\"search\" [(ngModel)]=\"searchQuery\" (input)=\"filterUsers()\" />\r\n  <div style=\"background-color:aliceblue\">\r\n    <table style=\"border-collapse:collapse; width:100%;\">\r\n      <thead>\r\n        <tr style=\"border:1px solid black; padding:8px; text-align:left; font-weight:bold;\">\r\n          <th>Name</th>\r\n          <th>Surname</th>\r\n          <th>Birth Date</th>\r\n          <th>Title</th>\r\n          <th>Type</th>\r\n          <th>Email</th>\r\n          <th>Action</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n\r\n        <ng-container *ngFor=\"let user of usersArray\">\r\n          <ng-container *ngIf=\"user.isActive\">\r\n            <tr style=\"border:1px solid black; padding:8px; text-align:left; font-weight:bold;\">\r\n              <td>{{ user.name }}</td>\r\n              <td>{{ user.surname }}</td>\r\n              <td>{{ user.birthDate | date:'dd-MMM-yyyy' }}</td>\r\n              <td>{{ user.title }}</td>\r\n              <td>{{ user.type }}</td>\r\n              <td>{{ user.emailAddress }} </td>\r\n              <td>\r\n                <button class=\"btn\" (click)=\"detailsUser(user)\" [routerLink]=\"['/user-details']\">details&edit</button>\r\n                \r\n                <button class=\"btn\" (click)=\"deleteUser(user)\">delete</button>\r\n              </td>\r\n            </tr>\r\n          </ng-container>\r\n        </ng-container>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n  <!--<button class=\"btn btn-primary\" (click)=\"createUserTest()\">Create New User</button>-->\r\n  <button class=\"btn btn-primary\" (click)=\"openUserForm()\">Create New User</button>\r\n  <div *ngIf=\"showForm\">\r\n\r\n    <div class=\"alert alert-success\">\r\n      {{sucessMessage}}\r\n    </div>\r\n\r\n    <form id=\"userForm\" (ngSubmit)=\"createUser()\">\r\n      <div class=\"form-group\">\r\n        <input required maxlength=\"20\" class=\"form-control\" type=\"text\" name=\"AddNewUser\" [(ngModel)]=\"_newUser.name\" placeholder=\"Name\"/>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <input required maxlength=\"20\" class=\"form-control\" type=\"text\" name=\"AddNewUser\" [(ngModel)]=\"_newUser.surname\" placeholder=\"Surname\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <input required class=\"form-control\" type=\"date\" name=\"AddNewUser\" [(ngModel)]=\"_newUser.birthDate\" placeholder=\"BirthDate\" />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <input required maxlength=\"50\" class=\"form-control\" type=\"text\" name=\"AddNewUser\" [(ngModel)]=\"_newUser.emailAddress\" placeholder=\"Email\"/>\r\n      </div>\r\n\r\n      <div>\r\n        <button class=\"btn-primary\" type=\"submit\">Add</button>\r\n      </div>\r\n      <br />\r\n    </form>\r\n    \r\n    \r\n  </div>\r\n\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { newUser, user } from '../interfaces';\r\nimport { UserService } from '../user.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n})\r\n\r\n\r\nexport class HomeComponent implements OnInit {\r\n  searchQuery = '';\r\n\r\n  showForm = false;\r\n\r\n  usersArray: user[] = [];\r\n\r\n  sucessMessage = '';\r\n\r\n  _selectedUser :user | undefined;\r\n\r\n  _newUser: newUser = {\r\n    name: '',\r\n    surname: '',\r\n    birthDate: new Date(),\r\n    emailAddress: '',\r\n    userTitleId: 1,\r\n    userTypeId: 4,\r\n    isActive:true\r\n    }\r\n\r\n  constructor(private http: HttpClient, private userService: UserService) {\r\n\r\n  }\r\n\r\n  filterUsers() {\r\n    if (this.searchQuery) {\r\n\r\n      this.usersArray = this.usersArray.filter(user => {\r\n        return user.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n          user.surname.toLowerCase().includes(this.searchQuery.toLowerCase());\r\n      });\r\n    } else {\r\n      this.getUsers().subscribe(users => {\r\n        this.usersArray = users;\r\n      })\r\n    }\r\n\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    this.getUsers().subscribe(users => {\r\n      this.usersArray = users;\r\n    })\r\n\r\n\r\n  }\r\n\r\n  getUsers() {\r\n\r\n    return this.http.get<user[]>('https://localhost:7210/api/users');\r\n  }\r\n\r\n  detailsUser(selectedUser: user) {\r\n    this._selectedUser = selectedUser;\r\n    this.userService._selectedUser = this._selectedUser;\r\n   \r\n  }\r\n\r\n  async deleteUser(selectedUser: user) {\r\n    console.log('https://localhost:7210/api/users/' + selectedUser.id);\r\n    await this.http.delete('https://localhost:7210/api/users/' + selectedUser.id).toPromise();\r\n    this.ngOnInit();\r\n  }\r\n\r\n  addUser(newUser: newUser) {\r\n   return this.http.post('https://localhost:7210/api/users', newUser);\r\n  }\r\n\r\n  createUser() {\r\n    this.addUser(this._newUser).subscribe((data) => {\r\n      this.sucessMessage = \"User Added Successfully\";\r\n      /* Refresh the user list after successful addition*/\r\n      this.getUsers().subscribe(users => {\r\n        this.usersArray = users;\r\n      });\r\n    }, error => {\r\n      this.sucessMessage = error;\r\n    });\r\n  }\r\n\r\n  openUserForm() {\r\n    this.showForm = !this.showForm;\r\n    if (this.showForm) {\r\n      const userForm = document.getElementById('userForm');\r\n      userForm?.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n    }\r\n    \r\n    }\r\n    \r\n  \r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}