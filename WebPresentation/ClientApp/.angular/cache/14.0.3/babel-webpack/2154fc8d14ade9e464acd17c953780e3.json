{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../chunks/tslib.es6.js\";\nimport { isNone as e } from \"../../../core/maybe.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport { subclass as s } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { convolutionKernel as r } from \"../rasterFunctionConstants.js\";\nimport { getPixelValueRange as n } from \"../rasterFormats/pixelRangeUtils.js\";\nimport i from \"./BaseRasterFunction.js\";\nimport u from \"./ConvolutionFunctionArguments.js\";\nimport { convolute as c } from \"./convolutionUtils.js\";\nconst p = 25;\nlet l = class extends i {\n  constructor() {\n    super(...arguments), this.functionName = \"Convolution\", this.rasterArgumentNames = [\"raster\"];\n  }\n\n  _bindSourceRasters() {\n    const {\n      convolutionType: t,\n      rows: e,\n      cols: o,\n      kernel: s\n    } = this.functionArguments;\n    if (!Object.values(r).includes[t]) return {\n      success: !1,\n      supportsGPU: !1,\n      error: `convolution-function: the specified kernel type is not supported ${t}`\n    };\n    if (t !== r.none && e * o !== s.length) return {\n      success: !1,\n      supportsGPU: !1,\n      error: \"convolution-function: the specified rows and cols do not match the length of the kernel\"\n    };\n    const n = this.sourceRasterInfos[0];\n    this.outputPixelType = this._getOutputPixelType(n.pixelType);\n    const i = n.clone();\n    i.pixelType = this.outputPixelType;\n    const u = [r.none, r.sharpen, r.sharpen2, r.sharpening3x3, r.sharpening5x5];\n    \"u8\" === this.outputPixelType || u.includes(t) || (i.statistics = null, i.histograms = null), i.colormap = null, i.attributeTable = null, this.rasterInfo = i;\n    return {\n      success: !0,\n      supportsGPU: s.length <= p\n    };\n  }\n\n  _processPixels(t) {\n    const o = t.pixelBlocks?.[0];\n    if (e(o) || this.functionArguments.convolutionType === r.none) return o;\n    let {\n      kernel: s,\n      rows: n,\n      cols: i\n    } = this.functionArguments;\n    const u = s.reduce((t, e) => t + e);\n    return 0 !== u && 1 !== u && (s = s.map(t => t / u)), c(o, {\n      kernel: s,\n      rows: n,\n      cols: i,\n      outputPixelType: this.outputPixelType\n    });\n  }\n\n  _getWebGLParameters() {\n    let {\n      kernel: t\n    } = this.functionArguments;\n    const e = t.reduce((t, e) => t + e);\n    0 !== e && 1 !== e && (t = t.map(t => t / e));\n    const o = new Float32Array(p);\n    return o.set(t), {\n      kernelRows: this.functionArguments.rows,\n      kernelCols: this.functionArguments.cols,\n      kernel: o,\n      clampRange: n(this.outputPixelType)\n    };\n  }\n\n};\nt([o({\n  json: {\n    write: !0,\n    name: \"rasterFunction\"\n  }\n})], l.prototype, \"functionName\", void 0), t([o({\n  type: u,\n  json: {\n    write: !0,\n    name: \"rasterFunctionArguments\"\n  }\n})], l.prototype, \"functionArguments\", void 0), t([o()], l.prototype, \"rasterArgumentNames\", void 0), l = t([s(\"esri.layers.support.rasterFunctions.ConvolutionFunction\")], l);\nconst a = l;\nexport { a as default };","map":{"version":3,"names":["_","t","isNone","e","property","o","subclass","s","convolutionKernel","r","getPixelValueRange","n","i","u","convolute","c","p","l","constructor","arguments","functionName","rasterArgumentNames","_bindSourceRasters","convolutionType","rows","cols","kernel","functionArguments","Object","values","includes","success","supportsGPU","error","none","length","sourceRasterInfos","outputPixelType","_getOutputPixelType","pixelType","clone","sharpen","sharpen2","sharpening3x3","sharpening5x5","statistics","histograms","colormap","attributeTable","rasterInfo","_processPixels","pixelBlocks","reduce","map","_getWebGLParameters","Float32Array","set","kernelRows","kernelCols","clampRange","json","write","name","prototype","type","a","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/layers/support/rasterFunctions/ConvolutionFunction.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{isNone as e}from\"../../../core/maybe.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{convolutionKernel as r}from\"../rasterFunctionConstants.js\";import{getPixelValueRange as n}from\"../rasterFormats/pixelRangeUtils.js\";import i from\"./BaseRasterFunction.js\";import u from\"./ConvolutionFunctionArguments.js\";import{convolute as c}from\"./convolutionUtils.js\";const p=25;let l=class extends i{constructor(){super(...arguments),this.functionName=\"Convolution\",this.rasterArgumentNames=[\"raster\"]}_bindSourceRasters(){const{convolutionType:t,rows:e,cols:o,kernel:s}=this.functionArguments;if(!Object.values(r).includes[t])return{success:!1,supportsGPU:!1,error:`convolution-function: the specified kernel type is not supported ${t}`};if(t!==r.none&&e*o!==s.length)return{success:!1,supportsGPU:!1,error:\"convolution-function: the specified rows and cols do not match the length of the kernel\"};const n=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(n.pixelType);const i=n.clone();i.pixelType=this.outputPixelType;const u=[r.none,r.sharpen,r.sharpen2,r.sharpening3x3,r.sharpening5x5];\"u8\"===this.outputPixelType||u.includes(t)||(i.statistics=null,i.histograms=null),i.colormap=null,i.attributeTable=null,this.rasterInfo=i;return{success:!0,supportsGPU:s.length<=p}}_processPixels(t){const o=t.pixelBlocks?.[0];if(e(o)||this.functionArguments.convolutionType===r.none)return o;let{kernel:s,rows:n,cols:i}=this.functionArguments;const u=s.reduce(((t,e)=>t+e));return 0!==u&&1!==u&&(s=s.map((t=>t/u))),c(o,{kernel:s,rows:n,cols:i,outputPixelType:this.outputPixelType})}_getWebGLParameters(){let{kernel:t}=this.functionArguments;const e=t.reduce(((t,e)=>t+e));0!==e&&1!==e&&(t=t.map((t=>t/e)));const o=new Float32Array(p);return o.set(t),{kernelRows:this.functionArguments.rows,kernelCols:this.functionArguments.cols,kernel:o,clampRange:n(this.outputPixelType)}}};t([o({json:{write:!0,name:\"rasterFunction\"}})],l.prototype,\"functionName\",void 0),t([o({type:u,json:{write:!0,name:\"rasterFunctionArguments\"}})],l.prototype,\"functionArguments\",void 0),t([o()],l.prototype,\"rasterArgumentNames\",void 0),l=t([s(\"esri.layers.support.rasterFunctions.ConvolutionFunction\")],l);const a=l;export{a as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}