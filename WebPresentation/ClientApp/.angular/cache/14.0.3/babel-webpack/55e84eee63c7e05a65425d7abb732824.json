{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from \"../../../Graphic.js\";\nimport t from \"../../../request.js\";\nimport i from \"../../Attachment.js\";\nimport r from \"../support/FeatureSet.js\";\nimport s from \"../support/IdSet.js\";\nimport { defaultMaxRecords as a, stableStringify as n, FeatureServiceDatabaseType as l, IdState as o, extractServiceUrl as u } from \"../support/shared.js\";\nimport { toWhereClause as d, isSingleField as c } from \"../support/sqlUtils.js\";\nimport { decodeStatType as h } from \"../support/stats.js\";\nimport { createMD5Hash as p, outputTypes as y } from \"../../../core/MD5.js\";\nimport { id as f } from \"../../../kernel.js\";\nimport { fromJSON as m } from \"../../../geometry/support/jsonUtils.js\";\nimport _ from \"../../../layers/FeatureLayer.js\";\nimport { convertToFeatureSet as g } from \"../../../layers/graphics/featureConversionUtils.js\";\nimport \"../../../core/Error.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../layers/support/source/DataLayerSource.js\";\nimport { executeQueryJSON as R } from \"../../../rest/query/executeQueryJSON.js\";\nimport \"../../../config.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/urlUtils.js\";\nimport \"../../../core/unitUtils.js\";\nimport \"../../../geometry/support/spatialReferenceUtils.js\";\nimport { executeQueryPBF as F } from \"../../../rest/query/operations/query.js\";\nimport S from \"../../../rest/support/FeatureSet.js\";\nimport w from \"../../../rest/support/Query.js\";\nimport \"../../../rest/query/support/AttachmentInfo.js\";\nimport \"../../../rest/support/AttachmentQuery.js\";\nimport { executeForCount as b } from \"../../../rest/query/executeForCount.js\";\nimport \"../../../geometry.js\";\nimport { executeForIds as D } from \"../../../rest/query/executeForIds.js\";\nimport \"../../../rest/support/RelationshipQuery.js\";\nimport \"../../../geometry/support/normalizeUtils.js\";\nimport \"../../../rest/support/TopFeaturesQuery.js\";\nimport { OptimizedFeatureSetParserContext as I } from \"../../../rest/query/operations/pbfOptimizedFeatureSet.js\";\nimport x from \"../../../rest/support/StatisticDefinition.js\";\nimport T from \"../../Dictionary.js\";\nimport { FeatureSetError as C, FeatureSetErrorCodes as P } from \"../support/errorsupport.js\";\n\nclass j extends r {\n  constructor(e) {\n    super(e), this.declaredClass = \"esri.arcade.featureset.sources.FeatureLayerDynamic\", this._removeGeometry = !1, this._overrideFields = null, this.formulaCredential = null, this._pageJustIds = !1, this._requestStandardised = !1, this._useDefinitionExpression = !0, this._cachedDateMetaData = {}, e.spatialReference && (this.spatialReference = e.spatialReference), this._transparent = !0, this._maxProcessing = 1e3, this._layer = e.layer, this._wset = null, void 0 !== e.outFields && (this._overrideFields = e.outFields), void 0 !== e.includeGeometry && (this._removeGeometry = !1 === e.includeGeometry);\n  }\n\n  _maxQueryRate() {\n    return a;\n  }\n\n  end() {\n    return this._layer;\n  }\n\n  optimisePagingFeatureQueries(e) {\n    this._pageJustIds = e;\n  }\n\n  get urlQueryPath() {\n    return this._layer.parsedUrl.path || \"\";\n  }\n\n  convertQueryToLruCacheKey(e) {\n    const t = this.urlQueryPath + \",\" + n(e.toJSON());\n    return p(t, y.String);\n  }\n\n  loadImpl() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return !0 === _this._layer.loaded ? (_this._initialiseFeatureSet(), _this) : (yield _this._layer.load(), _this._initialiseFeatureSet(), _this);\n    })();\n  }\n\n  _initialiseFeatureSet() {\n    if (null == this.spatialReference && (this.spatialReference = this._layer.spatialReference), this.geometryType = this._layer.geometryType, this.fields = this._layer.fields.slice(0), this._layer.outFields) {\n      if (1 === this._layer.outFields.length && \"*\" === this._layer.outFields[0]) ;else {\n        const e = [];\n\n        for (const t of this.fields) if (\"oid\" === t.type) e.push(t);else for (const i of this._layer.outFields) if (i.toLowerCase() === t.name.toLowerCase()) {\n          e.push(t);\n          break;\n        }\n\n        this.fields = e;\n      }\n    } else ;\n    if (null !== this._overrideFields) if (1 === this._overrideFields.length && \"*\" === this._overrideFields[0]) this._overrideFields = null;else {\n      const e = [],\n            t = [];\n\n      for (const i of this.fields) if (\"oid\" === i.type) e.push(i), t.push(i.name);else for (const r of this._overrideFields) if (r.toLowerCase() === i.name.toLowerCase()) {\n        e.push(i), t.push(i.name);\n        break;\n      }\n\n      this.fields = e, this._overrideFields = t;\n    }\n\n    if (this._layer.source && this._layer.source.sourceJSON) {\n      const e = this._layer.source.sourceJSON.currentVersion;\n      !0 === this._layer.source.sourceJSON.useStandardizedQueries ? (this._databaseType = l.StandardisedNoInterval, null != e && e >= 10.61 && (this._databaseType = l.Standardised)) : null != e && (e >= 10.5 && (this._databaseType = l.StandardisedNoInterval, this._requestStandardised = !0), e >= 10.61 && (this._databaseType = l.Standardised));\n    }\n\n    this.objectIdField = this._layer.objectIdField;\n\n    for (const e of this.fields) \"global-id\" === e.type && (this.globalIdField = e.name);\n\n    this.hasM = this._layer.supportsM, this.hasZ = this._layer.supportsZ, this.typeIdField = this._layer.typeIdField ?? \"\", this.types = this._layer.types;\n  }\n\n  _isInFeatureSet() {\n    return o.InFeatureSet;\n  }\n\n  _refineSetBlock(e) {\n    return _asyncToGenerator(function* () {\n      return e;\n    })();\n  }\n\n  _candidateIdTransform(e) {\n    return e;\n  }\n\n  _getSet(e) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      if (null === _this2._wset) {\n        yield _this2._ensureLoaded();\n        const t = yield _this2._getFilteredSet(\"\", null, null, null, e);\n        return _this2._wset = t, t;\n      }\n\n      return _this2._wset;\n    })();\n  }\n\n  _runDatabaseProbe(e) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this3._ensureLoaded();\n      const t = new w();\n      _this3.datesInUnknownTimezone && (t.timeReferenceUnknownClient = !0), t.where = e.replace(\"OBJECTID\", _this3._layer.objectIdField);\n\n      try {\n        return yield _this3._layer.queryObjectIds(t), !0;\n      } catch (i) {\n        return !1;\n      }\n    })();\n  }\n\n  _canUsePagination() {\n    return !(!this._layer.capabilities || !this._layer.capabilities.query || !0 !== this._layer.capabilities.query.supportsPagination);\n  }\n\n  _cacheableFeatureSetSourceKey() {\n    return this._layer.url;\n  }\n\n  pbfSupportedForQuery(e) {\n    const t = this._layer?.capabilities?.query;\n    return !e.outStatistics && !0 === t?.supportsFormatPBF && !0 === t?.supportsQuantizationEditMode;\n  }\n\n  queryPBF(e) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      e.quantizationParameters = {\n        mode: \"edit\"\n      };\n      const t = yield F(_this4._layer.parsedUrl, e, new I({}));\n      return S.fromJSON(g(t.data)).unquantize();\n    })();\n  }\n\n  get gdbVersion() {\n    return this._layer && this._layer.capabilities && this._layer.capabilities.data && this._layer.capabilities.data.isVersioned ? this._layer.gdbVersion ? this._layer.gdbVersion : \"SDE.DEFAULT\" : \"\";\n  }\n\n  nativeCapabilities() {\n    return {\n      title: this._layer.title ?? \"\",\n      source: this,\n      canQueryRelated: !0,\n      capabilities: this._layer.capabilities,\n      databaseType: this._databaseType,\n      requestStandardised: this._requestStandardised\n    };\n  }\n\n  executeQuery(e, t) {\n    const i = \"execute\" === t ? R : \"executeForCount\" === t ? b : D,\n          r = \"execute\" === t && this.pbfSupportedForQuery(e);\n    let s = null;\n\n    if (this.recentlyUsedQueries) {\n      const t = this.convertQueryToLruCacheKey(e);\n      s = this.recentlyUsedQueries.getFromCache(t), null === s && (s = !0 !== r ? i(this._layer.parsedUrl.path, e) : this.queryPBF(e), this.recentlyUsedQueries.addToCache(t, s), s = s.catch(e => {\n        throw this.recentlyUsedQueries?.removeFromCache(t), e;\n      }));\n    }\n\n    return this.featureSetQueryInterceptor && this.featureSetQueryInterceptor.preLayerQueryCallback({\n      layer: this._layer,\n      query: e,\n      method: t\n    }), null === s && (s = !0 !== r ? i(this._layer.parsedUrl.path, e) : this.queryPBF(e)), s;\n  }\n\n  _getFilteredSet(e, t, i, r, a) {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const n = yield _this5.databaseType();\n\n      if (_this5.isTable() && t && null !== e && \"\" !== e) {\n        return new s([], [], !0, null);\n      }\n\n      if (_this5._canUsePagination()) return _this5._getFilteredSetUsingPaging(e, t, i, r, a);\n      let l = \"\",\n          o = !1;\n      null !== r && _this5._layer.capabilities && _this5._layer.capabilities.query && !0 === _this5._layer.capabilities.query.supportsOrderBy && (l = r.constructClause(), o = !0);\n      const u = new w();\n      _this5.datesInUnknownTimezone && (u.timeReferenceUnknownClient = !0), u.where = null === i ? null === t ? \"1=1\" : \"\" : d(i, n), _this5._requestStandardised && (u.sqlFormat = \"standard\"), u.spatialRelationship = _this5._makeRelationshipEnum(e), u.outSpatialReference = _this5.spatialReference, u.orderByFields = \"\" !== l ? l.split(\",\") : null, u.geometry = null === t ? null : t, u.relationParameter = _this5._makeRelationshipParam(e);\n      let c = yield _this5.executeQuery(u, \"executeForIds\");\n      null === c && (c = []), _this5._checkCancelled(a);\n      return new s([], c, o, null);\n    })();\n  }\n\n  _expandPagedSet(e, t, i, r, s) {\n    return this._expandPagedSetFeatureSet(e, t, i, r, s);\n  }\n\n  _getFilteredSetUsingPaging(e, t, i, r, a) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      let n = \"\",\n          l = !1;\n      null !== r && _this6._layer.capabilities && _this6._layer.capabilities.query && !0 === _this6._layer.capabilities.query.supportsOrderBy && (n = r.constructClause(), l = !0);\n      const o = yield _this6.databaseType();\n      let u = null === i ? null === t ? \"1=1\" : \"\" : d(i, o);\n      _this6._layer.definitionExpression && _this6._useDefinitionExpression && (u = \"\" !== u ? \"((\" + _this6._layer.definitionExpression + \") AND (\" + u + \"))\" : _this6._layer.definitionExpression);\n\n      let c = _this6._maxQueryRate();\n\n      const h = _this6._layer.capabilities?.query.maxRecordCount;\n      null != h && h < c && (c = h);\n      let p = null;\n      if (!0 === _this6._pageJustIds) p = new s([], [\"GETPAGES\"], l, {\n        spatialRel: _this6._makeRelationshipEnum(e),\n        relationParam: _this6._makeRelationshipParam(e),\n        outFields: _this6._layer.objectIdField,\n        resultRecordCount: c,\n        resultOffset: 0,\n        geometry: null === t ? null : t,\n        where: u,\n        orderByFields: n,\n        returnGeometry: !1,\n        returnIdsOnly: \"false\",\n        internal: {\n          set: [],\n          lastRetrieved: 0,\n          lastPage: 0,\n          fullyResolved: !1\n        }\n      });else {\n        let i = !0;\n        !0 === _this6._removeGeometry && (i = !1);\n        const r = null !== _this6._overrideFields ? _this6._overrideFields : _this6._fieldsIncludingObjectId(_this6._layer.outFields ? _this6._layer.outFields : [\"*\"]);\n        p = new s([], [\"GETPAGES\"], l, {\n          spatialRel: _this6._makeRelationshipEnum(e),\n          relationParam: _this6._makeRelationshipParam(e),\n          outFields: r.join(\",\"),\n          resultRecordCount: c,\n          resultOffset: 0,\n          geometry: null === t ? null : t,\n          where: u,\n          orderByFields: n,\n          returnGeometry: i,\n          returnIdsOnly: \"false\",\n          internal: {\n            set: [],\n            lastRetrieved: 0,\n            lastPage: 0,\n            fullyResolved: !1\n          }\n        });\n      }\n      return yield _this6._expandPagedSet(p, c, 0, 1, a), p;\n    })();\n  }\n\n  _clonePageDefinition(e) {\n    return null === e ? null : !0 !== e.groupbypage ? {\n      groupbypage: !1,\n      spatialRel: e.spatialRel,\n      relationParam: e.relationParam,\n      outFields: e.outFields,\n      resultRecordCount: e.resultRecordCount,\n      resultOffset: e.resultOffset,\n      geometry: e.geometry,\n      where: e.where,\n      orderByFields: e.orderByFields,\n      returnGeometry: e.returnGeometry,\n      returnIdsOnly: e.returnIdsOnly,\n      internal: e.internal\n    } : {\n      groupbypage: !0,\n      spatialRel: e.spatialRel,\n      relationParam: e.relationParam,\n      outFields: e.outFields,\n      resultRecordCount: e.resultRecordCount,\n      useOIDpagination: e.useOIDpagination,\n      generatedOid: e.generatedOid,\n      groupByFieldsForStatistics: e.groupByFieldsForStatistics,\n      resultOffset: e.resultOffset,\n      outStatistics: e.outStatistics,\n      geometry: e.geometry,\n      where: e.where,\n      orderByFields: e.orderByFields,\n      returnGeometry: e.returnGeometry,\n      returnIdsOnly: e.returnIdsOnly,\n      internal: e.internal\n    };\n  }\n\n  _getPhysicalPage(e, t, i) {\n    var _this7 = this;\n\n    return _asyncToGenerator(function* () {\n      const r = e.pagesDefinition.internal.lastRetrieved,\n            s = r,\n            a = e.pagesDefinition.internal.lastPage,\n            n = new w();\n      _this7._requestStandardised && (n.sqlFormat = \"standard\"), _this7.datesInUnknownTimezone && (n.timeReferenceUnknownClient = !0), n.spatialRelationship = e.pagesDefinition.spatialRel, n.relationParameter = e.pagesDefinition.relationParam, n.outFields = e.pagesDefinition.outFields.split(\",\"), n.num = e.pagesDefinition.resultRecordCount, n.start = e.pagesDefinition.internal.lastPage, n.geometry = e.pagesDefinition.geometry, n.where = e.pagesDefinition.where, n.orderByFields = \"\" !== e.pagesDefinition.orderByFields ? e.pagesDefinition.orderByFields.split(\",\") : null, n.returnGeometry = e.pagesDefinition.returnGeometry, n.outSpatialReference = _this7.spatialReference;\n      const l = yield _this7.executeQuery(n, \"execute\");\n      if (_this7._checkCancelled(i), e.pagesDefinition.internal.lastPage !== a) return \"done\";\n      const o = _this7._layer.objectIdField;\n\n      for (let u = 0; u < l.features.length; u++) e.pagesDefinition.internal.set[s + u] = l.features[u].attributes[o];\n\n      if (!1 === _this7._pageJustIds) for (let u = 0; u < l.features.length; u++) _this7._featureCache[l.features[u].attributes[o]] = l.features[u];\n      return (void 0 === l.exceededTransferLimit && l.features.length !== e.pagesDefinition.resultRecordCount || !1 === l.exceededTransferLimit) && (e.pagesDefinition.internal.fullyResolved = !0), e.pagesDefinition.internal.lastRetrieved = r + l.features.length, e.pagesDefinition.internal.lastPage += e.pagesDefinition.resultRecordCount, \"done\";\n    })();\n  }\n\n  _fieldsIncludingObjectId(e) {\n    if (null === e) return [this.objectIdField];\n    const t = e.slice(0);\n    if (t.includes(\"*\")) return t;\n    let i = !1;\n\n    for (const r of t) if (r.toUpperCase() === this.objectIdField.toUpperCase()) {\n      i = !0;\n      break;\n    }\n\n    return !1 === i && t.push(this.objectIdField), t;\n  }\n\n  _getFeatures(e, t, i, r) {\n    var _this8 = this;\n\n    return _asyncToGenerator(function* () {\n      const s = [];\n      if (-1 !== t && void 0 === _this8._featureCache[t] && s.push(t), !0 === _this8._checkIfNeedToExpandKnownPage(e, _this8._maxProcessingRate())) return yield _this8._expandPagedSet(e, _this8._maxProcessingRate(), 0, 0, r), _this8._getFeatures(e, t, i, r);\n      let a = 0;\n\n      for (let u = e._lastFetchedIndex; u < e._known.length; u++) {\n        if (e._lastFetchedIndex += 1, a++, void 0 === _this8._featureCache[e._known[u]]) {\n          let i = !1;\n\n          if (null !== _this8._layer._mode && void 0 !== _this8._layer._mode) {\n            const t = _this8._layer._mode;\n\n            if (void 0 !== t._featureMap[e._known[u]]) {\n              const r = t._featureMap[e._known[u]];\n              null !== r && (i = !0, _this8._featureCache[e._known[u]] = r);\n            }\n          }\n\n          if (!1 === i && (e._known[u] !== t && s.push(e._known[u]), s.length >= _this8._maxProcessingRate() - 1)) break;\n        }\n\n        if (a >= i && 0 === s.length) break;\n      }\n\n      if (0 === s.length) return \"success\";\n      const n = new w();\n      _this8._requestStandardised && (n.sqlFormat = \"standard\"), _this8.datesInUnknownTimezone && (n.timeReferenceUnknownClient = !0), n.objectIds = s, n.outFields = null !== _this8._overrideFields ? _this8._overrideFields : _this8._fieldsIncludingObjectId(_this8._layer.outFields ? _this8._layer.outFields : [\"*\"]), n.returnGeometry = !0, !0 === _this8._removeGeometry && (n.returnGeometry = !1), n.outSpatialReference = _this8.spatialReference;\n      const l = yield _this8.executeQuery(n, \"execute\");\n      if (_this8._checkCancelled(r), void 0 !== l.error) throw new C(P.RequestFailed, {\n        reason: l.error\n      });\n      const o = _this8._layer.objectIdField;\n\n      for (let u = 0; u < l.features.length; u++) _this8._featureCache[l.features[u].attributes[o]] = l.features[u];\n\n      return \"success\";\n    })();\n  }\n\n  _getDistinctPages(e, t, i, r, s, a, n, l, o) {\n    var _this9 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this9._ensureLoaded();\n      const u = yield _this9.databaseType();\n      let c = i.parseTree.column;\n      const h = _this9._layer.fields ?? [];\n\n      for (let d = 0; d < h.length; d++) if (h[d].name.toLowerCase() === c.toLowerCase()) {\n        c = h[d].name;\n        break;\n      }\n\n      const p = new w();\n      _this9._requestStandardised && (p.sqlFormat = \"standard\"), _this9.datesInUnknownTimezone && (p.timeReferenceUnknownClient = !0);\n      let y = null === a ? null === s ? \"1=1\" : \"\" : d(a, u);\n      _this9._layer.definitionExpression && _this9._useDefinitionExpression && (y = \"\" !== y ? \"((\" + _this9._layer.definitionExpression + \") AND (\" + y + \"))\" : _this9._layer.definitionExpression), p.where = y, p.spatialRelationship = _this9._makeRelationshipEnum(r), p.relationParameter = _this9._makeRelationshipParam(r), p.geometry = null === s ? null : s, p.returnDistinctValues = !0, p.returnGeometry = !1, p.outFields = [c];\n      const f = yield _this9.executeQuery(p, \"execute\");\n      if (_this9._checkCancelled(o), !f.hasOwnProperty(\"features\")) throw new C(P.InvalidStatResponse);\n      let m = !1;\n\n      for (let d = 0; d < h.length; d++) if (h[d].name === c) {\n        \"date\" === h[d].type && (m = !0);\n        break;\n      }\n\n      for (let d = 0; d < f.features.length; d++) {\n        if (m) {\n          const e = f.features[d].attributes[c];\n          null !== e ? l.push(new Date(e)) : l.push(e);\n        } else l.push(f.features[d].attributes[c]);\n\n        if (l.length >= n) break;\n      }\n\n      if (0 === f.features.length) return l;\n\n      if (f.features.length === _this9._layer.capabilities?.query.maxRecordCount && l.length < n) {\n        return {\n          calculated: !0,\n          result: yield _this9._getDistinctPages(e + f.features.length, t, i, r, s, a, n, l, o)\n        };\n      }\n\n      return l;\n    })();\n  }\n\n  _distinctStat(e, t, i, r, s, a, n) {\n    var _this10 = this;\n\n    return _asyncToGenerator(function* () {\n      return {\n        calculated: !0,\n        result: yield _this10._getDistinctPages(0, e, t, i, r, s, a, [], n)\n      };\n    })();\n  }\n\n  isTable() {\n    return this._layer.isTable || null === this._layer.geometryType || \"table\" === this._layer.type || \"\" === this._layer.geometryType || \"esriGeometryNull\" === this._layer.geometryType;\n  }\n\n  _countstat(e, t, i, r) {\n    var _this11 = this;\n\n    return _asyncToGenerator(function* () {\n      const s = yield _this11.databaseType(),\n            a = new w();\n      if (_this11._requestStandardised && (a.sqlFormat = \"standard\"), _this11.isTable() && i && null !== t && \"\" !== t) return {\n        calculated: !0,\n        result: 0\n      };\n      let n = null === r ? null === i ? \"1=1\" : \"\" : d(r, s);\n      _this11._layer.definitionExpression && _this11._useDefinitionExpression && (n = \"\" !== n ? \"((\" + _this11._layer.definitionExpression + \") AND (\" + n + \"))\" : _this11._layer.definitionExpression), a.where = n, _this11.datesInUnknownTimezone && (a.timeReferenceUnknownClient = !0), a.where = n, a.spatialRelationship = _this11._makeRelationshipEnum(t), a.relationParameter = _this11._makeRelationshipParam(t), a.geometry = null === i ? null : i, a.returnGeometry = !1;\n      return {\n        calculated: !0,\n        result: yield _this11.executeQuery(a, \"executeForCount\")\n      };\n    })();\n  }\n\n  _stats(e, t, i, r, s, a, n) {\n    var _this12 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this12._ensureLoaded();\n      const l = _this12._layer.capabilities && _this12._layer.capabilities.query && !0 === _this12._layer.capabilities.query.supportsSqlExpression,\n            o = _this12._layer.capabilities && _this12._layer.capabilities.query && !0 === _this12._layer.capabilities.query.supportsStatistics,\n            u = _this12._layer.capabilities && _this12._layer.capabilities.query && !0 === _this12._layer.capabilities.query.supportsDistinct;\n      if (\"count\" === e) return u ? _this12._countstat(e, i, r, s) : {\n        calculated: !1\n      };\n      if (!1 === o || !1 === c(t) && !1 === l || !1 === t.isStandardized) return \"\" !== i || null !== s ? {\n        calculated: !1\n      } : _this12._manualStat(e, t, a, n);\n      if (\"distinct\" === e) return !1 === u ? \"\" !== i || null !== s ? {\n        calculated: !1\n      } : _this12._manualStat(e, t, a, n) : _this12._distinctStat(e, t, i, r, s, a, n);\n      const p = yield _this12.databaseType();\n      if (_this12.isTable() && r && null !== i && \"\" !== i) return {\n        calculated: !0,\n        result: null\n      };\n      const y = new w();\n      _this12._requestStandardised && (y.sqlFormat = \"standard\");\n      let f = null === s ? null === r ? \"1=1\" : \"\" : d(s, p);\n      _this12._layer.definitionExpression && _this12._useDefinitionExpression && (f = \"\" !== f ? \"((\" + _this12._layer.definitionExpression + \") AND (\" + f + \"))\" : _this12._layer.definitionExpression), y.where = f, y.spatialRelationship = _this12._makeRelationshipEnum(i), y.relationParameter = _this12._makeRelationshipParam(i), y.geometry = null === r ? null : r, _this12.datesInUnknownTimezone && (y.timeReferenceUnknownClient = !0);\n      const m = new x();\n      m.statisticType = h(e), m.onStatisticField = d(t, p), m.outStatisticFieldName = \"ARCADE_STAT_RESULT\", y.returnGeometry = !1;\n      let _ = \"ARCADE_STAT_RESULT\";\n      y.outStatistics = [m];\n      const g = yield _this12.executeQuery(y, \"execute\");\n      if (!g.hasOwnProperty(\"features\") || 0 === g.features.length) throw new C(P.InvalidStatResponse);\n      let R = !1;\n      const F = g.fields ?? [];\n\n      for (let d = 0; d < F.length; d++) if (\"ARCADE_STAT_RESULT\" === F[d].name.toUpperCase()) {\n        _ = F[d].name, \"date\" === F[d].type && (R = !0);\n        break;\n      }\n\n      if (R) {\n        let e = g.features[0].attributes[_];\n        return null !== e && (e = new Date(g.features[0].attributes[_])), {\n          calculated: !0,\n          result: e\n        };\n      }\n\n      return {\n        calculated: !0,\n        result: g.features[0].attributes[_]\n      };\n    })();\n  }\n\n  _stat(e, t, i, r, s, a, n) {\n    return this._stats(e, t, i, r, s, a, n);\n  }\n\n  _canDoAggregates(e, t) {\n    var _this13 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this13._ensureLoaded();\n      let i = !1;\n      const r = _this13._layer.capabilities?.query,\n            s = !0 === r?.supportsSqlExpression;\n      if (null != r && !0 === r.supportsStatistics && !0 === r.supportsOrderBy && (i = !0), i) for (let a = 0; a < t.length - 1; a++) (!1 === t[a].workingexpr?.isStandardized || !1 === c(t[a].workingexpr) && !1 === s) && (i = !1);\n      return !1 !== i;\n    })();\n  }\n\n  _makeRelationshipEnum(e) {\n    if (e.includes(\"esriSpatialRelRelation\")) return \"relation\";\n\n    switch (e) {\n      case \"esriSpatialRelRelation\":\n        return \"relation\";\n\n      case \"esriSpatialRelIntersects\":\n        return \"intersects\";\n\n      case \"esriSpatialRelContains\":\n        return \"contains\";\n\n      case \"esriSpatialRelOverlaps\":\n        return \"overlaps\";\n\n      case \"esriSpatialRelWithin\":\n        return \"within\";\n\n      case \"esriSpatialRelTouches\":\n        return \"touches\";\n\n      case \"esriSpatialRelCrosses\":\n        return \"crosses\";\n\n      case \"esriSpatialRelEnvelopeIntersects\":\n        return \"envelope-intersects\";\n    }\n\n    return e;\n  }\n\n  _makeRelationshipParam(e) {\n    return e.includes(\"esriSpatialRelRelation\") ? e.split(\":\")[1] : \"\";\n  }\n\n  _getAggregatePagesDataSourceDefinition(e, t, i, r, a, n, l) {\n    var _this14 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this14._ensureLoaded();\n      const o = yield _this14.databaseType();\n      let u = \"\",\n          c = !1,\n          h = !1;\n      null !== n && _this14._layer.capabilities && _this14._layer.capabilities.query && !0 === _this14._layer.capabilities.query.supportsOrderBy && (u = n.constructClause(), h = !0), _this14._layer.capabilities && _this14._layer.capabilities.query && !1 === _this14._layer.capabilities.query.supportsPagination && (h = !1, c = !0, u = _this14._layer.objectIdField);\n      const p = [];\n\n      for (let s = 0; s < t.length; s++) {\n        const e = new x();\n        e.onStatisticField = null !== t[s].workingexpr ? d(t[s].workingexpr, o) : \"\", e.outStatisticFieldName = t[s].field, e.statisticType = t[s].toStatisticsName(), p.push(e);\n      }\n\n      \"\" === u && (u = e.join(\",\"));\n\n      let y = _this14._maxQueryRate();\n\n      const f = _this14._layer.capabilities?.query.maxRecordCount;\n      null != f && f < y && (y = f);\n      let m = null === a ? null === r ? \"1=1\" : \"\" : d(a, o);\n      _this14._layer.definitionExpression && _this14._useDefinitionExpression && (m = \"\" !== m ? \"((\" + _this14._layer.definitionExpression + \") AND (\" + m + \"))\" : _this14._layer.definitionExpression);\n      return new s([], [\"GETPAGES\"], h, {\n        groupbypage: !0,\n        spatialRel: _this14._makeRelationshipEnum(i),\n        relationParam: _this14._makeRelationshipParam(i),\n        outFields: [\"*\"],\n        useOIDpagination: c,\n        generatedOid: l,\n        resultRecordCount: y,\n        resultOffset: 0,\n        groupByFieldsForStatistics: e,\n        outStatistics: p,\n        geometry: null === r ? null : r,\n        where: m,\n        orderByFields: u,\n        returnGeometry: !1,\n        returnIdsOnly: !1,\n        internal: {\n          lastMaxId: -1,\n          set: [],\n          lastRetrieved: 0,\n          lastPage: 0,\n          fullyResolved: !1\n        }\n      });\n    })();\n  }\n\n  _getAgregagtePhysicalPage(t, i, r) {\n    var _this15 = this;\n\n    return _asyncToGenerator(function* () {\n      let s = t.pagesDefinition.where;\n      !0 === t.pagesDefinition.useOIDpagination && (s = \"\" !== s ? \"(\" + s + \") AND (\" + t.pagesDefinition.generatedOid + \">\" + t.pagesDefinition.internal.lastMaxId.toString() + \")\" : t.pagesDefinition.generatedOid + \">\" + t.pagesDefinition.internal.lastMaxId.toString());\n      const a = t.pagesDefinition.internal.lastRetrieved,\n            n = a,\n            l = t.pagesDefinition.internal.lastPage,\n            o = new w();\n      if (_this15._requestStandardised && (o.sqlFormat = \"standard\"), o.where = s, o.spatialRelationship = t.pagesDefinition.spatialRel, o.relationParameter = t.pagesDefinition.relationParam, o.outFields = t.pagesDefinition.outFields, o.outStatistics = t.pagesDefinition.outStatistics, o.geometry = t.pagesDefinition.geometry, o.groupByFieldsForStatistics = t.pagesDefinition.groupByFieldsForStatistics, o.num = t.pagesDefinition.resultRecordCount, o.start = t.pagesDefinition.internal.lastPage, o.returnGeometry = t.pagesDefinition.returnGeometry, _this15.datesInUnknownTimezone && (o.timeReferenceUnknownClient = !0), o.orderByFields = \"\" !== t.pagesDefinition.orderByFields ? t.pagesDefinition.orderByFields.split(\",\") : null, _this15.isTable() && o.geometry && o.spatialRelationship) return [];\n      const u = yield _this15.executeQuery(o, \"execute\");\n      if (_this15._checkCancelled(r), !u.hasOwnProperty(\"features\")) throw new C(P.InvalidStatResponse);\n      const d = [];\n      if (t.pagesDefinition.internal.lastPage !== l) return [];\n\n      for (let e = 0; e < u.features.length; e++) t.pagesDefinition.internal.set[n + e] = u.features[e].attributes[t.pagesDefinition.generatedOid];\n\n      for (let c = 0; c < u.features.length; c++) d.push(new e({\n        attributes: u.features[c].attributes,\n        geometry: null\n      }));\n\n      return !0 === t.pagesDefinition.useOIDpagination ? 0 === u.features.length ? t.pagesDefinition.internal.fullyResolved = !0 : t.pagesDefinition.internal.lastMaxId = u.features[u.features.length - 1].attributes[t.pagesDefinition.generatedOid] : (void 0 === u.exceededTransferLimit && u.features.length !== t.pagesDefinition.resultRecordCount || !1 === u.exceededTransferLimit) && (t.pagesDefinition.internal.fullyResolved = !0), t.pagesDefinition.internal.lastRetrieved = a + u.features.length, t.pagesDefinition.internal.lastPage += t.pagesDefinition.resultRecordCount, d;\n    })();\n  }\n\n  static create(e, t, i, r, s) {\n    const a = new _({\n      url: e,\n      outFields: null === t ? [\"*\"] : t\n    });\n    return new j({\n      layer: a,\n      spatialReference: i,\n      lrucache: r,\n      interceptor: s\n    });\n  }\n\n  relationshipMetaData() {\n    return this._layer && this._layer.source && this._layer.source.sourceJSON && this._layer.source.sourceJSON.relationships ? this._layer.source.sourceJSON.relationships : [];\n  }\n\n  serviceUrl() {\n    return u(this._layer.parsedUrl.path);\n  }\n\n  queryAttachments(e, t, r, s, a) {\n    var _this16 = this;\n\n    return _asyncToGenerator(function* () {\n      const n = _this16._layer.capabilities;\n\n      if (n?.data.supportsAttachment && n?.operations.supportsQueryAttachments) {\n        const n = {\n          objectIds: [e],\n          returnMetadata: a\n        };\n        (t && t > 0 || r && r > 0) && (n.size = [t && t > 0 ? t : 0, r && r > 0 ? r : t + 1]), s && s.length > 0 && (n.attachmentTypes = s), _this16.featureSetQueryInterceptor && _this16.featureSetQueryInterceptor.preLayerQueryCallback({\n          layer: _this16._layer,\n          query: n,\n          method: \"attachments\"\n        });\n        const l = yield _this16._layer.queryAttachments(n),\n              o = [];\n        return l && l[e] && l[e].forEach(t => {\n          const r = _this16._layer.parsedUrl.path + \"/\" + e.toString() + \"/attachments/\" + t.id.toString();\n          let s = null;\n          a && t.exifInfo && (s = T.convertJsonToArcade(t.exifInfo, \"system\", !0)), o.push(new i(t.id, t.name, t.contentType, t.size, r, s));\n        }), o;\n      }\n\n      return [];\n    })();\n  }\n\n  queryRelatedFeatures(i) {\n    var _this17 = this;\n\n    return _asyncToGenerator(function* () {\n      const r = {\n        f: \"json\",\n        relationshipId: i.relationshipId.toString(),\n        definitionExpression: i.where,\n        outFields: i.outFields?.join(\",\"),\n        returnGeometry: i.returnGeometry.toString()\n      };\n      void 0 !== i.resultOffset && null !== i.resultOffset && (r.resultOffset = i.resultOffset.toString()), void 0 !== i.resultRecordCount && null !== i.resultRecordCount && (r.resultRecordCount = i.resultRecordCount.toString()), i.orderByFields && (r.orderByFields = i.orderByFields.join(\",\")), i.objectIds && i.objectIds.length > 0 && (r.objectIds = i.objectIds.join(\",\")), i.outSpatialReference && (r.outSR = JSON.stringify(i.outSpatialReference.toJSON())), _this17.featureSetQueryInterceptor && _this17.featureSetQueryInterceptor.preRequestCallback({\n        layer: _this17._layer,\n        queryPayload: r,\n        method: \"relatedrecords\",\n        url: _this17._layer.parsedUrl.path + \"/queryRelatedRecords\"\n      });\n      const s = yield t(_this17._layer.parsedUrl.path + \"/queryRelatedRecords\", {\n        responseType: \"json\",\n        query: r\n      });\n\n      if (s.data) {\n        const t = {},\n              i = s.data;\n\n        if (i && i.relatedRecordGroups) {\n          const r = i.spatialReference;\n\n          for (const s of i.relatedRecordGroups) {\n            const a = s.objectId,\n                  n = [];\n\n            for (const t of s.relatedRecords) {\n              t.geometry && (t.geometry.spatialReference = r);\n              const i = new e({\n                geometry: t.geometry ? m(t.geometry) : null,\n                attributes: t.attributes\n              });\n              n.push(i);\n            }\n\n            t[a] = {\n              features: n,\n              exceededTransferLimit: !0 === i.exceededTransferLimit\n            };\n          }\n        }\n\n        return t;\n      }\n\n      throw new C(P.InvalidRequest);\n    })();\n  }\n\n  getFeatureByObjectId(e, t) {\n    var _this18 = this;\n\n    return _asyncToGenerator(function* () {\n      const i = new w();\n      i.outFields = t, i.returnGeometry = !1, i.outSpatialReference = _this18.spatialReference, i.where = _this18.objectIdField + \"=\" + e.toString(), _this18.datesInUnknownTimezone && (i.timeReferenceUnknownClient = !0), _this18.featureSetQueryInterceptor && _this18.featureSetQueryInterceptor.preLayerQueryCallback({\n        layer: _this18._layer,\n        query: i,\n        method: \"execute\"\n      });\n      const r = yield R(_this18._layer.parsedUrl.path, i);\n      return 1 === r.features.length ? r.features[0] : null;\n    })();\n  }\n\n  getIdentityUser() {\n    var _this19 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this19.load();\n      const e = f?.findCredential(_this19._layer.url);\n      return e ? e.userId : null;\n    })();\n  }\n\n  getOwningSystemUrl() {\n    var _this20 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this20.load();\n      const e = f?.findServerInfo(_this20._layer.url);\n      if (e) return e.owningSystemUrl;\n      let i = _this20._layer.url;\n      const r = i.toLowerCase().indexOf(\"/rest/services\");\n\n      if (i = r > -1 ? i.substring(0, r) : i, i) {\n        i += \"/rest/info\";\n\n        try {\n          const e = yield t(i, {\n            query: {\n              f: \"json\"\n            }\n          });\n          let r = \"\";\n          return e.data && e.data.owningSystemUrl && (r = e.data.owningSystemUrl), r;\n        } catch (s) {\n          return \"\";\n        }\n      }\n\n      return \"\";\n    })();\n  }\n\n  getDataSourceFeatureSet() {\n    const e = new j({\n      layer: this._layer,\n      spatialReference: this.spatialReference ?? void 0,\n      outFields: this._overrideFields ?? void 0,\n      includeGeometry: !this._removeGeometry,\n      lrucache: this.recentlyUsedQueries ?? void 0,\n      interceptor: this.featureSetQueryInterceptor ?? void 0\n    });\n    return e._useDefinitionExpression = !1, e;\n  }\n\n  get preferredTimeReference() {\n    return void 0 === this._cachedDateMetaData.preferredTimeReference && (this._cachedDateMetaData.preferredTimeReference = this._layer?.preferredTimeReference?.toJSON() ?? null), this._cachedDateMetaData.preferredTimeReference;\n  }\n\n  get dateFieldsTimeReference() {\n    return void 0 === this._cachedDateMetaData.dateFieldsTimeReference && (this._cachedDateMetaData.dateFieldsTimeReference = this._layer?.dateFieldsTimeReference?.toJSON() ?? null), this._cachedDateMetaData.dateFieldsTimeReference;\n  }\n\n  get datesInUnknownTimezone() {\n    return this._layer.datesInUnknownTimezone;\n  }\n\n  get editFieldsInfo() {\n    return void 0 === this._cachedDateMetaData.editFieldsInfo && (this._cachedDateMetaData.editFieldsInfo = this._layer?.editFieldsInfo?.toJSON() ?? null), this._cachedDateMetaData.editFieldsInfo;\n  }\n\n  get timeInfo() {\n    return void 0 === this._cachedDateMetaData.timeInfo && (this._cachedDateMetaData.timeInfo = this._layer?.timeInfo?.toJSON() ?? null), this._cachedDateMetaData.timeInfo;\n  }\n\n}\n\nexport { j as default };","map":{"version":3,"names":["e","t","i","r","s","defaultMaxRecords","a","stableStringify","n","FeatureServiceDatabaseType","l","IdState","o","extractServiceUrl","u","toWhereClause","d","isSingleField","c","decodeStatType","h","createMD5Hash","p","outputTypes","y","id","f","fromJSON","m","_","convertToFeatureSet","g","executeQueryJSON","R","executeQueryPBF","F","S","w","executeForCount","b","executeForIds","D","OptimizedFeatureSetParserContext","I","x","T","FeatureSetError","C","FeatureSetErrorCodes","P","j","constructor","declaredClass","_removeGeometry","_overrideFields","formulaCredential","_pageJustIds","_requestStandardised","_useDefinitionExpression","_cachedDateMetaData","spatialReference","_transparent","_maxProcessing","_layer","layer","_wset","outFields","includeGeometry","_maxQueryRate","end","optimisePagingFeatureQueries","urlQueryPath","parsedUrl","path","convertQueryToLruCacheKey","toJSON","String","loadImpl","loaded","_initialiseFeatureSet","load","geometryType","fields","slice","length","type","push","toLowerCase","name","source","sourceJSON","currentVersion","useStandardizedQueries","_databaseType","StandardisedNoInterval","Standardised","objectIdField","globalIdField","hasM","supportsM","hasZ","supportsZ","typeIdField","types","_isInFeatureSet","InFeatureSet","_refineSetBlock","_candidateIdTransform","_getSet","_ensureLoaded","_getFilteredSet","_runDatabaseProbe","datesInUnknownTimezone","timeReferenceUnknownClient","where","replace","queryObjectIds","_canUsePagination","capabilities","query","supportsPagination","_cacheableFeatureSetSourceKey","url","pbfSupportedForQuery","outStatistics","supportsFormatPBF","supportsQuantizationEditMode","queryPBF","quantizationParameters","mode","data","unquantize","gdbVersion","isVersioned","nativeCapabilities","title","canQueryRelated","databaseType","requestStandardised","executeQuery","recentlyUsedQueries","getFromCache","addToCache","catch","removeFromCache","featureSetQueryInterceptor","preLayerQueryCallback","method","isTable","_getFilteredSetUsingPaging","supportsOrderBy","constructClause","sqlFormat","spatialRelationship","_makeRelationshipEnum","outSpatialReference","orderByFields","split","geometry","relationParameter","_makeRelationshipParam","_checkCancelled","_expandPagedSet","_expandPagedSetFeatureSet","definitionExpression","maxRecordCount","spatialRel","relationParam","resultRecordCount","resultOffset","returnGeometry","returnIdsOnly","internal","set","lastRetrieved","lastPage","fullyResolved","_fieldsIncludingObjectId","join","_clonePageDefinition","groupbypage","useOIDpagination","generatedOid","groupByFieldsForStatistics","_getPhysicalPage","pagesDefinition","num","start","features","attributes","_featureCache","exceededTransferLimit","includes","toUpperCase","_getFeatures","_checkIfNeedToExpandKnownPage","_maxProcessingRate","_lastFetchedIndex","_known","_mode","_featureMap","objectIds","error","RequestFailed","reason","_getDistinctPages","parseTree","column","returnDistinctValues","hasOwnProperty","InvalidStatResponse","Date","calculated","result","_distinctStat","_countstat","_stats","supportsSqlExpression","supportsStatistics","supportsDistinct","isStandardized","_manualStat","statisticType","onStatisticField","outStatisticFieldName","_stat","_canDoAggregates","workingexpr","_getAggregatePagesDataSourceDefinition","field","toStatisticsName","lastMaxId","_getAgregagtePhysicalPage","toString","create","lrucache","interceptor","relationshipMetaData","relationships","serviceUrl","queryAttachments","supportsAttachment","operations","supportsQueryAttachments","returnMetadata","size","attachmentTypes","forEach","exifInfo","convertJsonToArcade","contentType","queryRelatedFeatures","relationshipId","outSR","JSON","stringify","preRequestCallback","queryPayload","responseType","relatedRecordGroups","objectId","relatedRecords","InvalidRequest","getFeatureByObjectId","getIdentityUser","findCredential","userId","getOwningSystemUrl","findServerInfo","owningSystemUrl","indexOf","substring","getDataSourceFeatureSet","preferredTimeReference","dateFieldsTimeReference","editFieldsInfo","timeInfo","default"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerDynamic.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../Graphic.js\";import t from\"../../../request.js\";import i from\"../../Attachment.js\";import r from\"../support/FeatureSet.js\";import s from\"../support/IdSet.js\";import{defaultMaxRecords as a,stableStringify as n,FeatureServiceDatabaseType as l,IdState as o,extractServiceUrl as u}from\"../support/shared.js\";import{toWhereClause as d,isSingleField as c}from\"../support/sqlUtils.js\";import{decodeStatType as h}from\"../support/stats.js\";import{createMD5Hash as p,outputTypes as y}from\"../../../core/MD5.js\";import{id as f}from\"../../../kernel.js\";import{fromJSON as m}from\"../../../geometry/support/jsonUtils.js\";import _ from\"../../../layers/FeatureLayer.js\";import{convertToFeatureSet as g}from\"../../../layers/graphics/featureConversionUtils.js\";import\"../../../core/Error.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../layers/support/source/DataLayerSource.js\";import{executeQueryJSON as R}from\"../../../rest/query/executeQueryJSON.js\";import\"../../../config.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/urlUtils.js\";import\"../../../core/unitUtils.js\";import\"../../../geometry/support/spatialReferenceUtils.js\";import{executeQueryPBF as F}from\"../../../rest/query/operations/query.js\";import S from\"../../../rest/support/FeatureSet.js\";import w from\"../../../rest/support/Query.js\";import\"../../../rest/query/support/AttachmentInfo.js\";import\"../../../rest/support/AttachmentQuery.js\";import{executeForCount as b}from\"../../../rest/query/executeForCount.js\";import\"../../../geometry.js\";import{executeForIds as D}from\"../../../rest/query/executeForIds.js\";import\"../../../rest/support/RelationshipQuery.js\";import\"../../../geometry/support/normalizeUtils.js\";import\"../../../rest/support/TopFeaturesQuery.js\";import{OptimizedFeatureSetParserContext as I}from\"../../../rest/query/operations/pbfOptimizedFeatureSet.js\";import x from\"../../../rest/support/StatisticDefinition.js\";import T from\"../../Dictionary.js\";import{FeatureSetError as C,FeatureSetErrorCodes as P}from\"../support/errorsupport.js\";class j extends r{constructor(e){super(e),this.declaredClass=\"esri.arcade.featureset.sources.FeatureLayerDynamic\",this._removeGeometry=!1,this._overrideFields=null,this.formulaCredential=null,this._pageJustIds=!1,this._requestStandardised=!1,this._useDefinitionExpression=!0,this._cachedDateMetaData={},e.spatialReference&&(this.spatialReference=e.spatialReference),this._transparent=!0,this._maxProcessing=1e3,this._layer=e.layer,this._wset=null,void 0!==e.outFields&&(this._overrideFields=e.outFields),void 0!==e.includeGeometry&&(this._removeGeometry=!1===e.includeGeometry)}_maxQueryRate(){return a}end(){return this._layer}optimisePagingFeatureQueries(e){this._pageJustIds=e}get urlQueryPath(){return this._layer.parsedUrl.path||\"\"}convertQueryToLruCacheKey(e){const t=this.urlQueryPath+\",\"+n(e.toJSON());return p(t,y.String)}async loadImpl(){return!0===this._layer.loaded?(this._initialiseFeatureSet(),this):(await this._layer.load(),this._initialiseFeatureSet(),this)}_initialiseFeatureSet(){if(null==this.spatialReference&&(this.spatialReference=this._layer.spatialReference),this.geometryType=this._layer.geometryType,this.fields=this._layer.fields.slice(0),this._layer.outFields)if(1===this._layer.outFields.length&&\"*\"===this._layer.outFields[0]);else{const e=[];for(const t of this.fields)if(\"oid\"===t.type)e.push(t);else for(const i of this._layer.outFields)if(i.toLowerCase()===t.name.toLowerCase()){e.push(t);break}this.fields=e}else;if(null!==this._overrideFields)if(1===this._overrideFields.length&&\"*\"===this._overrideFields[0])this._overrideFields=null;else{const e=[],t=[];for(const i of this.fields)if(\"oid\"===i.type)e.push(i),t.push(i.name);else for(const r of this._overrideFields)if(r.toLowerCase()===i.name.toLowerCase()){e.push(i),t.push(i.name);break}this.fields=e,this._overrideFields=t}if(this._layer.source&&this._layer.source.sourceJSON){const e=this._layer.source.sourceJSON.currentVersion;!0===this._layer.source.sourceJSON.useStandardizedQueries?(this._databaseType=l.StandardisedNoInterval,null!=e&&e>=10.61&&(this._databaseType=l.Standardised)):null!=e&&(e>=10.5&&(this._databaseType=l.StandardisedNoInterval,this._requestStandardised=!0),e>=10.61&&(this._databaseType=l.Standardised))}this.objectIdField=this._layer.objectIdField;for(const e of this.fields)\"global-id\"===e.type&&(this.globalIdField=e.name);this.hasM=this._layer.supportsM,this.hasZ=this._layer.supportsZ,this.typeIdField=this._layer.typeIdField??\"\",this.types=this._layer.types}_isInFeatureSet(){return o.InFeatureSet}async _refineSetBlock(e){return e}_candidateIdTransform(e){return e}async _getSet(e){if(null===this._wset){await this._ensureLoaded();const t=await this._getFilteredSet(\"\",null,null,null,e);return this._wset=t,t}return this._wset}async _runDatabaseProbe(e){await this._ensureLoaded();const t=new w;this.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t.where=e.replace(\"OBJECTID\",this._layer.objectIdField);try{return await this._layer.queryObjectIds(t),!0}catch(i){return!1}}_canUsePagination(){return!(!this._layer.capabilities||!this._layer.capabilities.query||!0!==this._layer.capabilities.query.supportsPagination)}_cacheableFeatureSetSourceKey(){return this._layer.url}pbfSupportedForQuery(e){const t=this._layer?.capabilities?.query;return!e.outStatistics&&!0===t?.supportsFormatPBF&&!0===t?.supportsQuantizationEditMode}async queryPBF(e){e.quantizationParameters={mode:\"edit\"};const t=await F(this._layer.parsedUrl,e,new I({}));return S.fromJSON(g(t.data)).unquantize()}get gdbVersion(){return this._layer&&this._layer.capabilities&&this._layer.capabilities.data&&this._layer.capabilities.data.isVersioned?this._layer.gdbVersion?this._layer.gdbVersion:\"SDE.DEFAULT\":\"\"}nativeCapabilities(){return{title:this._layer.title??\"\",source:this,canQueryRelated:!0,capabilities:this._layer.capabilities,databaseType:this._databaseType,requestStandardised:this._requestStandardised}}executeQuery(e,t){const i=\"execute\"===t?R:\"executeForCount\"===t?b:D,r=\"execute\"===t&&this.pbfSupportedForQuery(e);let s=null;if(this.recentlyUsedQueries){const t=this.convertQueryToLruCacheKey(e);s=this.recentlyUsedQueries.getFromCache(t),null===s&&(s=!0!==r?i(this._layer.parsedUrl.path,e):this.queryPBF(e),this.recentlyUsedQueries.addToCache(t,s),s=s.catch((e=>{throw this.recentlyUsedQueries?.removeFromCache(t),e})))}return this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:e,method:t}),null===s&&(s=!0!==r?i(this._layer.parsedUrl.path,e):this.queryPBF(e)),s}async _getFilteredSet(e,t,i,r,a){const n=await this.databaseType();if(this.isTable()&&t&&null!==e&&\"\"!==e){return new s([],[],!0,null)}if(this._canUsePagination())return this._getFilteredSetUsingPaging(e,t,i,r,a);let l=\"\",o=!1;null!==r&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(l=r.constructClause(),o=!0);const u=new w;this.datesInUnknownTimezone&&(u.timeReferenceUnknownClient=!0),u.where=null===i?null===t?\"1=1\":\"\":d(i,n),this._requestStandardised&&(u.sqlFormat=\"standard\"),u.spatialRelationship=this._makeRelationshipEnum(e),u.outSpatialReference=this.spatialReference,u.orderByFields=\"\"!==l?l.split(\",\"):null,u.geometry=null===t?null:t,u.relationParameter=this._makeRelationshipParam(e);let c=await this.executeQuery(u,\"executeForIds\");null===c&&(c=[]),this._checkCancelled(a);return new s([],c,o,null)}_expandPagedSet(e,t,i,r,s){return this._expandPagedSetFeatureSet(e,t,i,r,s)}async _getFilteredSetUsingPaging(e,t,i,r,a){let n=\"\",l=!1;null!==r&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(n=r.constructClause(),l=!0);const o=await this.databaseType();let u=null===i?null===t?\"1=1\":\"\":d(i,o);this._layer.definitionExpression&&this._useDefinitionExpression&&(u=\"\"!==u?\"((\"+this._layer.definitionExpression+\") AND (\"+u+\"))\":this._layer.definitionExpression);let c=this._maxQueryRate();const h=this._layer.capabilities?.query.maxRecordCount;null!=h&&h<c&&(c=h);let p=null;if(!0===this._pageJustIds)p=new s([],[\"GETPAGES\"],l,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:this._layer.objectIdField,resultRecordCount:c,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:n,returnGeometry:!1,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}});else{let i=!0;!0===this._removeGeometry&&(i=!1);const r=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]);p=new s([],[\"GETPAGES\"],l,{spatialRel:this._makeRelationshipEnum(e),relationParam:this._makeRelationshipParam(e),outFields:r.join(\",\"),resultRecordCount:c,resultOffset:0,geometry:null===t?null:t,where:u,orderByFields:n,returnGeometry:i,returnIdsOnly:\"false\",internal:{set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}return await this._expandPagedSet(p,c,0,1,a),p}_clonePageDefinition(e){return null===e?null:!0!==e.groupbypage?{groupbypage:!1,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,resultOffset:e.resultOffset,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}:{groupbypage:!0,spatialRel:e.spatialRel,relationParam:e.relationParam,outFields:e.outFields,resultRecordCount:e.resultRecordCount,useOIDpagination:e.useOIDpagination,generatedOid:e.generatedOid,groupByFieldsForStatistics:e.groupByFieldsForStatistics,resultOffset:e.resultOffset,outStatistics:e.outStatistics,geometry:e.geometry,where:e.where,orderByFields:e.orderByFields,returnGeometry:e.returnGeometry,returnIdsOnly:e.returnIdsOnly,internal:e.internal}}async _getPhysicalPage(e,t,i){const r=e.pagesDefinition.internal.lastRetrieved,s=r,a=e.pagesDefinition.internal.lastPage,n=new w;this._requestStandardised&&(n.sqlFormat=\"standard\"),this.datesInUnknownTimezone&&(n.timeReferenceUnknownClient=!0),n.spatialRelationship=e.pagesDefinition.spatialRel,n.relationParameter=e.pagesDefinition.relationParam,n.outFields=e.pagesDefinition.outFields.split(\",\"),n.num=e.pagesDefinition.resultRecordCount,n.start=e.pagesDefinition.internal.lastPage,n.geometry=e.pagesDefinition.geometry,n.where=e.pagesDefinition.where,n.orderByFields=\"\"!==e.pagesDefinition.orderByFields?e.pagesDefinition.orderByFields.split(\",\"):null,n.returnGeometry=e.pagesDefinition.returnGeometry,n.outSpatialReference=this.spatialReference;const l=await this.executeQuery(n,\"execute\");if(this._checkCancelled(i),e.pagesDefinition.internal.lastPage!==a)return\"done\";const o=this._layer.objectIdField;for(let u=0;u<l.features.length;u++)e.pagesDefinition.internal.set[s+u]=l.features[u].attributes[o];if(!1===this._pageJustIds)for(let u=0;u<l.features.length;u++)this._featureCache[l.features[u].attributes[o]]=l.features[u];return(void 0===l.exceededTransferLimit&&l.features.length!==e.pagesDefinition.resultRecordCount||!1===l.exceededTransferLimit)&&(e.pagesDefinition.internal.fullyResolved=!0),e.pagesDefinition.internal.lastRetrieved=r+l.features.length,e.pagesDefinition.internal.lastPage+=e.pagesDefinition.resultRecordCount,\"done\"}_fieldsIncludingObjectId(e){if(null===e)return[this.objectIdField];const t=e.slice(0);if(t.includes(\"*\"))return t;let i=!1;for(const r of t)if(r.toUpperCase()===this.objectIdField.toUpperCase()){i=!0;break}return!1===i&&t.push(this.objectIdField),t}async _getFeatures(e,t,i,r){const s=[];if(-1!==t&&void 0===this._featureCache[t]&&s.push(t),!0===this._checkIfNeedToExpandKnownPage(e,this._maxProcessingRate()))return await this._expandPagedSet(e,this._maxProcessingRate(),0,0,r),this._getFeatures(e,t,i,r);let a=0;for(let u=e._lastFetchedIndex;u<e._known.length;u++){if(e._lastFetchedIndex+=1,a++,void 0===this._featureCache[e._known[u]]){let i=!1;if(null!==this._layer._mode&&void 0!==this._layer._mode){const t=this._layer._mode;if(void 0!==t._featureMap[e._known[u]]){const r=t._featureMap[e._known[u]];null!==r&&(i=!0,this._featureCache[e._known[u]]=r)}}if(!1===i&&(e._known[u]!==t&&s.push(e._known[u]),s.length>=this._maxProcessingRate()-1))break}if(a>=i&&0===s.length)break}if(0===s.length)return\"success\";const n=new w;this._requestStandardised&&(n.sqlFormat=\"standard\"),this.datesInUnknownTimezone&&(n.timeReferenceUnknownClient=!0),n.objectIds=s,n.outFields=null!==this._overrideFields?this._overrideFields:this._fieldsIncludingObjectId(this._layer.outFields?this._layer.outFields:[\"*\"]),n.returnGeometry=!0,!0===this._removeGeometry&&(n.returnGeometry=!1),n.outSpatialReference=this.spatialReference;const l=await this.executeQuery(n,\"execute\");if(this._checkCancelled(r),void 0!==l.error)throw new C(P.RequestFailed,{reason:l.error});const o=this._layer.objectIdField;for(let u=0;u<l.features.length;u++)this._featureCache[l.features[u].attributes[o]]=l.features[u];return\"success\"}async _getDistinctPages(e,t,i,r,s,a,n,l,o){await this._ensureLoaded();const u=await this.databaseType();let c=i.parseTree.column;const h=this._layer.fields??[];for(let d=0;d<h.length;d++)if(h[d].name.toLowerCase()===c.toLowerCase()){c=h[d].name;break}const p=new w;this._requestStandardised&&(p.sqlFormat=\"standard\"),this.datesInUnknownTimezone&&(p.timeReferenceUnknownClient=!0);let y=null===a?null===s?\"1=1\":\"\":d(a,u);this._layer.definitionExpression&&this._useDefinitionExpression&&(y=\"\"!==y?\"((\"+this._layer.definitionExpression+\") AND (\"+y+\"))\":this._layer.definitionExpression),p.where=y,p.spatialRelationship=this._makeRelationshipEnum(r),p.relationParameter=this._makeRelationshipParam(r),p.geometry=null===s?null:s,p.returnDistinctValues=!0,p.returnGeometry=!1,p.outFields=[c];const f=await this.executeQuery(p,\"execute\");if(this._checkCancelled(o),!f.hasOwnProperty(\"features\"))throw new C(P.InvalidStatResponse);let m=!1;for(let d=0;d<h.length;d++)if(h[d].name===c){\"date\"===h[d].type&&(m=!0);break}for(let d=0;d<f.features.length;d++){if(m){const e=f.features[d].attributes[c];null!==e?l.push(new Date(e)):l.push(e)}else l.push(f.features[d].attributes[c]);if(l.length>=n)break}if(0===f.features.length)return l;if(f.features.length===this._layer.capabilities?.query.maxRecordCount&&l.length<n){return{calculated:!0,result:await this._getDistinctPages(e+f.features.length,t,i,r,s,a,n,l,o)}}return l}async _distinctStat(e,t,i,r,s,a,n){return{calculated:!0,result:await this._getDistinctPages(0,e,t,i,r,s,a,[],n)}}isTable(){return this._layer.isTable||null===this._layer.geometryType||\"table\"===this._layer.type||\"\"===this._layer.geometryType||\"esriGeometryNull\"===this._layer.geometryType}async _countstat(e,t,i,r){const s=await this.databaseType(),a=new w;if(this._requestStandardised&&(a.sqlFormat=\"standard\"),this.isTable()&&i&&null!==t&&\"\"!==t)return{calculated:!0,result:0};let n=null===r?null===i?\"1=1\":\"\":d(r,s);this._layer.definitionExpression&&this._useDefinitionExpression&&(n=\"\"!==n?\"((\"+this._layer.definitionExpression+\") AND (\"+n+\"))\":this._layer.definitionExpression),a.where=n,this.datesInUnknownTimezone&&(a.timeReferenceUnknownClient=!0),a.where=n,a.spatialRelationship=this._makeRelationshipEnum(t),a.relationParameter=this._makeRelationshipParam(t),a.geometry=null===i?null:i,a.returnGeometry=!1;return{calculated:!0,result:await this.executeQuery(a,\"executeForCount\")}}async _stats(e,t,i,r,s,a,n){await this._ensureLoaded();const l=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsSqlExpression,o=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsStatistics,u=this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsDistinct;if(\"count\"===e)return u?this._countstat(e,i,r,s):{calculated:!1};if(!1===o||!1===c(t)&&!1===l||!1===t.isStandardized)return\"\"!==i||null!==s?{calculated:!1}:this._manualStat(e,t,a,n);if(\"distinct\"===e)return!1===u?\"\"!==i||null!==s?{calculated:!1}:this._manualStat(e,t,a,n):this._distinctStat(e,t,i,r,s,a,n);const p=await this.databaseType();if(this.isTable()&&r&&null!==i&&\"\"!==i)return{calculated:!0,result:null};const y=new w;this._requestStandardised&&(y.sqlFormat=\"standard\");let f=null===s?null===r?\"1=1\":\"\":d(s,p);this._layer.definitionExpression&&this._useDefinitionExpression&&(f=\"\"!==f?\"((\"+this._layer.definitionExpression+\") AND (\"+f+\"))\":this._layer.definitionExpression),y.where=f,y.spatialRelationship=this._makeRelationshipEnum(i),y.relationParameter=this._makeRelationshipParam(i),y.geometry=null===r?null:r,this.datesInUnknownTimezone&&(y.timeReferenceUnknownClient=!0);const m=new x;m.statisticType=h(e),m.onStatisticField=d(t,p),m.outStatisticFieldName=\"ARCADE_STAT_RESULT\",y.returnGeometry=!1;let _=\"ARCADE_STAT_RESULT\";y.outStatistics=[m];const g=await this.executeQuery(y,\"execute\");if(!g.hasOwnProperty(\"features\")||0===g.features.length)throw new C(P.InvalidStatResponse);let R=!1;const F=g.fields??[];for(let d=0;d<F.length;d++)if(\"ARCADE_STAT_RESULT\"===F[d].name.toUpperCase()){_=F[d].name,\"date\"===F[d].type&&(R=!0);break}if(R){let e=g.features[0].attributes[_];return null!==e&&(e=new Date(g.features[0].attributes[_])),{calculated:!0,result:e}}return{calculated:!0,result:g.features[0].attributes[_]}}_stat(e,t,i,r,s,a,n){return this._stats(e,t,i,r,s,a,n)}async _canDoAggregates(e,t){await this._ensureLoaded();let i=!1;const r=this._layer.capabilities?.query,s=!0===r?.supportsSqlExpression;if(null!=r&&!0===r.supportsStatistics&&!0===r.supportsOrderBy&&(i=!0),i)for(let a=0;a<t.length-1;a++)(!1===t[a].workingexpr?.isStandardized||!1===c(t[a].workingexpr)&&!1===s)&&(i=!1);return!1!==i}_makeRelationshipEnum(e){if(e.includes(\"esriSpatialRelRelation\"))return\"relation\";switch(e){case\"esriSpatialRelRelation\":return\"relation\";case\"esriSpatialRelIntersects\":return\"intersects\";case\"esriSpatialRelContains\":return\"contains\";case\"esriSpatialRelOverlaps\":return\"overlaps\";case\"esriSpatialRelWithin\":return\"within\";case\"esriSpatialRelTouches\":return\"touches\";case\"esriSpatialRelCrosses\":return\"crosses\";case\"esriSpatialRelEnvelopeIntersects\":return\"envelope-intersects\"}return e}_makeRelationshipParam(e){return e.includes(\"esriSpatialRelRelation\")?e.split(\":\")[1]:\"\"}async _getAggregatePagesDataSourceDefinition(e,t,i,r,a,n,l){await this._ensureLoaded();const o=await this.databaseType();let u=\"\",c=!1,h=!1;null!==n&&this._layer.capabilities&&this._layer.capabilities.query&&!0===this._layer.capabilities.query.supportsOrderBy&&(u=n.constructClause(),h=!0),this._layer.capabilities&&this._layer.capabilities.query&&!1===this._layer.capabilities.query.supportsPagination&&(h=!1,c=!0,u=this._layer.objectIdField);const p=[];for(let s=0;s<t.length;s++){const e=new x;e.onStatisticField=null!==t[s].workingexpr?d(t[s].workingexpr,o):\"\",e.outStatisticFieldName=t[s].field,e.statisticType=t[s].toStatisticsName(),p.push(e)}\"\"===u&&(u=e.join(\",\"));let y=this._maxQueryRate();const f=this._layer.capabilities?.query.maxRecordCount;null!=f&&f<y&&(y=f);let m=null===a?null===r?\"1=1\":\"\":d(a,o);this._layer.definitionExpression&&this._useDefinitionExpression&&(m=\"\"!==m?\"((\"+this._layer.definitionExpression+\") AND (\"+m+\"))\":this._layer.definitionExpression);return new s([],[\"GETPAGES\"],h,{groupbypage:!0,spatialRel:this._makeRelationshipEnum(i),relationParam:this._makeRelationshipParam(i),outFields:[\"*\"],useOIDpagination:c,generatedOid:l,resultRecordCount:y,resultOffset:0,groupByFieldsForStatistics:e,outStatistics:p,geometry:null===r?null:r,where:m,orderByFields:u,returnGeometry:!1,returnIdsOnly:!1,internal:{lastMaxId:-1,set:[],lastRetrieved:0,lastPage:0,fullyResolved:!1}})}async _getAgregagtePhysicalPage(t,i,r){let s=t.pagesDefinition.where;!0===t.pagesDefinition.useOIDpagination&&(s=\"\"!==s?\"(\"+s+\") AND (\"+t.pagesDefinition.generatedOid+\">\"+t.pagesDefinition.internal.lastMaxId.toString()+\")\":t.pagesDefinition.generatedOid+\">\"+t.pagesDefinition.internal.lastMaxId.toString());const a=t.pagesDefinition.internal.lastRetrieved,n=a,l=t.pagesDefinition.internal.lastPage,o=new w;if(this._requestStandardised&&(o.sqlFormat=\"standard\"),o.where=s,o.spatialRelationship=t.pagesDefinition.spatialRel,o.relationParameter=t.pagesDefinition.relationParam,o.outFields=t.pagesDefinition.outFields,o.outStatistics=t.pagesDefinition.outStatistics,o.geometry=t.pagesDefinition.geometry,o.groupByFieldsForStatistics=t.pagesDefinition.groupByFieldsForStatistics,o.num=t.pagesDefinition.resultRecordCount,o.start=t.pagesDefinition.internal.lastPage,o.returnGeometry=t.pagesDefinition.returnGeometry,this.datesInUnknownTimezone&&(o.timeReferenceUnknownClient=!0),o.orderByFields=\"\"!==t.pagesDefinition.orderByFields?t.pagesDefinition.orderByFields.split(\",\"):null,this.isTable()&&o.geometry&&o.spatialRelationship)return[];const u=await this.executeQuery(o,\"execute\");if(this._checkCancelled(r),!u.hasOwnProperty(\"features\"))throw new C(P.InvalidStatResponse);const d=[];if(t.pagesDefinition.internal.lastPage!==l)return[];for(let e=0;e<u.features.length;e++)t.pagesDefinition.internal.set[n+e]=u.features[e].attributes[t.pagesDefinition.generatedOid];for(let c=0;c<u.features.length;c++)d.push(new e({attributes:u.features[c].attributes,geometry:null}));return!0===t.pagesDefinition.useOIDpagination?0===u.features.length?t.pagesDefinition.internal.fullyResolved=!0:t.pagesDefinition.internal.lastMaxId=u.features[u.features.length-1].attributes[t.pagesDefinition.generatedOid]:(void 0===u.exceededTransferLimit&&u.features.length!==t.pagesDefinition.resultRecordCount||!1===u.exceededTransferLimit)&&(t.pagesDefinition.internal.fullyResolved=!0),t.pagesDefinition.internal.lastRetrieved=a+u.features.length,t.pagesDefinition.internal.lastPage+=t.pagesDefinition.resultRecordCount,d}static create(e,t,i,r,s){const a=new _({url:e,outFields:null===t?[\"*\"]:t});return new j({layer:a,spatialReference:i,lrucache:r,interceptor:s})}relationshipMetaData(){return this._layer&&this._layer.source&&this._layer.source.sourceJSON&&this._layer.source.sourceJSON.relationships?this._layer.source.sourceJSON.relationships:[]}serviceUrl(){return u(this._layer.parsedUrl.path)}async queryAttachments(e,t,r,s,a){const n=this._layer.capabilities;if(n?.data.supportsAttachment&&n?.operations.supportsQueryAttachments){const n={objectIds:[e],returnMetadata:a};(t&&t>0||r&&r>0)&&(n.size=[t&&t>0?t:0,r&&r>0?r:t+1]),s&&s.length>0&&(n.attachmentTypes=s),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:n,method:\"attachments\"});const l=await this._layer.queryAttachments(n),o=[];return l&&l[e]&&l[e].forEach((t=>{const r=this._layer.parsedUrl.path+\"/\"+e.toString()+\"/attachments/\"+t.id.toString();let s=null;a&&t.exifInfo&&(s=T.convertJsonToArcade(t.exifInfo,\"system\",!0)),o.push(new i(t.id,t.name,t.contentType,t.size,r,s))})),o}return[]}async queryRelatedFeatures(i){const r={f:\"json\",relationshipId:i.relationshipId.toString(),definitionExpression:i.where,outFields:i.outFields?.join(\",\"),returnGeometry:i.returnGeometry.toString()};void 0!==i.resultOffset&&null!==i.resultOffset&&(r.resultOffset=i.resultOffset.toString()),void 0!==i.resultRecordCount&&null!==i.resultRecordCount&&(r.resultRecordCount=i.resultRecordCount.toString()),i.orderByFields&&(r.orderByFields=i.orderByFields.join(\",\")),i.objectIds&&i.objectIds.length>0&&(r.objectIds=i.objectIds.join(\",\")),i.outSpatialReference&&(r.outSR=JSON.stringify(i.outSpatialReference.toJSON())),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preRequestCallback({layer:this._layer,queryPayload:r,method:\"relatedrecords\",url:this._layer.parsedUrl.path+\"/queryRelatedRecords\"});const s=await t(this._layer.parsedUrl.path+\"/queryRelatedRecords\",{responseType:\"json\",query:r});if(s.data){const t={},i=s.data;if(i&&i.relatedRecordGroups){const r=i.spatialReference;for(const s of i.relatedRecordGroups){const a=s.objectId,n=[];for(const t of s.relatedRecords){t.geometry&&(t.geometry.spatialReference=r);const i=new e({geometry:t.geometry?m(t.geometry):null,attributes:t.attributes});n.push(i)}t[a]={features:n,exceededTransferLimit:!0===i.exceededTransferLimit}}}return t}throw new C(P.InvalidRequest)}async getFeatureByObjectId(e,t){const i=new w;i.outFields=t,i.returnGeometry=!1,i.outSpatialReference=this.spatialReference,i.where=this.objectIdField+\"=\"+e.toString(),this.datesInUnknownTimezone&&(i.timeReferenceUnknownClient=!0),this.featureSetQueryInterceptor&&this.featureSetQueryInterceptor.preLayerQueryCallback({layer:this._layer,query:i,method:\"execute\"});const r=await R(this._layer.parsedUrl.path,i);return 1===r.features.length?r.features[0]:null}async getIdentityUser(){await this.load();const e=f?.findCredential(this._layer.url);return e?e.userId:null}async getOwningSystemUrl(){await this.load();const e=f?.findServerInfo(this._layer.url);if(e)return e.owningSystemUrl;let i=this._layer.url;const r=i.toLowerCase().indexOf(\"/rest/services\");if(i=r>-1?i.substring(0,r):i,i){i+=\"/rest/info\";try{const e=await t(i,{query:{f:\"json\"}});let r=\"\";return e.data&&e.data.owningSystemUrl&&(r=e.data.owningSystemUrl),r}catch(s){return\"\"}}return\"\"}getDataSourceFeatureSet(){const e=new j({layer:this._layer,spatialReference:this.spatialReference??void 0,outFields:this._overrideFields??void 0,includeGeometry:!this._removeGeometry,lrucache:this.recentlyUsedQueries??void 0,interceptor:this.featureSetQueryInterceptor??void 0});return e._useDefinitionExpression=!1,e}get preferredTimeReference(){return void 0===this._cachedDateMetaData.preferredTimeReference&&(this._cachedDateMetaData.preferredTimeReference=this._layer?.preferredTimeReference?.toJSON()??null),this._cachedDateMetaData.preferredTimeReference}get dateFieldsTimeReference(){return void 0===this._cachedDateMetaData.dateFieldsTimeReference&&(this._cachedDateMetaData.dateFieldsTimeReference=this._layer?.dateFieldsTimeReference?.toJSON()??null),this._cachedDateMetaData.dateFieldsTimeReference}get datesInUnknownTimezone(){return this._layer.datesInUnknownTimezone}get editFieldsInfo(){return void 0===this._cachedDateMetaData.editFieldsInfo&&(this._cachedDateMetaData.editFieldsInfo=this._layer?.editFieldsInfo?.toJSON()??null),this._cachedDateMetaData.editFieldsInfo}get timeInfo(){return void 0===this._cachedDateMetaData.timeInfo&&(this._cachedDateMetaData.timeInfo=this._layer?.timeInfo?.toJSON()??null),this._cachedDateMetaData.timeInfo}}export{j as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}