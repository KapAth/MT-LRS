{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport { result as r } from \"../../core/asyncUtils.js\";\nimport e from \"../../core/Error.js\";\nimport { isSome as o } from \"../../core/maybe.js\";\nimport { eachAlways as t, throwIfAborted as s } from \"../../core/promiseUtils.js\";\nimport { generateUUID as c } from \"../../core/uuid.js\";\nimport { getSiblingOfSameTypeI as p } from \"../../portal/support/resourceUtils.js\";\n\nfunction a(_x, _x2, _x3) {\n  return _a.apply(this, arguments);\n}\n\nfunction _a() {\n  _a = _asyncToGenerator(function* (r, o, a) {\n    if (!o || !o.resources) return;\n    const h = o.portalItem === r.portalItem ? new Set(r.paths) : new Set();\n    r.paths.length = 0, r.portalItem = o.portalItem;\n    const i = new Set(o.resources.toKeep.map(r => r.resource.path)),\n          m = new Set(),\n          f = [];\n    i.forEach(e => {\n      h.delete(e), r.paths.push(e);\n    });\n\n    for (const e of o.resources.toUpdate) if (h.delete(e.resource.path), i.has(e.resource.path) || m.has(e.resource.path)) {\n      const {\n        resource: o,\n        content: t,\n        finish: s,\n        error: u\n      } = e,\n            h = p(o, c());\n      r.paths.push(h.path), f.push(n({\n        resource: h,\n        content: t,\n        compress: e.compress,\n        finish: s,\n        error: u\n      }, a));\n    } else r.paths.push(e.resource.path), f.push(u(e, a)), m.add(e.resource.path);\n\n    for (const e of o.resources.toAdd) f.push(n(e, a)), r.paths.push(e.resource.path);\n\n    if (h.forEach(r => {\n      if (o.portalItem) {\n        const e = o.portalItem.resourceFromPath(r);\n        f.push(e.portalItem.removeResource(e).catch(() => {}));\n      }\n    }), 0 === f.length) return;\n    const l = yield t(f);\n    s(a);\n    const d = l.filter(r => \"error\" in r).map(r => r.error);\n    if (d.length > 0) throw new e(\"save:resources\", \"Failed to save one or more resources\", {\n      errors: d\n    });\n  });\n  return _a.apply(this, arguments);\n}\n\nfunction n(_x4, _x5) {\n  return _n.apply(this, arguments);\n}\n\nfunction _n() {\n  _n = _asyncToGenerator(function* (e, t) {\n    const s = { ...(o(t) ? t : {}),\n      compress: e.compress\n    },\n          c = yield r(e.resource.portalItem.addResource(e.resource, e.content, s));\n    if (!0 !== c.ok) throw e.error?.(c.error), c.error;\n    e.finish?.(e.resource);\n  });\n  return _n.apply(this, arguments);\n}\n\nfunction u(_x6, _x7) {\n  return _u.apply(this, arguments);\n}\n\nfunction _u() {\n  _u = _asyncToGenerator(function* (e, o) {\n    const t = yield r(e.resource.update(e.content, o));\n    if (!0 !== t.ok) throw e.error?.(t.error), t.error;\n    e.finish?.(e.resource);\n  });\n  return _u.apply(this, arguments);\n}\n\nexport { a as saveResources };","map":{"version":3,"names":["result","r","e","isSome","o","eachAlways","t","throwIfAborted","s","generateUUID","c","getSiblingOfSameTypeI","p","a","resources","h","portalItem","Set","paths","length","i","toKeep","map","resource","path","m","f","forEach","delete","push","toUpdate","has","content","finish","error","u","n","compress","add","toAdd","resourceFromPath","removeResource","catch","l","d","filter","errors","addResource","ok","update","saveResources"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/webdoc/support/saveUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{result as r}from\"../../core/asyncUtils.js\";import e from\"../../core/Error.js\";import{isSome as o}from\"../../core/maybe.js\";import{eachAlways as t,throwIfAborted as s}from\"../../core/promiseUtils.js\";import{generateUUID as c}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as p}from\"../../portal/support/resourceUtils.js\";async function a(r,o,a){if(!o||!o.resources)return;const h=o.portalItem===r.portalItem?new Set(r.paths):new Set;r.paths.length=0,r.portalItem=o.portalItem;const i=new Set(o.resources.toKeep.map((r=>r.resource.path))),m=new Set,f=[];i.forEach((e=>{h.delete(e),r.paths.push(e)}));for(const e of o.resources.toUpdate)if(h.delete(e.resource.path),i.has(e.resource.path)||m.has(e.resource.path)){const{resource:o,content:t,finish:s,error:u}=e,h=p(o,c());r.paths.push(h.path),f.push(n({resource:h,content:t,compress:e.compress,finish:s,error:u},a))}else r.paths.push(e.resource.path),f.push(u(e,a)),m.add(e.resource.path);for(const e of o.resources.toAdd)f.push(n(e,a)),r.paths.push(e.resource.path);if(h.forEach((r=>{if(o.portalItem){const e=o.portalItem.resourceFromPath(r);f.push(e.portalItem.removeResource(e).catch((()=>{})))}})),0===f.length)return;const l=await t(f);s(a);const d=l.filter((r=>\"error\"in r)).map((r=>r.error));if(d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d})}async function n(e,t){const s={...o(t)?t:{},compress:e.compress},c=await r(e.resource.portalItem.addResource(e.resource,e.content,s));if(!0!==c.ok)throw e.error?.(c.error),c.error;e.finish?.(e.resource)}async function u(e,o){const t=await r(e.resource.update(e.content,o));if(!0!==t.ok)throw e.error?.(t.error),t.error;e.finish?.(e.resource)}export{a as saveResources};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}