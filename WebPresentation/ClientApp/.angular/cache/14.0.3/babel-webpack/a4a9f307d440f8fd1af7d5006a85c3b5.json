{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from \"../../Graphic.js\";\nimport { isSome as e } from \"../../core/maybe.js\";\nimport r from \"../../geometry/Extent.js\";\nimport n from \"../../geometry/Mesh.js\";\nimport o from \"../../geometry/Point.js\";\nimport s from \"../../geometry/SpatialReference.js\";\nimport { fromAxisAndAngle as a } from \"../../geometry/support/axisAngleDegrees.js\";\nimport i from \"../../geometry/support/MeshTransform.js\";\nimport c from \"./FeatureSet.js\";\n\nfunction u(r, n, o) {\n  const a = o.features;\n  o.features = [], delete o.geometryType;\n  const i = c.fromJSON(o);\n  if (i.geometryType = \"mesh\", !o.assetMaps) return i;\n  const u = E(n, o.assetMaps),\n        m = i.spatialReference ?? s.WGS84,\n        p = o.globalIdFieldName,\n        {\n    outFields: g\n  } = r,\n        D = e(g) && g.length > 0 ? l(g.includes(\"*\") ? null : new Set(g)) : () => ({});\n\n  for (const s of a) {\n    const r = f(s, p, m, n, u);\n    e(r) && i.features.push(new t({\n      geometry: r,\n      attributes: D(s)\n    }));\n  }\n\n  return i;\n}\n\nfunction l(t) {\n  return ({\n    attributes: e\n  }) => {\n    if (!e) return {};\n    if (!t) return e;\n\n    for (const r in e) t.has(r) || delete e[r];\n\n    return e;\n  };\n}\n\nfunction f(t, e, o, s, a) {\n  const i = t.attributes[e],\n        c = a.get(i);\n  if (null == c || c.status === g.FAILED || null == c.url) return null;\n  const u = m(t, o, s),\n        l = r.fromJSON(t.geometry);\n  l.spatialReference = o;\n  const f = p(t.attributes, s, c.projectVertices);\n  return c.status === g.PENDING ? n.createIncomplete(u, {\n    extent: l,\n    transform: f\n  }) : n.createWithExternalSource(u, [{\n    name: c.name,\n    source: c.url\n  }], {\n    extent: l,\n    transform: f\n  });\n}\n\nfunction m({\n  attributes: t\n}, e, {\n  transformFieldRoles: r\n}) {\n  return new o({\n    x: t[r.originX],\n    y: t[r.originY],\n    z: t[r.originZ],\n    spatialReference: e\n  });\n}\n\nfunction p(t, {\n  transformFieldRoles: e\n}, r) {\n  return new i({\n    translation: [t[e.translationX], -t[e.translationZ], t[e.translationY]],\n    rotation: a([t[e.rotationX], t[e.rotationZ], t[e.rotationY]], t[e.rotationDeg]),\n    scale: [t[e.scaleX], t[e.scaleY], t[e.scaleZ]],\n    geographic: r\n  });\n}\n\nvar g;\n\nfunction E(t, e) {\n  const r = new Map();\n\n  for (const n of e) {\n    const t = n.parentGlobalId;\n    if (null == t) continue;\n    const e = n.assetName,\n          o = n.assetURL,\n          s = n.conversionStatus;\n    let a = r.get(t);\n    if (null == a) switch (a = {\n      name: e,\n      status: g.FAILED,\n      url: o,\n      projectVertices: D(n.flags).projectVertices\n    }, r.set(t, a), s) {\n      case \"COMPLETED\":\n      case \"SUBMITTED\":\n        a.status = g.COMPLETED;\n        break;\n\n      case \"INPROGRESS\":\n        a.status = g.PENDING;\n        break;\n\n      default:\n        a.status = g.FAILED;\n    } else console.warn(`Multiple asset parts not expected. Ignoring additional parts. conflicting assetname: ${n.assetName}`);\n  }\n\n  return r;\n}\n\nfunction D(t) {\n  return {\n    projectVertices: t.includes(\"PROJECT_VERTICES\")\n  };\n}\n\n!function (t) {\n  t[t.FAILED = 0] = \"FAILED\", t[t.PENDING = 1] = \"PENDING\", t[t.COMPLETED = 2] = \"COMPLETED\";\n}(g || (g = {}));\nexport { u as meshFeatureSetFromJSON };","map":{"version":3,"names":["t","isSome","e","r","n","o","s","fromAxisAndAngle","a","i","c","u","features","geometryType","fromJSON","assetMaps","E","m","spatialReference","WGS84","p","globalIdFieldName","outFields","g","D","length","l","includes","Set","f","push","geometry","attributes","has","get","status","FAILED","url","projectVertices","PENDING","createIncomplete","extent","transform","createWithExternalSource","name","source","transformFieldRoles","x","originX","y","originY","z","originZ","translation","translationX","translationZ","translationY","rotation","rotationX","rotationZ","rotationY","rotationDeg","scale","scaleX","scaleY","scaleZ","geographic","Map","parentGlobalId","assetName","assetURL","conversionStatus","flags","set","COMPLETED","console","warn","meshFeatureSetFromJSON"],"sources":["C:/Users/akaps/Documents/Visual Studio 2022/Projects/MT_LRS/WebPresentation/node_modules/@arcgis/core/rest/support/meshFeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from\"../../Graphic.js\";import{isSome as e}from\"../../core/maybe.js\";import r from\"../../geometry/Extent.js\";import n from\"../../geometry/Mesh.js\";import o from\"../../geometry/Point.js\";import s from\"../../geometry/SpatialReference.js\";import{fromAxisAndAngle as a}from\"../../geometry/support/axisAngleDegrees.js\";import i from\"../../geometry/support/MeshTransform.js\";import c from\"./FeatureSet.js\";function u(r,n,o){const a=o.features;o.features=[],delete o.geometryType;const i=c.fromJSON(o);if(i.geometryType=\"mesh\",!o.assetMaps)return i;const u=E(n,o.assetMaps),m=i.spatialReference??s.WGS84,p=o.globalIdFieldName,{outFields:g}=r,D=e(g)&&g.length>0?l(g.includes(\"*\")?null:new Set(g)):()=>({});for(const s of a){const r=f(s,p,m,n,u);e(r)&&i.features.push(new t({geometry:r,attributes:D(s)}))}return i}function l(t){return({attributes:e})=>{if(!e)return{};if(!t)return e;for(const r in e)t.has(r)||delete e[r];return e}}function f(t,e,o,s,a){const i=t.attributes[e],c=a.get(i);if(null==c||c.status===g.FAILED||null==c.url)return null;const u=m(t,o,s),l=r.fromJSON(t.geometry);l.spatialReference=o;const f=p(t.attributes,s,c.projectVertices);return c.status===g.PENDING?n.createIncomplete(u,{extent:l,transform:f}):n.createWithExternalSource(u,[{name:c.name,source:c.url}],{extent:l,transform:f})}function m({attributes:t},e,{transformFieldRoles:r}){return new o({x:t[r.originX],y:t[r.originY],z:t[r.originZ],spatialReference:e})}function p(t,{transformFieldRoles:e},r){return new i({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotation:a([t[e.rotationX],t[e.rotationZ],t[e.rotationY]],t[e.rotationDeg]),scale:[t[e.scaleX],t[e.scaleY],t[e.scaleZ]],geographic:r})}var g;function E(t,e){const r=new Map;for(const n of e){const t=n.parentGlobalId;if(null==t)continue;const e=n.assetName,o=n.assetURL,s=n.conversionStatus;let a=r.get(t);if(null==a)switch(a={name:e,status:g.FAILED,url:o,projectVertices:D(n.flags).projectVertices},r.set(t,a),s){case\"COMPLETED\":case\"SUBMITTED\":a.status=g.COMPLETED;break;case\"INPROGRESS\":a.status=g.PENDING;break;default:a.status=g.FAILED}else console.warn(`Multiple asset parts not expected. Ignoring additional parts. conflicting assetname: ${n.assetName}`)}return r}function D(t){return{projectVertices:t.includes(\"PROJECT_VERTICES\")}}!function(t){t[t.FAILED=0]=\"FAILED\",t[t.PENDING=1]=\"PENDING\",t[t.COMPLETED=2]=\"COMPLETED\"}(g||(g={}));export{u as meshFeatureSetFromJSON};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}